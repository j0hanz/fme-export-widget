/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-arcgis","jimu-ui","jimu-ui/basic/color-picker","jimu-ui/basic/date-picker","jimu-theme","jimu-core/react"],(function(e,t){var r={},n={},i={},o={},s={},a={},l={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(l,"__esModule",{value:!0}),{setters:[function(e){r.React=e.React,r.ReactDOM=e.ReactDOM,r.ReactRedux=e.ReactRedux,r.SessionManager=e.SessionManager,r.WidgetState=e.WidgetState,r.appActions=e.appActions,r.css=e.css,r.getAppStore=e.getAppStore,r.hooks=e.hooks,r.jsx=e.jsx},function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){i.AdvancedButtonGroup=e.AdvancedButtonGroup,i.Alert=e.Alert,i.Button=e.Button,i.Checkbox=e.Checkbox,i.FormGroup=e.FormGroup,i.Label=e.Label,i.Loading=e.Loading,i.LoadingType=e.LoadingType,i.MultiSelect=e.MultiSelect,i.NumericInput=e.NumericInput,i.Option=e.Option,i.Radio=e.Radio,i.RichDisplayer=e.RichDisplayer,i.SVG=e.SVG,i.Select=e.Select,i.Slider=e.Slider,i.Switch=e.Switch,i.Table=e.Table,i.TagInput=e.TagInput,i.TextArea=e.TextArea,i.TextInput=e.TextInput,i.Tooltip=e.Tooltip,i.UrlInput=e.UrlInput},function(e){o.ColorPicker=e.ColorPicker},function(e){s.DatePicker=e.DatePicker},function(e){Object.keys(e).forEach((function(t){a[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){l[t]=e[t]}))}],execute:function(){e((()=>{var e={71:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.3 15.6A7.3 7.3 0 1 0 8.3 1a7.3 7.3 0 0 0 0 14.6M8.3 2A6.3 6.3 0 1 1 2 8.3 6.307 6.307 0 0 1 8.3 2m3.5 6.8h-4v-5h1v4h3z" clip-rule="evenodd"></path></svg>'},657:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m4-3a4 4 0 0 1-4 4 6.5 6.5 0 0 0-6.5 6.5h-1a7.5 7.5 0 0 1 5.286-7.168A4 4 0 1 1 12 5m1 5.5v1h-2v-1a1 1 0 1 1 2 0m-3 0v1H9v4h6v-4h-1v-1a2 2 0 1 0-4 0m0 2v2h4v-2z" clip-rule="evenodd"></path></svg>'},787:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.002 1H14A1 1 0 0 1 15 2.002v11.997A1 1 0 0 1 14 15H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1.002-1M2 14h12V2H2z" clip-rule="evenodd"></path></svg>'},884:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14 2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3.986l.001-.024L0 4a2 2 0 0 1 2-2zm1 2.934L8.277 9.416a.5.5 0 0 1-.554 0L1 4.935V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM14 3H2a1 1 0 0 0-.97.752L8 8.398l6.97-4.646A1 1 0 0 0 14 3"></path></svg>'},1020:(e,t,r)=>{"use strict";var n=r(8972),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,o={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.jsx=u},1337:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 0a4 4 0 0 1 4 4v3a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2V4a4 4 0 0 1 4-4M5 7h1V4a2 2 0 1 1 4 0v3h1V4a3 3 0 0 0-6 0zm4 0V4a1 1 0 0 0-2 0v3zm3 1H4a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1M7 9h1v1h1v1H8v1h1v1H8v1H7z" clip-rule="evenodd"></path></svg>'},1692:(e,t,r)=>{"use strict";r.d(t,{k:()=>o});var n=r(2775),i=r(4880),o=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,i.gn)(this.gcTime)&&(this.#e=n.zs.setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(i.S$?1/0:3e5))}clearGcTimeout(){this.#e&&(n.zs.clearTimeout(this.#e),this.#e=void 0)}}},1888:e=>{"use strict";e.exports=a},1920:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},2238:(e,t,r)=>{"use strict";r.d(t,{ER:()=>J});var n=r(9778),i=r(3890),o=r(3271),s=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const a=Object.assign({},{enabled:!0,logLevel:"debug",bodyPreviewLimit:1024,warnSlowMs:1e3});function l(e){return s(this,void 0,void 0,(function*(){var t,r,n,s,l,d,h;if(!a.enabled)return e.execute();const p=e.method.toUpperCase(),v=e.correlationId||u(),g=Date.now();try{const i=yield e.execute(),o=Date.now()-g,a=Number.isFinite(o)&&o>=0?o:0,u=null===(r=null===(t=e.responseInterpreter)||void 0===t?void 0:t.status)||void 0===r?void 0:r.call(t,i),y=null!==(l=null===(s=null===(n=e.responseInterpreter)||void 0===n?void 0:n.ok)||void 0===s?void 0:s.call(n,i))&&void 0!==l?l:function(e){return"number"!=typeof e?void 0:e>=200&&e<400}(u),b=null===(h=null===(d=e.responseInterpreter)||void 0===d?void 0:d.size)||void 0===h?void 0:h.call(d,i);return m("success",{timestamp:g,method:p,url:c(e.url,e.query),path:f(e.url),status:u,ok:y,durationMs:a,correlationId:v,caller:e.caller,transport:e.transport,retryAttempt:e.retryAttempt,responseSize:b,isAbort:!1},e.body),i}catch(t){const r=Date.now()-g,n=Number.isFinite(r)&&r>=0?r:0,s=(0,i.Ko)(t),a=(0,o.zf)(t);throw m("error",{timestamp:g,method:p,url:c(e.url,e.query),path:f(e.url),status:s,ok:!1,durationMs:n,correlationId:v,caller:e.caller,transport:e.transport,retryAttempt:e.retryAttempt,isAbort:a},e.body,t),t instanceof Error?t:new Error((0,o.PE)(t))}}))}function u(e="net"){const t=Date.now().toString(36);let r=Math.random().toString(36).slice(2,10);for(;r.length<8;)r+=Math.random().toString(36).slice(2);return`${e}_${t}_${r.slice(0,8)}`}function c(e,t){const r=d(e),n=function(e,t){const r=new URLSearchParams((null==e?void 0:e.search)||"");if(!t)return r;if("string"==typeof t){return new URLSearchParams(t).forEach(((e,t)=>{r.set(t,e)})),r}if(t instanceof URLSearchParams)return t.forEach(((e,t)=>{r.set(t,e)})),r;return Object.entries(t).forEach((([e,t])=>{if(null!=t)if(Array.isArray(t))r.delete(e),t.forEach((t=>{r.append(e,String(t))}));else{const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?String(t):JSON.stringify(t);r.set(e,n)}})),r}(r,t),i=function(e){const t=new URLSearchParams;return e.forEach(((e,r)=>{!function(e){return e.includes("token")||e.includes("auth")||e.includes("secret")||e.includes("key")||e.includes("password")}(r.toLowerCase())?t.set(r,h(e)):t.set(r,"[TOKEN]")})),t}(n),o=function(e){const t=[];return e.forEach(((e,r)=>t.push([r,e]))),t.sort((([e],[t])=>e>t?1:e<t?-1:0)),t.map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&")}(i);if(!r){const t=h(e.split("?")[0]||"");return o?`${t}?${o}`:t}const s=`${r.origin}${r.pathname}`;return o?`${s}?${o}`:s}function d(e){if(!e)return null;try{const t=(0,o.yC)(e);return t||new URL(e,"http://localhost")}catch(e){return null}}function f(e){const t=d(e);return(null==t?void 0:t.pathname)||e.split("?")[0]||e}function h(e){let t=e;return t=t.replace(/authorization="?[^"]+"?/gi,'authorization="[TOKEN]"'),t=t.replace(/(token|fmetoken)=([^&\s]+)/gi,"$1=[TOKEN]"),t}function p(e,t){return e.length<=t?e:`${e.slice(0,t-1)}\u2026`}function m(e,t,r,n){if("silent"===a.logLevel)return;const i=r?function(e){var t;if(null==e)return"";if("string"==typeof e)return p(h(e),a.bodyPreviewLimit);if("object"==typeof e){if("undefined"!=typeof FormData&&e instanceof FormData)return"[FormData]";if("undefined"!=typeof Blob&&e instanceof Blob)return`[Blob:${e.size}]`;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return`[Binary:${e instanceof ArrayBuffer?e.byteLength:(null===(t=e.buffer)||void 0===t?void 0:t.byteLength)||0}]`}try{return p(h(JSON.stringify(e)),a.bodyPreviewLimit)}catch(e){return"[Object]"}}(r):void 0,s=n?(0,o.PE)(n):void 0;try{if("debug"===a.logLevel){const r="success"===e?"\u2713":"\u2717",n={phase:e,method:t.method,url:t.url,status:t.status,durationMs:t.durationMs,correlationId:t.correlationId,caller:t.caller,transport:t.transport};void 0!==t.responseSize&&(n.responseSize=t.responseSize),void 0!==t.retryAttempt&&(n.retry=t.retryAttempt),t.isAbort&&(n.aborted=!0),i&&(n.body=i),s&&(n.error=s),console.log(`[FME][net] ${r}`,n)}else if("warn"===a.logLevel){const r=`[FME][net] ${e} ${t.method} ${t.path} ${t.status||"?"} ${t.durationMs}ms`;console.log(r,Object.assign({correlationId:t.correlationId},t.caller&&{caller:t.caller}))}t.durationMs>=a.warnSlowMs&&console.log("[FME][net] slow",{method:t.method,path:t.path,durationMs:t.durationMs,correlationId:t.correlationId})}catch(e){}}const v=e=>{if(void 0!==e)return e;if("function"==typeof DOMException)return new DOMException("Aborted","AbortError");const t=new Error("Aborted");return t.name="AbortError",t},g=()=>{};new class{constructor(){this.controllers=new Map,this.listeners=new Map,this.pendingReasons=new Map}register(e,t){if(!e)return;this.controllers.set(e,t);const r=this.pendingReasons.get(e);if(void 0!==r)try{t.signal.aborted||t.abort(r)}catch(e){try{t.abort()}catch(e){}}finally{this.pendingReasons.delete(e)}}release(e,t){if(!e)return;const r=this.controllers.get(e);if(t&&r&&r!==t)return;this.controllers.delete(e),this.pendingReasons.delete(e);const n=this.listeners.get(e);(null==n?void 0:n.size)&&(n.forEach((e=>{try{e.signal.removeEventListener("abort",e.handler)}catch(e){}})),this.listeners.delete(e))}abort(e,t){if(!e)return;const r=this.controllers.get(e);if(!r)return void this.pendingReasons.set(e,null!=t?t:v());const n=null!=t?t:v();try{r.signal.aborted||r.abort(n)}catch(e){try{r.abort()}catch(e){}}finally{this.release(e,r)}}linkExternal(e,t){if(!e||!t)return g;if(t.aborted)return this.abort(e,t.reason),g;const r={signal:t,handler:()=>{const r=t.reason;this.abort(e,r)}};t.addEventListener("abort",r.handler);let n=this.listeners.get(e);return n||(n=new Set,this.listeners.set(e,n)),n.add(r),()=>{try{t.removeEventListener("abort",r.handler)}catch(e){}const n=this.listeners.get(e);n&&(n.delete(r),0===n.size&&this.listeners.delete(e))}}abortAll(e){const t=Array.from(this.controllers.entries());for(const[r,n]of t)this.abort(r,e),this.release(r,n)}};const y=(e,t)=>new n.VQ(e,e,t,(e=>!e||e<100||e>=500||408===e||429===e)(t)),b=e=>{const t=null==e?void 0:e.httpStatus,r=null==e?void 0:e.status;return"number"==typeof t?t:"number"==typeof r?r:void 0},E=e=>{const t=b(e);if("number"==typeof t)return t>=200&&t<400},O=e=>{try{const t=null==e?void 0:e.data;if(!t)return;if("string"==typeof t)return t.length;return JSON.stringify(t).length}catch(e){return}},R=e=>{var t;return null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e};let S,w,T,k,A,I=null;const _=Object.create(null),C={esriRequest:()=>Promise.resolve({data:null}),esriConfig:{request:{maxUrlLength:4e3,interceptors:[]}},projection:{},webMercatorUtils:{},SpatialReference:function(){return{}}},M=e=>C[e];function x(){return s(this,void 0,void 0,(function*(){if(Boolean(S&&w&&T&&k&&A))return;if(I)return I;const e=(()=>s(this,void 0,void 0,(function*(){if((()=>{const e="undefined"!=typeof globalThis?globalThis:void 0;return Boolean(e&&n._$.some((t=>Boolean(null==e?void 0:e[t]))))})()){(e=>{var t;const r={esriRequest:e=>S=e,esriConfig:e=>w=e,projection:e=>T=e,webMercatorUtils:e=>k=e,SpatialReference:e=>A=e};for(const i of n._$){const n=null!==(t=null==e?void 0:e[i])&&void 0!==t?t:M(i);r[i](n)}})(globalThis)}else try{yield s(void 0,void 0,void 0,(function*(){const[e,t,r,n,i]=yield(0,o.ps)(["esri/request","esri/config","esri/geometry/projection","esri/geometry/support/webMercatorUtils","esri/geometry/SpatialReference"]);S=R(e),w=R(t),T=R(r),k=R(n),A=R(i);const s=P(T);(null==s?void 0:s.load)&&(yield s.load())}))}catch(e){throw new Error("ARCGIS_MODULE_ERROR")}})))();I=e;try{yield e}catch(e){throw S=void 0,w=void 0,T=void 0,k=void 0,A=void 0,I=null,W=null,e instanceof Error?e:new Error(String(e))}}))}function L(){return s(this,void 0,void 0,(function*(){return yield x(),D(w)}))}const j=e=>Boolean(e&&"object"==typeof e),N=e=>"function"==typeof e?e:null,D=e=>j(e)&&e.request?e:null,P=e=>j(e)?e:null,U=(e,t,r)=>{const n=new Error(e);return n.code=e,null!=t&&(n.status=t),void 0!==r&&(n.cause=r),n},F=e=>s(void 0,void 0,void 0,(function*(){var t;let r;try{r=yield L()}catch(e){return}!function(e,t){if(null==e?void 0:e.length)for(let r=e.length-1;r>=0;r--){const n=e[r];if(!(null==n?void 0:n._fmeInterceptor))continue;const i=n.urls;(i instanceof RegExp?i.source===t.source&&i.flags===t.flags:t.test("string"==typeof i?i:String(null!=i?i:"")))&&e.splice(r,1)}}(null===(t=null==r?void 0:r.request)||void 0===t?void 0:t.interceptors,e)})),V=(e,t)=>({urls:t,before(t){(null==t?void 0:t.requestOptions)||(t.requestOptions={});const r=t.requestOptions;r.headers=r.headers||{},r.query=r.query||{};const n=(e=>_[e])(e);n&&(r.query.fmetoken||(r.query.fmetoken=n),r.headers.Authorization=`fmetoken token=${n}`)},_fmeInterceptor:!0});function B(e,t){return s(this,void 0,void 0,(function*(){var r;if(!e)return;const n=(0,o.$j)(e);if(!n)return;const i=n.toLowerCase(),s=(0,o.dB)(n);if(!t){const e=(e=>Object.prototype.hasOwnProperty.call(_,e))(i);return(e=>{delete _[e]})(i),void(e&&(yield F(s)))}let a;((e,t)=>{_[e]=t})(i,t);try{a=yield L()}catch(e){throw e instanceof Error?e:new Error(String(e))}(null===(r=null==a?void 0:a.request)||void 0===r?void 0:r.interceptors)&&((0,o.m4)(a.request.interceptors,s)||a.request.interceptors.push(V(i,s)))}))}let W=null;const q=e=>{const t="string"==typeof e?Number(e):e;return Number.isFinite(t)&&t>=0?Math.floor(t):void 0},G=e=>"string"==typeof e?e.trim():"",z=(e,t={})=>{for(const r of n.T5){const n=q(t[r]);void 0!==n&&e.set(r,String(n))}const r=((e,t)=>{const r=G(e);return r?r.slice(0,t):void 0})(t.tm_tag,128);r&&e.set("tm_tag",r)},H=(e,t,r,s={},a)=>{const l=(0,o.c$)(e,"fmedatadownload",t,r),u=(0,i.dC)(l,{strict:!0,requireHttps:!0,disallowRestForWebhook:!0});if(!u.ok){const e=(0,i.$N)("reason"in u?u.reason:void 0);throw U("WEBHOOK_AUTH_ERROR",0,e)}const c=(0,o.XV)(s,[...n.GR],!0);return a&&c.set("token",a),z(c,s),{baseUrl:l,params:c,fullUrl:`${l}?${c.toString()}`}},$=(e,t)=>{const r=(e=>{const t=q(null==e?void 0:e.tm_ttc),r=q(null==e?void 0:e.tm_ttl),n=G(null==e?void 0:e.tm_tag),i={};return void 0!==t&&(i.ttc=t),void 0!==r&&(i.ttl=r),n&&(i.tag=n),i})(t),n=(e=>{if("schedule"!==(null==e?void 0:e.opt_servicemode))return null;const t=G(null==e?void 0:e.start),r=G(null==e?void 0:e.name),n=G(null==e?void 0:e.category),i=G(null==e?void 0:e.trigger)||"runonce",o=G(null==e?void 0:e.description);if(!t||!r||!n)return null;const s={name:"schedule",begin:t,scheduleName:r,scheduleCategory:n,scheduleTrigger:i};return o&&(s.scheduleDescription=o),{directives:[s]}})(t),i={publishedParameters:e};return Object.keys(r).length>0&&(i.TMDirectives=r),n&&(i.NMDirectives=n),i};class K{constructor(e){this.basePath=n.vA.BASE_PATH,this.disposed=!1,this.config=e,this.setupPromise=Promise.resolve(),this.queueSetup(e)}queueSetup(e){this.setupPromise=(this.setupPromise||Promise.resolve()).catch((()=>{})).then((()=>s(this,void 0,void 0,(function*(){yield function(){return s(this,void 0,void 0,(function*(){const e=yield L();e&&(e.request.maxUrlLength=Math.max(Number(e.request.maxUrlLength)||0,n.vA.MAX_URL_LENGTH))}))}(),yield B(e.serverUrl,e.token)})))).catch((e=>{throw e instanceof Error?e:new Error(String(e))}))}queueTeardown(e){this.setupPromise=(this.setupPromise||Promise.resolve()).catch((()=>{})).then((()=>B(e,""))).catch((()=>{}))}dispose(){this.disposed||(this.disposed=!0,this.queueTeardown(this.config.serverUrl))}uploadToTemp(e,t){return s(this,void 0,void 0,(function*(){var r;const i=this.resolveRepository(null==t?void 0:t.repository),s=((null==t?void 0:t.workspace)||"").trim();if(!s)throw y("DATA_UPLOAD_ERROR");const a=null==e?void 0:e.name,l=("string"==typeof a&&a.trim()?a.trim():`upload_${Date.now()}`).replace(/[^A-Za-z0-9._-]/g,"_").slice(0,128)||`upload_${Date.now()}`,c=((null==t?void 0:t.subfolder)?t.subfolder.trim():"").replace(/[^A-Za-z0-9_-]/g,"-").slice(0,64)||u("upload"),d=(0,o.c$)(this.config.serverUrl,"fmedataupload",i,s,l),f={opt_fullpath:"true",opt_responseformat:"json",opt_namespace:c},h={Accept:"application/json","Content-Type":e instanceof File&&e.type?e.type:"application/octet-stream"},p=yield this.request(d,{method:n.ym.PUT,headers:h,body:e,query:f,signal:null==t?void 0:t.signal,cacheHint:!1,repositoryContext:i}),m=null===(r=p.data)||void 0===r?void 0:r.file,v="string"==typeof(null==m?void 0:m.path)&&m.path.trim()?m.path:null;if(!v)throw y("DATA_UPLOAD_ERROR",p.status);return{data:{path:v},status:p.status,statusText:p.statusText}}))}resolveRepository(e){return e||this.config.repository}buildServiceUrl(e,t,r){return(0,o.c$)(this.config.serverUrl,e,t,r)}formatJobParams(e={}){if(e.publishedParameters)return e;const t=Object.entries(e).filter((([e])=>!n.d.has(e))).map((([e,t])=>({name:e,value:t})));return $(t,e)}repoEndpoint(e,...t){return(0,o.c$)(this.config.serverUrl,this.basePath.slice(1),"repositories",e,...t)}transformEndpoint(e,t,r){return(0,o.c$)(this.config.serverUrl,this.basePath.slice(1),"transformations",e,t,r)}withApiError(e,t,r){return s(this,void 0,void 0,(function*(){try{return yield e()}catch(e){const o=(0,i.Ko)(e),s=(0,i.$d)(e);throw new n.VQ(t,r,o||0,s)}}))}testConnection(e){return s(this,void 0,void 0,(function*(){return this.request("/info",{signal:e})}))}validateRepository(e,t){return s(this,void 0,void 0,(function*(){const r=this.resolveRepository(e),n=this.repoEndpoint(r);return this.request(n,{signal:t})}))}getRepositories(e){return s(this,void 0,void 0,(function*(){return this.withApiError((()=>s(this,void 0,void 0,(function*(){const t=(0,o.c$)(this.config.serverUrl,this.basePath.slice(1),"repositories"),r=yield this.request(t,{signal:e,cacheHint:!1,query:{limit:-1,offset:-1}}),n=null==r?void 0:r.data;return{data:(0,o.o4)(n).map((e=>({name:e}))),status:r.status,statusText:r.statusText}}))),"REPOSITORIES_ERROR","REPOSITORIES_ERROR")}))}getWorkspaceParameter(e,t,r,n){return s(this,void 0,void 0,(function*(){const i=this.resolveRepository(r),o=this.repoEndpoint(i,"items",e,"parameters",t);return this.request(o,{signal:n,cacheHint:!1,repositoryContext:i})}))}getWorkspaceParameters(e,t,r){return s(this,void 0,void 0,(function*(){const n=this.resolveRepository(t),i=this.repoEndpoint(n,"items",e,"parameters");return this.withApiError((()=>this.request(i,{signal:r,cacheHint:!1,repositoryContext:n})),"WORKSPACE_PARAMETERS_ERROR","WORKSPACE_PARAMETERS_ERROR")}))}getRepositoryItems(e,t,r,n,i){return s(this,void 0,void 0,(function*(){const o=this.resolveRepository(e),s=this.repoEndpoint(o,"items"),a={};return t&&(a.type=t),"number"==typeof r&&(a.limit=r),"number"==typeof n&&(a.offset=n),this.withApiError((()=>this.request(s,{signal:i,cacheHint:!1,repositoryContext:o,query:a})),"REPOSITORY_ITEMS_ERROR","REPOSITORY_ITEMS_ERROR")}))}getWorkspaceItem(e,t,r){return s(this,void 0,void 0,(function*(){const n=this.resolveRepository(t),i=this.repoEndpoint(n,"items",e);return this.withApiError((()=>this.request(i,{signal:r,cacheHint:!1,repositoryContext:n})),"WORKSPACE_ITEM_ERROR","WORKSPACE_ITEM_ERROR")}))}submitJob(e){return s(this,arguments,void 0,(function*(e,t={},r,i){const o=this.resolveRepository(r),s=this.transformEndpoint("submit",o,e),a=this.formatJobParams(t);return this.withApiError((()=>this.request(s,{method:n.ym.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:i,cacheHint:!1})),"JOB_SUBMISSION_ERROR","JOB_SUBMISSION_ERROR")}))}runDataDownload(e){return s(this,arguments,void 0,(function*(e,t={},r,n){const i=this.resolveRepository(r);return yield this.runDownloadWebhook(e,t,i,n)}))}runWorkspace(e){return s(this,arguments,void 0,(function*(e,t={},r,n){return"schedule"===(null==t?void 0:t.opt_servicemode)?yield this.submitJob(e,t,r,n):yield this.runDataDownload(e,t,r,n)}))}runDownloadWebhook(e){return s(this,arguments,void 0,(function*(e,t={},r,s){try{const{baseUrl:i,params:a,fullUrl:c}=H(this.config.serverUrl,r,e,t,this.config.token),d=(()=>{var e;const t=(()=>{var e,t;if("undefined"==typeof window)return;const r=null===(t=null===(e=null===window||void 0===window?void 0:window.esriConfig)||void 0===e?void 0:e.request)||void 0===t?void 0:t.maxUrlLength,n="number"==typeof r?r:Number(r);return Number.isFinite(n)&&n>0?n:void 0})();if(void 0!==t)return t;if(null!==W)return W;const r=D(w),n=null===(e=null==r?void 0:r.request)||void 0===e?void 0:e.maxUrlLength,i="number"==typeof n?n:Number(n);return W=Number.isFinite(i)&&i>0?i:1900,W})();if(Number.isFinite(d)&&d>0&&c.length>d)throw U("URL_TOO_LONG",0);(0,o.qC)("WEBHOOK_CALL",i,a,n.vA.WEBHOOK_LOG_WHITELIST),yield x();const f=N(S);if(!f)throw y("ARCGIS_MODULE_ERROR");const h={Accept:"application/json","Cache-Control":"no-cache"},p=new AbortController;let m=null,v=!1;const g=()=>{p.abort()};try{s&&(s.aborted?p.abort():s.addEventListener("abort",g));const e="number"==typeof this.config.timeout&&this.config.timeout>0?this.config.timeout:void 0;e&&(m=setTimeout((()=>{v=!0;try{p.abort()}catch(e){}}),e));const t=yield l({method:"GET",url:c,transport:"fme-webhook",query:a,correlationId:u("webhook"),responseInterpreter:{status:b,ok:E,size:O},execute:()=>f(c,{method:"get",responseType:"json",headers:h,signal:p.signal,timeout:e})});return this.parseWebhookResponse(t)}catch(e){if((0,o.zf)(e)&&v)throw U("WEBHOOK_TIMEOUT",408,e);throw e instanceof Error?e:new Error(String(e))}finally{m&&clearTimeout(m);try{s&&s.removeEventListener("abort",g)}catch(e){}}}catch(e){if(e instanceof n.VQ)throw e;if(null==e?void 0:e.code)throw e instanceof Error?e:new Error(String(e));const t=(0,i.Ko)(e);throw y("DATA_DOWNLOAD_ERROR",t||0)}}))}parseWebhookResponse(e){return s(this,void 0,void 0,(function*(){var t;const r="number"==typeof(null==e?void 0:e.status)?e.status:"number"==typeof(null==e?void 0:e.httpStatus)?e.httpStatus:void 0,n="number"==typeof r?r:0;if(401===n||403===n)throw U("WEBHOOK_AUTH_ERROR",n);const i="function"==typeof(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t.get)?e.headers:void 0,s=(null==i?void 0:i.get("content-type"))||void 0;let a;if("function"==typeof(null==e?void 0:e.json))try{a=yield e.json()}catch(e){throw U("WEBHOOK_NON_JSON",n,e)}else if(void 0!==(null==e?void 0:e.data))a=e.data;else if(void 0!==(null==e?void 0:e.json))a=e.json;else if("string"==typeof(null==e?void 0:e.text))try{a=JSON.parse(e.text)}catch(e){throw U("WEBHOOK_NON_JSON",n,e)}if(!a||"object"!=typeof a)throw U("WEBHOOK_NON_JSON",n,e);if(s&&!(0,o.Fh)(s))throw U("WEBHOOK_NON_JSON",n,{contentType:s});return{data:a,status:n,statusText:null==e?void 0:e.statusText}}))}request(e){return s(this,arguments,void 0,(function*(e,t={}){var r,s,a;if(this.disposed)throw y("CLIENT_DISPOSED");try{yield this.setupPromise}catch(e){this.queueSetup(this.config);try{yield this.setupPromise}catch(e){throw y("ARCGIS_MODULE_ERROR")}}yield x();const c=(0,o.PH)(e,this.config.serverUrl,this.basePath),d=Object.assign({},t.headers||{}),f=Object.assign({},t.query||{});if(!t.method||t.method===n.ym.GET){const e=(0,o.qm)(this.config.serverUrl,this.config.token,t.repositoryContext);void 0===f.__scope&&(f.__scope=e)}const h={method:(null===(r=t.method)||void 0===r?void 0:r.toLowerCase())||"get",query:f,responseType:"json",headers:d,signal:t.signal};try{const e=null===(s=(0,o.$j)(this.config.serverUrl))||void 0===s?void 0:s.toLowerCase(),r=new URL(c,(null===(a=globalThis.location)||void 0===a?void 0:a.origin)||"http://d").host.toLowerCase();e&&r===e&&this.config.token&&(f.fmetoken||(f.fmetoken=this.config.token),h.headers=h.headers||{},h.headers.Authorization=`fmetoken token=${this.config.token}`);const n="number"==typeof t.timeout?t.timeout:"number"==typeof this.config.timeout?this.config.timeout:void 0;"number"==typeof n&&n>0&&(h.timeout=n),void 0!==t.cacheHint&&(h.cacheHint=t.cacheHint),void 0!==t.body&&(h.body=t.body);const i=N(S);if(!i)throw y("ARCGIS_MODULE_ERROR");const d=u("fme"),p=yield l({method:"string"==typeof h.method?h.method.toUpperCase():"GET",url:c,transport:"fme-flow-api",body:h.body,query:f,correlationId:d,responseInterpreter:{status:b,ok:E,size:O},execute:()=>i(c,h)});return{data:p.data,status:p.httpStatus||p.status||200,statusText:p.statusText}}catch(e){if("AbortError"===(null==e?void 0:e.name))return{data:void 0,status:0,statusText:"requestAborted"};if(e instanceof n.VQ)throw e;const t=(0,i.Ko)(e)||0,r=(0,i.$d)(e);let s="REQUEST_FAILED";(0,o.PE)(e).includes("Unexpected token")&&(s="INVALID_RESPONSE_FORMAT");const a=(0,i.Pi)(e,t);throw new n.VQ(a,s,t,r)}}))}}const Q=e=>({serverUrl:e.fmeServerUrl||e.fme_server_url||"",token:e.fmeServerToken||e.fme_server_token||e.fmw_server_token||"",repository:e.repository||"",timeout:e.requestTimeout});function J(e){const t=Q(e);try{(0,i.e6)(t)}catch(e){throw y("INVALID_CONFIG")}return new K(Object.assign(Object.assign({},t),{serverUrl:t.serverUrl.replace(/\/$/,"")}))}},2242:(e,t,r)=>{"use strict";r.d(t,{CH:()=>S,Gb:()=>p,SB:()=>w,UA:()=>g,Vp:()=>m,YG:()=>b,bQ:()=>R,d7:()=>h,ho:()=>T,j_:()=>E,kg:()=>O,rG:()=>v,uB:()=>d,yN:()=>f});var n=r(9244),i=r(3930),o=r(7665),s=r(9778),a=r(8424),l=r(3271),u=(r(4540),function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))});const c=(e,t)=>{if(e)try{t(e)}catch(e){}},d=e=>{c(e,(e=>{e.cancel()}))},f=e=>{c(e,(e=>{e.removeAll()}))},h=(e,t,r)=>{const i=Number.isFinite(t)&&t>=0?t:0,o=n.React.useRef(null),s=n.React.useRef(!1),a=n.React.useRef(null),l=n.hooks.useLatest(e),u=n.hooks.useLatest(r),c=n.hooks.useEventCallback((e=>{var t;if(s.current===e)return;s.current=e;const r=null===(t=u.current)||void 0===t?void 0:t.onPendingChange;if("function"==typeof r)try{r(e)}catch(e){}})),d=n.hooks.useEventCallback((()=>{o.current&&(clearTimeout(o.current),o.current=null),a.current=null,s.current&&c(!1)})),f=n.hooks.useEventCallback(((...e)=>{a.current=e,o.current&&clearTimeout(o.current),c(!0),o.current=setTimeout((()=>{o.current=null,a.current=null;try{l.current(...e)}finally{c(!1)}}),i)})),h=n.hooks.useEventCallback((()=>{if(!a.current)return;const e=a.current;d(),l.current(...e)})),p=n.React.useRef(null),m=n.hooks.useLatest(f),v=n.hooks.useLatest(d),g=n.hooks.useLatest(h);if(!p.current){const e=(...e)=>{m.current(...e)};e.cancel=()=>v.current(),e.flush=()=>g.current(),e.isPending=()=>s.current,p.current=e}n.hooks.useEffectOnce((()=>()=>{v.current()}));const y=p.current;if(!y)throw new Error("debounceUnavailable");return y},p=e=>{const[t,r]=n.React.useState({modules:null,loading:!0,errorKey:null});return n.hooks.useEffectWithPreviousValues((()=>{let t=!1;r((t=>({modules:0===e?t.modules:null,loading:!0,errorKey:null})));return u(void 0,void 0,void 0,(function*(){var e,n;try{const i=yield(0,l.ps)(s.RF);if(t)return;const[o,a,u,c,d,f,h,p,m,v,g]=i;try{const e=f;(null==e?void 0:e.load)&&"function"==typeof e.load&&(yield e.load())}catch(e){}const y=null!==(n=null!==(e=null==c?void 0:c.operators)&&void 0!==e?e:null==u?void 0:u.operators)&&void 0!==n?n:null;r({modules:{SketchViewModel:o,GraphicsLayer:a,geometryEngine:u,geometryEngineAsync:c,webMercatorUtils:d,projection:f,SpatialReference:h,normalizeUtils:p,Polyline:m,Polygon:v,Graphic:g,geometryOperators:y},loading:!1,errorKey:null})}catch(e){t||r({modules:null,loading:!1,errorKey:"errorMapInit"})}})),()=>{t=!0}}),[e]),t},m=()=>{const[e,t]=n.React.useState({jimuMapView:null,sketchViewModel:null,graphicsLayer:null,cleanupHandles:null}),r=n.hooks.useEventCallback(((e,r)=>{t((t=>{var n;if("sketchViewModel"===e&&t.sketchViewModel&&t.sketchViewModel!==r)try{const e=null===(n=t.sketchViewModel)||void 0===n?void 0:n.__fmeCleanup__;"function"==typeof e&&e()}catch(e){}if("cleanupHandles"===e&&t.cleanupHandles&&t.cleanupHandles!==r)try{t.cleanupHandles()}catch(e){}return Object.assign(Object.assign({},t),{[e]:r})}))})),i=n.hooks.useEventCallback((r=>{const{sketchViewModel:n,graphicsLayer:i,jimuMapView:o,cleanupHandles:s}=e;if(s)try{s()}catch(u){}var a,l,u;d(n),c(n,(e=>{"function"==typeof e.destroy&&e.destroy()})),l=i,(null===(u=null==(a=o)?void 0:a.view)||void 0===u?void 0:u.map)&&c(l,(e=>{e.parent&&a.view.map.remove(e)})),f(i),(e=>{c(e,(e=>{const t=e.destroy;"function"==typeof t&&t.call(e)}))})(i),t((e=>Object.assign(Object.assign({},e),{jimuMapView:r?null:e.jimuMapView,sketchViewModel:null,graphicsLayer:null,cleanupHandles:null})))})),o=n.hooks.useEventCallback((()=>{i(!1)})),s=n.hooks.useEventCallback((()=>{i(!0)}));return Object.assign(Object.assign({},e),{setJimuMapView:e=>r("jimuMapView",e),setSketchViewModel:e=>r("sketchViewModel",e),setGraphicsLayer:e=>r("graphicsLayer",e),setCleanupHandles:e=>r("cleanupHandles",e),teardownDrawingResources:o,cleanupResources:s})},v=(e,t)=>n.hooks.useEventCallback(((r,n,i)=>{const o={message:r,type:n,code:i||"UNKNOWN",severity:s.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now(),kind:"runtime"};e(a.fmeActions.setError("general",o,t))})),g=(e,t)=>{const[r,i]=n.React.useState((()=>e.initializeValues())),[o,s]=n.React.useState(!0),[a,l]=n.React.useState({}),u=n.hooks.useEventCallback((e=>{i(e),null==t||t(e)})),c=n.hooks.useEventCallback(((e,t)=>{const n=Object.assign(Object.assign({},r),{[e]:t});u(n)})),d=n.hooks.useEventCallback((()=>{const t=e.validateValues(r);return s(t.isValid),l(t.errors),t})),f=n.hooks.useEventCallback((()=>{const t=e.initializeValues();l({}),s(!0),u(t)}));return{values:r,isValid:o,errors:a,updateField:c,validateForm:d,resetForm:f,setValues:u,setIsValid:s,setErrors:l}};let y=0;const b=()=>{const e=n.React.useRef();return e.current||(y>=Number.MAX_SAFE_INTEGER&&(y=0),y+=1,e.current=`fme-${y}`),e.current},E=(e,t,r)=>{const[i,o]=n.hooks.useControlled({controlled:e,default:t});return[i,n.hooks.useEventCallback((e=>{o(e),null==r||r(e)}))]},O=(e,t)=>{const r=Number.isFinite(t)&&t>=0?t:0,i=e=>{if(!e)return null;const t=e.message,r=e.detail,n=e.messages,i=Array.isArray(n)?n.filter((e=>null!=e)):void 0;return null!=t||null!=r||i&&0!==i.length?{message:t,detail:r,messages:i}:null},[o,s]=n.React.useState("loading"===e.kind),a=n.React.useRef("loading"===e.kind?Date.now():null),l=n.React.useRef("loading"===e.kind?i(e):null);n.hooks.useEffectWithPreviousValues((()=>{let t=null;if("loading"===e.kind)l.current=i(e),null==a.current&&(a.current=Date.now()),s(!0);else if(null!=a.current){const e=Date.now()-a.current,n=Number.isFinite(e)&&e>=0?e:0,i=Math.max(0,r-n);i>0?t=setTimeout((()=>{s(!1),a.current=null,l.current=null}),i):(s(!1),a.current=null,l.current=null)}else s(!1),l.current=null;return()=>{t&&clearTimeout(t)}}),[e,r]);const u="loading"===e.kind;return{showLoading:u||o,snapshot:u?i(e):l.current}},R=()=>{const e=n.React.useRef(null),t=n.hooks.useEventCallback((()=>{const t=e.current;if(t)try{t.abort()}catch(e){}e.current=null})),r=n.hooks.useEventCallback((()=>{t();const r=new AbortController;return e.current=r,r})),i=n.hooks.useEventCallback((t=>{t&&e.current===t&&(e.current=null)}));return{controllerRef:e,abortAndCreate:r,cancel:t,finalize:i}};function S(e,t){var r;return(0,i.I)({queryKey:["fme","workspaces",e.repository||s.nu,e.fmeServerUrl,(0,l.hs)(e.fmeServerToken)],queryFn:t=>u(this,[t],void 0,(function*({signal:t}){var r;const n=(0,l.Mb)(e.fmeServerUrl,e.fmeServerToken,e.repository);if(!n)throw new Error("FME client not initialized");const i=e.repository||s.nu,o=yield n.getRepositoryItems(i,s.h6,void 0,void 0,t);return Array.isArray(null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.items)?o.data.items:[]})),enabled:(null===(r=null==t?void 0:t.enabled)||void 0===r||r)&&Boolean(e.fmeServerUrl&&e.fmeServerToken)})}function w(e,t,r){var n;return(0,i.I)({queryKey:["fme","workspace-item",e,t.repository||s.nu,t.fmeServerUrl,(0,l.hs)(t.fmeServerToken)],queryFn:r=>u(this,[r],void 0,(function*({signal:r}){if(!e)throw new Error("Workspace name required");const n=(0,l.Mb)(t.fmeServerUrl,t.fmeServerToken,t.repository);if(!n)throw new Error("FME client not initialized");const i=t.repository||s.nu,[o,a]=yield Promise.all([n.getWorkspaceItem(e,i,r),n.getWorkspaceParameters(e,i,r)]),u=Array.isArray(null==a?void 0:a.data)?a.data:[];return{item:o.data,parameters:u}})),enabled:(null===(n=null==r?void 0:r.enabled)||void 0===n||n)&&Boolean(e&&t.fmeServerUrl&&t.fmeServerToken),staleTime:6e5,refetchOnMount:!1})}function T(e,t,r){var i,a;const c=(0,o.jE)(),[d,f]=n.React.useState((()=>({isPrefetching:!1,progress:null,prefetchStatus:"idle"}))),h=null===(i=null==r?void 0:r.enabled)||void 0===i||i,p=null!==(a=null==r?void 0:r.chunkSize)&&void 0!==a?a:10,m=n.hooks.useLatest(t),v=n.hooks.useLatest(e),g=n.hooks.useLatest(null==r?void 0:r.onProgress);return n.React.useEffect((()=>{var e;const t=v.current;if(!h||!(null==t?void 0:t.length))return void f({isPrefetching:!1,progress:null,prefetchStatus:"idle"});const r=null!==(e=m.current)&&void 0!==e?e:{},n=r.repository||s.nu,i=r.fmeServerUrl,o=r.fmeServerToken;if(!i||!o)return;const a=(0,l.Mb)(i,o,n);if(!a)return;let d=!1;const y=new Set,b=e=>(y.add(e),()=>{y.delete(e)}),E=e=>{y.forEach((t=>{try{t.signal.aborted||t.abort(e)}catch(e){t.abort()}})),y.clear()},O=(e,t)=>{if(!e)return()=>{};const r=()=>{const r=e.reason;try{t.signal.aborted||t.abort(r)}catch(e){t.abort()}};return e.addEventListener("abort",r),()=>{try{e.removeEventListener("abort",r)}catch(e){}}};return(()=>{u(this,void 0,void 0,(function*(){var e;f({isPrefetching:!0,progress:{loaded:0,total:t.length},prefetchStatus:"loading"});const r=[];for(let e=0;e<t.length;e+=p)r.push(t.slice(e,e+p));let s=0;try{for(const h of r){if(d)break;yield Promise.all(h.map((e=>c.prefetchQuery({queryKey:["fme","workspace-item",e.name,n,i,(0,l.hs)(o)],queryFn:t=>u(this,[t],void 0,(function*({signal:t}){const r=new AbortController,i=b(r),o=O(t,r);try{const t=r.signal,[i,o]=yield Promise.all([a.getWorkspaceItem(e.name,n,t),a.getWorkspaceParameters(e.name,n,t)]);return{item:i.data,parameters:Array.isArray(null==o?void 0:o.data)?o.data:[]}}finally{o(),i()}})),staleTime:6e5})))),s+=h.length,f((e=>Object.assign(Object.assign({},e),{progress:{loaded:s,total:t.length}}))),null===(e=g.current)||void 0===e||e.call(g,s,t.length)}d||f({isPrefetching:!1,progress:null,prefetchStatus:"success"})}catch(e){d||((0,l.fA)("Workspace prefetch error",e),f({isPrefetching:!1,progress:null,prefetchStatus:"error"}))}finally{E()}}))})(),()=>{d=!0,E()}}),[h,c,m,v,g,p]),d}},2606:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z"></path></svg>'},2686:e=>{"use strict";e.exports=n},2775:(e,t,r)=>{"use strict";r.d(t,{Zq:()=>o,zs:()=>i});var n={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},i=new class{#t=n;#r=!1;setTimeoutProvider(e){this.#t=e}setTimeout(e,t){return this.#t.setTimeout(e,t)}clearTimeout(e){this.#t.clearTimeout(e)}setInterval(e,t){return this.#t.setInterval(e,t)}clearInterval(e){this.#t.clearInterval(e)}};function o(e){setTimeout(e,0)}},3128:(e,t,r)=>{"use strict";r.d(t,{$W:()=>o,MN:()=>l});var n=r(9244),i=r(1888);const o={icon:{small:16,medium:18,large:24},tooltip:{delay:{enter:100,next:0,leave:0,touch:700},position:{top:"top",bottom:"bottom",left:"left",right:"right"},showArrow:!0},button:{defaults:{block:!0,tooltipPosition:"top"},offset:"10px",textPadding:"18px"},zIndex:{selectMenu:1005,overlay:1e3},loading:{width:215,height:215,delay:1e3,detailDelay:1600,cycleInterval:5200},required:"*"},s=e=>{var t;return{fontFamily:null==e?void 0:e.fontFamily,fontWeight:null===(t=null==e?void 0:e.fontWeight)||void 0===t?void 0:t.toString(),fontSize:null==e?void 0:e.fontSize,fontStyle:null==e?void 0:e.fontStyle,lineHeight:null==e?void 0:e.lineHeight,color:null==e?void 0:e.color}},a=(e,t={})=>(0,n.css)(Object.assign({display:"inline"===e?"inline-flex":"flex",flexFlow:"column"===e?"column nowrap":"inline"===e?"row wrap":void 0},t)),l=()=>(e=>{var t,r,i,l;const u=e.sys.spacing,c=e.sys.color,d=e.sys.typography,f=null==u?void 0:u(2),h="1 1 auto";return{row:a("row",{gap:f}),buttonGroup:a("column",{inlineSize:"100%",gap:f}),fullWidth:a("column",{inlineSize:"100%",flex:h,minInlineSize:0}),relative:(0,n.css)({position:"relative"}),rowAlignCenter:(0,n.css)({alignItems:"center"}),disabledPicker:a("row",{pointerEvents:"none"}),textareaResize:(0,n.css)({resize:"vertical"}),parent:a("column",{overflowY:"auto",blockSize:"100%",position:"relative",gap:f,padding:null==u?void 0:u(1),backgroundColor:null===(t=null==c?void 0:c.surface)||void 0===t?void 0:t.paper}),header:a("row",{alignItems:"center",justifyContent:"flex-end",gap:f,marginBlockEnd:null==u?void 0:u(2)}),headerAlert:(0,n.css)({marginInlineEnd:"auto",display:"flex",alignItems:"center"}),content:a("column",{flex:h,minBlockSize:0,gap:f}),centered:a("column",{placeContent:"center",alignItems:"center",textAlign:"center",flex:h,minBlockSize:0,gap:f}),loadingText:(0,n.css)({position:"absolute",inset:"50% auto auto 50%",transform:"translate(-50%, -50%)",textAlign:"center"}),overlay:(0,n.css)({position:"absolute",inset:"50% auto auto 50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:o.zIndex.overlay}),alert:(0,n.css)({width:"100% !important",backgroundColor:"transparent !important",border:"none !important"}),alertInline:(0,n.css)({opacity:.8}),alertContent:a("row",{alignItems:"flex-start",gap:f}),alertMessage:(0,n.css)(Object.assign({flex:h},s(null==d?void 0:d.label2))),alertIcon:(0,n.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",flex:"0 0 auto"}),typo:{caption:(0,n.css)(Object.assign(Object.assign({},s(null==d?void 0:d.body1)),{marginBlockEnd:null==u?void 0:u(3)})),label:(0,n.css)(Object.assign(Object.assign({},s(null==d?void 0:d.label1)),{fontWeight:"400",marginBlockEnd:0})),title:(0,n.css)(Object.assign(Object.assign({},s(null==d?void 0:d.title1)),{margin:`${null==u?void 0:u(1)} 0`})),instruction:(0,n.css)(Object.assign(Object.assign({textAlign:"center"},s(null==d?void 0:d.body1)),{margin:`${null==u?void 0:u(3)} 0`})),link:(0,n.css)(Object.assign(Object.assign({},s(null==d?void 0:d.body1)),{color:null===(r=null==c?void 0:c.action.link)||void 0===r?void 0:r.default,textDecoration:"underline",wordBreak:"break-all","&:hover":{color:null===(i=null==c?void 0:c.action.link)||void 0===i?void 0:i.hover,textDecoration:"underline"}})),loadingMessage:(0,n.css)(Object.assign({},s(null==d?void 0:d.body2))),required:(0,n.css)({marginInlineStart:null==u?void 0:u(1)}),hint:(0,n.css)(Object.assign(Object.assign({},s(null==d?void 0:d.label2)),{marginBlockStart:null==u?void 0:u(1)}))},btn:{flex:(0,n.css)({flex:h}),group:a("column",{inlineSize:"100%",gap:f}),text:e=>(0,n.css)({flex:h,textAlign:e||"start",paddingInlineEnd:o.button.textPadding}),icon:(0,n.css)({position:"absolute",zIndex:1,insetBlockStart:"50%",insetInlineEnd:o.button.offset,transform:"translateY(-50%)"})},form:{layout:a("column",{flex:h,minBlockSize:0,gap:f}),header:(0,n.css)({flex:"0 0 auto"}),sliderField:a("row",{gap:null==u?void 0:u(1)}),sliderValue:(0,n.css)(Object.assign(Object.assign({},s(null==d?void 0:d.label2)),{textAlign:"center"})),content:a("column",{flex:h,gap:f}),body:a("column",{flex:h,gap:f,overflowY:"auto"}),footer:a("column",{flex:"0 0 auto",gap:f})},field:(0,n.css)({marginBlockEnd:null==u?void 0:u(3)}),checkLabel:a("row",{alignItems:"center",justifyContent:"space-between",inlineSize:"100%"}),selection:{container:a("column",{flex:h,gap:f,minBlockSize:0}),warning:(0,n.css)({marginBlockStart:"auto"}),message:(0,n.css)(Object.assign({marginBlockStart:"auto"},s(null==d?void 0:d.body2)))},tooltipWrap:{block:a("row",{inlineSize:"100%",minInlineSize:0}),inline:a("inline",{minInlineSize:0}),anchor:a("row",{flex:h,minInlineSize:0,"& > *":{flex:h,minInlineSize:0}})},stateView:{frame:a("column",{inlineSize:"100%",blockSize:"100%",minBlockSize:0}),error:a("column",{flex:h,inlineSize:"100%",blockSize:"100%",minBlockSize:0,gap:f,alignItems:"stretch"}),errorContent:a("column",{gap:f,flex:"1 1 auto",justifyContent:"center"}),errorIcon:(0,n.css)({marginBlockEnd:null!==(l=null==u?void 0:u(2))&&void 0!==l?l:0}),errorActions:(0,n.css)({inlineSize:"100%",marginBlockStart:"auto",alignSelf:"stretch"})}}})((0,i.useTheme)())},3271:(e,t,r)=>{"use strict";r.d(t,{$e:()=>qt,$j:()=>Ot,$r:()=>E,AR:()=>Xt,Ad:()=>ie,B9:()=>j,BU:()=>Lt,B_:()=>D,Cq:()=>S,E$:()=>g,Ej:()=>z,Eo:()=>Z,FK:()=>Gt,Fh:()=>bt,Fv:()=>ge,H9:()=>V,HK:()=>xt,He:()=>zt,I0:()=>q,IT:()=>A,Im:()=>d,Jd:()=>ut,KP:()=>se,LH:()=>Se,Mb:()=>M,Mm:()=>ot,Nn:()=>h,OD:()=>Ct,Ox:()=>ce,PE:()=>Rt,PH:()=>ht,Qd:()=>m,RM:()=>de,SB:()=>$t,Td:()=>U,UE:()=>oe,W1:()=>T,WZ:()=>At,Wx:()=>_t,XV:()=>pt,Xk:()=>Wt,Xl:()=>R,Yn:()=>Yt,ZF:()=>F,Z_:()=>Qt,_R:()=>at,ag:()=>De,bE:()=>Jt,bQ:()=>a.bQ,c$:()=>ft,cL:()=>lt,dB:()=>vt,dd:()=>X,fA:()=>he,gV:()=>$,hS:()=>ct,hU:()=>w,hk:()=>Mt,hs:()=>C,id:()=>N,kz:()=>we,lx:()=>Ht,m4:()=>gt,o4:()=>Re,oJ:()=>x,pZ:()=>ne,ps:()=>er,q2:()=>G,qC:()=>mt,qm:()=>yt,rB:()=>re,rI:()=>jt,sH:()=>B,sI:()=>J,sJ:()=>Ie,sL:()=>I,sq:()=>Q,uA:()=>_,uI:()=>f,vq:()=>k,wk:()=>K,wl:()=>St,xi:()=>W,xs:()=>ee,yC:()=>Et,yo:()=>Y,zf:()=>fe});var n=r(9778),i=r(2238),o=r(9244),s=r(3890),a=r(2242),l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const c=(e,t)=>{if("string"==typeof e){const r=e.trim();return r||(null==t?void 0:t.allowEmpty)?r:(null==t?void 0:t.nullable)?null:void 0}return(null==t?void 0:t.allowNumeric)&&"number"==typeof e&&Number.isFinite(e)?String(e):(null==t?void 0:t.nullable)?null:void 0},d=e=>null==e||""===e||(Array.isArray(e)?0===e.length:"string"==typeof e&&0===e.trim().length),f=e=>"string"==typeof e&&""!==e.trim(),h=e=>c(e,{allowNumeric:!1}),p=e=>c(e,{allowNumeric:!0}),m=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),v=e=>"number"==typeof e&&Number.isFinite(e),g=e=>"undefined"!=typeof File&&e instanceof File,y=e=>{if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;const t=c(e,{allowNumeric:!1});if(!t)return;const r=t.toLowerCase();return!!["true","1","yes","y","on"].includes(r)||!["false","0","no","n","off"].includes(r)&&void 0},b=e=>{if(v(e))return e;const t=c(e,{allowNumeric:!1});if(!t)return;const r=Number(t);return Number.isFinite(r)?r:void 0},E=e=>Array.isArray(e)?e:null==e?[]:[e],O=(e,t,r,n)=>{if(!e)return n;for(const n of t){const t=r(e[n]);if(void 0!==t)return t}return n},R=(e,t)=>O(e,t,p),S=(e,t,r=!1)=>{var n;return null!==(n=O(e,t,y,r))&&void 0!==n?n:r},w=(e,t)=>O(e,t,b),T=e=>{const t={};for(const r of e)if(m(r))for(const[e,n]of Object.entries(r))null==n||e in t||(t[e]=n);return t},k=e=>{if(Array.isArray(e))return e;if(m(e))for(const t of["data","items","options"]){const r=e[t];if(Array.isArray(r))return r}},A=e=>{if(!m(e))return;const t=Object.entries(e).filter((([,e])=>void 0!==e));return t.length?Object.fromEntries(t):void 0},I=e=>v(e)||"string"==typeof e?e:"boolean"==typeof e?e?"true":"false":JSON.stringify(null!=e?e:null),_=e=>(null==e?void 0:e.length)?new Set(e.map((e=>I(e.value)))):null,C=e=>{const t=h(e);if(!t)return"token:none";let r=0;for(let e=0;e<t.length;e+=1)r=31*r+t.charCodeAt(e)>>>0;return`token:${r.toString(36)}`},M=(e,t,r,o)=>{const s=h(e),a=h(t);if(!s||!a)return null;const l=Object.assign({fmeServerUrl:s,fmeServerToken:a,repository:h(r)||n.nu},v(o)?{requestTimeout:o}:{});try{return(0,i.ER)(l)}catch(e){return null}},x=e=>{var t;return null!==(t=c(e,{allowNumeric:!0}))&&void 0!==t?t:""},L=e=>{if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return String(e);if(void 0===e)return"undefined";if(null===e)return"null";if("object"==typeof e)try{return JSON.stringify(e)}catch(t){return Object.prototype.toString.call(e)}return Object.prototype.toString.call(e)},j=e=>!("string"!=typeof e||!e)&&(!n.JE.test(e)&&n.Xw.test(e)),N=e=>{const t=h(e);return t&&j(t)?t:void 0},D=(e,t)=>({enter:e("placeholderEnter",{field:t}),select:e("placeholderSelect",{field:t})}),P=Object.freeze({email:"placeholderEmail",phone:"placeholderPhone",search:"placeholderSearch"}),U=(e,t,r,n)=>(null==e?void 0:e.placeholder)?e.placeholder:n?r(P[n]):t.enter,F=(e,t)=>{if(!e||!(null==t?void 0:t.length))return;return t.every((e=>(e=>{if(v(e))return!0;if("string"!=typeof e)return!1;const t=e.trim();if(!t)return!1;const r=Number(t);return Number.isFinite(r)&&String(r)===t})(e.value)))?"number":void 0},V=e=>{if(Array.isArray(e))return e.map((e=>"string"==typeof e?e:String(e)));if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t.map(String):e?[e]:[]}catch(t){return e?[e]:[]}return[]},B=e=>{if(!v(e)||e<0)return null;const t=["B","KB","MB","GB","TB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${n>0&&r<10?r.toFixed(1):Math.round(r).toString()} ${t[n]}`},W=(e,t)=>Number.isFinite(e)?"number"==typeof t&&t>=0?e.toFixed(t):e.toString():"";function q(e,t){return e?t(e):""}const G=e=>{const t=h(e);if(!t||!j(t))return t||"";const r=t.indexOf("@");if(r<=1)return`**${t.slice(r)}`;const n=t.slice(0,r),i=t.slice(r);return`${n.slice(0,2)}****${i}`},z=(e,t,r)=>{const i=h(t);if(!i)return h(r)||"";return e("contactSupportEmail").replace(n.BY,i)},H=e=>{const t=(e||"").trim();if(!t||t.length>n.m2)return!1;let r;try{r=new URL(t)}catch(e){return!1}if(r.username||r.password||"https:"!==r.protocol)return!1;const i=r.hostname.toLowerCase();if(!i||(e=>{const t=e.toLowerCase();return n.KF.some((e=>t===e||t.endsWith(e)))})(i))return!1;const o=(e=>{const t=e.split(".");if(4!==t.length)return null;const r=t.map((e=>{if(!/^\d+$/.test(e))return NaN;const t=Number(e);return t>=0&&t<=255?t:NaN}));return r.every(Number.isInteger)?r:null})(i);if(o&&(s=o,n.FS.some((({start:e,end:t})=>{for(let r=0;r<4;r++)if(s[r]<e[r]||s[r]>t[r])return!1;return!0}))))return!1;var s;if(i.includes(":")&&(e=>{const t=e.toLowerCase();return"::1"===t||t.startsWith("::1:")||"0:0:0:0:0:0:0:1"===t||t.startsWith("fc")||t.startsWith("fd")||/^fe[89ab][0-9a-f]/i.test(t)})(i))return!1;if(/\.[^/]+$/.test(r.pathname)){const e=`${r.pathname}${r.search}`;if(!n.vH.test(e))return!1}return!0},$=e=>{const t=[e[0],e[1],e[2]],r={type:"simple-fill",color:[...t,.2],outline:{color:t,width:2,style:"solid"}};return{HIGHLIGHT_SYMBOL:r,DRAWING_SYMBOLS:{polygon:r,polyline:{type:"simple-line",color:t,width:2,style:"solid"},point:{type:"simple-marker",style:"circle",size:8,color:t,outline:{color:[255,255,255],width:1}}}}},K=e=>{if(!e)return null;const t=e.toLowerCase();return"extent"===t||"rectangle"===t?"rectangle":"polygon"===t?"polygon":null},Q=e=>{var t;const{__upload_file__:r,__remote_dataset_url__:n,opt_geturl:i}=e,o=u(e,["__upload_file__","__remote_dataset_url__","opt_geturl"]),s=h(i),a=Object.assign({},o);s&&(a.opt_geturl=s);return{sanitizedFormData:(e=>{const t={};for(const[r,n]of e)t[r]=Kt(n);return t})(Object.entries(a)),uploadFile:r instanceof File?r:null,remoteUrl:null!==(t=h(n))&&void 0!==t?t:""}},J=({finalParams:e,uploadedPath:t,parameters:r,explicitTarget:i})=>{if(!t)return;if(i)return void(e[i]=t);const o=(e=>{if(e)for(const t of e){if(!t)continue;const e=String(t.type);if(n._A.includes(e)&&t.name)return t.name}})(r);o?e[o]=t:void 0===e.SourceDataset&&(e.SourceDataset=t)},X=(e,t)=>{if(!e)return;if(!Boolean((null==t?void 0:t.allowRemoteDataset)&&(null==t?void 0:t.allowRemoteUrlDataset)))return void(void 0!==e.opt_geturl&&delete e.opt_geturl);const r=h(e.opt_geturl);r&&H(r)?e.opt_geturl=r:void 0!==e.opt_geturl&&delete e.opt_geturl},Y=e=>{if(!(null==e?void 0:e.uploadTargetParamName))return null;return ze(e.uploadTargetParamName,"")||null},Z=e=>{if(!e)return null!=e?e:void 0;const t="boolean"==typeof e.syncMode?e.syncMode:Boolean(e.syncMode);if(e.syncMode===t)return e;const r=Object.assign(Object.assign({},e),{syncMode:t});return"function"==typeof e.set&&Object.defineProperty(r,"set",{value:e.set,writable:!0,configurable:!0}),r},ee=()=>{if("undefined"==typeof navigator)return!1;try{const e=null===globalThis||void 0===globalThis?void 0:globalThis.navigator;return Boolean(e&&!1===e.onLine)}catch(e){return!1}},te=e=>Boolean(null==e?void 0:e.allowRemoteDataset),re=(e,t)=>{if(!te(t))return!1;if(!(null==t?void 0:t.allowRemoteUrlDataset))return!1;const r=h(e);return!!r&&H(r)},ne=(e,t)=>!!te(e)&&(!!t&&("undefined"!=typeof Blob&&t instanceof Blob||g(t))),ie=e=>{void 0!==e.__aoi_error__&&delete e.__aoi_error__},oe=(e,t)=>{if(!e)return[];const r=[];for(const[n,i]of Object.entries(e)){if(n===t||!i)continue;const e=i.state;if(!e)continue;const s=String(e).toUpperCase();s!==o.WidgetState.Closed&&s!==o.WidgetState.Hidden&&r.push(n)}return r};function se(e,t,r,n,i){return{message:q(t,e)||t,code:r,hint:z(e,n,i)}}const ae=Object.freeze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),le=/&(?:amp|lt|gt|quot|#39);/g,ue=(e,t)=>{if(e.length>6)return"";if(!/^[0-9a-f]+$/i.test(e))return"";const r=Number.parseInt(e,t);if(!Number.isFinite(r)||r<0||r>1114111)return"";try{return String.fromCodePoint(r)}catch(e){return""}},ce=e=>{if(!e)return"";const t=e.replace(/<\s*(script|style)[^>]*>[\s\S]*?<\s*\/\s*\1\s*>/gi,"").replace(/<[^>]*>/g,"");return t.replace(/&#(\d+);/g,((e,t)=>ue(t,10))).replace(/&#x([\da-f]+);/gi,((e,t)=>ue(t,16))).replace(le,(e=>ae[e]||e)).replace(/\s+/g," ").trim()},de=e=>e?(0,o.css)(e):void 0,fe=e=>{var t;if(!e)return!1;if("object"==typeof e&&null!==e){const r=e,n=L(null!==(t=r.name)&&void 0!==t?t:r.code);if("AbortError"===n||"ABORT_ERR"===n||"ERR_ABORTED"===n)return!0;if(!n||"Error"===n){const e=L(r.message);return/\baborted?\b/i.test(e)||e.includes("signal is aborted")}return!1}return"string"==typeof e&&/\baborted?\b/i.test(e)},he=(e,t)=>{},pe=(e,t)=>{try{e&&"function"==typeof e.closePopup?e.closePopup():t&&"function"==typeof t.close&&t.close()}catch(e){}},me=(e,t)=>{if(!e)return null;const r=e,n="boolean"==typeof r.autoOpenEnabled?r.autoOpenEnabled:void 0;pe(t,e);try{r.autoOpenEnabled=!1}catch(e){}let i=null;if("function"==typeof e.watch)try{i=e.watch("visible",(r=>{r&&pe(t,e)}))}catch(e){}return{popup:e,view:t||null,handle:i,prevAutoOpen:n}},ve=e=>{var t,r;if(e){try{null===(r=null===(t=e.handle)||void 0===t?void 0:t.remove)||void 0===r||r.call(t)}catch(e){}(e=>{const t=e.popup;try{const r="boolean"!=typeof e.prevAutoOpen||e.prevAutoOpen;t.autoOpenEnabled=r}catch(e){}})(e)}};const ge=new class{constructor(){this.record=null,this.owners=new Set}acquire(e,t,r){var n;if(!t)return void this.release(e);const i=null===(n=this.record)||void 0===n?void 0:n.popup;if(!i||i!==t){this.teardown(),this.owners.clear();const e=me(t,r);if(!e)return;this.record=e}this.owners.add(e)}release(e){this.owners.delete(e)&&0===this.owners.size&&this.teardown()}releaseAll(){(0!==this.owners.size||this.record)&&(this.owners.clear(),this.teardown())}teardown(){this.record&&(ve(this.record),this.record=null)}},ye=e=>"string"!=typeof e&&"function"==typeof(null==e?void 0:e[Symbol.iterator]),be=(e,t)=>{if(!e||!ye(e))return[];const r=[];let n=0;for(const i of e){const e=t(i,n++);null!=e&&r.push(e)}return r},Ee=(e,t)=>be(e,(e=>{const r=m(e)?e:null;return r?h(r[t]):void 0})),Oe=e=>{if(!e||!ye(e))return[];const t=new Set,r=[];for(const n of e)t.has(n)||(t.add(n),r.push(n));return r},Re=e=>{if(Array.isArray(e))return Oe(Ee(e,"name"));const t=m(e)?e:null,r=null==t?void 0:t.items;return Array.isArray(r)?Oe(Ee(r,"name")):[]},Se=(e,t="error")=>e?`${e}-${t}`:void 0,we=(e,t,r,n,i)=>r||("string"==typeof e&&e.length>0?e:t?"string"==typeof n&&n||i:void 0),Te="error",ke=Object.freeze({GEOMETRY_SERIALIZATION_FAILED:"polygon",MAP_MODULES_LOAD_FAILED:"map",FORM_INVALID:"warning"}),Ae=Object.freeze([{token:"GEOMETRY",icon:"polygon"},{token:"AREA",icon:"polygon"},{token:"MAP",icon:"map"},{token:"MODULE",icon:"map"},{token:"FORM",icon:"warning"},{token:"TOKEN",icon:"person-lock"},{token:"AUTH",icon:"person-lock"},{token:"REPOSITORY",icon:"folder"},{token:"REPO",icon:"folder"},{token:"DATA",icon:"data"},{token:"NETWORK",icon:"shared-no"},{token:"OFFLINE",icon:"shared-no"},{token:"CONNECTION",icon:"shared-no"},{token:"REQUEST",icon:"shared-no"},{token:"SERVER",icon:"feature-service"},{token:"GATEWAY",icon:"feature-service"},{token:"URL",icon:"link-tilted"},{token:"TIMEOUT",icon:"time"},{token:"CONFIG",icon:"setting"},{token:"EMAIL",icon:"email"}]),Ie=e=>{if("string"!=typeof e)return Te;const t=e.trim();if(!t)return Te;const r=t.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toUpperCase();const n=ke[r];if(n)return n;const i=r.split(/[^A-Z0-9]+/).filter(Boolean),o=new Set(i);for(const{token:e,icon:t}of Ae)if(o.has(e)||r.includes(e))return t;return Te},_e=1e6,Ce=2,Me=27878400,xe=[{factor:.3048,label:"ft\xb2",keywords:["foot","feet"],largeUnit:{threshold:Me,factor:Me,label:"mi\xb2"}},{factor:.3048006096,label:"ft\xb2",keywords:[]},{factor:1609.344,label:"mi\xb2",keywords:["mile"]},{factor:1e3,label:"km\xb2",keywords:["kilometer"]},{factor:.9144,label:"yd\xb2",keywords:["yard"]},{factor:.0254,label:"in\xb2",keywords:["inch"]},{factor:.01,label:"cm\xb2",keywords:["centimeter"]},{factor:.001,label:"mm\xb2",keywords:["millimeter"]},{factor:1852,label:"nm\xb2",keywords:["nautical"]},{factor:1,label:"m\xb2",keywords:["meter"]}],Le=(e,t)=>{if(!v(e))return!1;const r=Math.max(1e-9,1e-6*Math.abs(t));return Math.abs(e-t)<=r},je=(e,t=!1)=>t?2:e>=100?0:e>=10?1:2,Ne=e=>{if(!e)return"units\xb2";const t=e.replace(/^esri/i,"").trim();if(!t)return"units\xb2";const r=t.toLowerCase();switch(r){case"meters":return"m\xb2";case"feet":case"internationalfeet":case"ussfeet":return"ft\xb2";case"kilometers":return"km\xb2";case"miles":return"mi\xb2";case"yards":return"yd\xb2";case"inches":return"in\xb2";case"centimeters":return"cm\xb2";case"millimeters":return"mm\xb2";case"nauticalmiles":return"nm\xb2";default:return`${r}\xb2`}},De=({currentAreaText:e,thresholdAreaText:t,translate:r})=>{const n=h(e);if(!n)return null;const i=h(t);return i?r("largeAreaWarningWithThreshold",{current:n,threshold:i}):r("largeAreaWarning",{current:n})},Pe=e=>e>=_e?{value:e/_e,label:"km\xb2",decimals:Ce}:e>=1?{value:Math.round(e),label:"m\xb2",decimals:0}:{value:Number(e.toFixed(2)),label:"m\xb2",decimals:2},Ue=(e,t)=>t.some((t=>e.includes(t))),Fe=(e,t,r)=>{const n=e/(t*t);if(r.largeUnit&&n>=r.largeUnit.threshold)return{value:n/r.largeUnit.factor,label:r.largeUnit.label,decimals:2};const i=je(n,r.label.includes("km\xb2")||r.label.includes("mi\xb2"));return{value:n,label:r.label,decimals:i}},Ve=(e,t)=>{if(!t)return Pe(e);const r=t.metersPerUnit;if(!v(r))return Pe(e);const n="string"==typeof t.unit?t.unit.toLowerCase():"",i=r;for(const t of xe)if(Le(i,t.factor)||Ue(n,t.keywords))return Fe(e,i,t);const o=e/(i*i),s=je(o);return{value:o,label:Ne(t.unit),decimals:s}},Be=e=>Array.isArray(e)&&e.length>=2&&e.length<=4&&e.every(v),We=e=>{if(!Array.isArray(e)||e.length<4)return!1;if(!e.every(Be))return!1;return((e,t)=>{if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=Math.min(e.length,t.length,2);for(let n=0;n<r;n++){const r=e[n],i=t[n];if("number"!=typeof r||"number"!=typeof i)return!1;if(!Number.isFinite(r)||!Number.isFinite(i))return!1;if(Math.abs(r-i)>1e-9)return!1}return!0})(e[0],e[e.length-1])},qe=e=>"object"==typeof e&&null!==e,Ge=e=>{if(!qe(e))return!1;const t="geometry"in e?e.geometry:e;if(!qe(t))return!1;const r="rings"in t?t.rings:void 0;return Array.isArray(r)&&r.length>0&&r.every(We)},ze=(e,t)=>{var r;return(null!==(r=c(e,{allowNumeric:!0}))&&void 0!==r?r:"").replace(/[^A-Za-z0-9_\-]/g,"").trim()||t},He=["sync","async","schedule"],$e="runonce",Ke=new Set(["start","name","category","description","trigger"]),Qe=(e,t)=>{var r;if("schedule"!==t)return(e=>{const t={};for(const[r,n]of Object.entries(e))Ke.has(r)||(t[r]=n);return t})(e);const n={};for(const[t,i]of Object.entries(e))if(Ke.has(t))if("trigger"===t)n.trigger=null!==(r=h(i))&&void 0!==r?r:$e;else{const e=h(i);e&&(n[t]=e)}else n[t]=i;return void 0===n.trigger&&(n.trigger=$e),n},Je=26214400,Xe=Object.freeze(["estimatedRuntimeSeconds","estimatedRunSeconds","estimatedDurationSeconds","avgRuntimeSeconds","averageRuntimeSeconds","expectedRuntimeSeconds","expectedRunTimeSeconds","estimated_runtime_seconds","estimated_run_seconds","estimated_duration_seconds"]),Ye=Object.freeze(["transformerCount","transformer_count","estimatedTransformerCount"]),Ze=Object.freeze(["fileSizeBytes","fileSize","estimatedDataSizeBytes","estimatedDataSize","estimatedFileSize"]),et=e=>{if(v(e)&&e>=0)return e;if("string"!=typeof e)return null;const t=e.trim();if(!t)return null;const r=t.toLowerCase(),n=r.match(/^pt(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(n){return 3600*Number(n[1]||0)+60*Number(n[2]||0)+Number(n[3]||0)}const i=t.match(/^(\d{1,2}):(\d{2})(?::(\d{2}))?$/);if(i){return 3600*Number(i[1]||0)+60*Number(i[2]||0)+Number(i[3]||0)}const o=t.match(/(-?\d+(?:\.\d+)?)/);if(!o)return null;const s=Number(o[1]);return!Number.isFinite(s)||s<0?null:r.includes("hour")?3600*s:r.includes("min")?60*s:r.includes("ms")?s/1e3:(r.includes("sec")||r.endsWith("s"),s)},tt=(e,t,r)=>{if(!m(e))return null;for(const n of t){if(!(n in e))continue;const t=r(e[n]);if(null!=t)return t}return null},rt=e=>{if(v(e)&&e>=0)return Math.round(e);if("string"==typeof e){const t=e.match(/(\d+)/);if(t){const e=Number(t[1]);if(Number.isFinite(e)&&e>=0)return Math.round(e)}}return null},nt=e=>{if(v(e)&&e>0)return e>4096?e:1024*e*1024;if("string"!=typeof e)return null;const t=e.trim().toLowerCase();if(!t)return null;const r=t.match(/(\d+(?:\.\d+)?)/);if(!r)return null;const n=Number(r[1]);return!Number.isFinite(n)||n<=0?null:t.includes("gb")?1024*n*1024*1024:t.includes("mb")?1024*n*1024:t.includes("kb")?1024*n:t.includes("byte")||n>4096||n>1024?n:1024*n*1024},it=(e,t)=>{if(!t)return null;if(t.areaWarning)return{reason:"area",value:t.drawnArea,threshold:null==e?void 0:e.largeArea};if("number"==typeof(null==e?void 0:e.largeArea)&&null!=t.drawnArea&&t.drawnArea>e.largeArea)return{reason:"area",value:t.drawnArea,threshold:e.largeArea};const r=(e=>{if(!e)return null;const t=et(e.estimatedRuntimeSeconds);if(null!=t)return t;const r=m(e.properties)?e.properties:void 0,n=tt(r,Xe,et);if(null!=n)return n;const i=m(null==r?void 0:r.performance)?r.performance:void 0,o=tt(i,Xe,et);if(null!=o)return o;const s=["estimatedRuntime","estimatedRuntimeSec","expectedRuntime"];for(const t of s){const r=et(e[t]);if(null!=r)return r}return null})(t.workspaceItem);if(null!=r&&r>=5)return{reason:"runtime",value:r,threshold:5};const n=(e=>{if(!e)return null;const t=rt(e.transformerCount);if(null!=t)return t;const r=m(e.properties)?e.properties:void 0,n=tt(r,Ye,rt);return null!=n?n:null})(t.workspaceItem);if(null!=n&&n>=120)return{reason:"transformers",value:n,threshold:120};const i=(e=>{if(!e)return null;const t=nt(e.fileSize);if(null!=t)return t;const r=m(e.properties)?e.properties:void 0,n=tt(r,Ze,nt);return null!=n?n:null})(t.workspaceItem);return null!=i&&i>=Je?{reason:"fileSize",value:i,threshold:Je}:null},ot=(e,t,r)=>{var n;const i=(null==e?void 0:e.data)||{};if((null==t?void 0:t.allowScheduleMode)&&(e=>{var t;const r=h(e.start),n=h(e.category),i=h(e.name);if(!r||!n||!i)return!1;const o=(0,s.dR)({start:r,name:i,category:n,description:h(e.description)});return(null===(t=o.warnings)||void 0===t?void 0:t.pastTime)&&he("Schedule start time is in the past - job may execute immediately or fail",{startTime:r,warnings:o.warnings}),!o.valid&&o.errors&&he("Schedule metadata validation failed",{errors:o.errors}),o.valid})(i))return"schedule";const o="string"==typeof i._serviceMode?i._serviceMode.trim().toLowerCase():"";if("schedule"===o&&(null==t?void 0:t.allowScheduleMode))return"schedule";let a;a="sync"===o||"async"===o?o:(null==t?void 0:t.syncMode)?"sync":"async";const l=it(t,{workspaceItem:null==r?void 0:r.workspaceItem,areaWarning:null==r?void 0:r.areaWarning,drawnArea:null==r?void 0:r.drawnArea});return l&&"sync"===a?(null===(n=null==r?void 0:r.onModeOverride)||void 0===n||n.call(r,{forcedMode:"async",previousMode:"sync",reason:l.reason,value:l.value,threshold:l.threshold}),"async"):a},st=(e,t,r,i,o,s)=>{const a=ze(null==o?void 0:o.aoiParamName,"AreaOfInterest"),l=((e,t)=>{if(Ge(e))return"geometry"in e?e.geometry:e;const r=null==t?void 0:t.toJSON();return Ge(r)?r:null})(t,r);if(!l)return e;const u=(e=>{try{return JSON.stringify(e)}catch(e){return null}})(l);if(!u)return Object.assign(Object.assign({},e),{__aoi_error__:{message:"GEOMETRY_SERIALIZATION_FAILED",type:n.By.GEOMETRY,code:"GEOMETRY_SERIALIZATION_FAILED",severity:n.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now()}});const c=Object.assign(Object.assign({},e),{[a]:u});if(null==s?void 0:s.length){const e=new Set;for(const t of s){const r=ze(t,"");r&&r!==a&&e.add(r)}for(const t of e)c[t]=u}return c},at=(e,t)=>{if(!t)return e;const r=Object.assign({},e),n=e=>{const t="string"==typeof e?Number(e):e;return Number.isFinite(t)&&t>0?Math.floor(t):void 0},i=(()=>{const t=e.opt_servicemode;if("string"==typeof t)return t;const n=r.opt_servicemode;return"string"==typeof n?n:""})(),o="string"==typeof i?i.trim().toLowerCase():"",s="sync"===o||!o&&Boolean(null==t?void 0:t.syncMode);if(s||void 0===r.tm_ttc){if(s&&!("tm_ttc"in r)){const e=n(null==t?void 0:t.tm_ttc);void 0!==e&&(r.tm_ttc=e)}}else delete r.tm_ttc;if(!("tm_ttl"in r)){const e=n(null==t?void 0:t.tm_ttl);void 0!==e&&(r.tm_ttl=e)}return r},lt=(e,t,r,i,o,s)=>{const{config:a,workspaceParameters:l,workspaceItem:c,areaWarning:d,drawnArea:f}=s||{},p=Z(a),m=(null==e?void 0:e.data)||{},v=ot({data:m},p,{workspaceItem:c,areaWarning:d,drawnArea:f}),{_serviceMode:g,__upload_file__:y,__remote_dataset_url__:b}=m,E=u(m,["_serviceMode","__upload_file__","__remote_dataset_url__"]),O=((e,t,r="async",n)=>{var i;const o=(null==e?void 0:e.data)||{},s=He.includes(r)?r:"async",a=null===(i=null==n?void 0:n.showResult)||void 0===i||i,l=Object.assign(Object.assign({},o),{opt_servicemode:s,opt_responseformat:"json",opt_showresult:a?"true":"false"}),u="string"==typeof t?t.trim():"";return"async"!==s&&"schedule"!==s||!u||(l.opt_requesteremail=u),l})({data:Qe(E,v)},t,v,p),R=(e=>{if(!(null==e?void 0:e.length))return[];const t=new Set,r=[];for(const i of e){if(!i||i.type!==n.QL.GEOMETRY)continue;const e=h(i.name);e&&!t.has(e)&&(t.add(e),r.push(e))}return r})(l),S=st(O,r,i,0,p,R);return at(S,p)};function ut(e,t,r){const n=Number.isFinite(e)&&e>0?e:0,i=Ve(n,r);if(!i.value||i.value<=0)return`0 ${i.label}`;return`${((e,r)=>{const n=null==t?void 0:t.intl;if(n&&"function"==typeof n.formatNumber){const t=n.formatNumber(e,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:r});return"number"==typeof t?t.toString():t}return e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:r})})(i.value,i.decimals)} ${i.label}`}const ct=e=>l(void 0,void 0,void 0,(function*(){const t=yield o.SessionManager.getInstance().getUserInfo(),r=((null==t?void 0:t.email)||(null==e?void 0:e.defaultRequesterEmail)||"").trim().toLowerCase();if(!n.Xw.test(r)){const e=new Error("MISSING_REQUESTER_EMAIL");throw e.name="MISSING_REQUESTER_EMAIL",e}return r})),dt=(e,t)=>{const r=e.replace(/\/(?:fmeserver|fmerest)$/i,"").replace(/\/$/,""),n=t.filter((e=>"string"==typeof e&&e.length>0)).map((e=>e.split("/").filter((e=>Boolean(e)&&"."!==e&&".."!==e)).map((e=>encodeURIComponent(e))).join("/"))).join("/");return n?`${r}/${n}`:r},ft=(e,...t)=>dt(e,t),ht=(e,t,r)=>{if(e.startsWith("http"))return e;const n=e=>e.startsWith("/")?e.slice(1):e;if(e.startsWith("/fme"))return ft(t,n(e));const i=n(r||""),o=n(e);return o?ft(t,i,o):ft(t,i)},pt=(e={},t=[],r=!1)=>{const n=new URLSearchParams;if("object"!=typeof e||null===e)return n;const i=new Set(t);for(const[t,r]of Object.entries(e)){if(null==r||i.has(t))continue;const e=Kt(r);null!=e&&(g(e)?n.append(t,$t(e)):n.append(t,L(e)))}if(r){const t=t=>{const r=n.get(t);if(null!==r)return r;const i=null==e?void 0:e[t];return"string"==typeof i?i:""},r="xml"===t("opt_responseformat").trim().toLowerCase()?"xml":"json";n.set("opt_responseformat",r);const i="false"===t("opt_showresult").trim().toLowerCase()?"false":"true";n.set("opt_showresult",i);const o=t("opt_servicemode").trim().toLowerCase(),s="sync"===o?"sync":"schedule"===o?"schedule":"async";n.set("opt_servicemode",s)}return n},mt=(e,t,r,n)=>{},vt=e=>{const t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(`^https?://${t}`,"i")},gt=(e,t)=>{var r;return null!==(r=null==e?void 0:e.some((e=>{if(!e||!e._fmeInterceptor)return!1;const r=e.urls;if(r instanceof RegExp)return r.source===t.source&&r.flags===t.flags;const n="string"==typeof r?r:String(r||"");return t.test(n)})))&&void 0!==r&&r};function yt(e,t,r){const n=`${e}::${t||""}::${r||""}`;let i=5381;for(let e=0;e<n.length;e++)i=(i<<5)+i^n.charCodeAt(e);return Math.abs(i>>>0).toString(36)}const bt=e=>(null!=e?e:"").toLowerCase().includes("application/json"),Et=e=>{const t=(e||"").trim();if(!t)return null;try{return new URL(t)}catch(e){return null}},Ot=e=>{const t=Et(e);return t&&t.hostname||null},Rt=e=>{if(!e)return"Unknown error";if("string"==typeof e)return e;if("number"==typeof e)return e.toString();if(e instanceof Error)return e.message||"Error object";if("object"==typeof e&&null!==e){const t=e;for(const e of["message","error","details","description"]){const r=t[e];if("string"==typeof r&&r.trim())return r.trim()}}return"Unknown error occurred"},St=e=>String(e).padStart(2,"0"),wt=/(Z|[+-]\d{2}(?::?\d{2})?)$/i,Tt=/\.(\d{1,9})$/,kt=e=>{if(!e)return{base:"",fraction:"",offset:""};let t=e,r="";const n=wt.exec(t);(null==n?void 0:n[1])&&(r=n[1],t=t.slice(0,-r.length));let i="";const o=Tt.exec(t);return(null==o?void 0:o[0])&&(i=o[0],t=t.slice(0,-i.length)),{base:t,fraction:i,offset:r}},At=e=>{const t=(e||"").trim();return kt(t)},It=e=>{if(!e)return null;const t=Number(e);return Number.isFinite(t)&&t>=0&&t<=99?St(t):null},_t=e=>{const t=(e||"").replace(/\D/g,"");if(8!==t.length)return"";const r=t.slice(0,4),n=t.slice(4,6),i=t.slice(6,8),o=Number(r),s=Number(n),a=Number(i);return o<1e3||o>9999||s<1||s>12||a<1||a>31?"":`${r}-${n}-${i}`},Ct=e=>e?e.replace(/-/g,""):"",Mt=e=>{const{base:t}=At(e),r=t.replace(/\D/g,"");if(r.length<12)return"";const n=r.slice(0,4),i=r.slice(4,6),o=r.slice(6,8),s=r.slice(8,10),a=r.slice(10,12),l=r.length>=14?r.slice(12,14):"";return`${n}-${i}-${o}T${s}:${a}${l?`:${l}`:""}`},xt=(e,t)=>{if(!e)return"";const r=e.trim(),[n,i]=r.split("T");if(!n||!i)return console.log("inputToFmeDateTime: Invalid ISO format",e),"";const[o,s,a]=n.split("-"),{base:l,fraction:u,offset:c}=kt(i),[d,f,h]=l.split(":");if(!o||4!==o.length||!/^\d{4}$/.test(o))return console.log("inputToFmeDateTime: Invalid year",o),"";const p=It(s),m=It(a),v=It(d),g=It(f);if(!(p&&m&&v&&g))return console.log("inputToFmeDateTime: Invalid date/time components",{m:s,d:a,hh:d,mi:f}),"";const y=h?It(h):"00";if(null===y)return console.log("inputToFmeDateTime: Invalid seconds",h),"";const b=`${o}${p}${m}${v}${g}${y}`,E=t?At(t):null;return`${b}${u||(null==E?void 0:E.fraction)||""}${c||(null==E?void 0:E.offset)||""}`},Lt=e=>{const{base:t}=At(e),r=t.replace(/\D/g,"");return 4===r.length?`${r.slice(0,2)}:${r.slice(2,4)}`:r.length>=6?`${r.slice(0,2)}:${r.slice(2,4)}:${r.slice(4,6)}`:""},jt=(e,t)=>{if(!e)return"";const{base:r,fraction:n,offset:i}=kt(e),o=r.split(":").map((e=>e||"")),s=o[0]||"",a=o[1]||"",l=o[2]||"",u=Number(s),c=Number(a);if(!Number.isFinite(u)||!Number.isFinite(c))return"";const d=Number(l),f=Number.isFinite(d)?St(d):"00",h=`${St(u)}${St(c)}${f}`,p=t?At(t):null;return`${h}${n||(null==p?void 0:p.fraction)||""}${i||(null==p?void 0:p.offset)||""}`},Nt=(e,t,r)=>Number.isFinite(e)?Math.max(t,Math.min(r,e)):t,Dt=e=>Nt(e,0,1),Pt=e=>Nt(e,0,255),Ut=e=>Math.round(Pt(e)).toString(16).padStart(2,"0"),Ft=e=>Number(Dt(e).toFixed(6)).toString(),Vt=e=>Ft(e/255),Bt=(e,t,r)=>`#${Ut(e)}${Ut(t)}${Ut(r)}`,Wt=e=>{const t=/^#?([0-9a-f]{6})$/i.exec(e||""),r=t?parseInt(t[1],16):parseInt(n.Ve.slice(1),16);return[r>>16&255,r>>8&255,255&r]},qt=(e,t)=>{const r=(e||"").split(",").map((e=>e.trim())).filter(Boolean).map(Number);if(!r.length)return null;if("cmyk"===(null==t?void 0:t.space)||!(null==t?void 0:t.space)&&!(null==t?void 0:t.alpha)&&4===r.length){if(r.length<4||!r.slice(0,4).every(Number.isFinite))return null;const[e,t,n,i]=r,o=((e,t,r,n)=>{const i=Dt(e),o=Dt(t),s=Dt(r),a=Dt(n);return{r:Pt(255*(1-i)*(1-a)),g:Pt(255*(1-o)*(1-a)),b:Pt(255*(1-s)*(1-a))}})(e,t,n,i);return Bt(o.r,o.g,o.b)}if(r.length<3||!r.slice(0,3).every(Number.isFinite))return null;const[n,i,o]=r,s=Pt(Math.round(255*Dt(n))),a=Pt(Math.round(255*Dt(i))),l=Pt(Math.round(255*Dt(o)));return Bt(s,a,l)},Gt=(e,t)=>{const r=/^#?([0-9a-f]{6})$/i.exec(e||"");if(!r)return null;const n=parseInt(r[1],16),i=n>>16&255,o=n>>8&255,s=255&n;if("cmyk"===(null==t?void 0:t.space)){const{c:e,m:t,y:r,k:n}=((e,t,r)=>{const n=Dt(e/255),i=Dt(t/255),o=Dt(r/255),s=1-Math.max(n,i,o);if(s>=.999999)return{c:0,m:0,y:0,k:1};const a=1-s;return{c:Dt((1-n-s)/a),m:Dt((1-i-s)/a),y:Dt((1-o-s)/a),k:Dt(s)}})(i,o,s);return[e,t,r,n].map(Ft).join(",")}return[i,o,s].map(Vt).join(",")},zt=(e,t)=>null==e?t?[]:"":t?Array.isArray(e)?e:[e]:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:"",Ht=e=>{if(!e)return null;const t="number"==typeof e.timestampMs?e.timestampMs:e.timestamp instanceof Date?e.timestamp.getTime():0,{retry:r,timestamp:n}=e,i=u(e,["retry","timestamp"]);return Object.assign(Object.assign({},i),{timestampMs:t,kind:"serializable"})},$t=e=>h(null==e?void 0:e.name)||"unnamed-file",Kt=e=>{if(!e||"object"!=typeof e||Array.isArray(e))return e;if(!(e=>"object"==typeof e&&null!==e&&!Array.isArray(e)&&"mode"in e)(e))return e;const t=e;return"file"===t.mode?(e=>{var t;return g(e.file)?e.file:null!==(t=h(e.fileName))&&void 0!==t?t:x(e.fileName)})(t):"text"===t.mode?x(t.text):e},Qt=e=>{const t=(null!=e?e:"").replace(/<[^>]*>/g,"").trim();if(!t)return;const r=t.indexOf(":");return r>-1?t.substring(r+1).trim():t},Jt=e=>{var t;const r={};for(const n of e)(null==n?void 0:n.name)&&(r[n.name]=null!==(t=n.defaultValue)&&void 0!==t?t:"");return r},Xt=(e,t,r,n,i,o)=>!(!e||!t||"order-result"===r)&&("drawing"===r?Boolean(o&&o>0)||Boolean(i):n>0&&"initial"!==r),Yt=(e,t,r,n)=>{if(n)return!1;return("workspace-selection"===r||"export-options"===r)&&e},Zt=e=>{var t;return null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e};function er(e){return l(this,void 0,void 0,(function*(){if(!Array.isArray(e)||!e.length)return[];const t="undefined"!=typeof globalThis?globalThis:void 0,n=null==t?void 0:t.__ESRI_TEST_STUB__;if("function"==typeof n)return n(e);try{const t=yield Promise.resolve().then(r.bind(r,2686)),n=null==t?void 0:t.loadArcGISJSAPIModules;if("function"!=typeof n)throw new Error("ARCGIS_MODULE_ERROR");return((yield n(e))||[]).map(Zt)}catch(e){throw new Error("ARCGIS_MODULE_ERROR")}}))}},3624:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},3744:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 12"><path fill="#fff" d="M11.569 4.808 10.5 6.683v2.79a.67.67 0 0 1-.667.652h-.458V2.906a.285.285 0 0 0-.281-.281H4.5V.491a.105.105 0 0 1 .158-.093L6.566 1.5h3.267a.667.667 0 0 1 .667.668v1.657l.953.551a.31.31 0 0 1 .116.432M4.5 6.75h3V4.5h-3zm2.858 1.875H2.906a.285.285 0 0 1-.281-.281V1.5h-.457a.67.67 0 0 0-.668.668v2.707L.416 6.75a.32.32 0 0 0 .117.431l.967.54V9.45a.67.67 0 0 0 .668.675H5.4l1.943 1.125a.105.105 0 0 0 .143-.038.1.1 0 0 0 .014-.052V8.764a.143.143 0 0 0-.142-.139"></path></svg>'},3890:(e,t,r)=>{"use strict";r.d(t,{$5:()=>w,$N:()=>p,$d:()=>g,Ao:()=>Y,DU:()=>z,E6:()=>a,Hz:()=>ne,Ko:()=>v,M4:()=>K,Pi:()=>b,Rv:()=>R,T6:()=>l,Xz:()=>k,dC:()=>h,dR:()=>Z,e6:()=>E,h2:()=>X,nW:()=>$,x0:()=>q,xH:()=>J});var n=r(9778),i=r(3271),o=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const s=e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e.trim());return Number.isFinite(t)?t:null}return null},a=e=>{const t=s(e);return null!==t&&Number.isInteger(t)},l=e=>null!==s(e),u=e=>"number"==typeof e&&e>=100&&e<=599,c=e=>"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then,d=e=>"object"==typeof e&&null!==e&&"polygon"===e.type,f=e=>e.toLowerCase().includes(n.Gm);function h(e,t){const r=(e||"").trim();if(!r)return{ok:!1,reason:"invalid_url"};try{const e=new URL(r),n=e.protocol.toLowerCase();if("http:"!==n&&"https:"!==n)return{ok:!1,reason:"invalid_url"};if((null==t?void 0:t.requireHttps)&&"https:"!==n)return{ok:!1,reason:"require_https"};if(e.username||e.password)return{ok:!1,reason:"invalid_url"};if(e.search||e.hash)return{ok:!1,reason:"no_query_or_hash"};if((null==t?void 0:t.disallowRestForWebhook)&&/\/fmerest(?:\/|$)/i.test(e.pathname))return{ok:!1,reason:"disallow_fmerest_for_webhook"};if(f(e.pathname))return{ok:!1,reason:"invalid_url"};if(e.hostname.endsWith("."))return{ok:!1,reason:"invalid_url"};if(null==t?void 0:t.strict){const t=e.hostname||"";if(!t.includes(".")||t.length<4)return{ok:!1,reason:"invalid_url"}}return{ok:!0}}catch(e){return{ok:!1,reason:"invalid_url"}}}const p=e=>e&&n.zo[e]||"invalid_url",m=e=>{for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r<32||127===r)return!0}return!1},v=e=>{if(!e||"object"!=typeof e)return;const t=e;for(const e of n.bD){const r=t[e];if(u(r))return r}const r=t.details;if(r&&"object"==typeof r){const e=r.httpStatus||r.status;if(u(e))return e}const o=(0,i.PE)(e);if("string"==typeof o){const e=/status:\s*(\d{3})/i.exec(o);if(e){const t=parseInt(e[1],10);if(u(t))return t}}},g=e=>{if(e&&"object"==typeof e){const t=e;if("boolean"==typeof t.isRetryable)return t.isRetryable}const t=v(e);return!t||t<100||(t>=500||(408===t||429===t))},y=e=>{if("number"==typeof e)return n.KG[e]?n.KG[e]:e>=500?"errorServerIssue":void 0},b=(e,t)=>{if(null==t&&(t=v(e)),e&&"object"==typeof e){const r=e.code;if("string"==typeof r){if("REQUEST_FAILED"===r)return y(t)||"errorServerIssue";const e=n.jF[r];if(e)return e}}const r=y(t);if(r)return r;const i=null==e?void 0:e.message;if("string"==typeof i){const e=(e=>{const t=e.toLowerCase();for(const{pattern:e,key:r}of n.a9)if(e.test(t))return r})(i);if(e)return e}return"errorUnknown"},E=e=>{if(!e.serverUrl||!e.token||!e.repository)throw new Error("Missing required configuration")},O=e=>e?n.LZ.filter((t=>{var r;return!(null===(r=e[t])||void 0===r?void 0:r.trim())})):[...n.LZ];const R=(e,t,r)=>{var n;const i=O(e),o=null===(n=null==r?void 0:r.mapConfigured)||void 0===n||n;return i.length>0||!o?{isValid:!1,canProceed:!1,requiresSettings:!0}:{isValid:!0,canProceed:!0,requiresSettings:!1}};const S=(e,t={})=>{var r,i,o,s,a,l;return{message:e,type:null!==(r=t.type)&&void 0!==r?r:n.By.NETWORK,code:null!==(i=t.code)&&void 0!==i?i:"UNKNOWN",severity:null!==(o=t.severity)&&void 0!==o?o:n.MU.ERROR,recoverable:null===(s=t.recoverable)||void 0===s||s,timestamp:new Date,timestampMs:Date.now(),userFriendlyMessage:null!==(a=t.userFriendlyMessage)&&void 0!==a?a:"",suggestion:null!==(l=t.suggestion)&&void 0!==l?l:"",retry:t.retry,kind:"runtime"}},w=(e,t,r,n,i)=>S(n(e)||e,Object.assign(Object.assign({type:t,code:r},i),{suggestion:(null==i?void 0:i.suggestion)||n("connectionSettingsHint")||""})),T=(e,t)=>({valid:!1,error:S(e,{type:n.By.GEOMETRY,code:t})}),k=e=>{const t=e.trim();return/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(t)},A=e=>{if("object"!=typeof e||null===e)return{};const t=e;return{wkid:"number"==typeof t.wkid?t.wkid:void 0,latestWkid:"number"==typeof t.latestWkid?t.latestWkid:void 0}},I=e=>{const t=e;if(null==t?void 0:t.isWebMercator)return!0;const{wkid:r,latestWkid:i}=A(e);return r===n.yX.WEB_MERCATOR||i===n.yX.WEB_MERCATOR},_=e=>{const t=e;if((null==t?void 0:t.isGeographic)||(null==t?void 0:t.isWGS84))return!0;const{wkid:r,latestWkid:i}=A(e);return r===n.yX.WGS84||i===n.yX.WGS84},C=(e,t,r)=>o(void 0,void 0,void 0,(function*(){if(!e)return 0;const n=e.geodesicArea;if(r&&"function"==typeof n){const e=yield n(t,"square-meters");if(Number.isFinite(e)&&e>0)return e}const i=e.planarArea;if("function"==typeof i){const e=yield i(t,"square-meters");if(Number.isFinite(e)&&e>0)return e}return 0})),M=e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e};let x,L,j,N;const D=e=>o(void 0,void 0,void 0,(function*(){var t,r,n,s,a,l,u,c,d,f;try{const h=null===(t=null==e?void 0:e.esriConfig)||void 0===t?void 0:t.geometryServiceUrl;if("string"==typeof h&&h)return h;const p=yield(e=>o(void 0,void 0,void 0,(function*(){if(null==e?void 0:e.esriConfig)return e.esriConfig;if(void 0!==N)return N;try{const[e]=yield(0,i.ps)(["esri/config"]);N=M(e)}catch(e){N=null}return N})))(e);if(!p)return null;const m=p.geometryServiceUrl;if("string"==typeof m&&m)return m;const v=null===(r=p.request)||void 0===r?void 0:r.geometryServiceUrl;if("string"==typeof v&&v)return v;const g=(null===(a=null===(s=null===(n=p.portalSelf)||void 0===n?void 0:n.helperServices)||void 0===s?void 0:s.geometry)||void 0===a?void 0:a.url)||(null===(c=null===(u=null===(l=p.portalInfo)||void 0===l?void 0:l.helperServices)||void 0===u?void 0:u.geometry)||void 0===c?void 0:c.url)||(null===(f=null===(d=p.helperServices)||void 0===d?void 0:d.geometry)||void 0===f?void 0:f.url);if("string"==typeof g&&g)return g}catch(e){}return null})),P=e=>o(void 0,void 0,void 0,(function*(){if(!e)return null;try{const t=c(e)?yield e:e;if(d(t))return t}catch(e){}return null})),U=(e,t,r,n)=>o(void 0,void 0,void 0,(function*(){const i=null==e?void 0:e[t];if("function"!=typeof i)return null;try{const e=i(r,...n);return yield P(e)}catch(e){return null}})),F=(e,t)=>o(void 0,void 0,void 0,(function*(){const r=null==e?void 0:e.spatialReference;if(!(_(r)||I(r)))return e;const n=yield(e=>o(void 0,void 0,void 0,(function*(){var t;if(null===(t=null==e?void 0:e.normalizeUtils)||void 0===t?void 0:t.normalizeCentralMeridian)return e.normalizeUtils;if(void 0!==x)return x;try{const[e]=yield(0,i.ps)(["esri/geometry/support/normalizeUtils"]);x=M(e)}catch(e){x=null}return x})))(t);if(!(null==n?void 0:n.normalizeCentralMeridian))return e;try{const t=yield n.normalizeCentralMeridian([e]),r=Array.isArray(t)?t[0]:null;if(d(r))return r}catch(e){}return e})),V=(e,t)=>o(void 0,void 0,void 0,(function*(){let r=e;return r=yield F(r,t),r=yield((e,t)=>o(void 0,void 0,void 0,(function*(){var r,i;const o=null==e?void 0:e.spatialReference,s=_(o)||I(o),a=_(o);let l=e;if(s){const e=[n.In,"meters"],i=null!==(r=yield U(null==t?void 0:t.geometryEngineAsync,"geodesicDensify",l,e))&&void 0!==r?r:yield U(null==t?void 0:t.geometryEngine,"geodesicDensify",l,e);i&&(l=i)}const u=[a?Math.max(n.In*n.qc,n.wF):n.In],c=null!==(i=yield U(null==t?void 0:t.geometryEngineAsync,"densify",l,u))&&void 0!==i?i:yield U(null==t?void 0:t.geometryEngine,"densify",l,u);return c&&(l=c),l})))(r,t),r})),B=(e,t)=>o(void 0,void 0,void 0,(function*(){var r;const n=yield D(t);if(!n)return 0;const{geometryService:s,AreasAndLengthsParameters:a}=yield o(void 0,void 0,void 0,(function*(){if(void 0!==L&&void 0!==j)return{geometryService:L,AreasAndLengthsParameters:j};try{const[e,t]=yield(0,i.ps)(["esri/rest/geometryService","esri/rest/support/AreasAndLengthsParameters"]);L=M(e),j=M(t)}catch(e){L=null,j=null}return{geometryService:L,AreasAndLengthsParameters:j}}));if(!(null==s?void 0:s.areasAndLengths)||"function"!=typeof s.areasAndLengths||!a)return 0;try{const t=new a({polygons:[e],areaUnit:"square-meters",lengthUnit:"meters",calculationType:"geodesic",geodesic:!0}),i=yield s.areasAndLengths(n,t),o=null===(r=null==i?void 0:i.areas)||void 0===r?void 0:r[0];if(Number.isFinite(o)&&Math.abs(o)>0)return Math.abs(o)}catch(e){}return 0})),W=(e,t)=>{if(!e)return null;if("function"==typeof e)return e;if("object"!=typeof e)return null;const r=e,n=t?["geodesicArea","geodesic","planarArea","planar"]:["planarArea","planar","geodesicArea","geodesic"];for(const e of n){const t="function"==typeof(i=r[e])?i:null;if(t)return t}var i;return r.area?W(r.area,t):null},q=(e,t)=>o(void 0,void 0,void 0,(function*(){if(!e||"polygon"!==e.type)return 0;const r=e;let n=r;try{n=yield V(r,t)}catch(e){n=r}const i=(e=>{var t;try{if(_(e.spatialReference)||I(e.spatialReference))return!0;const r=null===(t=e.toJSON)||void 0===t?void 0:t.call(e);if(r&&"object"==typeof r){const e=r.spatialReference;return _(e)||I(e)}}catch(e){}return!1})(n),s=((e,t,r)=>{const n=[],i=W(null==t?void 0:t.geometryOperators,r);return i&&n.push((()=>o(void 0,void 0,void 0,(function*(){try{const t=i.length>=2?[e,"square-meters"]:[e],r=i(...t),n=c(r)?yield r:r;if("number"==typeof n&&Math.abs(n)>0)return Math.abs(n)}catch(e){}return 0})))),(null==t?void 0:t.geometryEngineAsync)&&n.push((()=>C(t.geometryEngineAsync,e,r))),(null==t?void 0:t.geometryEngine)&&n.push((()=>C(t.geometryEngine,e,r))),n})(n,t,i);for(const e of s)try{const t=yield e();if(t>0)return t}catch(e){}const a=yield B(n,t);return a>0?a:0})),G=e=>{if(!Array.isArray(e)||0===e.length)return!1;const t=e[0],r=e[e.length-1];return Boolean(t&&r&&Array.isArray(t)&&Array.isArray(r)&&t[0]===r[0]&&t[1]===r[1])},z=(e,t)=>o(void 0,void 0,void 0,(function*(){if(!e)return T("geometryMissingMessage","NO_GEOMETRY");if("polygon"!==e.type)return T("geometryPolygonRequired","INVALID_GEOMETRY_TYPE");if(!(null==t?void 0:t.geometryEngine)&&!(null==t?void 0:t.geometryEngineAsync))return{valid:!0};try{const r=t.geometryEngine,n=t.geometryEngineAsync;let i=e;const s=yield((e,t,r)=>o(void 0,void 0,void 0,(function*(){var n;const i=null==r?void 0:r.simplify;if("function"==typeof i){const o=yield i(e),s=yield P(o);if(!s)return null;const a=null!==(n=null==r?void 0:r.isSimple)&&void 0!==n?n:null==t?void 0:t.isSimple;if("function"==typeof a){const e=a(s);if(!(c(e)?yield e:e))return null}return s}const o=null==t?void 0:t.simplify;if("function"==typeof o){const r=yield P(o(e));if(!r)return null;const n=null==t?void 0:t.isSimple;if("function"==typeof n){const e=n(r);if(!(c(e)?yield e:e))return null}return r}const s=null==t?void 0:t.isSimple;if("function"==typeof s){const t=s(e);if(!(c(t)?yield t:t))return null}return e})))(i,r,n);if(!s)return T("geometryNotSimple","INVALID_GEOMETRY");i=s;const a=i.rings,l=Array.isArray(a)?a:[];if(!(e=>{if(!Array.isArray(e)||0===e.length)return!1;for(const t of e){if(!Array.isArray(t)||t.length<4)return!1;if(!G(t))return!1}return!0})(l))return T("geometryInvalidCode","GEOMETRY_INVALID");const u=yield q(i,t);return!u||u<=0?T("geometryInvalidCode","GEOMETRY_INVALID"):((e,t,r,n)=>{if(e.length<=1)return!0;const i=null==r?void 0:r.contains;if("function"!=typeof i)return!0;try{const r=null==n?void 0:n.Polygon;if(!r)return!0;const o=r.fromJSON({rings:[e[0]],spatialReference:t.spatialReference});for(let n=1;n<e.length;n++)if(!i(o,r.fromJSON({rings:[e[n]],spatialReference:t.spatialReference})))return!1}catch(e){return!0}return!0})(l,i,r,t)?{valid:!0,simplified:i}:T("geometryInvalidCode","GEOMETRY_INVALID")}catch(e){return T("geometryValidationFailedMessage","GEOMETRY_VALIDATION_ERROR")}})),H=e=>{if("number"==typeof e&&Number.isFinite(e)&&!(e<=0))return e},$=(e,t)=>{const r=Math.abs(e)||0,n=H(null==t?void 0:t.maxArea),i=H(null==t?void 0:t.largeArea),o="number"==typeof n&&r>n;return{area:r,maxThreshold:n,warningThreshold:i,exceedsMaximum:o,shouldWarn:!o&&"number"==typeof i&&r>i}},K=(e,t)=>{const r=H(t);return!r||e<=r?{ok:!0}:{ok:!1,message:"geometryAreaTooLargeCode",code:"AREA_TOO_LARGE"}},Q=/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/,J=e=>{if(!e||"string"!=typeof e)return{valid:!1,error:"SCHEDULE_START_REQUIRED"};const t=e.trim();if(!Q.test(t))return{valid:!1,error:"SCHEDULE_START_INVALID_FORMAT"};try{const e=t.replace(" ","T"),r=new Date(e);if(isNaN(r.getTime()))return{valid:!1,error:"SCHEDULE_START_INVALID_DATE"};const n=new Date,i=new Date(n.getTime()-6e4);return{valid:!0,isPast:r<i}}catch(e){return{valid:!1,error:"SCHEDULE_START_PARSE_ERROR"}}},X=e=>{if(!e||"string"!=typeof e)return{valid:!1,error:"SCHEDULE_NAME_REQUIRED"};const t=e.trim();if(0===t.length)return{valid:!1,error:"SCHEDULE_NAME_REQUIRED"};if(t.length>128)return{valid:!1,error:"SCHEDULE_NAME_TOO_LONG"};return/[<>:"|?*]/.test(t)||m(t)?{valid:!1,error:"SCHEDULE_NAME_INVALID_CHARS"}:{valid:!0}},Y=e=>{if(!e||"string"!=typeof e)return{valid:!1,error:"SCHEDULE_CATEGORY_REQUIRED"};const t=e.trim();return 0===t.length?{valid:!1,error:"SCHEDULE_CATEGORY_REQUIRED"}:t.length>128?{valid:!1,error:"SCHEDULE_CATEGORY_TOO_LONG"}:{valid:!0}},Z=e=>{const t={},r={},n=J(e.start||"");n.valid?n.isPast&&(r.pastTime=!0,r.pastTimeMessage="SCHEDULE_START_IN_PAST"):t.start=n.error;const i=X(e.name||"");i.valid||(t.name=i.error);const o=Y(e.category||"");o.valid||(t.category=o.error);const s=Object.keys(t).length>0,a=Object.keys(r).length>0;return Object.assign(Object.assign({valid:!s},s&&{errors:t}),a&&{warnings:r})},ee=(e,t,r)=>({success:!0,blob:e,email:r,workspaceName:t,downloadFilename:`${t}_export.zip`,blobMetadata:{type:(0,i.Nn)(e.type),size:"number"==typeof e.size&&Number.isFinite(e.size)?e.size:void 0}}),te=(e,t,r)=>({success:!0,jobId:"number"==typeof e.jobId?e.jobId:void 0,email:r,workspaceName:t,downloadUrl:e.url,downloadFilename:e.url?`${t}_export.zip`:void 0,status:e.status,statusMessage:e.message}),re=(e,t,r="FME_JOB_FAILURE")=>Object.assign(Object.assign(Object.assign({success:!1,message:e,code:r},"number"==typeof(null==t?void 0:t.jobId)&&{jobId:t.jobId}),(null==t?void 0:t.status)&&{status:t.status}),(null==t?void 0:t.message)&&{statusMessage:t.message}),ne=(e,t,r,n)=>{const o=e,s=null==o?void 0:o.data;if(!s)return{success:!1,message:n("noDataInResponse"),code:"NO_DATA"};if(s.blob instanceof Blob)return ee(s.blob,t,r);const a=ie(o),l=(a.status||"").toString().trim().toUpperCase();if("CANCELLED"===l||"CANCELED"===l){const e=a.message||"",t=e.toLowerCase(),r=["timeout","time limit","time-limit","max execution","maximum execution","max runtime","maximum runtime","max run time"].some((e=>t.includes(e)));return{success:!1,cancelled:!0,message:n(r?"jobCancelledTimeout":"jobCancelled"),code:r?"FME_JOB_CANCELLED_TIMEOUT":"FME_JOB_CANCELLED",status:a.status,statusMessage:e,jobId:"number"==typeof a.jobId?a.jobId:void 0}}if(new Set(["FAILURE","FAILED","JOB_FAILURE","FME_FAILURE"]).has(l)){const e=(0,i.Nn)(a.message)||n("jobFailed");return re(e,a,"FME_JOB_FAILURE")}var u;return"SUCCESS"===l||"string"==typeof(u=a.url)&&/^https?:\/\//.test(u)||"number"==typeof a.jobId&&a.jobId>0?te(a,t,r):re(a.message||n("errorJobSubmission"),a)},ie=e=>{var t,r,n;const i=e||{},o=(null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.serviceResponse)||(null==i?void 0:i.data)||i;return{status:(null===(r=null==o?void 0:o.statusInfo)||void 0===r?void 0:r.status)||(null==o?void 0:o.status),message:(null===(n=null==o?void 0:o.statusInfo)||void 0===n?void 0:n.message)||(null==o?void 0:o.message),jobId:"number"==typeof(null==o?void 0:o.jobID)?o.jobID:null==o?void 0:o.id,url:null==o?void 0:o.url}}},3930:(e,t,r)=>{"use strict";r.d(t,{I:()=>_});var n=r(9658),i=r(6261),o=r(9757),s=r(6500),a=r(4658),l=r(4880),u=r(2775),c=class extends s.Q{constructor(e,t){super(),this.options=t,this.#n=e,this.#i=null,this.#o=(0,a.T)(),this.bindMethods(),this.setOptions(t)}#n;#s=void 0;#a=void 0;#l=void 0;#u;#c;#o;#i;#d;#f;#h;#p;#m;#v;#g=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),d(this.#s,this.options)?this.#y():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return f(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return f(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#E(),this.#O(),this.#s.removeObserver(this)}setOptions(e){const t=this.options,r=this.#s;if(this.options=this.#n.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#s))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#s.setOptions(this.options),t._defaulted&&!(0,l.f8)(this.options,t)&&this.#n.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});const n=this.hasListeners();n&&h(this.#s,r,this.options,t)&&this.#y(),this.updateResult(),!n||this.#s===r&&(0,l.Eh)(this.options.enabled,this.#s)===(0,l.Eh)(t.enabled,this.#s)&&(0,l.d2)(this.options.staleTime,this.#s)===(0,l.d2)(t.staleTime,this.#s)||this.#S();const i=this.#w();!n||this.#s===r&&(0,l.Eh)(this.options.enabled,this.#s)===(0,l.Eh)(t.enabled,this.#s)&&i===this.#v||this.#T(i)}getOptimisticResult(e){const t=this.#n.getQueryCache().build(this.#n,e),r=this.createResult(t,e);return function(e,t){if(!(0,l.f8)(e.getCurrentResult(),t))return!0;return!1}(this,r)&&(this.#l=r,this.#c=this.options,this.#u=this.#s.state),r}getCurrentResult(){return this.#l}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"!==r||this.options.experimental_prefetchInRender||"pending"!==this.#o.status||this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,r))})}trackProp(e){this.#g.add(e)}getCurrentQuery(){return this.#s}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#n.defaultQueryOptions(e),r=this.#n.getQueryCache().build(this.#n,t);return r.fetch().then((()=>this.createResult(r,t)))}fetch(e){return this.#y({...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#l)))}#y(e){this.#R();let t=this.#s.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.lQ)),t}#S(){this.#E();const e=(0,l.d2)(this.options.staleTime,this.#s);if(l.S$||this.#l.isStale||!(0,l.gn)(e))return;const t=(0,l.j3)(this.#l.dataUpdatedAt,e)+1;this.#p=u.zs.setTimeout((()=>{this.#l.isStale||this.updateResult()}),t)}#w(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#T(e){this.#O(),this.#v=e,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#s)&&(0,l.gn)(this.#v)&&0!==this.#v&&(this.#m=u.zs.setInterval((()=>{(this.options.refetchIntervalInBackground||n.m.isFocused())&&this.#y()}),this.#v))}#b(){this.#S(),this.#T(this.#w())}#E(){this.#p&&(u.zs.clearTimeout(this.#p),this.#p=void 0)}#O(){this.#m&&(u.zs.clearInterval(this.#m),this.#m=void 0)}createResult(e,t){const r=this.#s,n=this.options,i=this.#l,s=this.#u,u=this.#c,c=e!==r?e.state:this.#a,{state:f}=e;let m,v={...f},g=!1;if(t._optimisticResults){const i=this.hasListeners(),s=!i&&d(e,t),a=i&&h(e,r,t,n);(s||a)&&(v={...v,...(0,o.k)(f.data,e.options)}),"isRestoring"===t._optimisticResults&&(v.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:E}=v;m=v.data;let O=!1;if(void 0!==t.placeholderData&&void 0===m&&"pending"===E){let e;i?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(e=i.data,O=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,void 0!==e&&(E="success",m=(0,l.pl)(i?.data,e,t),g=!0)}if(t.select&&void 0!==m&&!O)if(i&&m===s?.data&&t.select===this.#d)m=this.#f;else try{this.#d=t.select,m=t.select(m),m=(0,l.pl)(i?.data,m,t),this.#f=m,this.#i=null}catch(e){this.#i=e}this.#i&&(y=this.#i,m=this.#f,b=Date.now(),E="error");const R="fetching"===v.fetchStatus,S="pending"===E,w="error"===E,T=S&&R,k=void 0!==m,A={status:E,fetchStatus:v.fetchStatus,isPending:S,isSuccess:"success"===E,isError:w,isInitialLoading:T,isLoading:T,data:m,dataUpdatedAt:v.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>c.dataUpdateCount||v.errorUpdateCount>c.errorUpdateCount,isFetching:R,isRefetching:R&&!S,isLoadingError:w&&!k,isPaused:"paused"===v.fetchStatus,isPlaceholderData:g,isRefetchError:w&&k,isStale:p(e,t),refetch:this.refetch,promise:this.#o,isEnabled:!1!==(0,l.Eh)(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===A.status?e.reject(A.error):void 0!==A.data&&e.resolve(A.data)},n=()=>{const e=this.#o=A.promise=(0,a.T)();t(e)},i=this.#o;switch(i.status){case"pending":e.queryHash===r.queryHash&&t(i);break;case"fulfilled":"error"!==A.status&&A.data===i.value||n();break;case"rejected":"error"===A.status&&A.error===i.reason||n()}}return A}updateResult(){const e=this.#l,t=this.createResult(this.#s,this.options);if(this.#u=this.#s.state,this.#c=this.options,void 0!==this.#u.data&&(this.#h=this.#s),(0,l.f8)(t,e))return;this.#l=t;this.#k({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#g.size)return!0;const n=new Set(r??this.#g);return this.options.throwOnError&&n.add("error"),Object.keys(this.#l).some((t=>{const r=t;return this.#l[r]!==e[r]&&n.has(r)}))})()})}#R(){const e=this.#n.getQueryCache().build(this.#n,this.options);if(e===this.#s)return;const t=this.#s;this.#s=e,this.#a=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#k(e){i.jG.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(this.#l)})),this.#n.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})}))}};function d(e,t){return function(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&f(e,t,t.refetchOnMount)}function f(e,t,r){if(!1!==(0,l.Eh)(t.enabled,e)&&"static"!==(0,l.d2)(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&p(e,t)}return!1}function h(e,t,r,n){return(e!==t||!1===(0,l.Eh)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&p(e,r)}function p(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&e.isStaleByTime((0,l.d2)(t.staleTime,e))}var m=r(8972),v=r(7665);r(4848);function g(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var y=m.createContext(g()),b=()=>m.useContext(y),E=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},O=e=>{m.useEffect((()=>{e.clearReset()}),[e])},R=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||(0,l.GU)(r,[e.error,n])),S=m.createContext(!1),w=()=>m.useContext(S),T=(S.Provider,e=>{if(e.suspense){const t=1e3,r=e=>"static"===e?e:Math.max(e??t,t),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>r(n(...e)):r(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}}),k=(e,t)=>e.isLoading&&e.isFetching&&!t,A=(e,t)=>e?.suspense&&t.isPending,I=(e,t,r)=>t.fetchOptimistic(e).catch((()=>{r.clearReset()}));function _(e,t){return function(e,t,r){const n=w(),o=b(),s=(0,v.jE)(r),a=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=n?"isRestoring":"optimistic",T(a),E(a,o),O(o);const u=!s.getQueryCache().get(a.queryHash),[c]=m.useState((()=>new t(s,a))),d=c.getOptimisticResult(a),f=!n&&!1!==e.subscribed;if(m.useSyncExternalStore(m.useCallback((e=>{const t=f?c.subscribe(i.jG.batchCalls(e)):l.lQ;return c.updateResult(),t}),[c,f]),(()=>c.getCurrentResult()),(()=>c.getCurrentResult())),m.useEffect((()=>{c.setOptions(a)}),[a,c]),A(a,d))throw I(a,c,o);if(R({result:d,errorResetBoundary:o,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;if(s.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!l.S$&&k(d,n)){const e=u?I(a,c,o):s.getQueryCache().get(a.queryHash)?.promise;e?.catch(l.lQ).finally((()=>{c.updateResult()}))}return a.notifyOnChangeProps?d:c.trackResult(d)}(e,c,t)}},4321:e=>{"use strict";e.exports=i},4337:e=>{"use strict";e.exports=o},4540:(e,t,r)=>{"use strict";r.d(t,{CY:()=>E,DF:()=>m,_L:()=>y,fW:()=>b,k3:()=>O});var n=r(9778),i=r(3271),o=r(3890),s=r(2242),a=r(8424),l=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class u{constructor(){this.cache=new Map}execute(e,t){return l(this,void 0,void 0,(function*(){const r=this.cache.get(e);if(r)return r;const n=t();return this.cache.set(e,n),n.finally((()=>{this.cache.delete(e)}))}))}}const c={healthCheck:new u,validateConnection:new u},d=Object.freeze(["Failed to fetch","NetworkError","net::","DNS","ENOTFOUND","ECONNREFUSED","timeout","Name or service not known","ERR_NAME_NOT_RESOLVED","Unable to load","/sharing/proxy","proxy"]),f=Object.freeze(["Unable to load","/sharing/proxy","proxy"]),h=e=>d.some((t=>e.toLowerCase().includes(t.toLowerCase()))),p=e=>f.some((t=>e.toLowerCase().includes(t.toLowerCase())));class m{isRenderableParam(e){return!(!e||"string"!=typeof e.name)&&(!n.oh.has(e.name)&&(!n.vN.has(e.type)&&(!n.np.has(e.type)||(Array.isArray(e.listOptions)&&e.listOptions.length>0||null!==e.defaultValue&&void 0!==e.defaultValue&&""!==e.defaultValue))))}getRenderableParameters(e){return e.filter((e=>this.isRenderableParam(e)))}mapListOptions(e){if(null==e?void 0:e.length)return e.map((e=>{const t=(0,i.sL)(e.value),r="string"==typeof e.caption&&e.caption.trim()||String(t);return Object.assign(Object.assign(Object.assign(Object.assign({label:r,value:t},e.description&&{description:e.description}),"string"==typeof e.path&&e.path&&{path:e.path}),e.disabled&&{disabled:!0}),e.metadata&&{metadata:e.metadata})}))}getDecimalPrecision(e){const t=e.decimalPrecision;if("number"!=typeof t||!Number.isFinite(t)||t<0)return;const r=Math.floor(t);return r>=0?Math.min(r,6):void 0}getSliderMeta(e,t,r){const i="boolean"==typeof e.minimumExclusive&&e.minimumExclusive,o="boolean"==typeof e.maximumExclusive&&e.maximumExclusive;if(e.type!==n.QL.RANGE_SLIDER)return{min:"number"==typeof e.minimum?e.minimum:void 0,max:"number"==typeof e.maximum?e.maximum:void 0,minExclusive:i,maxExclusive:o};const s="number"==typeof e.minimum,a="number"==typeof e.maximum,l="number"==typeof t&&t>=0?Math.floor(t):void 0,u=s?e.minimum:r?0:void 0,c=a?e.maximum:r?100:void 0;let d;return void 0!==l?d=l>0?Number(`0.${"0".repeat(l-1)}1`):1:r&&(d=1),{min:u,max:c,step:d,minExclusive:i,maxExclusive:o}}resolveBooleanFlag(e,t){if((0,i.Qd)(e))for(const r of t){if(!(r in e))continue;const t=e[r];if("boolean"==typeof t)return t;if("number"==typeof t){if(1===t)return!0;if(0===t)return!1}if("string"==typeof t){const e=t.trim().toLowerCase();if(["true","1","yes","y","on"].includes(e))return!0;if(["false","0","no","n","off"].includes(e))return!1}}}shouldUseRangeSliderUi(e){if(e.type!==n.QL.RANGE_SLIDER)return!1;if(e.control&&"object"==typeof e.control){const t=e.control;if("boolean"==typeof t.useRangeSlider)return t.useRangeSlider;if("boolean"==typeof t.useSlider)return t.useSlider}const t=(e.description||"").toLowerCase(),r=(e.name||"").toLowerCase();return!(t.includes("no slider")||t.includes("noslider")||t.includes("without slider"))&&!(!t.includes("slider")&&!r.includes("slider"))}getParameterMetadata(e){const t=(0,i.Qd)(e.defaultValue)?e.defaultValue:void 0;return(0,i.W1)([e.metadata,e.attributes,e.definition,e.control,e.schema,e.ui,e.extra,t])}normalizeOptionItem(e,t){var r,n,o,s,a,l,u,c;if(null==e)return null;if("string"==typeof e||"number"==typeof e){const t=(0,i.sL)(e);return{label:String(t),value:t,isLeaf:!0}}if(!(0,i.Qd)(e))return null;const d=e,f=null!==(r=(0,i.Xl)(d,["caption","label","name","title","displayName"]))&&void 0!==r?r:`Option ${t+1}`,h=null!==(c=null!==(u=null!==(l=null!==(a=null!==(s=null!==(o=null!==(n=d.value)&&void 0!==n?n:d.id)&&void 0!==o?o:d.code)&&void 0!==s?s:d.path)&&void 0!==a?a:d.name)&&void 0!==l?l:d.key)&&void 0!==u?u:f)&&void 0!==c?c:t,p=(0,i.sL)(h),m=(0,i.vq)(d.children),v=null==m?void 0:m.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({label:f,value:p},(0,i.Xl)(d,["description","detail","tooltip","hint","helper"])&&{description:(0,i.Xl)(d,["description","detail","tooltip","hint","helper"])}),(0,i.Xl)(d,["path","fullPath","groupPath","folder"])&&{path:(0,i.Xl)(d,["path","fullPath","groupPath","folder"])}),(!0===d.disabled||!0===d.readOnly||!1===d.selectable)&&{disabled:!0}),(null==v?void 0:v.length)&&{children:v}),(0,i.IT)(d)&&{metadata:(0,i.IT)(d)}),(null==v?void 0:v.length)?{}:{isLeaf:!0})}collectMetaOptions(e){const t=["options","items","values","choices","entries","list","records","data","nodes","children"];for(const r of t){const t=(0,i.vq)(e[r]);if(!(null==t?void 0:t.length))continue;const n=t.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e));if(n.length)return n}}extractScriptedOptions(e,t){const r=this.getParameterMetadata(e),n=this.collectMetaOptions(r);return(null==n?void 0:n.length)?n:t}buildScriptedNodes(e,t){if(!(null==e?void 0:e.length))return;return e.some((e=>e.children&&e.children.length>0))?this.buildNodesFromHierarchy(e,t):this.buildNodesFromPaths(e,t)}buildNodesFromHierarchy(e,t){const r=(e,n)=>{var i;const o=e.path?e.path.split(t).map((e=>e.trim())).filter(Boolean):n?[...n,e.label]:[e.label],s=e.metadata&&"string"==typeof e.metadata.id&&e.metadata.id||(null!=e.value?String(e.value):o.join("|")),a=(null===(i=e.children)||void 0===i?void 0:i.length)?e.children.map((e=>r(e,o))):void 0;return Object.assign(Object.assign(Object.assign(Object.assign({id:s,label:e.label,path:o},void 0!==e.value?{value:e.value}:{}),e.disabled?{disabled:!0}:{}),e.metadata?{metadata:e.metadata}:{}),a&&a.length?{children:a}:{isLeaf:!0})};return e.map((e=>r(e,void 0)))}buildNodesFromPaths(e,t){const r=new RegExp(`[${t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}]`),n=[],i=new Map,o=(e,t)=>{const r=e.join("|")||(t?String(t.value):"root"),s=i.get(r);if(s)return s;const a={id:r,label:e[e.length-1]||(null==t?void 0:t.label)||r,path:[...e],children:[]};if(i.set(r,a),e.length>1){const t=e.slice(0,-1);o(t).children.push(a)}else n.push(a);return a};for(const t of e){const e=t.path?t.path.split(r).map((e=>e.trim())).filter(Boolean):[t.label],n=o(e,t);n.value=t.value,t.metadata&&(n.metadata=Object.assign(Object.assign({},n.metadata||{}),t.metadata)),t.disabled&&(n.disabled=!0),t.description&&(n.metadata=Object.assign(Object.assign({},n.metadata||{}),{description:t.description}))}const s=e=>{const t=e.children.map((e=>s(e)));return Object.assign(Object.assign(Object.assign(Object.assign({id:e.id,label:e.label,path:e.path},void 0!==e.value?{value:e.value}:{}),e.disabled?{disabled:!0}:{}),e.metadata?{metadata:e.metadata}:{}),t.length?{children:t}:{isLeaf:!0})};return n.map((e=>s(e)))}deriveTableConfig(e){var t,r,n;const o=this.getParameterMetadata(e),s=null!==(n=null!==(r=null!==(t=(0,i.vq)(o.columns))&&void 0!==t?t:(0,i.vq)(o.fields))&&void 0!==r?r:(0,i.vq)(o.tableColumns))&&void 0!==n?n:(0,i.vq)(o.schema);if(!(null==s?void 0:s.length))return;const a=s.map(((e,t)=>this.normalizeTableColumn(e,t))).filter((e=>null!=e)),l=this.validateTableColumns(a);if(!l.length)return;const u=(0,i.hU)(o,["minRows","minimumRows","minRowCount"]),c=(0,i.hU)(o,["maxRows","maximumRows","maxRowCount"]),d=this.normalizeRowBounds(u,c);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({columns:l},void 0!==d.minRows&&{minRows:d.minRows}),void 0!==d.maxRows&&{maxRows:d.maxRows}),(0,i.Xl)(o,["addRowLabel","addLabel"])&&{addRowLabel:(0,i.Xl)(o,["addRowLabel","addLabel"])}),(0,i.Xl)(o,["removeRowLabel","removeLabel"])&&{removeRowLabel:(0,i.Xl)(o,["removeRowLabel","removeLabel"])}),(0,i.Xl)(o,["helper","helperText","instructions"])&&{helperText:(0,i.Xl)(o,["helper","helperText","instructions"])}),(0,i.Cq)(o,["allowReorder","reorder"],!1)&&{allowReorder:!0}),(0,i.Cq)(o,["showHeader","displayHeader"],!0)&&{showHeader:!0})}validateTableColumns(e){if(!(null==e?void 0:e.length))return[];const t=new Set,r=[];for(const n of e)(null==n?void 0:n.key)&&(t.has(n.key)||("select"!==n.type||n.options&&0!==n.options.length)&&(r.push(n),t.add(n.key)));return r}normalizeRowBounds(e,t){const r="number"==typeof e&&Number.isFinite(e)&&e>=0?Math.floor(e):void 0;let n="number"==typeof t&&Number.isFinite(t)&&t>=0?Math.floor(t):void 0;return void 0!==r&&void 0!==n&&r>n&&(n=r),{minRows:r,maxRows:n}}normalizeTableColumn(e,t){var r,n,o,s;if(!(0,i.Qd)(e))return null;const a=e,l=null!==(r=(0,i.Xl)(a,["key","name","field","id"]))&&void 0!==r?r:`column_${t}`,u=null!==(n=(0,i.Xl)(a,["label","title","caption","name"]))&&void 0!==n?n:l,c=(0,i.Xl)(a,["type","inputType","fieldType"]),d=c?{text:"text",string:"text",number:"number",numeric:"number",float:"number",integer:"number",select:"select",choice:"select",dropdown:"select",list:"select",boolean:"boolean",checkbox:"boolean",date:"date",time:"time",datetime:"datetime","date-time":"datetime"}[c.toLowerCase()]:void 0,f=null!==(s=null!==(o=(0,i.vq)(a.options))&&void 0!==o?o:(0,i.vq)(a.choices))&&void 0!==s?s:(0,i.vq)(a.values),h=null==f?void 0:f.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({key:l,label:u},d&&{type:d}),(0,i.Cq)(a,["required","isRequired"],!1)&&{required:!0}),(0,i.Cq)(a,["readOnly","readonly"],!1)&&{readOnly:!0}),(0,i.Xl)(a,["placeholder","prompt"])&&{placeholder:(0,i.Xl)(a,["placeholder","prompt"])}),void 0!==(0,i.hU)(a,["min","minimum"])&&{min:(0,i.hU)(a,["min","minimum"])}),void 0!==(0,i.hU)(a,["max","maximum"])&&{max:(0,i.hU)(a,["max","maximum"])}),void 0!==(0,i.hU)(a,["step","increment"])&&{step:(0,i.hU)(a,["step","increment"])}),(0,i.Xl)(a,["pattern","regex"])&&{pattern:(0,i.Xl)(a,["pattern","regex"])}),(null==h?void 0:h.length)&&{options:h}),(0,i.Xl)(a,["description","detail","helper","hint"])&&{description:(0,i.Xl)(a,["description","detail","helper","hint"])}),void 0!==a.defaultValue&&{defaultValue:a.defaultValue}),void 0!==a.width&&{width:a.width})}deriveScriptedConfig(e,t){var r;if(e.type!==n.QL.SCRIPTED)return;const o=this.getParameterMetadata(e),s=this.extractScriptedOptions(e,t),a=(0,i.Xl)(o,["breadcrumbSeparator","pathSeparator","delimiter"])||"/",l=this.buildScriptedNodes(s,a),u=(0,i.Cq)(o,["allowMultiple","multiple","multiSelect","supportsMultiple"],Array.isArray(e.defaultValue)),c=(0,i.Cq)(o,["allowManualEntry","allowManual","allowCustom","allowFreeform"],!1),d=(0,i.Cq)(o,["allowSearch","searchable","enableSearch","supportsSearch"],(null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0)>15),f=(0,i.hU)(o,["pageSize","page_size","limit","pageLimit"]),h=(0,i.Xl)(o,["instructions","instruction","helper","hint"])||(0,i.Nn)(e.description),p=(0,i.Xl)(o,["searchPlaceholder","searchLabel","searchPrompt"]),m=(0,i.Cq)(o,["autoSelectSingleLeaf","autoSelectSingle","autoSelect"],!0),v=(0,i.Xl)(o,["maxResultsHint","resultsHint","resultsMessage"]);return{allowMultiple:u,allowSearch:d,hierarchical:Boolean(null==l?void 0:l.some((e=>e.children&&e.children.length>0))),allowManualEntry:c,searchPlaceholder:p,instructions:h,breadcrumbSeparator:a,pageSize:f,maxResultsHint:v,autoSelectSingleLeaf:m,nodes:l}}deriveDateTimeConfig(e){var t;if(![n.QL.DATE_TIME,n.QL.DATETIME,n.QL.TIME].includes(e.type))return;const r=this.getParameterMetadata(e),o=(0,i.Cq)(r,["includeSeconds","showSeconds","seconds"],!0),s="string"==typeof e.defaultValue?e.defaultValue:void 0,a=s?(0,i.WZ)(s):{fraction:"",offset:"",base:""},l=(0,i.Cq)(r,["includeMilliseconds","milliseconds","fractional"],!1)||a.fraction&&a.fraction.length>1,u=null!==(t=(0,i.vq)(r.timezones))&&void 0!==t?t:(0,i.vq)(r.timezoneOptions),c=null==u?void 0:u.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e)),d=(0,i.Xl)(r,["defaultTimezone","timezoneDefault"])||(0,i.Xl)(r,["timezoneOffset","defaultOffset"])||a.offset||void 0,f=(0,i.Xl)(r,["timezoneMode","timezone","tzMode"]),h="fixed"===f||"select"===f?f:(null==c?void 0:c.length)?"select":a.offset||"offset"===f?"offset":void 0;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({includeSeconds:o,includeMilliseconds:l},h&&{timezoneMode:h}),a.offset&&{timezoneOffset:a.offset}),(null==c?void 0:c.length)&&{timezoneOptions:c}),d&&{defaultTimezone:d}),(0,i.Xl)(r,["helper","hint","instructions"])&&{helperText:(0,i.Xl)(r,["helper","hint","instructions"])}),{showTimezoneBadge:Boolean(a.offset)})}deriveSelectConfig(e,t,r){var o;if(!new Set([n.Vw.SELECT,n.Vw.MULTI_SELECT,n.Vw.COORDSYS,n.Vw.ATTRIBUTE_NAME,n.Vw.ATTRIBUTE_LIST,n.Vw.DB_CONNECTION,n.Vw.WEB_CONNECTION,n.Vw.REPROJECTION_FILE]).has(e))return;const s=this.getParameterMetadata(t),a=(0,i.Cq)(s,["allowSearch","searchable","enableSearch"],(null!==(o=null==r?void 0:r.length)&&void 0!==o?o:0)>25),l=(0,i.Cq)(s,["allowCustomValues","allowCustom","allowManual","allowFreeform"],!1),u=(0,i.hU)(s,["pageSize","page_size","limit","pageLimit"]),c=(0,i.Xl)(s,["instructions","hint","helper"]),d=(0,i.Cq)(s,["hierarchical","tree","grouped","nested"],Boolean(null==r?void 0:r.some((e=>e.children&&e.children.length>0))));return a||l||u||c||d?Object.assign(Object.assign({allowSearch:a,allowCustomValues:l,hierarchical:d},u&&{pageSize:u}),c&&{instructions:c}):void 0}deriveFileConfig(e,t){var r,o;if(!new Set([n.Vw.FILE,n.Vw.TEXT_OR_FILE,n.Vw.REPROJECTION_FILE]).has(e))return;const s=this.getParameterMetadata(t),a=null!==(o=null!==(r=s.accept)&&void 0!==r?r:s.accepted)&&void 0!==o?o:s.extensions,l=(()=>{if(a){if(Array.isArray(a)){const e=a.map((e=>(0,i.Nn)(e))).filter((e=>Boolean(e)));return e.length?e:void 0}if("string"==typeof a){const e=a.split(/[,;\s]+/).map((e=>e.trim())).filter(Boolean);return e.length?e:void 0}}})(),u=(0,i.hU)(s,["maxSizeMb","maxSize","fileSizeMb","maxUploadMb"]),c=(0,i.Cq)(s,["allowMultiple","multiple","multi"],!1),d=(0,i.Xl)(s,["helper","hint","instructions"]),f=(0,i.Xl)(s,["capture","captureMode"]);return l||u||c||d||f?Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l&&{accept:l}),void 0!==u&&{maxSizeMb:u}),c&&{multiple:!0}),d&&{helperText:d}),f&&{capture:f}):void 0}deriveColorConfig(e){if(e.type!==n.QL.COLOR&&e.type!==n.QL.COLOR_PICK)return;const t=this.getParameterMetadata(e),r=(0,i.Xl)(t,["colorSpace","colourSpace","space","colorModel","colourModel"]),o=null==r?void 0:r.trim().toLowerCase();let s;if("cmyk"===o?s="cmyk":"rgb"===o&&(s="rgb"),!s){const t=("string"==typeof e.defaultValue?e.defaultValue:"").split(",").map((e=>e.trim())).filter(Boolean);s||(4===t.length?s="cmyk":3===t.length&&(s="rgb"))}const a=(0,i.Cq)(t,["alpha","allowAlpha","hasAlpha","supportsAlpha","includeAlpha"],!1);return s||a?Object.assign(Object.assign({},s&&{space:s}),a&&{alpha:!0}):void 0}validateParameters(e,t){const r=[],o=this.getRenderableParameters(t);for(const t of o){if(t.type===n.QL.GEOMETRY)continue;const o=e[t.name];if(!t.optional&&(0,i.Im)(o))r.push(`${t.name}:required`);else if(!(0,i.Im)(o)){const e=this.validateParameterType(t,o);if(e){r.push(e);continue}const n=this.validateParameterChoices(t,o);n&&r.push(n)}}return{isValid:0===r.length,errors:r}}validateParameterType(e,t){switch(e.type){case n.QL.INTEGER:return(0,o.E6)(t)?null:`${e.name}:integer`;case n.QL.FLOAT:return(0,o.T6)(t)?null:`${e.name}:number`;default:return null}}validateParameterChoices(e,t){const r=(0,i.uA)(e.listOptions);if(!r)return null;if(n.d8.has(e.type)){if((Array.isArray(t)?t:[t]).some((e=>!r.has((0,i.sL)(e)))))return`${e.name}:choice`}else if(!r.has((0,i.sL)(t)))return`${e.name}:choice`;return null}convertParametersToFields(e){return(null==e?void 0:e.length)?this.getRenderableParameters(e).map((e=>{var t,r,o,s;const a=this.getFieldType(e),l=this.getDecimalPrecision(e),u=e.type===n.QL.RANGE_SLIDER&&this.shouldUseRangeSliderUi(e),c=e.type!==n.QL.RANGE_SLIDER||u?a:n.Vw.NUMERIC_INPUT,d=this.mapListOptions(e.listOptions),f=this.deriveScriptedConfig(e,d),h=this.deriveTableConfig(e),p=this.deriveDateTimeConfig(e),m=this.deriveSelectConfig(c,e,d),v=this.deriveFileConfig(c,e),g=this.deriveColorConfig(e),y=this.isReadOnlyField(c,f),b=null!==(s=null!==(o=null!==(r=null!==(t=null==f?void 0:f.instructions)&&void 0!==t?t:null==h?void 0:h.helperText)&&void 0!==r?r:null==p?void 0:p.helperText)&&void 0!==o?o:null==v?void 0:v.helperText)&&void 0!==s?s:null==m?void 0:m.instructions,{min:E,max:O,step:R,minExclusive:S,maxExclusive:w}=this.getSliderMeta(e,l,u);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.name,label:e.description||e.name,type:c,required:!e.optional,readOnly:y,description:e.description,defaultValue:c===n.Vw.PASSWORD||e.type===n.QL.GEOMETRY?"":c===n.Vw.MULTI_SELECT?(0,i.$r)(e.defaultValue):e.defaultValue,placeholder:e.description||""},(null==d?void 0:d.length)&&{options:[...d]}),e.type===n.QL.TEXT_EDIT&&{rows:3}),(void 0!==E||void 0!==O||void 0!==R)&&{min:E,max:O,step:R}),(c===n.Vw.SLIDER||c===n.Vw.NUMERIC_INPUT)&&void 0!==l&&{decimalPrecision:l}),(c===n.Vw.SLIDER||c===n.Vw.NUMERIC_INPUT)&&void 0!==S&&{minExclusive:S}),(c===n.Vw.SLIDER||c===n.Vw.NUMERIC_INPUT)&&void 0!==w&&{maxExclusive:w}),b&&{helper:b}),f&&{scripted:f}),h&&{tableConfig:h}),p&&{dateTimeConfig:p}),m&&{selectConfig:m}),v&&{fileConfig:v}),g&&{colorConfig:g})})):[]}getFieldType(e){var t;const r=n.xA[e.type];if(r)return r;return(null===(t=e.listOptions)||void 0===t?void 0:t.length)>0?n.d8.has(e.type)?n.Vw.MULTI_SELECT:n.Vw.SELECT:n.Vw.TEXT}isReadOnlyField(e,t){if(e===n.Vw.MESSAGE||e===n.Vw.GEOMETRY)return!0;if(e===n.Vw.SCRIPTED){return!Boolean((null==t?void 0:t.allowManualEntry)||(null==t?void 0:t.nodes)&&t.nodes.length>0)}return!1}validateFormValues(e,t){if(!e||!(null==t?void 0:t.length))return{isValid:!0,errors:{}};const r={};for(const s of t){const t=e[s.name],a=!(0,i.Im)(t);if(s.type!==n.Vw.GEOMETRY)if(s.type!==n.Vw.TEXT_OR_FILE){if(s.required&&!a)r[s.name]="";else if(a&&(s.type===n.Vw.NUMBER||s.type===n.Vw.NUMERIC_INPUT)&&!(0,o.T6)(t)){r[s.name]="";continue}if(a&&(s.type===n.Vw.NUMBER||s.type===n.Vw.NUMERIC_INPUT||s.type===n.Vw.SLIDER)){const e=Number(t);if(!Number.isFinite(e)){r[s.name]="";continue}if("number"==typeof s.min){if(s.minExclusive?e<=s.min:e<s.min){r[s.name]="";continue}}if("number"==typeof s.max){if(s.maxExclusive?e>=s.max:e>s.max){r[s.name]="";continue}}}if(a&&s.type===n.Vw.NUMERIC_INPUT&&"number"==typeof s.decimalPrecision&&s.decimalPrecision>=0&&Number.isFinite(Number(t))){const e=Number(t),n=Math.pow(10,s.decimalPrecision);if(Number.isFinite(n)){const t=e*n,i=Math.round(t);Math.abs(t-i)>Number.EPSILON&&(r[s.name]="")}else r[s.name]=""}}else{const e=t,n="string"==typeof(null==e?void 0:e.text)&&e.text.trim().length>0,o=(0,i.E$)(null==e?void 0:e.file);!s.required||n||o||(r[s.name]="")}}return{isValid:0===Object.keys(r).length,errors:r}}}function v(e){var t;if(!e)return"";const r=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:e,n=/\b(\d+\.\d+(?:\.\d+)?|20\d{2}(?:\.\d+)?)\b/,i=["version","fmeVersion","fmeflowVersion","app.version","about.version","server.version","edition","build","productName","product","name"];for(const e of i){const t=e.includes(".")?e.split(".").reduce(((e,t)=>null==e?void 0:e[t]),r):null==r?void 0:r[e];if("string"==typeof t){const e=t.match(n);if(e)return e[1]}if("number"==typeof t&&Number.isFinite(t))return String(t)}try{const e=Object.values(r||{});for(const t of e)if("string"==typeof t){const e=t.match(n);if(e)return e[1]}}catch(e){}return""}function g(e){return l(this,void 0,void 0,(function*(){const{serverUrl:t,token:r,repository:n,signal:s}=e,a=`${t}|${r}|${n||"_"}`,u={serverUrl:"pending",token:"pending",repository:n?"pending":"skip",version:""};return yield c.validateConnection.execute(a,(()=>l(this,void 0,void 0,(function*(){try{const e=(0,i.Mb)(t,r,n);if(!e)return{success:!1,steps:u,error:{message:"connectionFailedMessage",type:"server",status:0}};let a;try{a=yield e.testConnection(s),u.serverUrl="ok",u.token="ok",u.version=v(a)}catch(e){if((0,i.zf)(e))return{success:!1,steps:u,error:{message:e.message||"aborted",type:"generic",status:0}};const n=(0,o.Ko)(e);if(401===n)return u.serverUrl="ok",u.token="fail",{success:!1,steps:u,error:{message:(0,o.Pi)(e,n),type:"token",status:n}};if(403!==n)return u.serverUrl="fail",u.token="skip",{success:!1,steps:u,error:{message:(0,o.Pi)(e,n),type:0===n?"network":"server",status:n}};{const a=(0,i.PE)(e);if(p(a))return u.serverUrl="fail",u.token="skip",{success:!1,steps:u,error:{message:(0,o.Pi)(e,n),type:"server",status:n}};try{const a=yield function(e,t,r){return l(this,void 0,void 0,(function*(){const n=`${e}|${t}`;return(0,o.dC)(e).ok?yield c.healthCheck.execute(n,(()=>l(this,void 0,void 0,(function*(){const n=Date.now();try{const o=(0,i.Mb)(e,t),s=yield o.testConnection(r),a=Date.now()-n,l=Number.isFinite(a)&&a>=0?a:0;return{reachable:!0,version:v(s),responseTime:l}}catch(t){const r=Date.now()-n,s=Number.isFinite(r)&&r>=0?r:0,a=(0,o.Ko)(t),l=(0,i.PE)(t);return 401===a||403===a?h(l)?{reachable:!1,responseTime:s,error:l,status:a}:(0,o.dC)(e,{strict:!0}).ok?{reachable:!0,responseTime:s,status:a}:{reachable:!1,responseTime:s,error:"invalidUrl",status:a}:{reachable:!1,responseTime:s,error:l,status:a}}})))):{reachable:!1,responseTime:0,error:"invalidUrl",status:0}}))}(t,r,s);return a.reachable?(u.serverUrl="ok",u.token="fail",{success:!1,steps:u,error:{message:(0,o.Pi)(e,n),type:"token",status:n}}):(u.serverUrl="fail",u.token="skip",{success:!1,steps:u,error:{message:(0,o.Pi)(e,n),type:"server",status:n}})}catch(t){return u.serverUrl="fail",u.token="skip",{success:!1,steps:u,error:{message:(0,o.Pi)(e,n),type:"server",status:n}}}}}const d=[];if(n)try{yield e.validateRepository(n,s),u.repository="ok"}catch(e){const t=(0,o.Ko)(e);if(401!==t&&403!==t)return u.repository="fail",{success:!1,steps:u,error:{message:(0,o.Pi)(e,t),type:"repository",status:t}};u.repository="skip",d.push("repositoryNotAccessible")}return{success:!0,version:"string"==typeof u.version?u.version:"",steps:u,warnings:d.length?d:void 0}}catch(e){if((0,i.zf)(e))return{success:!1,steps:u,error:{message:e.message||"aborted",type:"generic",status:0}};const t=(0,o.Ko)(e);return{success:!1,steps:u,error:{message:(0,o.Pi)(e,t),type:"generic",status:t}}}}))))}))}function y(e){return l(this,arguments,void 0,(function*({rawFormData:e,userEmail:t,geometryJson:r,geometry:n,modules:o,config:s,workspaceParameters:a,workspaceItem:u,selectedWorkspaceName:c,areaWarning:d,drawnArea:f,makeCancelable:h,fmeClient:p,signal:m,remoteDatasetSubfolder:v,onStatusChange:g}){null==g||g("normalizing");const{sanitizedFormData:y,uploadFile:b,remoteUrl:E}=(0,i.sq)(e),O=(0,i.Eo)(s||void 0),R=(0,i.cL)({data:y},t,r,n||void 0,o,{config:O,workspaceParameters:a,workspaceItem:u,areaWarning:d,drawnArea:f}),S=R.__aoi_error__;if(S)return null==g||g("complete"),{params:null,aoiError:S};const w=Object.assign({},R);Boolean(b||"string"==typeof E&&E.trim())&&(null==g||g("resolvingDataset")),yield function(e){return l(this,arguments,void 0,(function*({params:e,remoteUrl:t,uploadFile:r,config:n,workspaceParameters:o,makeCancelable:s,fmeClient:a,signal:l,subfolder:u,workspaceName:c}){var d;if((0,i.dd)(e,n),(0,i.rB)(t,n))return void(e.opt_geturl=t);if(!(0,i.pZ)(n,r))return;const f=(0,i.Nn)(c);if(!f)throw new Error("REMOTE_DATASET_WORKSPACE_REQUIRED");void 0!==e.opt_geturl&&delete e.opt_geturl;const h=null===(d=(yield s(a.uploadToTemp(r,{subfolder:u,signal:l,repository:null==n?void 0:n.repository,workspace:f}))).data)||void 0===d?void 0:d.path;(0,i.sI)({finalParams:e,uploadedPath:h,parameters:o,explicitTarget:(0,i.yo)(n)})}))}({params:w,remoteUrl:E,uploadFile:b,config:O,workspaceParameters:a,makeCancelable:h,fmeClient:p,signal:m,subfolder:v,workspaceName:(0,i.Nn)(null==u?void 0:u.name)||(0,i.Nn)(c)||null}),null==g||g("applyingDefaults");const T=(0,i._R)(w,O);return(0,i.Ad)(T),null==g||g("complete"),{params:T}}))}function b(e,t,r){const i=new t.GraphicsLayer(n.PJ);return e.view.map.add(i),r(i),i}function E({jmv:e,modules:t,layer:r,onDrawComplete:o,dispatch:l,widgetId:u,symbols:c,onDrawingSessionChange:d,onSketchToolStart:f}){const h=new t.SketchViewModel({view:e.view,layer:r,polygonSymbol:c.polygon,polylineSymbol:c.polyline,pointSymbol:c.point,defaultCreateOptions:{hasZ:!1,mode:"click"},defaultUpdateOptions:{tool:"reshape",toggleToolOnClick:!1,enableRotation:!0,enableScaling:!0,preserveAspectRatio:!1},snappingOptions:{enabled:!0,selfEnabled:!0,featureEnabled:!0},tooltipOptions:{enabled:!0,inputEnabled:!0,visibleElements:{area:!0,totalLength:!0,distance:!0,coordinates:!1,elevation:!1,rotation:!1,scale:!1,size:!1,radius:!0,direction:!0,header:!0,helpMessage:!0}},valueOptions:{directionMode:"relative",displayUnits:{length:"meters",verticalLength:"meters",area:"square-meters"},inputUnits:{length:"meters",verticalLength:"meters",area:"square-meters"}}}),p=function({sketchViewModel:e,onDrawComplete:t,dispatch:r,widgetId:o,onDrawingSessionChange:l,onSketchToolStart:u}){let c=0;const d=e.on("create",(d=>{var f,h;switch(d.state){case"start":{c=0;const t=(0,i.wk)(d.tool);if(!t)return(0,s.uB)(e),void l({isActive:!1,clickCount:0});l({isActive:!0,clickCount:0}),u("rectangle"===t?n.hL.RECTANGLE:n.hL.POLYGON);break}case"active":{const e=(0,i.wk)(d.tool);if("polygon"===e&&(null===(f=d.graphic)||void 0===f?void 0:f.geometry)){const e=null===(h=d.graphic.geometry.rings)||void 0===h?void 0:h[0],t=e?Math.max(0,e.length-1):0;t>c&&(c=t,l({clickCount:t,isActive:!0}),1===t&&r(a.fmeActions.setViewMode(n.nE.DRAWING,o)))}else"rectangle"===e&&1!==c&&(c=1,l({clickCount:1,isActive:!0}));break}case"complete":c=0,l({isActive:!1,clickCount:0});try{t(d)}catch(e){(0,i.fA)("onDrawComplete error",e)}break;case"cancel":c=0,l({isActive:!1,clickCount:0})}})),f=e.on("update",(e=>{var r;if("complete"===e.state&&Array.isArray(e.graphics)&&e.graphics.length>0&&(null===(r=e.graphics[0])||void 0===r?void 0:r.geometry)){const r=(0,i.wk)(null==e?void 0:e.tool);try{t({graphic:e.graphics[0],state:"complete",tool:null!=r?r:e.tool})}catch(e){(0,i.fA)("onDrawComplete update error",e)}}}));return()=>{try{null==d||d.remove()}catch(e){}try{null==f||f.remove()}catch(e){}try{e.__fmeCleanup__=void 0}catch(e){}}}({sketchViewModel:h,onDrawComplete:o,dispatch:l,widgetId:u,onDrawingSessionChange:d,onSketchToolStart:f});return h.__fmeCleanup__=p,{sketchViewModel:h,cleanup:p}}function O(e){return l(this,void 0,void 0,(function*(){var t,r,s,a,l,u;const{config:c,translate:d,signal:f,mapConfigured:h}=e;if(!c)return{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,o.$5)("errorSetupRequired",n.By.CONFIG,"configMissing",d,{suggestion:d("actionOpenSettings"),userFriendlyMessage:d("hintSetupWidget")})};if(!(0,o.Rv)(c,d,{mapConfigured:null==h||h}).isValid)return{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,o.$5)("errorSetupRequired",n.By.CONFIG,"CONFIG_INCOMPLETE",d)};try{const e=yield g({serverUrl:c.fmeServerUrl,token:c.fmeServerToken,repository:c.repository,signal:f});return e.success?{isValid:!0,canProceed:!0,requiresSettings:!1}:{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,o.$5)((null===(t=e.error)||void 0===t?void 0:t.message)||"errorConnectionIssue",n.By.NETWORK,(null===(s=null===(r=e.error)||void 0===r?void 0:r.type)||void 0===s?void 0:s.toUpperCase())||"CONNECTION_ERROR",d,{suggestion:"token"===(null===(a=e.error)||void 0===a?void 0:a.type)?d("tokenSettingsHint"):"server"===(null===(l=e.error)||void 0===l?void 0:l.type)?d("serverUrlSettingsHint"):"repository"===(null===(u=e.error)||void 0===u?void 0:u.type)?d("repositorySettingsHint"):d("connectionSettingsHint")})}}catch(e){return(0,i.zf)(e)?{isValid:!1,canProceed:!1,requiresSettings:!1}:{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,o.$5)("errorNetworkIssue",n.By.NETWORK,"STARTUP_NETWORK_ERROR",d,{suggestion:d("networkConnectionHint")})}}}))}},4658:(e,t,r)=>{"use strict";function n(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch((()=>{})),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}r.d(t,{T:()=>n})},4712:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.333 0h4c.737 0 1.334.597 1.334 1.333v1.334h8C15.403 2.667 16 3.264 16 4v10.667c0 .736-.597 1.333-1.333 1.333H1.333A1.333 1.333 0 0 1 0 14.667V1.333C0 .597.597 0 1.333 0m0 7.333v7.334h13.334V7.333zm0-1.333h13.334V4H5.334V1.335h-4z" clip-rule="evenodd"></path></svg>'},4848:(e,t,r)=>{"use strict";e.exports=r(1020)},4880:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>m,EN:()=>p,Eh:()=>c,F$:()=>h,GU:()=>I,MK:()=>d,S$:()=>i,ZM:()=>A,ZZ:()=>T,Zw:()=>s,d2:()=>u,f8:()=>y,gn:()=>a,hT:()=>k,j3:()=>l,lQ:()=>o,nJ:()=>f,pl:()=>S,y9:()=>w,yy:()=>R});var n=r(2775),i="undefined"==typeof window||"Deno"in globalThis;function o(){}function s(e,t){return"function"==typeof e?e(t):e}function a(e){return"number"==typeof e&&e>=0&&e!==1/0}function l(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t){return"function"==typeof e?e(t):e}function c(e,t){return"function"==typeof e?e(t):e}function d(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:s,stale:a}=e;if(s)if(n){if(t.queryHash!==h(s,t.options))return!1}else if(!m(t.queryKey,s))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&((!i||i===t.state.fetchStatus)&&!(o&&!o(t)))}function f(e,t){const{exact:r,status:n,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(p(t.options.mutationKey)!==p(o))return!1}else if(!m(t.options.mutationKey,o))return!1}return(!n||t.state.status===n)&&!(i&&!i(t))}function h(e,t){return(t?.queryKeyHashFn||p)(e)}function p(e){return JSON.stringify(e,((e,t)=>E(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t))}function m(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((r=>m(e[r],t[r]))))}var v=Object.prototype.hasOwnProperty;function g(e,t){if(e===t)return e;const r=b(e)&&b(t);if(!(r||E(e)&&E(t)))return t;const n=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,s=r?new Array(o):{};let a=0;for(let l=0;l<o;l++){const o=r?l:i[l],u=e[o],c=t[o];if(u===c){s[o]=u,(r?l<n:v.call(e,o))&&a++;continue}if(null===u||null===c||"object"!=typeof u||"object"!=typeof c){s[o]=c;continue}const d=g(u,c);s[o]=d,d===u&&a++}return n===o&&a===n?e:s}function y(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function b(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function E(e){if(!O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!O(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function R(e){return new Promise((t=>{n.zs.setTimeout(t,e)}))}function S(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?g(e,t):t}function w(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function T(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var k=Symbol();function A(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==k?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function I(e,t){return"function"==typeof e?e(...t):!!e}},4945:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28 6h2v20h-2zM17 6l-1.43 1.393L23.15 15H2v2h21.15l-7.58 7.573L17 26l10-10z"></path></svg>'},5502:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 4.429V15h14V1L6.833 7.857zM14 3v11H2V6.114l4.182 2.51a1.2 1.2 0 0 0 1.398-.118z" clip-rule="evenodd"></path></svg>'},5668:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path><path fill="#000" fill-rule="evenodd" d="m11.002 7.002-3 3-3-3v-4a2.893 2.893 0 0 1 3-3 2.893 2.893 0 0 1 3 3zm-3-6h-.038a1.893 1.893 0 0 0-1.963 1.962l.001.018v3.606l2 2 2-2V2.964A1.894 1.894 0 0 0 8.04 1z" clip-rule="evenodd"></path><path fill="#000" d="M4.072 1.908a10.4 10.4 0 0 1-1.939-.433L0 13.077c1.2.504 2.493.746 3.793.711A10.7 10.7 0 0 0 7 13.31v1.678H2v1h11v-1H8v-2a11.9 11.9 0 0 1 4.207-.8A6.62 6.62 0 0 1 16 13.277L13.867 1.674a8.2 8.2 0 0 0-2.236-.61 3.5 3.5 0 0 1 .336 1.066q.514.097 1.009.27l1.72 9.163a8.3 8.3 0 0 0-2.489-.376 12.8 12.8 0 0 0-4.526.852l-.604.204-.363.108a9.7 9.7 0 0 1-2.921.436 9.5 9.5 0 0 1-2.668-.363l1.81-9.697q.53.115 1.068.18v-.173a3.4 3.4 0 0 1 .069-.826"></path></svg>'},5938:e=>{"use strict";e.exports=s},6035:(e,t,r)=>{"use strict";r.d(t,{t:()=>o});var n=r(6500),i=r(4880),o=new class extends n.Q{#A=!0;#I;#_;constructor(){super(),this.#_=e=>{if(!i.S$&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#I||this.setEventListener(this.#_)}onUnsubscribe(){this.hasListeners()||(this.#I?.(),this.#I=void 0)}setEventListener(e){this.#_=e,this.#I?.(),this.#I=e(this.setOnline.bind(this))}setOnline(e){this.#A!==e&&(this.#A=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#A}}},6261:(e,t,r)=>{"use strict";r.d(t,{jG:()=>i});var n=r(2775).Zq;var i=function(){let e=[],t=0,r=e=>{e()},i=e=>{e()},o=n;const s=n=>{t?e.push(n):o((()=>{r(n)}))};return{batch:n=>{let s;t++;try{s=n()}finally{t--,t||(()=>{const t=e;e=[],t.length&&o((()=>{i((()=>{t.forEach((e=>{r(e)}))}))}))})()}return s},batchCalls:e=>(...t)=>{s((()=>{e(...t)}))},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{i=e},setScheduler:e=>{o=e}}}()},6278:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},6500:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var n=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},7390:(e,t,r)=>{var n;!function(){"use strict";var i=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),i={use_static:!1};function o(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(i.use_static=Boolean(t.use_static));var a="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,a)))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var d=["setPrototypeOf"],f=(d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function h(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function p(e,t){return s(e,a,!0),e}function m(e,t){var r=e[t];s(e,t,(function(){return W(r.apply(e,arguments))}))}function v(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var i=S.call(this);return i[e]=W(t),b(i)}d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),h.prototype=new Error,h.prototype.constructor=Error;var g=W([]);function y(e,t,r){var n=e[0];if(1===e.length)return v.call(this,n,t,r);var i,o=e.slice(1),s=this[n];if("object"==typeof s&&null!==s)i=W.setIn(s,o,t);else{var a=o[0];i=""!==a&&isFinite(a)?y.call(g,o,t):L.call(x,o,t)}if(n in this&&s===i)return this;var l=S.call(this);return l[n]=i,b(l)}function b(e){for(var t in f){if(f.hasOwnProperty(t))m(e,f[t])}i.use_static||(s(e,"flatMap",O),s(e,"asObject",w),s(e,"asMutable",S),s(e,"set",v),s(e,"setIn",y),s(e,"update",N),s(e,"updateIn",P),s(e,"getIn",U));for(var r=0,n=e.length;r<n;r++)e[r]=W(e[r]);return p(e)}function E(){return new Date(this.getTime())}function O(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var i=e(this[t],t,this);Array.isArray(i)?r.push.apply(r,i):r.push(i)}return b(r)}function R(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=o(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return B(r)}function S(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(T(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function w(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var i=e(this[t],t,this),o=i[0],s=i[1];r[o]=s}return B(r)}function T(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,a)||e instanceof Date?e:W.asMutable(e,{deep:!0})}function k(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function A(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,i=Array.isArray(e),s=t&&t.deep,a=t&&t.mode||"merge",l=t&&t.merger;function d(e,n,i){var a,d=W(n[i]),f=l&&l(e[i],d,t),h=e[i];void 0===r&&void 0===f&&e.hasOwnProperty(i)&&u(d,h)||(u(h,a=void 0!==f?f:s&&c(h)&&c(d)?W.merge(h,d,t):d)&&e.hasOwnProperty(i)||(void 0===r&&(r=k(e,o(e))),r[i]=a))}if(i)for(var f=0,h=e.length;f<h;f++){var p=e[f];for(n in p)p.hasOwnProperty(n)&&d(void 0!==r?r:this,p,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&d(this,e,n);"replace"===a&&function(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=k(e,o(e))),delete r[n])}(this,e)}return void 0===r?this:B(r)}function I(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return W.merge(this,e,{deep:r,mode:"replace"})}var _,C,M,x=W({});function L(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return j.call(this,n,t,r);var i,s=e.slice(1),a=this[n];if(i=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?W.setIn(a,s,t):L.call(x,s,t),this.hasOwnProperty(n)&&a===i)return this;var l=k(this,o(this));return l[n]=i,B(l)}function j(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=W.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var i=k(this,o(this));return i[e]=W(t),B(i)}function N(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return W.set(this,e,t.apply(n,[n].concat(r)))}function D(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function P(e,t){var r=Array.prototype.slice.call(arguments,2),n=D(this,e);return W.setIn(this,e,t.apply(n,[n].concat(r)))}function U(e,t){var r=D(this,e);return void 0===r?t:r}function F(e){var t,r=o(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=T(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function V(){return{}}function B(e){return i.use_static||(s(e,"merge",A),s(e,"replace",I),s(e,"without",R),s(e,"asMutable",F),s(e,"set",j),s(e,"setIn",L),s(e,"update",N),s(e,"updateIn",P),s(e,"getIn",U)),p(e)}function W(e,t,r){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(W);if(Array.isArray(e))return b(e.slice());if(e instanceof Date)return o=new Date(e.getTime()),i.use_static||s(o,"asMutable",E),p(o);var o,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:V)();for(var c in e)Object.getOwnPropertyDescriptor(e,c)&&(u[c]=W(e[c],void 0,r));return B(u)}function q(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function G(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return W.from=W,W.isImmutable=l,W.ImmutableError=h,W.merge=q(A),W.replace=q(I),W.without=q(R),W.asMutable=(_=F,C=S,M=E,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?C.apply(t,e):t instanceof Date?M.apply(t,e):_.apply(t,e)}),W.set=G(j,v),W.setIn=G(L,y),W.update=q(N),W.updateIn=q(P),W.getIn=q(U),W.flatMap=q(O),W.asObject=q(w),i.use_static||(W.static=e({use_static:!0})),Object.freeze(W),W}();void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n)}()},7413:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 1 8 1a7 7 0 0 1 0 14" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M11.53 5.47a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06L7 8.94l3.47-3.47a.75.75 0 0 1 1.06 0" clip-rule="evenodd"></path></svg>'},7665:(e,t,r)=>{"use strict";r.d(t,{Ht:()=>a,jE:()=>s});var n=r(8972),i=r(4848),o=n.createContext(void 0),s=e=>{const t=n.useContext(o);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},a=({client:e,children:t})=>(n.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),(0,i.jsx)(o.Provider,{value:e,children:t}))},7711:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m1.373 8 2.07-2.071.83.828L2.2 8.828a3.515 3.515 0 0 0 4.97 4.971l2.072-2.071.828.828L8 14.627A4.686 4.686 0 1 1 1.373 8M13.799 7.172l-2.071 2.07.828.83L14.627 8A4.686 4.686 0 1 0 8 1.373l-2.071 2.07.828.83L8.828 2.2a3.515 3.515 0 0 1 4.971 4.97"></path><path fill="#000" d="M5.515 9.657a.586.586 0 0 0 .828.828l4.142-4.142a.586.586 0 0 0-.828-.828z"></path></svg>'},8424:(e,t,r)=>{"use strict";r.d(t,{createFmeSelectors:()=>m,fmeActions:()=>l,initialFmeState:()=>u});var n,i=r(7390),o=r.n(i),s=r(9778),a=r(3271);const l={setViewMode:(e,t)=>({type:s.ZW.SET_VIEW_MODE,viewMode:e,widgetId:t}),resetState:e=>({type:s.ZW.RESET_STATE,widgetId:e}),setGeometry:(e,t,r)=>({type:s.ZW.SET_GEOMETRY,geometryJson:f(e),drawnArea:t,widgetId:r}),setDrawingTool:(e,t)=>({type:s.ZW.SET_DRAWING_TOOL,drawingTool:e,widgetId:t}),completeDrawing:(e,t,r,n)=>({type:s.ZW.COMPLETE_DRAWING,geometryJson:f(e),drawnArea:t,nextViewMode:r,widgetId:n}),setOrderResult:(e,t)=>({type:s.ZW.SET_ORDER_RESULT,orderResult:e,widgetId:t}),setWorkspaceItems:(e,t)=>({type:s.ZW.SET_WORKSPACE_ITEMS,workspaceItems:e,widgetId:t}),setWorkspaceParameters:(e,t,r)=>({type:s.ZW.SET_WORKSPACE_PARAMETERS,workspaceParameters:e,workspaceName:t,widgetId:r}),setSelectedWorkspace:(e,t)=>({type:s.ZW.SET_SELECTED_WORKSPACE,workspaceName:e,widgetId:t}),setWorkspaceItem:(e,t)=>({type:s.ZW.SET_WORKSPACE_ITEM,workspaceItem:e,widgetId:t}),setError:(e,t,r)=>({type:s.ZW.SET_ERROR,scope:e,error:t?(0,a.lx)(t):null,widgetId:r}),setErrors:(e,t)=>{const r={};for(const[t,n]of Object.entries(e))void 0!==n&&(r[t]=n?(0,a.lx)(n):null);return{type:s.ZW.SET_ERRORS,errors:r,widgetId:t}},clearError:(e,t)=>({type:s.ZW.CLEAR_ERROR,scope:e,widgetId:t}),clearWorkspaceState:e=>({type:s.ZW.CLEAR_WORKSPACE_STATE,widgetId:e}),resetToDrawing:e=>({type:s.ZW.RESET_TO_DRAWING,widgetId:e}),completeStartup:e=>({type:s.ZW.COMPLETE_STARTUP,widgetId:e}),setLoadingFlag:(e,t,r)=>({type:s.ZW.SET_LOADING_FLAG,flag:e,value:t,widgetId:r}),applyWorkspaceData:(e,t)=>({type:s.ZW.APPLY_WORKSPACE_DATA,workspaceName:e.workspaceName,workspaceParameters:e.parameters,workspaceItem:e.item,widgetId:t}),removeWidgetState:e=>({type:s.ZW.REMOVE_WIDGET_STATE,widgetId:e})},u={viewMode:s.nE.STARTUP_VALIDATION,drawingTool:s.hL.POLYGON,geometryJson:null,drawnArea:0,orderResult:null,workspaceItems:[],selectedWorkspace:null,workspaceParameters:[],workspaceItem:null,loading:{workspaces:!1,parameters:!1,modules:!1,submission:!1},errors:{}},c=null!==(n=o())&&void 0!==n?n:i,d=e=>{if("string"!=typeof e)return null;return e.trim()||null},f=e=>{if(!e)return null;const t=null==e?void 0:e.toJSON;if("function"!=typeof t)return null;try{return t.call(e)}catch(e){return null}};const h={[s.MU.ERROR]:3,[s.MU.WARNING]:2,[s.MU.INFO]:1},p={general:0,export:1,import:2};const m=e=>{const t=t=>((e,t)=>{var r,n;const i=null===(n=null===(r=null==e?void 0:e["fme-state"])||void 0===r?void 0:r.byId)||void 0===n?void 0:n[t];return null!=i?i:null})(t,e);return{selectSlice:t,selectViewMode:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.viewMode)&&void 0!==n?n:u.viewMode},selectDrawingTool:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.drawingTool)&&void 0!==n?n:u.drawingTool},selectGeometryJson:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.geometryJson)&&void 0!==n?n:null},selectDrawnArea:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.drawnArea)&&void 0!==n?n:u.drawnArea},selectWorkspaceItems:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceItems)&&void 0!==n?n:u.workspaceItems},selectWorkspaceParameters:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceParameters)&&void 0!==n?n:u.workspaceParameters},selectWorkspaceItem:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceItem)&&void 0!==n?n:u.workspaceItem},selectSelectedWorkspace:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.selectedWorkspace)&&void 0!==n?n:u.selectedWorkspace},selectOrderResult:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.orderResult)&&void 0!==n?n:u.orderResult},selectErrors:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.errors)&&void 0!==n?n:u.errors},selectPrimaryError:e=>{var r,n;return(e=>{let t=null,r=-1,n=Number.POSITIVE_INFINITY;for(const[i,o]of Object.entries(e)){if(!o)continue;if(!(o.severity in h))continue;if(!(i in p))continue;const e=h[o.severity],s=p[i];(e>r||e===r&&s<n)&&(t={scope:i,details:o},r=e,n=s)}return t})(null!==(n=null===(r=t(e))||void 0===r?void 0:r.errors)&&void 0!==n?n:u.errors)},selectErrorByScope:e=>r=>{var n,i,o;return null!==(o=null===(i=null===(n=t(r))||void 0===n?void 0:n.errors)||void 0===i?void 0:i[e])&&void 0!==o?o:null},selectLoading:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.loading)&&void 0!==n?n:u.loading},selectLoadingFlag:e=>r=>{var n,i,o;return null!==(o=null===(i=null===(n=t(r))||void 0===n?void 0:n.loading)||void 0===i?void 0:i[e])&&void 0!==o?o:u.loading[e]},selectHasValidAoi:e=>{var r;const n=t(e);return!!n&&(Boolean(n.geometryJson)&&(null!==(r=n.drawnArea)&&void 0!==r?r:0)>0)},selectCanExport:e=>{var r,n,i,o;const a=t(e);if(!a)return!1;const l=Boolean(a.geometryJson)&&Number.isFinite(a.drawnArea)&&a.drawnArea>0,u=Boolean(d(a.selectedWorkspace)),c=(null!==(n=null===(r=a.workspaceParameters)||void 0===r?void 0:r.length)&&void 0!==n?n:0)>0||null!==a.workspaceItem,f=null===(i=a.errors)||void 0===i?void 0:i.general,p=!!f&&(null!==(o=h[f.severity])&&void 0!==o?o:0)>=h[s.MU.ERROR];return l&&u&&c&&!p},selectIsBusy:e=>{var r,n;const i=null!==(n=null===(r=t(e))||void 0===r?void 0:r.loading)&&void 0!==n?n:u.loading;return i.workspaces||i.parameters||i.modules||i.submission}}};c({byId:{}})},8904:(e,t,r)=>{"use strict";r.d(t,{II:()=>c,cc:()=>u,v_:()=>l});var n=r(9658),i=r(6035),o=r(4658),s=r(4880);function a(e){return Math.min(1e3*2**e,3e4)}function l(e){return"online"!==(e??"online")||i.t.isOnline()}var u=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function c(e){let t,r=!1,c=0;const d=(0,o.T)(),f=()=>"pending"!==d.status,h=()=>n.m.isFocused()&&("always"===e.networkMode||i.t.isOnline())&&e.canRun(),p=()=>l(e.networkMode)&&e.canRun(),m=e=>{f()||(t?.(),d.resolve(e))},v=e=>{f()||(t?.(),d.reject(e))},g=()=>new Promise((r=>{t=e=>{(f()||h())&&r(e)},e.onPause?.()})).then((()=>{t=void 0,f()||e.onContinue?.()})),y=()=>{if(f())return;let t;const n=0===c?e.initialPromise:void 0;try{t=n??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(m).catch((t=>{if(f())return;const n=e.retry??(s.S$?0:3),i=e.retryDelay??a,o="function"==typeof i?i(c,t):i,l=!0===n||"number"==typeof n&&c<n||"function"==typeof n&&n(c,t);!r&&l?(c++,e.onFail?.(c,t),(0,s.yy)(o).then((()=>h()?void 0:g())).then((()=>{r?v(t):y()}))):v(t)}))};return{promise:d,status:()=>d.status,cancel:t=>{if(!f()){const r=new u(t);v(r),e.onCancel?.(r)}},continue:()=>(t?.(),d),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:p,start:()=>(p()?y():g().then(y),d)}}},8972:e=>{"use strict";e.exports=l},9124:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C1 1.567 4.134 0 8 0s7 1.567 7 3.5M2 5.304V6.5C2 7.692 4.615 9 8 9s6-1.308 6-2.5V5.304C12.775 6.32 10.546 7 8 7s-4.775-.68-6-1.696M8 10c2.546 0 4.775-.68 6-1.696V9.5c0 1.192-2.615 2.5-6 2.5s-6-1.308-6-2.5V8.304C3.225 9.32 5.454 10 8 10m6 1.304C12.775 12.32 10.546 13 8 13s-4.775-.68-6-1.696V12.5C2 13.692 4.615 15 8 15s6-1.308 6-2.5zM14 3.5C14 4.692 11.385 6 8 6S2 4.692 2 3.5 4.615 1 8 1s6 1.308 6 2.5" clip-rule="evenodd"></path></svg>'},9244:e=>{"use strict";e.exports=r},9658:(e,t,r)=>{"use strict";r.d(t,{m:()=>o});var n=r(6500),i=r(4880),o=new class extends n.Q{#C;#I;#_;constructor(){super(),this.#_=e=>{if(!i.S$&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#I||this.setEventListener(this.#_)}onUnsubscribe(){this.hasListeners()||(this.#I?.(),this.#I=void 0)}setEventListener(e){this.#_=e,this.#I?.(),this.#I=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#C!==e&&(this.#C=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#C?this.#C:"hidden"!==globalThis.document?.visibilityState}}},9757:(e,t,r)=>{"use strict";r.d(t,{X:()=>a,k:()=>l});var n=r(4880),i=r(6261),o=r(8904),s=r(1692),a=class extends s.k{#M;#x;#L;#n;#j;#N;#D;constructor(e){super(),this.#D=!1,this.#N=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#n=e.client,this.#L=this.#n.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#M=u(this.options),this.state=e.state??this.#M,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#j?.promise}setOptions(e){if(this.options={...this.#N,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=u(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#M=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#L.remove(this)}setData(e,t){const r=(0,n.pl)(this.state.data,e,this.options);return this.#P({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#P({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#j?.promise;return this.#j?.cancel(e),t?t.then(n.lQ).catch(n.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#M)}isActive(){return this.observers.some((e=>!1!==(0,n.Eh)(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some((e=>"static"===(0,n.d2)(e.options.staleTime,this)))}isStale(){return this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,n.j3)(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#j?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#j?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#L.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#j&&(this.#D?this.#j.cancel({revert:!0}):this.#j.cancelRetry()),this.scheduleGc()),this.#L.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#P({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#j?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#j)return this.#j.continueRetry(),this.#j.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const r=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#D=!0,r.signal)})},s=()=>{const e=(0,n.ZM)(this.options,t),r=(()=>{const e={client:this.#n,queryKey:this.queryKey,meta:this.meta};return i(e),e})();return this.#D=!1,this.options.persister?this.options.persister(e,r,this):e(r)},a=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:s};return i(e),e})();this.options.behavior?.onFetch(a,this),this.#x=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===a.fetchOptions?.meta||this.#P({type:"fetch",meta:a.fetchOptions?.meta}),this.#j=(0,o.II)({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:e=>{e instanceof o.cc&&e.revert&&this.setState({...this.#x,fetchStatus:"idle"}),r.abort()},onFail:(e,t)=>{this.#P({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#P({type:"pause"})},onContinue:()=>{this.#P({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const e=await this.#j.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#L.config.onSuccess?.(e,this),this.#L.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof o.cc){if(e.silent)return this.#j.promise;if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#P({type:"error",error:e}),this.#L.config.onError?.(e,this),this.#L.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#P(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...l(t.data,this.options),fetchMeta:e.meta??null};case"success":const r={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#x=e.manual?r:void 0,r;case"error":const n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),i.jG.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#L.notify({query:this,type:"updated",action:e})}))}};function l(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,o.v_)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function u(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}},9778:(e,t,r)=>{"use strict";var n,i,o,s,a,l,u,c,d;r.d(t,{vH:()=>T,vN:()=>$,Ve:()=>h,nu:()=>z,qc:()=>U,hL:()=>i,BY:()=>R,Xw:()=>E,jF:()=>F,_$:()=>X,RF:()=>y,MU:()=>s,By:()=>a,vA:()=>m,Gm:()=>j,KF:()=>S,ZW:()=>d,VQ:()=>te,Vw:()=>o,In:()=>D,ym:()=>l,PJ:()=>f,np:()=>K,m2:()=>k,a9:()=>B,wF:()=>P,gM:()=>g,d8:()=>Q,JE:()=>O,xA:()=>J,FS:()=>w,d:()=>x,QL:()=>u,LZ:()=>q,zo:()=>W,oh:()=>H,bD:()=>G,KG:()=>V,T5:()=>_,_A:()=>p,lh:()=>v,nE:()=>n,GR:()=>M,yX:()=>N,h6:()=>b,$W:()=>re.$W,Dd:()=>Z,Qg:()=>ee,aE:()=>Y,MN:()=>re.MN}),function(e){e.STARTUP_VALIDATION="startup-validation",e.INITIAL="initial",e.DRAWING="drawing",e.WORKSPACE_SELECTION="workspace-selection",e.EXPORT_FORM="export-form",e.EXPORT_OPTIONS="export-options",e.ORDER_RESULT="order-result"}(n||(n={})),function(e){e.POLYGON="polygon",e.RECTANGLE="rectangle"}(i||(i={})),function(e){e.TEXT="text",e.NUMBER="number",e.TEXTAREA="textarea",e.SELECT="select",e.MULTI_SELECT="multi-select",e.CHECKBOX="checkbox",e.PASSWORD="password",e.FILE="file",e.DATE_TIME="date-time",e.URL="url",e.SWITCH="switch",e.RADIO="radio",e.SLIDER="slider",e.NUMERIC_INPUT="numeric-input",e.TAG_INPUT="tag-input",e.COLOR="color",e.DATE="date",e.TIME="time",e.EMAIL="email",e.PHONE="phone",e.SEARCH="search",e.MESSAGE="message",e.TABLE="table",e.MONTH="month",e.WEEK="week",e.COORDSYS="coord-sys",e.ATTRIBUTE_NAME="attribute-name",e.ATTRIBUTE_LIST="attribute-list",e.DB_CONNECTION="db-connection",e.WEB_CONNECTION="web-connection",e.TEXT_OR_FILE="text-or-file",e.REPROJECTION_FILE="reprojection-file",e.SCRIPTED="scripted",e.GEOMETRY="geometry",e.HIDDEN="hidden"}(o||(o={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error"}(s||(s={})),function(e){e.VALIDATION="validation",e.CONFIG="config",e.NETWORK="network",e.MODULE="module",e.GEOMETRY="geometry"}(a||(a={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(l||(l={})),function(e){e.TEXT="TEXT",e.INTEGER="INTEGER",e.FLOAT="FLOAT",e.BOOLEAN="BOOLEAN",e.CHECKBOX="CHECKBOX",e.CHOICE="CHOICE",e.LISTBOX="LISTBOX",e.LOOKUP_LISTBOX="LOOKUP_LISTBOX",e.LOOKUP_CHOICE="LOOKUP_CHOICE",e.TEXT_OR_FILE="TEXT_OR_FILE",e.TEXT_EDIT="TEXT_EDIT",e.PASSWORD="PASSWORD",e.FILENAME="FILENAME",e.FILENAME_MUSTEXIST="FILENAME_MUSTEXIST",e.DIRNAME="DIRNAME",e.DIRNAME_MUSTEXIST="DIRNAME_MUSTEXIST",e.DIRNAME_SRC="DIRNAME_SRC",e.COORDSYS="COORDSYS",e.STRING="STRING",e.URL="URL",e.LOOKUP_URL="LOOKUP_URL",e.LOOKUP_FILE="LOOKUP_FILE",e.DATE_TIME="DATE_TIME",e.DATETIME="DATETIME",e.DATE="DATE",e.TIME="TIME",e.MONTH="MONTH",e.WEEK="WEEK",e.COLOR="COLOR",e.COLOR_PICK="COLOR_PICK",e.RANGE_SLIDER="RANGE_SLIDER",e.GEOMETRY="GEOMETRY",e.MESSAGE="MESSAGE",e.ATTRIBUTE_NAME="ATTRIBUTE_NAME",e.ATTRIBUTE_LIST="ATTRIBUTE_LIST",e.DB_CONNECTION="DB_CONNECTION",e.WEB_CONNECTION="WEB_CONNECTION",e.REPROJECTION_FILE="REPROJECTION_FILE",e.SCRIPTED="SCRIPTED",e.NOVALUE="NOVALUE"}(u||(u={})),function(e){e.QUEUED="QUEUED",e.PULLED="PULLED",e.RUNNING="RUNNING",e.SUCCESS="SUCCESS",e.FME_FAILURE="FME_FAILURE",e.JOB_FAILURE="JOB_FAILURE",e.ABORTED="ABORTED"}(c||(c={})),function(e){e.SET_VIEW_MODE="fme/SET_VIEW_MODE",e.RESET_STATE="fme/RESET_STATE",e.SET_GEOMETRY="fme/SET_GEOMETRY",e.SET_DRAWING_TOOL="fme/SET_DRAWING_TOOL",e.COMPLETE_DRAWING="fme/COMPLETE_DRAWING",e.SET_ORDER_RESULT="fme/SET_ORDER_RESULT",e.SET_WORKSPACE_ITEMS="fme/SET_WORKSPACE_ITEMS",e.SET_WORKSPACE_PARAMETERS="fme/SET_WORKSPACE_PARAMETERS",e.SET_SELECTED_WORKSPACE="fme/SET_SELECTED_WORKSPACE",e.SET_WORKSPACE_ITEM="fme/SET_WORKSPACE_ITEM",e.SET_ERROR="fme/SET_ERROR",e.SET_ERRORS="fme/SET_ERRORS",e.CLEAR_WORKSPACE_STATE="fme/CLEAR_WORKSPACE_STATE",e.CLEAR_ERROR="fme/CLEAR_ERROR",e.RESET_TO_DRAWING="fme/RESET_TO_DRAWING",e.COMPLETE_STARTUP="fme/COMPLETE_STARTUP",e.REMOVE_WIDGET_STATE="fme/REMOVE_WIDGET_STATE",e.SET_LOADING_FLAG="fme/SET_LOADING_FLAG",e.APPLY_WORKSPACE_DATA="fme/APPLY_WORKSPACE_DATA"}(d||(d={}));Object.freeze([d.SET_VIEW_MODE,d.RESET_STATE,d.SET_GEOMETRY,d.SET_DRAWING_TOOL,d.COMPLETE_DRAWING,d.SET_ORDER_RESULT,d.SET_WORKSPACE_ITEMS,d.SET_WORKSPACE_PARAMETERS,d.SET_SELECTED_WORKSPACE,d.SET_WORKSPACE_ITEM,d.SET_ERROR,d.SET_ERRORS,d.CLEAR_WORKSPACE_STATE,d.CLEAR_ERROR,d.RESET_TO_DRAWING,d.COMPLETE_STARTUP,d.REMOVE_WIDGET_STATE,d.SET_LOADING_FLAG,d.APPLY_WORKSPACE_DATA]);const f=Object.freeze({title:"",listMode:"hide",elevationInfo:{mode:"on-the-ground"}}),h="#0079C1",p=Object.freeze(["FILENAME","FILENAME_MUSTEXIST","DIRNAME","DIRNAME_MUSTEXIST","DIRNAME_SRC","LOOKUP_FILE","REPROJECTION_FILE"]),m=Object.freeze({BASE_PATH:"/fmerest/v3",MAX_URL_LENGTH:4e3,WEBHOOK_EXCLUDE_KEYS:[],WEBHOOK_LOG_WHITELIST:Object.freeze(["opt_responseformat","opt_showresult","opt_servicemode"])}),v=(Object.freeze({VALIDATION:{DEFAULT_TTL_VALUE:"",DEFAULT_TTC_VALUE:""},LIMITS:{MAX_M2_CAP:1e10,MAX_REQUEST_TIMEOUT_MS:6e5},DIRECTIVES:{DESCRIPTION_MAX:512,TAG_MAX:128},COLORS:{BACKGROUND_DARK:"#181818"},TEXT:{LARGE_AREA_MESSAGE_MAX:160}}),{[n.STARTUP_VALIDATION]:n.STARTUP_VALIDATION,[n.EXPORT_FORM]:n.WORKSPACE_SELECTION,[n.WORKSPACE_SELECTION]:n.INITIAL,[n.EXPORT_OPTIONS]:n.INITIAL,[n.ORDER_RESULT]:n.INITIAL,[n.DRAWING]:n.INITIAL,[n.INITIAL]:n.INITIAL}),g=500,y=Object.freeze(["esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/geometry/geometryEngine","esri/geometry/geometryEngineAsync","esri/geometry/support/webMercatorUtils","esri/geometry/projection","esri/geometry/SpatialReference","esri/geometry/support/normalizeUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/Graphic"]),b="WORKSPACE",E=(Object.freeze({DEFAULT_CHUNK_SIZE:10,MIN_CHUNK_SIZE:1,MAX_CHUNK_SIZE:25}),Object.freeze({CANCELLED_PROMISE:"CancelledPromiseError",ABORT:"AbortError"}),/^[^\s@]{1,64}@[^\s@]{1,253}\.[^\s@]{2,63}$/),O=/no-?reply/i,R=/\{\s*email\s*\}/i,S=Object.freeze(["localhost",".localhost",".local",".internal",".intranet",".home",".lan",".localdomain"]),w=Object.freeze([{start:[10,0,0,0],end:[10,255,255,255]},{start:[100,64,0,0],end:[100,127,255,255]},{start:[127,0,0,0],end:[127,255,255,255]},{start:[169,254,0,0],end:[169,254,255,255]},{start:[172,16,0,0],end:[172,31,255,255]},{start:[192,168,0,0],end:[192,168,255,255]},{start:[0,0,0,0],end:[0,255,255,255]}]),T=/\.(zip|kmz|json|geojson|gml)(\?.*)?$/i,k=4e3,A=Object.freeze(["start","name","category","description","trigger"]),I=Object.freeze(["tm_ttc","tm_ttl","tm_tag"]),_=Object.freeze(["tm_ttc","tm_ttl"]),C=Object.freeze(["opt_servicemode","opt_responseformat","opt_showresult","opt_requesteremail"]),M=Object.freeze([...m.WEBHOOK_EXCLUDE_KEYS,...I]),x=new Set([...I,...A,...C]),L=(Object.freeze(["sync","async","schedule"]),Object.freeze({M2_PER_KM2:1e6,AREA_DECIMALS:2,METERS_PER_KILOMETER:1e3,SQUARE_FEET_PER_SQUARE_MILE:27878400})),j=(Object.freeze([{factor:.3048,label:"ft\xb2",keywords:["foot","feet"],largeUnit:{threshold:L.SQUARE_FEET_PER_SQUARE_MILE,factor:L.SQUARE_FEET_PER_SQUARE_MILE,label:"mi\xb2"}},{factor:.3048006096,label:"ft\xb2",keywords:[]},{factor:1609.344,label:"mi\xb2",keywords:["mile"]},{factor:L.METERS_PER_KILOMETER,label:"km\xb2",keywords:["kilometer"]},{factor:.9144,label:"yd\xb2",keywords:["yard"]},{factor:.0254,label:"in\xb2",keywords:["inch"]},{factor:.01,label:"cm\xb2",keywords:["centimeter"]},{factor:.001,label:"mm\xb2",keywords:["millimeter"]},{factor:1852,label:"nm\xb2",keywords:["nautical"]},{factor:1,label:"m\xb2",keywords:["meter"]}]),Object.freeze({GEOMETRY_SERIALIZATION_FAILED:"polygon",MAP_MODULES_LOAD_FAILED:"map",FORM_INVALID:"warning"}),Object.freeze([{token:"GEOMETRY",icon:"polygon"},{token:"AREA",icon:"polygon"},{token:"MAP",icon:"map"},{token:"MODULE",icon:"map"},{token:"FORM",icon:"warning"},{token:"TOKEN",icon:"person-lock"},{token:"AUTH",icon:"person-lock"},{token:"REPOSITORY",icon:"folder"},{token:"REPO",icon:"folder"},{token:"DATA",icon:"data"},{token:"NETWORK",icon:"shared-no"},{token:"OFFLINE",icon:"shared-no"},{token:"CONNECTION",icon:"shared-no"},{token:"REQUEST",icon:"shared-no"},{token:"SERVER",icon:"feature-service"},{token:"GATEWAY",icon:"feature-service"},{token:"URL",icon:"link-tilted"},{token:"TIMEOUT",icon:"time"},{token:"CONFIG",icon:"setting"},{token:"EMAIL",icon:"email"}]),"/fmerest"),N=Object.freeze({WGS84:4326,WEB_MERCATOR:3857}),D=50,P=1e-6,U=1/111319.49079327358,F=(Object.freeze({UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,BAD_REQUEST:400,TIMEOUT:408,GATEWAY_TIMEOUT:504,TOO_MANY_REQUESTS:429,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,NETWORK_ERROR:0,SERVER_ERROR_MIN:500,SERVER_ERROR_MAX:599}),{ARCGIS_MODULE_ERROR:"errorNetworkIssue",NETWORK_ERROR:"errorNetworkIssue",INVALID_RESPONSE_FORMAT:"errorTokenIssue",WEBHOOK_AUTH_ERROR:"errorTokenIssue",WEBHOOK_BAD_RESPONSE:"errorServerIssue",WEBHOOK_NON_JSON:"errorServerIssue",WEBHOOK_TIMEOUT:"requestTimedOut",SERVER_URL_ERROR:"connectionFailedMessage",REPOSITORIES_ERROR:"errorServerIssue",REPOSITORY_ITEMS_ERROR:"errorServerIssue",WORKSPACE_ITEM_ERROR:"errorServerIssue",JOB_SUBMISSION_ERROR:"errorJobSubmission",DATA_DOWNLOAD_ERROR:"errorServerIssue",INVALID_CONFIG:"errorSetupRequired",GEOMETRY_MISSING:"geometryMissingCode",GEOMETRY_TYPE_INVALID:"geometryTypeInvalidCode",GEOMETRY_SERIALIZATION_FAILED:"geometrySerializationFailedCode",URL_TOO_LONG:"urlTooLongMessage"}),V={0:"errorNetworkIssue",401:"errorTokenIssue",403:"errorTokenIssue",404:"connectionFailedMessage",408:"requestTimedOut",429:"rateLimitExceeded",431:"headersTooLargeMessage"},B=Object.freeze([{pattern:/failed to fetch/i,key:"errorNetworkIssue"},{pattern:/timeout/i,key:"requestTimedOut"},{pattern:/cors/i,key:"corsBlocked"},{pattern:/url.*too/i,key:"urlTooLongMessage"},{pattern:/remote_dataset_workspace_required/i,key:"REMOTE_DATASET_WORKSPACE_REQUIRED"}]),W={require_https:"require_https",no_query_or_hash:"invalid_url",disallow_fmerest_for_webhook:"disallow_fmerest_for_webhook",invalid_url:"invalid_url"},q=Object.freeze(["fmeServerUrl","fmeServerToken","repository"]),G=Object.freeze(["status","statusCode","httpStatus"]),z="_",H=Object.freeze(new Set(["MAXX","MINX","MAXY","MINY","AreaOfInterest","AREA","ExtentGeoJson","tm_ttc","tm_ttl","tm_tag"])),$=Object.freeze(new Set([u.NOVALUE])),K=Object.freeze(new Set([u.DB_CONNECTION,u.WEB_CONNECTION,u.ATTRIBUTE_NAME,u.ATTRIBUTE_LIST,u.COORDSYS,u.REPROJECTION_FILE])),Q=Object.freeze(new Set([u.LISTBOX,u.LOOKUP_LISTBOX,u.ATTRIBUTE_LIST])),J=Object.freeze({[u.FLOAT]:o.NUMERIC_INPUT,[u.INTEGER]:o.NUMBER,[u.TEXT_EDIT]:o.TEXTAREA,[u.PASSWORD]:o.PASSWORD,[u.BOOLEAN]:o.SWITCH,[u.CHECKBOX]:o.SWITCH,[u.CHOICE]:o.RADIO,[u.FILENAME]:o.FILE,[u.FILENAME_MUSTEXIST]:o.FILE,[u.DIRNAME]:o.FILE,[u.DIRNAME_MUSTEXIST]:o.FILE,[u.DIRNAME_SRC]:o.FILE,[u.DATE_TIME]:o.DATE_TIME,[u.DATETIME]:o.DATE_TIME,[u.URL]:o.URL,[u.LOOKUP_URL]:o.URL,[u.LOOKUP_FILE]:o.FILE,[u.DATE]:o.DATE,[u.TIME]:o.TIME,[u.MONTH]:o.MONTH,[u.WEEK]:o.WEEK,[u.COLOR]:o.COLOR,[u.COLOR_PICK]:o.COLOR,[u.RANGE_SLIDER]:o.SLIDER,[u.MESSAGE]:o.MESSAGE,[u.TEXT_OR_FILE]:o.TEXT_OR_FILE,[u.REPROJECTION_FILE]:o.REPROJECTION_FILE,[u.COORDSYS]:o.COORDSYS,[u.ATTRIBUTE_NAME]:o.ATTRIBUTE_NAME,[u.ATTRIBUTE_LIST]:o.ATTRIBUTE_LIST,[u.DB_CONNECTION]:o.DB_CONNECTION,[u.WEB_CONNECTION]:o.WEB_CONNECTION,[u.SCRIPTED]:o.SCRIPTED}),X=Object.freeze(["esriRequest","esriConfig","projection","webMercatorUtils","SpatialReference"]),Y=(e,t,r)=>({kind:"loading",message:e,detail:t,messages:r}),Z=(e,t)=>({kind:"empty",message:e,actions:t}),ee=(e,t)=>({kind:"error",message:e,code:null==t?void 0:t.code,actions:null==t?void 0:t.actions,recoverable:null==t?void 0:t.recoverable,detail:null==t?void 0:t.detail});class te extends Error{constructor(e,t,r,n,i=s.ERROR){super(e),this.name="FmeFlowApiError",this.code=t,this.httpStatus=r,this.status=r,this.retryable=Boolean(n),this.isRetryable=this.retryable,this.severity=i}}var re=r(3128)}},t={};function u(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,u),i.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="";var c={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(c),u.d(c,{__set_webpack_public_path__:()=>xt,default:()=>Mt});var e=u(9244),t=u(7665),r=u(2686),n=u(4880),i=u(9757),o=u(6261),s=u(6500),a=class extends s.Q{constructor(e={}){super(),this.config=e,this.#U=new Map}#U;build(e,t,r){const o=t.queryKey,s=t.queryHash??(0,n.F$)(o,t);let a=this.get(s);return a||(a=new i.X({client:e,queryKey:o,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.#U.has(e.queryHash)||(this.#U.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#U.get(e.queryHash);t&&(e.destroy(),t===e&&this.#U.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){o.jG.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#U.get(e)}getAll(){return[...this.#U.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,n.MK)(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>(0,n.MK)(e,t))):t}notify(e){o.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){o.jG.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){o.jG.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},l=u(1692),d=u(8904),f=class extends l.k{#n;#F;#V;#j;constructor(e){super(),this.#n=e.client,this.mutationId=e.mutationId,this.#V=e.mutationCache,this.#F=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#F.includes(e)||(this.#F.push(e),this.clearGcTimeout(),this.#V.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#F=this.#F.filter((t=>t!==e)),this.scheduleGc(),this.#V.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#F.length||("pending"===this.state.status?this.scheduleGc():this.#V.remove(this))}continue(){return this.#j?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#P({type:"continue"})},r={client:this.#n,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#j=(0,d.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#P({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#P({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#V.canRun(this)});const n="pending"===this.state.status,i=!this.#j.canStart();try{if(n)t();else{this.#P({type:"pending",variables:e,isPaused:i}),await(this.#V.config.onMutate?.(e,this,r));const t=await(this.options.onMutate?.(e,r));t!==this.state.context&&this.#P({type:"pending",context:t,variables:e,isPaused:i})}const o=await this.#j.start();return await(this.#V.config.onSuccess?.(o,e,this.state.context,this,r)),await(this.options.onSuccess?.(o,e,this.state.context,r)),await(this.#V.config.onSettled?.(o,null,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(o,null,e,this.state.context,r)),this.#P({type:"success",data:o}),o}catch(t){try{throw await(this.#V.config.onError?.(t,e,this.state.context,this,r)),await(this.options.onError?.(t,e,this.state.context,r)),await(this.#V.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(void 0,t,e,this.state.context,r)),t}finally{this.#P({type:"error",error:t})}}finally{this.#V.runNext(this)}}#P(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),o.jG.batch((()=>{this.#F.forEach((t=>{t.onMutationUpdate(e)})),this.#V.notify({mutation:this,type:"updated",action:e})}))}};var h=class extends s.Q{constructor(e={}){super(),this.config=e,this.#B=new Set,this.#W=new Map,this.#q=0}#B;#W;#q;build(e,t,r){const n=new f({client:e,mutationCache:this,mutationId:++this.#q,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#B.add(e);const t=p(e);if("string"==typeof t){const r=this.#W.get(t);r?r.push(e):this.#W.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#B.delete(e)){const t=p(e);if("string"==typeof t){const r=this.#W.get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#W.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=p(e);if("string"==typeof t){const r=this.#W.get(t),n=r?.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){const t=p(e);if("string"==typeof t){const r=this.#W.get(t)?.find((t=>t!==e&&t.state.isPaused));return r?.continue()??Promise.resolve()}return Promise.resolve()}clear(){o.jG.batch((()=>{this.#B.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#B.clear(),this.#W.clear()}))}getAll(){return Array.from(this.#B)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,n.nJ)(t,e)))}findAll(e={}){return this.getAll().filter((t=>(0,n.nJ)(e,t)))}notify(e){o.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return o.jG.batch((()=>Promise.all(e.map((e=>e.continue().catch(n.lQ))))))}};function p(e){return e.options.scope?.id}var m=u(9658),v=u(6035);function g(e){return{onFetch:(t,r)=>{const i=t.options,o=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let r=!1;const c=(0,n.ZM)(t.options,t.fetchOptions),d=async(e,i,o)=>{if(r)return Promise.reject();if(null==i&&e.pages.length)return Promise.resolve(e);const s=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:i,direction:o?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",(()=>{r=!0})),t.signal)}),e})(),a=await c(s),{maxPages:l}=t.options,u=o?n.ZZ:n.y9;return{pages:u(e.pages,a,l),pageParams:u(e.pageParams,i,l)}};if(o&&s.length){const e="backward"===o,t={pages:s,pageParams:a},r=(e?b:y)(i,t);l=await d(t,r,e)}else{const t=e??s.length;do{const e=0===u?a[0]??i.initialPageParam:y(i,l);if(u>0&&null==e)break;l=await d(l,e),u++}while(u<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function y(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function b(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}const E=new class{#G;#V;#N;#z;#H;#$;#K;#Q;constructor(e={}){this.#G=e.queryCache||new a,this.#V=e.mutationCache||new h,this.#N=e.defaultOptions||{},this.#z=new Map,this.#H=new Map,this.#$=0}mount(){this.#$++,1===this.#$&&(this.#K=m.m.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#G.onFocus())})),this.#Q=v.t.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#G.onOnline())})))}unmount(){this.#$--,0===this.#$&&(this.#K?.(),this.#K=void 0,this.#Q?.(),this.#Q=void 0)}isFetching(e){return this.#G.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#V.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#G.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#G.build(this,t),i=r.state.data;return void 0===i?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,n.d2)(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return this.#G.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),o=this.#G.get(i.queryHash),s=o?.state.data,a=(0,n.Zw)(t,s);if(void 0!==a)return this.#G.build(this,i).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return o.jG.batch((()=>this.#G.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,r)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#G.get(t.queryHash)?.state}removeQueries(e){const t=this.#G;o.jG.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const r=this.#G;return o.jG.batch((()=>(r.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const r={revert:!0,...t},i=o.jG.batch((()=>this.#G.findAll(e).map((e=>e.cancel(r)))));return Promise.all(i).then(n.lQ).catch(n.lQ)}invalidateQueries(e,t={}){return o.jG.batch((()=>(this.#G.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=o.jG.batch((()=>this.#G.findAll(e).filter((e=>!e.isDisabled()&&!e.isStatic())).map((e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(n.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(i).then(n.lQ)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=this.#G.build(this,t);return r.isStaleByTime((0,n.d2)(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.lQ).catch(n.lQ)}fetchInfiniteQuery(e){return e.behavior=g(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.lQ).catch(n.lQ)}ensureInfiniteQueryData(e){return e.behavior=g(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return v.t.isOnline()?this.#V.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#G}getMutationCache(){return this.#V}getDefaultOptions(){return this.#N}setDefaultOptions(e){this.#N=e}setQueryDefaults(e,t){this.#z.set((0,n.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#z.values()],r={};return t.forEach((t=>{(0,n.Cp)(e,t.queryKey)&&Object.assign(r,t.defaultOptions)})),r}setMutationDefaults(e,t){this.#H.set((0,n.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#H.values()],r={};return t.forEach((t=>{(0,n.Cp)(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)})),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#N.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#N.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#G.clear(),this.#V.clear()}}({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,t)=>{var r;const n=(null==t?void 0:t.status)||(null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status);return 401!==n&&403!==n&&(!(n&&n>=400&&n<500)&&e<3)},refetchOnWindowFocus:!1,refetchOnReconnect:!1}}});var O=u(4321),R=u(4337),S=u(5938),w=u(2242),T=u(9778);const k={back:"Tillbaka",submit:"Best\xe4ll",cancel:"Avbryt",actionRetry:"F\xf6rs\xf6k igen",validatingStartup:"Verifierar inst\xe4llningar\u2026",orderConfirmation:"Best\xe4llningen \xe4r bekr\xe4ftad",orderComplete:"Exporten \xe4r klar",orderSentError:"Best\xe4llningen misslyckades",orderCancelled:"Best\xe4llningen avbr\xf6ts",orderCancelledTitle:"Best\xe4llning avbruten",orderCancelledMessage:"Best\xe4llningen avbr\xf6ts innan den slutf\xf6rdes.",orderCancelledTimeoutMessage:"Best\xe4llningen avbr\xf6ts p\xe5 grund av tidsgr\xe4ns. Arbetsytan tog f\xf6r l\xe5ng tid att k\xf6ra.",jobId:"Jobb-ID",workspace:"Arbetsyta",notificationEmail:"E\u2011post",downloadFilename:"Filnamn",deliveryMode:"Leveranss\xe4tt",deliveryModeSync:"Direkt nedladdning",deliveryModeAsync:"E\u2011postmeddelande",deliveryModeSchedule:"Schemalagt jobb",flowStatus:"FME-status",flowMessage:"FME-meddelande",jobCancelled:"Jobbet avbr\xf6ts",jobCancelledTimeout:"Jobbet avbr\xf6ts p\xe5 grund av tidsgr\xe4ns",jobFailed:"Jobbet misslyckades",contactSupportEmail:"Kontakta supporten via {email}.",emailNotificationSent:"E\u2011postmeddelande skickas n\xe4r jobbet \xe4r klart.",clickToDownload:"Ladda ner",reuseGeography:"Ny best\xe4llning",actionNewOrder:"Skapa ny best\xe4llning",actionEnd:"Avsluta",errorCode:"Felkod",orderResultMissing:"Inget tillg\xe4ngligt",submittingOrder:"Skickar best\xe4llning\u2026",submittingOrderSync:"Bearbetar export\u2026",submittingOrderSyncDetail:"Detta kan ta n\xe5gra minuter\u2026",submissionPhasePreparing:"F\xf6rbereder\u2026",submissionPhasePreparingDetail:"Validerar parametrar\u2026",submissionPhaseUploading:"Laddar upp\u2026",submissionPhaseUploadingDetail:"\xd6verf\xf6r filer\u2026",submissionPhaseFinalizing:"Slutf\xf6r\u2026",submissionPhaseFinalizingDetail:"Konfigurerar jobb\u2026",submissionPhaseSubmitting:"Skickar best\xe4llning\u2026",submissionPhaseSubmittingDetail:"Bearbetar best\xe4llning\u2026",submissionPhaseProcessing:"Bearbetar\u2026",submissionPhaseProcessingDetail:"Transformerar data\u2026",submissionPhaseDownloading:"H\xe4mtar\u2026",submissionPhaseDownloadingDetail:"F\xf6rbereder nedladdning\u2026",statusPreparingMapTools:"Initierar kartverktyg\u2026",statusPreparingMapToolsDetail:"Laddar ritfunktioner\u2026",loadingWorkspaces:"L\xe4ser arbetsytor\u2026",loadingWorkspacesDetail:"H\xe4mtar fr\xe5n repository\u2026",loadingWorkspaceDetails:"L\xe4ser arbetsytedata\u2026",loadingWorkspaceDetailsDetail:"H\xe4mtar parametrar\u2026",loadingGeometryValidation:"Validerar omr\xe5de\u2026",loadingGeometryValidationDetail:"Kontrollerar geometri\u2026",pleaseWait:"V\xe4nligen v\xe4nta\u2026",forcedAsyncDefault:"Exporten k\xf6rs asynkront f\xf6r att s\xe4kerst\xe4lla stabil prestanda.",forcedAsyncRuntime:"Exporten k\xf6rs asynkront eftersom arbetsytan uppskattas ta {seconds} s (gr\xe4ns {threshold} s).",forcedAsyncTransformers:"Exporten k\xf6rs asynkront eftersom arbetsytan anv\xe4nder {count} transformatorer (gr\xe4ns {threshold}).",forcedAsyncFileSize:"Exporten k\xf6rs asynkront eftersom resultatet uppskattas till {sizeMb} MB (gr\xe4ns {thresholdMb} MB).",forcedAsyncArea:"Exporten k\xf6rs asynkront eftersom omr\xe5det \xe4r {area} (gr\xe4ns {threshold}).",processingInProgress:"Bearbetning p\xe5g\xe5r\u2026",drawingModeTooltip:"V\xe4lj ritl\xe4ge f\xf6r att definiera omr\xe5det",drawingModePolygon:"Polygon",drawingModeRectangle:"Rektangel",drawingModePolygonTooltip:"Rita en polygon f\xf6r att definiera omr\xe5det",drawingModeRectangleTooltip:"Rita en rektangel f\xf6r att definiera omr\xe5det",tooltipBackToOptions:"\xc5terg\xe5 till exportalternativ",tooltipSubmitOrder:"Skicka best\xe4llningen f\xf6r bearbetning",tooltipCancel:"Avbryt nuvarande \xe5tg\xe4rd och b\xf6rja om",tooltipReuseGeography:"Skapa ny best\xe4llning med samma geografi",tooltipNewOrder:"Starta en ny best\xe4llning med samma geografi",fmeFlowTransformationFailed:"FME Flow-transformationen misslyckades. Kontrollera loggfilen ovan f\xf6r detaljer.",failedToLoadWorkspaces:"Det gick inte att ladda arbetsytor",failedToLoadWorkspaceDetails:"Det gick inte att ladda information om arbetsytan",errorUnknown:"Ett ok\xe4nt fel intr\xe4ffade",largeAreaWarning:"Det angivna omr\xe5det ({current}) \xe4r stort och kan g\xf6ra att exporten tar l\xe4ngre tid \xe4n vanligt.",largeAreaWarningWithThreshold:"Det angivna omr\xe5det {current} \xe4r stort och kan g\xf6ra att exporten tar l\xe4ngre tid \xe4n vanligt. Rekommenderad yta \xe4r under {threshold}.",noWorkspacesFound:"Inga arbetsytor hittades i detta repository",requiredField:"Detta f\xe4lt \xe4r obligatoriskt.",formValidationSingleError:"V\xe4nligen fyll i det obligatoriska f\xe4ltet.",formValidationMultipleErrors:"V\xe4nligen fyll i alla obligatoriska f\xe4lt.",missingExportConfiguration:"Saknar exportkonfiguration",placeholderSelect:"{field}\u2026",placeholderEnter:"{field}\u2026",placeholderTags:"Ange taggar separerade med kommatecken",placeholderEmail:"Ange e\u2011postadress",placeholderPhone:"Ange telefonnummer",placeholderSearch:"S\xf6k\u2026",geometryFieldMissing:"Ingen geometri vald. Rita ett omr\xe5de i kartan.",geometryFieldReady:"Geometri f\xe5ngad ({rings} ringar, {vertices} h\xf6rn).",geometryFieldParseError:"Fel: Kunde inte tolka geometri-JSON.",geometryFieldPreviewLabel:"F\xf6rhandsgranskning (Esri JSON)",placeholderSelectGeneric:"V\xe4lj ett alternativ",ariaButtonLabel:"Knapp",ariaLoadingDetails:"Laddningsdetaljer",ariaErrorActions:"Fel\xe5tg\xe4rder",ariaEmptyActions:"Tomt l\xe4ge \xe5tg\xe4rder",ariaSuccessActions:"Lyckade \xe5tg\xe4rder",ariaRequired:"Obligatoriskt",configureWorkspaceParameters:"Konfigurera arbetsytans parametrar",scheduleStartLabel:"Starttid",scheduleStartHelper:"Format: \xc5\xc5\xc5\xc5-MM-DD TT:MM:SS (FME Servers lokala tid)",scheduleStartPlaceholder:"2025-01-15 14:30:00",scheduleNameLabel:"Jobbnamn",scheduleNameHelper:"Namn f\xf6r det schemalagda jobbet (max 128 tecken)",scheduleNamePlaceholder:"Dataexport Sverige Q1",scheduleCategoryLabel:"Kategori",scheduleCategoryHelper:"Organisera jobbet i en kategori",scheduleCategoryPlaceholder:"Dataexport",scheduleDescriptionLabel:"Beskrivning (valfritt)",scheduleDescriptionPlaceholder:"Beskrivning av det schemalagda jobbet",scheduleInfoTitle:"Schema: K\xf6r en g\xe5ng (Runonce)",scheduleTimezoneHelper:"Starttiden m\xe5ste anges i FME Servers lokala tidszon, inte din lokala tid.",scheduleConfirmTitle:"Bekr\xe4fta schemalagt jobb",scheduleConfirmMessage:"Vill du schemal\xe4gga det h\xe4r jobbet?",scheduleSummaryTitle:"Schemainformation",scheduleJobName:"Jobbnamn",scheduleJobCategory:"Kategori",scheduleStartTime:"Starttid",scheduleJobDescription:"Beskrivning",scheduleTrigger:"Utl\xf6sare",blobType:"Filtyp",blobSize:"Filstorlek",SCHEDULE_START_REQUIRED:"Starttid kr\xe4vs f\xf6r schemalagda jobb",SCHEDULE_START_INVALID_FORMAT:"Ogiltigt datumformat. Anv\xe4nd: \xc5\xc5\xc5\xc5-MM-DD TT:MM:SS",SCHEDULE_START_INVALID_DATE:"Ogiltigt datum eller tid",SCHEDULE_START_PARSE_ERROR:"Kunde inte tolka starttiden",SCHEDULE_START_IN_PAST:"Starttiden ligger i det f\xf6rflutna",SCHEDULE_NAME_REQUIRED:"Jobbnamn kr\xe4vs",SCHEDULE_NAME_TOO_LONG:"Jobbnamnet \xe4r f\xf6r l\xe5ngt (max 128 tecken)",SCHEDULE_NAME_INVALID_CHARS:"Jobbnamnet inneh\xe5ller ogiltiga tecken",SCHEDULE_CATEGORY_REQUIRED:"Kategori kr\xe4vs",SCHEDULE_CATEGORY_TOO_LONG:"Kategorin \xe4r f\xf6r l\xe5ng (max 128 tecken)",REMOTE_DATASET_WORKSPACE_REQUIRED:"V\xe4lj en arbetsyta innan du laddar upp dataset.",remoteDatasetUploadLabel:"Ladda upp dataset (TEMP)",remoteDatasetUploadHelper:"V\xe4lj fil som anv\xe4nds som indata f\xf6r jobbet.",remoteDatasetUrlLabel:"Fj\xe4rr\u2011dataset URL (HTTPS)",remoteDatasetUrlHelper:"Ange HTTPS\u2011URL som anv\xe4nds som indata f\xf6r jobbet.",addRow:"L\xe4gg till rad",deleteRow:"Ta bort",tableEmpty:"Inga rader tillagda",tableColumnDefault:"V\xe4rde",tableActionsHeader:"\xc5tg\xe4rder",tableMoveUp:"Flytta upp",tableMoveDown:"Flytta ned",textInput:"Textinmatning",fileInput:"Filuppladdning",fileTooLarge:"Filen \xe4r f\xf6r stor. Maximal storlek \xe4r {maxSize} MB.",fileTypeNotAllowed:"Filtypen \xe4r inte till\xe5ten. Till\xe5tna format: .zip, .kmz, .json, .geojson, .gml",fileInvalid:"Ogiltig fil vald.",fileInputHint:"Accepterar: .zip, .kmz, .json, .geojson, .gml (max 150 MB)",invalidDateTimeFormat:"Ogiltigt format. Anv\xe4nd YYYY-MM-DD HH:mm:ss",errorLoadingTimeout:"Inl\xe4sningen tog f\xf6r l\xe5ng tid. F\xf6rs\xf6k igen.",integerRequired:"Heltal kr\xe4vs (decimaler ej till\xe5tna)",invalidNumber:"Ogiltigt nummer",mustBeGreaterThan:"M\xe5ste vara st\xf6rre \xe4n {value}",mustBeAtLeast:"M\xe5ste vara minst {value}",mustBeLessThan:"M\xe5ste vara mindre \xe4n {value}",mustBeAtMost:"M\xe5ste vara h\xf6gst {value}"};var A=u(3271),I=u(3890),_=u(9124),C=u.n(_),M=u(884),x=u.n(M),L=u(6278),j=u.n(L),N=u(5668),D=u.n(N),P=u(4712),U=u.n(P),F=u(3744),V=u.n(F),B=u(7711),W=u.n(B),q=u(2606),G=u.n(q),z=u(657),H=u.n(z),$=u(5502),K=u.n($),Q=u(3624),J=u.n(Q),X=u(1337),Y=u.n(X),Z=u(7413),ee=u.n(Z),te=u(71),re=u.n(te),ne=u(1920),ie=u.n(ne),oe=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const se=T.$W,ae={error:j(),map:G(),polygon:K(),warning:ie(),"person-lock":H(),folder:U(),data:C(),"shared-no":Y(),"feature-service":D(),"link-tilted":W(),time:re(),setting:J(),email:x(),info:V(),success:ee()},le={warning:"warning",error:"error",info:"info",success:"success"},ue=()=>(0,T.MN)(),ce=w.YG,de=w.j_,fe=(e,t)=>[...e,(0,A.RM)(t)].filter(Boolean),he=(e,t)=>fe([e.fullWidth],t),pe=e=>{const{id:t,required:r,errorText:n,errorSuffix:i}=e||{};return{"aria-required":!!r,"aria-invalid":!!n,"aria-describedby":n&&t?(0,A.LH)(t,i):void 0}},me=(t,r)=>{const{tooltip:n,placement:i,block:o,jimuCss:s,jimuStyle:a,styles:l}=r;if(!n)return t;const u=[s,(0,A.RM)(a),o?l.tooltipWrap.block:l.tooltipWrap.inline];return(0,e.jsx)("span",{css:u},(0,e.jsx)(Ee,{content:n,placement:i},(0,e.jsx)("span",{css:l.tooltipWrap.anchor},t)))},ve=e=>"auto"===e?se.tooltip.position.top:e,ge=(t,r)=>(0,e.jsx)(Ee,{content:t("requiredField"),placement:"bottom"},(0,e.jsx)("span",{css:r.typo.required,"aria-label":t("ariaRequired"),role:"img","aria-hidden":"false"},se.required)),ye=({loading:t,children:r,text:n,icon:i,alignText:o})=>{const s=ue();if(t)return(0,e.jsx)(O.Loading,{type:O.LoadingType.Donut});if(r)return(0,e.jsx)(e.React.Fragment,null,r);const a="string"==typeof i&&i.length>0||null!=i&&e.React.isValidElement(i),l=!!n;if(!a&&!l)return null;if(a&&!l)return"string"==typeof i?(0,e.jsx)(be,{src:i,size:se.icon.large}):i;if(l&&!a)return(0,e.jsx)(e.React.Fragment,null,n);const u="string"==typeof i?(0,e.jsx)(be,{src:i,size:se.icon.medium}):i,c=(0,e.jsx)("span",{css:s.btn.icon,"aria-hidden":"true"},u);return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{css:s.btn.text(o)},n),c)},be=t=>{var r,{src:n,size:i=se.icon.medium,className:o,style:s,role:a="img","aria-label":l,"aria-hidden":u}=t,c=oe(t,["src","size","className","style","role","aria-label","aria-hidden"]);const d=null!==(r=ae[n])&&void 0!==r?r:n,f=null!=u?u:!l;return(0,e.jsx)(O.SVG,Object.assign({},c,{src:d,size:i,className:o,role:a,"aria-label":l,"aria-hidden":f,css:fe([],s)}))},Ee=t=>{var{content:r,children:n,showArrow:i=se.tooltip.showArrow,placement:o=se.tooltip.position.top,disabled:s=!1}=t,a=oe(t,["content","children","showArrow","placement","disabled"]);const l=r;if(!e.React.isValidElement(n)||!l||s)return(0,e.jsx)(e.React.Fragment,null,n);const u=((t,r)=>{const n=(null==t?void 0:t.props)||{};if(!n.disabled&&!n["aria-disabled"])return t;const i="string"==typeof r?r:void 0;return(0,e.jsx)("span",{"aria-disabled":"true","aria-label":i},t)})(n,l),c=ve(o);return(0,e.jsx)(O.Tooltip,Object.assign({title:l,showArrow:i,placement:c},a),u)},Oe=t=>(0,e.jsx)(O.Checkbox,Object.assign({},t)),Re=t=>{var{value:r,defaultValue:n,required:i=!1,maxLength:o,errorText:s,type:a="text",step:l,onChange:u,onBlur:c,onFileChange:d}=t,f=oe(t,["value","defaultValue","required","maxLength","errorText","type","step","onChange","onBlur","onFileChange"]);const h=ue(),p="file"===a,[m,v]=de(r,n||""),[g,y]=p?[void 0,void 0]:[m,v],b=e.hooks.useEventCallback((e=>{const t=e.target.value;p||y(t),p&&d?d(e):u&&u(t)})),E=e.hooks.useEventCallback((e=>{c&&c(p?"":e.target.value)})),R=pe({id:f.id,required:i,errorText:s});return p?(0,e.jsx)("input",Object.assign({},f,{type:"file",onChange:b,onBlur:E,required:i,title:s},R,{css:he(h,f.style)})):(0,e.jsx)(O.TextInput,Object.assign({},f,{type:a,value:g,step:l,onChange:b,onBlur:E,required:i,maxLength:o,title:s},R,{css:he(h,f.style)}))},Se=t=>{var{value:r,defaultValue:n,onChange:i,rows:o=2,onBlur:s}=t,a=oe(t,["value","defaultValue","onChange","rows","onBlur"]);const l=ue(),[u,c]=de(r,n||""),d=e.hooks.useEventCallback((e=>{const t=e.target.value;c(t),null==i||i(t)})),f=e.hooks.useEventCallback((e=>{null==s||s(e.target.value)})),h=a.validationMessage||a.errorText,p=pe({id:a.id,required:a.required,errorText:h,errorSuffix:"error"}),m=a,{rows:v}=m,g=oe(m,["rows"]);return(0,e.jsx)(O.TextArea,Object.assign({},g,{value:u,onChange:d,rows:o,onBlur:f,css:fe([l.fullWidth,l.textareaResize],a.style)},p))},we=({value:t,defaultValue:r,placeholder:n,style:i,onChange:o})=>{const s=ue();return(0,e.jsx)(O.UrlInput,{value:t,defaultValue:r,placeholder:n,schemes:["https"],onChange:e=>{const t=((null==e?void 0:e.value)||"").trim();null==o||o(t)},css:he(s,i)})},Te=t=>(0,e.jsx)(O.Switch,Object.assign({},t)),ke=({options:t,value:r,defaultValue:n,onChange:i,style:o,disabled:s,"aria-label":a})=>{const l=ue(),u=void 0!==r;return(0,e.jsx)("div",{css:he(l,o),role:"radiogroup","aria-label":a},t.map(((t,o)=>(0,e.jsx)(O.Radio,Object.assign({key:`${t.value}-${o}`,value:t.value},u?{checked:r===t.value}:{defaultChecked:n===t.value},{disabled:s,onChange:e=>{null==i||i(e.target.value)}}),t.label))))},Ae=({value:t,defaultValue:r,min:n,max:i,step:o,onChange:s,style:a,disabled:l,"aria-label":u,decimalPrecision:c,showValue:d=!0})=>{const f=ue(),h=e.hooks.useEventCallback((e=>(0,A.xi)(e,c))),p="number"==typeof t&&Number.isFinite(t)?t:"number"==typeof r&&Number.isFinite(r)?r:void 0,m=d&&"number"==typeof p?h(p):"";return(0,e.jsx)("div",{css:f.form.sliderField},(0,e.jsx)(O.Slider,{value:t,defaultValue:r,min:n,max:i,step:o,disabled:l,"aria-label":u,onChange:e=>{const t=parseFloat(e.target.value);!Number.isNaN(t)&&Number.isFinite(t)&&(null==s||s(t))},css:he(f,a)}),d&&""!==m?(0,e.jsx)("div",{css:f.form.sliderValue,"aria-live":"polite",role:"status"},m):null)},Ie=t=>{var{style:r,onChange:n}=t,i=oe(t,["style","onChange"]);const o=ue();return(0,e.jsx)(O.NumericInput,Object.assign({},i,{onChange:e=>{"number"!=typeof e||Number.isNaN(e)?(null==e||Number.isNaN(e))&&(null==n||n(void 0)):null==n||n(e)},css:he(o,r)}))},_e=({value:t,suggestions:r,placeholder:n,onChange:i,style:o})=>{const s=ue();return(0,e.jsx)(O.TagInput,{values:t,suggestions:r,placeholder:n,onChange:e=>{null==i||i(e)},css:he(s,o)})},Ce=t=>(0,e.jsx)(O.Table,Object.assign({},t)),Me=({value:t,defaultValue:r,onChange:n,style:i,"aria-label":o})=>{const s=ue();return(0,e.jsx)(R.ColorPicker,{color:t||r||"#000000",onChange:e=>{null==n||n(e)},"aria-label":o,css:he(s,i),showArrow:!0})},xe=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/,Le=/^([0-9]{2}):([0-9]{2})(?::([0-9]{2}))?$/,je=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.includes("T")?t:`${t}T00:00:00`,[n="",i=""]=r.split("T"),o=xe.exec(n),s=Le.exec(i);if(!o||!s)return null;const a=Number(o[1]),l=Number(o[2]),u=Number(o[3]),c=Number(s[1]),d=Number(s[2]),f=s[3]?Number(s[3]):0;if(!(Number.isFinite(a)&&Number.isFinite(l)&&Number.isFinite(u)&&Number.isFinite(c)&&Number.isFinite(d)&&Number.isFinite(f)))return null;if(l<1||l>12)return null;if(u<1||u>31)return null;if(c<0||c>23)return null;if(d<0||d>59)return null;if(f<0||f>59)return null;const h=new Date(a,l-1,u,c,d,f,0);return h.getFullYear()!==a||h.getMonth()!==l-1||h.getDate()!==u||h.getHours()!==c||h.getMinutes()!==d||h.getSeconds()!==f||Number.isNaN(h.getTime())?null:h},Ne=(e,t="iso")=>{if(!e)return"";const r=e.getTime();if(Number.isNaN(r))return"";const n=e.getFullYear(),i=(0,A.wl)(e.getMonth()+1),o=(0,A.wl)(e.getDate()),s=(0,A.wl)(e.getHours()),a=(0,A.wl)(e.getMinutes()),l=(0,A.wl)(e.getSeconds());return"fme"===t?`${n}-${i}-${o} ${s}:${a}:${l}`:`${n}-${i}-${o}T${s}:${a}:${l}`},De=({value:t,defaultValue:r,onChange:n,style:i,disabled:o,"aria-label":s,mode:a="date-time",format:l="iso"})=>{const u=ue(),[c,d]=de(t,r,n),f=()=>{const e=new Date;return"date"===a&&e.setHours(0,0,0,0),e},h=e.React.useRef(f());e.hooks.useUpdateEffect((()=>{h.current=f()}),[a]);const p=h.current,m=je(c)||je(r)||p,v=e.hooks.useEventCallback(((e,t)=>{if("number"==typeof e&&Number.isFinite(e)){const t=new Date(e);return"date"===a&&t.setHours(0,0,0,0),void d(Ne(t,l))}if(e instanceof Date){const t=new Date(e.getTime());return"date"===a&&t.setHours(0,0,0,0),void d(Ne(t,l))}null==e&&d("")})),g=fe([u.fullWidth,u.relative],i),y=(0,e.jsx)("div",{css:g},(0,e.jsx)(S.DatePicker,{selectedDate:m,runtime:!1,showTimeInput:"date-time"===a,isLongTime:"date-time"===a,supportVirtualDateList:!1,disablePortal:!0,onChange:v,"aria-label":s}));return o?(0,e.jsx)("span",{"aria-disabled":"true",css:u.disabledPicker},y):y},Pe=({html:t,placeholder:r,className:n,style:i})=>t&&0!==t.trim().length?(0,e.jsx)(O.RichDisplayer,{className:n,css:(0,A.RM)(i),value:t}):(0,e.jsx)("div",{className:n,css:(0,A.RM)(i)},r||""),Ue=({options:t=[],value:r,defaultValue:n,onChange:i,placeholder:o,disabled:s=!1,style:a,coerce:l})=>{const u=e.hooks.useTranslation(k),c=ue(),[d,f]=de(r,n),h=o||u("placeholderSelectGeneric"),p=e.hooks.useEventCallback((e=>{if("number"===l&&"string"==typeof e){const t=Number(e);return Number.isFinite(t)?t:e}return e})),m=e.hooks.useEventCallback(((e,t)=>{var r;const n=void 0!==t?t:null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.value,o=p(n);f(o),null==i||i(o)})),v=null==d||"string"!=typeof d&&"number"!=typeof d?void 0:String(d);return(0,e.jsx)(O.Select,{value:v,onChange:m,disabled:s,placeholder:h,zIndex:se.zIndex.selectMenu,css:he(c,a)},(t||[]).map((t=>t&&null!=t.value?(0,e.jsx)(O.Option,{key:String(t.value),value:t.value,active:String(t.value)===v,disabled:Boolean(t.disabled),onClick:()=>{t.disabled||String(t.value)===v||m(void 0,t.value)}},!t.hideLabel&&(t.label||String(t.value))):null)).filter(Boolean))},Fe=({options:t=[],values:r,defaultValues:n=[],onChange:i,placeholder:o,disabled:s=!1,style:a})=>{const l=e.hooks.useTranslation(k),u=ue(),[c,d]=de(r,n),f=o||l("placeholderSelectGeneric"),h=e.hooks.useEventCallback(((e,t)=>{d(t||[]),null==i||i(t||[])})),p=t.filter((e=>e&&null!=e.value&&null!=e.label)).map((e=>({value:e.value,label:String(e.label),disabled:Boolean(e.disabled)})));return(0,e.jsx)("div",{css:fe([],a)},(0,e.jsx)(O.MultiSelect,{values:c||[],defaultValues:n,onChange:h,placeholder:f,disabled:s,items:p,css:u.fullWidth}))},Ve=t=>{var r,{text:n,icon:i,alignText:o="start",tooltip:s,type:a,tooltipDisabled:l=!1,tooltipPlacement:u=se.button.defaults.tooltipPosition,loading:c=!1,onClick:d,children:f,block:h=se.button.defaults.block,size:p,variant:m="contained",color:v,htmlType:g="button"}=t,y=oe(t,["text","icon","alignText","tooltip","type","tooltipDisabled","tooltipPlacement","loading","onClick","children","block","size","variant","color","htmlType"]);const b=ue(),E=e.hooks.useTranslation(k),R=e.hooks.useEventCallback((()=>{y.disabled||c||!d||d()})),S=y["aria-label"],w=(0,A.kz)(n,!!i,S,s,E("ariaButtonLabel")),T=y,{style:I,css:_}=T,C=oe(T,["style","css"]),M=!!s&&!l,x=(0,e.jsx)(O.Button,Object.assign({},C,{type:a,color:v,variant:m,size:p,htmlType:g,icon:!n&&!!i,onClick:R,disabled:y.disabled||c,"aria-busy":c,"aria-live":c?"polite":void 0,"aria-label":w,title:s?void 0:y.title,css:[b.relative,!M&&_,!M&&(0,A.RM)(I)],block:h,tabIndex:null!==(r=y.tabIndex)&&void 0!==r?r:0}),(0,e.jsx)(ye,{loading:c,text:n,icon:i,alignText:o},f));return M?me(x,{tooltip:s,placement:u,block:h,jimuCss:_,jimuStyle:I,styles:b}):x},Be=t=>{var{className:r,style:n,text:i,children:o,type:s="warning",withIcon:a,variant:l="default",jimuVariant:u,tooltipPlacement:c=se.tooltip.position.top}=t,d=oe(t,["className","style","text","children","type","withIcon","variant","jimuVariant","tooltipPlacement"]);const f=ue(),h=le[s],p=null!=o?o:null!=i?(0,e.jsx)("span",null,i):null,m="icon"!==l||h?l:"default",v=d,{css:g}=v,y=oe(v,["css"]);if("icon"===m){const t="string"==typeof i?i:"string"==typeof o?o:p,a=Boolean(t),l="string"==typeof i?i:"string"==typeof o?o:void 0,d=(0,e.jsx)(O.Alert,Object.assign({},y,{type:s,withIcon:!1,variant:u,className:r,css:fe([f.alert,a?void 0:g],n)}),h?(0,e.jsx)("div",{css:f.alertIcon},(0,e.jsx)(be,{src:h,"aria-label":l})):null);return a?me(d,{tooltip:t,placement:ve(c),block:!0,jimuCss:g,jimuStyle:n,styles:f}):d}return null!=p||h?(0,e.jsx)(O.Alert,Object.assign({},y,{type:s,withIcon:!1,variant:u,className:r,css:fe([f.alert,g],n)}),(0,e.jsx)("div",{css:f.alertContent},h?(0,e.jsx)("div",{css:f.alertIcon},(0,e.jsx)(be,{src:h,size:se.icon.small})):null,p?(0,e.jsx)("div",{css:f.alertMessage},p):null)):(0,e.jsx)(O.Alert,Object.assign({},y,{type:s,withIcon:!1,variant:u,className:r,css:fe([f.alert,g],n)}))},We=({items:t,value:r,defaultValue:n,onChange:i,onTabChange:o,ariaLabel:s})=>{var a;const l=ue(),[u,c]=de(void 0,n||(null===(a=t[0])||void 0===a?void 0:a.value)),d=void 0!==r,f=d?r:u,h=e.hooks.useEventCallback((e=>{const r=t.find((t=>t.value===e)),n=r&&"number"==typeof r.value?Number(e):e;d||c(n),null==i||i(n),null==o||o(n)}));return(0,e.jsx)(O.AdvancedButtonGroup,{role:"tablist","aria-label":s,css:[l.row]},t.map(((t,r)=>{const n=f===t.value;return(0,e.jsx)(Ve,{key:"string"==typeof t.value||"number"==typeof t.value?String(t.value):`tab-${r}-${t.label}`,icon:t.icon,size:"lg",text:t.hideLabel?void 0:t.label,active:n,"aria-label":t.label,type:n?"primary":"tertiary",role:"tab","aria-selected":n,tooltip:t.tooltip,tooltipPlacement:"bottom",disabled:t.disabled,onClick:()=>{n||h(t.value)},block:!1})})))},qe=({state:t,className:r,style:n,renderActions:i,center:o})=>{var s,a,l;const u=ue(),c=e.hooks.useTranslation(k),{showLoading:d,snapshot:f}=(0,w.kg)(t,se.loading.delay),[h,p]=e.React.useState(0),m=new Set,v=[],g=e=>{if(null!=e){if("string"==typeof e){const t=e.trim();if(!t||m.has(t))return;return m.add(t),void v.push(t)}v.push(e)}},y="loading"===t.kind?t.message:void 0,b="loading"===t.kind?t.detail:void 0,E="loading"===t.kind&&Array.isArray(t.messages)?t.messages:void 0;g(null!==(s=null==f?void 0:f.message)&&void 0!==s?s:y),g(null!==(a=null==f?void 0:f.detail)&&void 0!==a?a:b);const R=null!==(l=(null==f?void 0:f.messages)&&Array.isArray(f.messages)?f.messages:E)&&void 0!==l?l:[];for(const e of R)g(e);const S=v.length,T=v.map(((t,r)=>"string"==typeof t?t:e.React.isValidElement(t)&&null!=t.key?String(t.key):`node-${r}`)).join("|");e.hooks.useEffectWithPreviousValues((()=>{p(0)}),[T,d]),e.hooks.useEffectWithPreviousValues((()=>{0!==S||0===h?S>0&&h>=S&&p(S-1):p(0)}),[S,h]),e.hooks.useEffectWithPreviousValues((()=>{var e,t;if(!d||S<=1)return;const r=null!==(e=se.loading.detailDelay)&&void 0!==e?e:se.loading.delay,n=null!==(t=se.loading.cycleInterval)&&void 0!==t?t:0;let i=null,o=null;return i=setTimeout((()=>{p((e=>{if(S<=1)return 0;const t=e%S;return 0===t?1:t})),n>0&&(o=setInterval((()=>{p((e=>S<=1?0:(e+1)%S))}),n))}),r),()=>{i&&clearTimeout(i),o&&clearInterval(o)}}),[d,S,T]);const I=S>0&&h>=0?v[Math.max(0,h)%S]:null,_=e.hooks.useEventCallback((({actions:t,ariaLabel:r})=>(null==t?void 0:t.length)?(0,e.jsx)("div",{role:"group","aria-label":r,css:u.btn.group},t.map(((t,r)=>(0,e.jsx)(Ve,{key:r,onClick:t.onClick,disabled:t.disabled,variant:t.variant,text:t.label,block:!0})))):null)),C=i?({actions:e,ariaLabel:t})=>i(e,t):_,M=()=>(0,e.jsx)("div",{css:u.centered,role:"status","aria-live":"polite","aria-atomic":!0},d&&(0,e.jsx)(O.Loading,{type:O.LoadingType.Donut,width:se.loading.width,height:se.loading.height}),I?(0,e.jsx)("div",{css:[u.typo.loadingMessage,u.loadingText]},I):null),x="loading"===t.kind||d?M():(()=>{switch(t.kind){case"error":{const r=C({actions:t.actions,ariaLabel:c("ariaErrorActions")}),n=null==t.detail?null:(0,e.jsx)("div",{css:u.typo.caption},t.detail);return(0,e.jsx)("div",{role:"alert","aria-live":"assertive",css:u.stateView.error},(0,e.jsx)("div",{css:u.stateView.errorContent},(0,e.jsx)("div",{css:[u.row,u.rowAlignCenter]},(0,e.jsx)(be,{src:(0,A.sJ)(t.code),size:se.icon.large}),(0,e.jsx)("div",{css:u.typo.title},t.message)),(0,e.jsx)(e.React.Fragment,null,n,t.code?(0,e.jsx)("div",null,c("errorCode"),": ",t.code):null)),r?(0,e.jsx)("div",{css:u.stateView.errorActions},r):null)}case"empty":return(0,e.jsx)("div",{role:"status","aria-live":"polite"},(0,e.jsx)("div",null,t.message),C({actions:t.actions,ariaLabel:c("ariaEmptyActions")}));case"success":return(0,e.jsx)("div",{role:"status","aria-live":"polite"},t.title&&(0,e.jsx)("div",{css:u.typo.title},t.title),t.message&&(0,e.jsx)("div",{css:u.typo.caption},t.message),C({actions:t.actions,ariaLabel:c("ariaSuccessActions")}));case"content":return(0,e.jsx)(e.React.Fragment,null,t.node);case"loading":return M()}})(),L="boolean"==typeof o?o:d;return(0,e.jsx)("div",{className:r,css:fe([u.stateView.frame,L?u.centered:void 0],n)},x)},Ge=t=>{const{buttons:r,secondaryButton:n,primaryButton:i,className:o,style:s}=t,a=ue(),l=(null==r?void 0:r.length)?r.map(((e,t)=>({config:e,role:t===r.length-1?"primary":"secondary",key:t.toString()}))):[n?{config:n,role:"secondary",key:"secondary"}:null,i?{config:i,role:"primary",key:"primary"}:null].filter((e=>null!=e));return l.length?(0,e.jsx)("div",{css:fe([a.btn.group],s),className:o},l.map((({config:t,role:r,key:n})=>{var i;const o="primary"===r?"primary":"default",s=Object.assign(Object.assign({},t),{type:null!==(i=t.type)&&void 0!==i?i:o});return(0,e.jsx)(Ve,Object.assign({key:n},s,{block:!0,css:a.btn.flex}))}))):null},ze=t=>{const{variant:r,className:n,style:i,children:o}=t,s=e.hooks.useTranslation(k),a=ue();if("layout"===r){const{title:r,subtitle:l,onBack:u,onSubmit:c,isValid:d=!0,loading:f=!1}=t;return(0,e.jsx)("div",{className:n,css:fe([a.form.layout],i)},(0,e.jsx)("div",{css:a.form.header},r&&(0,e.jsx)("div",{css:a.typo.title},r),l&&(0,e.jsx)("div",{css:a.typo.caption},l)),(0,e.jsx)("div",{css:a.form.content},(0,e.jsx)("div",{css:a.form.body},o),(0,e.jsx)("div",{css:a.form.footer},(0,e.jsx)(Ge,{secondaryButton:u?{text:s("back"),onClick:u,disabled:f,tooltip:s("tooltipBackToOptions")}:void 0,primaryButton:{text:s("submit"),onClick:c,disabled:!d||f,loading:f,tooltip:s("tooltipSubmitOrder")}}))))}if("field"===r){const{label:r,helper:s,required:a=!1,readOnly:l=!1,error:u}=t;return(0,e.jsx)(He,{className:n,style:i,label:r,helper:s,required:a,readOnly:l,error:u},o)}throw new Error(`Unknown Form variant: ${r}`)},He=({className:t,style:r,label:n,helper:i,required:o=!1,readOnly:s=!1,check:a=!1,error:l,children:u})=>{const c=ue(),d=e.hooks.useTranslation(k),f=ce(),{id:h,child:p}=((t,r,n)=>{if(r||!e.React.isValidElement(t))return{id:void 0,child:t};const i=t.props||{},o=i.id||n;return i.id?{id:o,child:t}:{id:o,child:e.React.cloneElement(t,{id:o})}})(u,s,f);return(0,e.jsx)(O.FormGroup,{className:t,css:fe([c.field],r)},a?(0,e.jsx)(O.Label,{css:[c.typo.label,c.checkLabel],check:!0},(0,e.jsx)("span",null,n,o&&ge(d,c)),!s&&p):(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(O.Label,{css:c.typo.label,check:!1,for:h},n,o&&ge(d,c)),!s&&p),i&&!l&&(0,e.jsx)("div",{css:c.typo.hint,id:h?`${h}-help`:void 0},i),l&&(0,e.jsx)("div",{id:h?`${h}-error`:void 0,className:"d-block",role:"alert"},l))},$e=({values:t,onChange:r,translate:n,disabled:i=!1})=>{const o=(()=>{const e="string"==typeof t.start?t.start.trim():"";return e?(0,I.xH)(e):null})(),s=(()=>{const e="string"==typeof t.name?t.name.trim():"";return e?(0,I.h2)(e):null})(),a=(()=>{const e="string"==typeof t.category?t.category.trim():"";return e?(0,I.Ao)(e):null})(),l=e=>{if(e&&!e.valid)return e.error?n(e.error):void 0};return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(He,{label:n("scheduleStartLabel"),required:!0,helper:n("scheduleTimezoneHelper"),error:l(o)},(0,e.jsx)(De,{value:"string"==typeof t.start?t.start:"",onChange:e=>{r("start",e)},mode:"date-time",format:"fme",disabled:i,"aria-label":n("scheduleStartLabel")})),(0,e.jsx)(He,{label:n("scheduleNameLabel"),required:!0,helper:n("scheduleNameHelper"),error:l(s)},(0,e.jsx)(Re,{type:"text",value:"string"==typeof t.name?t.name:"",placeholder:n("scheduleNamePlaceholder"),onChange:e=>{r("name",e)},disabled:i,"aria-required":"true","aria-invalid":s&&!s.valid?"true":"false"})),(0,e.jsx)(He,{label:n("scheduleCategoryLabel"),required:!0,helper:n("scheduleCategoryHelper"),error:l(a)},(0,e.jsx)(Re,{type:"text",value:"string"==typeof t.category?t.category:"",placeholder:n("scheduleCategoryPlaceholder"),onChange:e=>{r("category",e)},disabled:i,"aria-required":"true","aria-invalid":a&&!a.valid?"true":"false"})),(0,e.jsx)(He,{label:n("scheduleDescriptionLabel"),required:!1},(0,e.jsx)(Se,{value:"string"==typeof t.description?t.description:"",placeholder:n("scheduleDescriptionPlaceholder"),onChange:e=>{r("description",e)},disabled:i,rows:2})))},Ke=(t,r,n,i)=>{if(!t)return(0,e.jsx)(e.React.Fragment,null,i);const o=r("contactSupportEmail"),s=o.split(T.BY);return s.length<2?(0,e.jsx)(e.React.Fragment,null,o," ",(0,e.jsx)("a",{href:`mailto:${t}`,css:n.typo.link,"aria-label":r("contactSupportEmail",{email:t})},t)):s.map(((i,o)=>o<s.length-1?(0,e.jsx)(e.React.Fragment,{key:o},i,(0,e.jsx)("a",{href:`mailto:${t}`,css:n.typo.link,"aria-label":r("contactSupportEmail",{email:t})},t)):(0,e.jsx)(e.React.Fragment,{key:o},i)))};var Qe=u(3128);const Je=new Set([T.Vw.SELECT,T.Vw.COORDSYS,T.Vw.ATTRIBUTE_NAME,T.Vw.DB_CONNECTION,T.Vw.WEB_CONNECTION,T.Vw.REPROJECTION_FILE]),Xe=new Set([T.Vw.MULTI_SELECT,T.Vw.ATTRIBUTE_LIST]),Ye="text",Ze="file",et=(t,r,n,i,o={})=>{const{readOnly:s,maxLength:a,overrides:l}=o,u="string"==typeof r||"number"==typeof r?String(r):"",c=l&&void 0!==l.disabled?l.disabled:s;return(0,e.jsx)(Re,Object.assign({},l,{type:"number"===t?"text":t,value:u,placeholder:n,onChange:e=>{if("number"===t){if(""===e)return void i(null);const t=Number(e.replace(/,/g,"."));i(Number.isFinite(t)?t:null)}else i(e)},disabled:c,maxLength:a}))},tt=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),rt=(e,t)=>{if(Array.isArray(e))return e.map((e=>{var r;if(tt(e)){const n={};for(const i of t)n[i.key]=null!==(r=e[i.key])&&void 0!==r?r:"";return n}return{value:e}}));if("string"==typeof e&&e.trim())try{const r=JSON.parse(e);return Array.isArray(r)?rt(r,t):[]}catch(t){return e.split(/\r?\n/).map((e=>e.trim())).filter(Boolean).map((e=>({value:e})))}return[]},nt=["text","path","location","value","dataset","defaultValue","fileName","filename","file_path","file","uri","url","name"],it=[".zip",".kmz",".json",".geojson",".gml"],ot=new Set(["application/zip","application/x-zip-compressed","application/vnd.google-earth.kmz","application/json","application/geo+json","application/gml+xml","text/plain",""].map((e=>e.toLowerCase()))),st=e=>{var t;return(null===(t=null==e?void 0:e.accept)||void 0===t?void 0:t.length)?e.accept.map((e=>(e=>{const t=(0,A.Nn)(e).toLowerCase();return t?"*/*"===t||t.endsWith("/*")||t.includes("/")?t:t.startsWith("*.")?`.${t.slice(2)}`:t.startsWith(".")?t:`.${t.replace(/^\*+/,"")}`:null})(e))).filter((e=>Boolean(e))):[]},at=(e,t)=>{if(!e)return{valid:!1,error:"fileInvalid"};const r=st(t),n="number"==typeof(null==t?void 0:t.maxSizeMb)&&Number.isFinite(t.maxSizeMb)?t.maxSizeMb:void 0,i=void 0===n?150:n>0?n:void 0;if(void 0!==i&&e.size>1048576*i)return{valid:!1,error:"fileTooLarge",maxSizeMB:Math.floor(i)};const o=(e.name||"").toLowerCase(),s=(e.type||"").toLowerCase();if(r.length){if(!r.some((e=>{if("*/*"===e)return!0;if(e.endsWith("/*")){const t=e.slice(0,e.length-1);return!!s&&s.startsWith(t)}return e.includes("/")?!!s&&s===e:o.endsWith(e)})))return{valid:!1,error:"fileTypeNotAllowed"}}else{if(!it.some((e=>o.endsWith(e))))return{valid:!1,error:"fileTypeNotAllowed"};if(!ot.has(s))return{valid:!1,error:"fileTypeNotAllowed"}}return{valid:!0}},lt=e=>{if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return String(e);if(e){if((0,A.E$)(e))return(0,A.SB)(e);if(Array.isArray(e))for(const t of e){const e=lt(t);if(e)return e}else if(tt(e)){const t=e;for(const e of nt)if(e in t){const r=lt(t[e]);if(r)return r}}}},ut=({field:t,value:r,onChange:n,translate:i})=>{var o;const s=e.hooks.useTranslation(k),a=null!=i?i:s,l=(0,Qe.MN)(),u=Xe.has(t.type),c=t.type===T.Vw.TEXT_OR_FILE?r:(0,A.He)(r,u),d=(0,A.B_)(a,t.label),[f,h]=e.React.useState(null),p=Je.has(t.type)||Xe.has(t.type),m=t.options||[],v=p&&!u&&1===m.length,g=v?null===(o=m[0])||void 0===o?void 0:o.value:void 0,y=e.hooks.useEventCallback((()=>{if(void 0!==g){const e=c;Object.is(e,g)||n(g)}})),b=(0,A.ZF)(p,m);e.hooks.useEffectWithPreviousValues((()=>{if(!v||void 0===g)return;const e=c;!(null==e||"string"==typeof e&&""===e.trim())&&Object.is(e,g)||n(g)}),[v,g,c,n]);return(()=>{var i,o,s,u,p,g,E,O,R,S,w;switch(t.type){case T.Vw.HIDDEN:return(0,e.jsx)(e.React.Fragment,null);case T.Vw.MESSAGE:{const r=t.description||t.label||"";return(0,e.jsx)(Pe,{html:r})}case T.Vw.TABLE:{const l=t.tableConfig;if(!(null===(i=null==l?void 0:l.columns)||void 0===i?void 0:i.length)){const i=(0,A.H9)(r),o=(e,t)=>{const r=[...i];r[e]=t,n(r)},s=()=>{n([...i||[],""])},l=e=>{const t=i.filter(((t,r)=>r!==e));n(t)};return(0,e.jsx)("div",{"data-testid":"table-field"},0===i.length?(0,e.jsx)("div",null,a("tableEmpty")):(0,e.jsx)(Ce,{responsive:!0,hover:!0,"aria-label":t.label},(0,e.jsx)("tbody",null,i.map(((r,n)=>(0,e.jsx)("tr",{key:n},(0,e.jsx)("td",null,(0,e.jsx)(Re,{type:"text",value:r,placeholder:t.placeholder||d.enter,onChange:e=>{o(n,"string"==typeof e?e:"")},disabled:t.readOnly})),(0,e.jsx)("td",null,(0,e.jsx)(Ve,{text:a("deleteRow"),variant:"text",type:"tertiary",onClick:()=>{l(n)},"aria-label":a("deleteRow"),disabled:t.readOnly}))))))),(0,e.jsx)(Ve,{text:a("addRow"),variant:"outlined",onClick:s,"aria-label":a("addRow"),disabled:t.readOnly}))}const c=l.columns&&l.columns.length?l.columns:[{key:"value",label:t.label||a("tableColumnDefault"),type:"text"}],f=rt(r,c).map(((e,r)=>Object.assign(Object.assign({},e),{__rowId:`${t.name}-row-${r}-${Date.now()}`}))),h=null!==(o=null==l?void 0:l.minRows)&&void 0!==o?o:0,p=null==l?void 0:l.maxRows,m=null!==(s=null==l?void 0:l.allowReorder)&&void 0!==s&&s,v=null===(u=null==l?void 0:l.showHeader)||void 0===u||u,g=(null==l?void 0:l.addRowLabel)||a("addRow"),y=(null==l?void 0:l.removeRowLabel)||a("deleteRow"),b=!t.readOnly&&f.length>h,E=!t.readOnly&&(void 0===p||f.length<p),O=(e,t,r)=>{const i=f.map(((n,i)=>i===e?Object.assign(Object.assign({},n),{[t]:r}):n));n(i)},R=()=>{if(!E)return;const e=(e=>{const t={};for(const r of e)t[r.key]=void 0!==r.defaultValue?r.defaultValue:"";return t})(c);n([...f,e])},S=e=>{if(!b)return;const t=f.filter(((t,r)=>r!==e));n(t)},w=(e,t)=>{const r=e+t;if(r<0||r>=f.length)return;const i=[...f],[o]=i.splice(e,1);i.splice(r,0,o),n(i)},T=(r,n,i)=>{const o=i[r.key],s=t.readOnly||r.readOnly,a=r.placeholder||t.placeholder||d.enter;switch(r.type){case"number":return(0,e.jsx)(Re,{type:"number",value:(0,A.oJ)(o),onChange:e=>{const t=""===e?null:Number(e.replace(/,/g,"."));O(n,r.key,Number.isFinite(t)?t:null)},disabled:s,placeholder:a});case"select":return(0,e.jsx)(Ue,{value:o,options:r.options||[],placeholder:a,onChange:e=>{O(n,r.key,e)},disabled:s});case"boolean":return(0,e.jsx)(Oe,{checked:Boolean(o),onChange:e=>{O(n,r.key,e.target.checked)},disabled:s,"aria-label":r.label});case"date":return(0,e.jsx)(Re,{type:"date",value:(0,A.oJ)(o),onChange:e=>{O(n,r.key,e)},disabled:s,placeholder:a});case"time":return(0,e.jsx)(Re,{type:"time",value:(0,A.oJ)(o),onChange:e=>{O(n,r.key,e)},disabled:s});case"datetime":return(0,e.jsx)(De,{value:(0,A.oJ)(o),onChange:e=>{O(n,r.key,e)},disabled:s,"aria-label":r.label});default:return(0,e.jsx)(Re,{type:"text",value:(0,A.oJ)(o),onChange:e=>{O(n,r.key,e)},disabled:s,placeholder:a})}};return(0,e.jsx)("div",{"data-testid":"table-field"},0===f.length?(0,e.jsx)("div",null,a("tableEmpty")):(0,e.jsx)(Ce,{responsive:!0,hover:!0,"aria-label":t.label},v?(0,e.jsx)("thead",null,(0,e.jsx)("tr",null,c.map((t=>(0,e.jsx)("th",{key:t.key},t.label))),(0,e.jsx)("th",null,a("tableActionsHeader")))):null,(0,e.jsx)("tbody",null,f.map((r=>(0,e.jsx)("tr",{key:r.__rowId||`fallback-${Math.random()}`},c.map((t=>(0,e.jsx)("td",{key:`${r.__rowId}-${t.key}`},T(t,f.findIndex((e=>e.__rowId===r.__rowId)),r)))),(0,e.jsx)("td",null,(0,e.jsx)(Ve,{text:y,variant:"text",type:"tertiary",onClick:()=>{S(f.findIndex((e=>e.__rowId===r.__rowId)))},"aria-label":y,disabled:!b}),m?(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(Ve,{text:a("tableMoveUp"),variant:"text",type:"tertiary",onClick:()=>{w(f.findIndex((e=>e.__rowId===r.__rowId)),-1)},"aria-label":a("tableMoveUp"),disabled:t.readOnly||0===f.findIndex((e=>e.__rowId===r.__rowId))}),(0,e.jsx)(Ve,{text:a("tableMoveDown"),variant:"text",type:"tertiary",onClick:()=>{w(f.findIndex((e=>e.__rowId===r.__rowId)),1)},"aria-label":a("tableMoveDown"),disabled:t.readOnly||f.findIndex((e=>e.__rowId===r.__rowId))===f.length-1})):null)))))),(0,e.jsx)(Ve,{text:g,variant:"outlined",onClick:()=>{R()},"aria-label":g,disabled:!E}))}case T.Vw.COORDSYS:case T.Vw.ATTRIBUTE_NAME:case T.Vw.DB_CONNECTION:case T.Vw.WEB_CONNECTION:case T.Vw.REPROJECTION_FILE:case T.Vw.SELECT:{const r=t.options||[];if(0===r.length)return et("text",c,d.enter,n,{readOnly:t.readOnly});if(v){const e=m[0],t=(0,A.Nn)((0,A.I0)((null==e?void 0:e.label)||"",a))||(0,A.Nn)(null==e?void 0:e.value)||"";return et("text",t,d.select,y,{readOnly:!0,overrides:{readOnly:!0,disabled:!0}})}return(0,e.jsx)(Ue,{value:c,options:r,placeholder:d.select,onChange:e=>{n(e)},"aria-label":t.label,disabled:t.readOnly,coerce:b})}case T.Vw.DATE_TIME:{const r="string"==typeof c?(0,A.hk)(c):"";return(0,e.jsx)(De,{value:r,onChange:e=>{const t="string"==typeof c?c:void 0,r=(0,A.HK)(e,t);n(r)},disabled:t.readOnly})}case T.Vw.URL:{const r=(0,A.oJ)(c);return(0,e.jsx)(we,{value:r,placeholder:t.placeholder||d.enter,onChange:e=>{n(e)}})}case T.Vw.ATTRIBUTE_LIST:case T.Vw.MULTI_SELECT:{const r=t.options||[],i=Array.isArray(c)?c:[];return(0,e.jsx)(Fe,{options:r,values:[...i],placeholder:d.select,disabled:t.readOnly,onChange:e=>{n(e)}})}case T.Vw.TEXTAREA:return(0,e.jsx)(Se,{value:(0,A.oJ)(c),placeholder:d.enter,onChange:e=>{n(e)},disabled:t.readOnly,rows:t.rows});case T.Vw.NUMBER:return et("number",c,d.enter,n,{readOnly:t.readOnly});case T.Vw.CHECKBOX:return(0,e.jsx)(Oe,{checked:Boolean(c),onChange:e=>{n(e.target.checked)},disabled:t.readOnly,"aria-label":t.label});case T.Vw.PASSWORD:case T.Vw.EMAIL:case T.Vw.PHONE:case T.Vw.SEARCH:case T.Vw.TEXT:{const e={[T.Vw.PASSWORD]:"password",[T.Vw.EMAIL]:"email",[T.Vw.PHONE]:"tel",[T.Vw.SEARCH]:"search",[T.Vw.TEXT]:"text"}[t.type]||"text",r=t.type===T.Vw.PHONE?"phone":t.type===T.Vw.EMAIL?"email":t.type===T.Vw.SEARCH?"search":void 0,i=t.type===T.Vw.PASSWORD?(0,A.Td)(t,d,a):(0,A.Td)(t,d,a,r);return et(e,c,i,n,{readOnly:t.readOnly,maxLength:t.maxLength})}case T.Vw.FILE:{const i=(0,A.E$)(r)?r:null,o=st(t.fileConfig),s=o.length?o.join(","):void 0,u=i?lt(t.defaultValue):null!==(g=null!==(p=lt(r))&&void 0!==p?p:lt(c))&&void 0!==g?g:lt(t.defaultValue),d=(0,A.Nn)(u)||"",m=i?(0,A.SB)(i):d,v=Boolean(m)?m:null,y=e=>{const r=e.target.files,i=r&&r.length>0?r[0]:null;if(!i)return h(null),void n(null);const o=at(i,t.fileConfig);if(!o.valid)return h("fileTooLarge"===o.error?a("fileTooLarge",{maxSize:o.maxSizeMB}):"fileTypeNotAllowed"===o.error?a("fileTypeNotAllowed"):a("fileInvalid")),void(e.target.value="");h(null),n(i)};return(0,e.jsx)("div",null,(0,e.jsx)(Re,{type:"file",accept:s,onFileChange:y,disabled:t.readOnly,"aria-label":t.label}),f?(0,e.jsx)("div",{"data-testid":"file-field-error",role:"alert"},f):null,v&&!f?(0,e.jsx)("div",{"data-testid":"file-field-display","aria-live":"polite",css:l.typo.hint},v):null)}case T.Vw.TEXT_OR_FILE:{const r=(e=>{if(e&&"object"==typeof e&&!Array.isArray(e)&&"mode"in e){const t=e;if(t.mode===Ze&&(0,A.E$)(t.file))return{mode:Ze,file:t.file,fileName:"string"==typeof t.fileName?t.fileName:(0,A.SB)(t.file)};if(t.mode===Ye)return{mode:Ye,text:(0,A.oJ)(t.text)}}return(0,A.E$)(e)?{mode:Ze,file:e,fileName:(0,A.SB)(e)}:{mode:Ye,text:(0,A.oJ)(e)}})(c),i=r.mode===Ze?Ze:Ye,o=st(t.fileConfig),s=o.length?o.join(","):void 0,l=e=>{n(e===Ze?{mode:Ze,file:(0,A.E$)(r.file)?r.file:null,fileName:r.fileName}:{mode:Ye,text:(0,A.oJ)(r.text)})},u=e=>{n({mode:Ye,text:e})},p=e=>{const r=e.target.files,i=r&&r.length>0?r[0]:null;if(!i)return h(null),void n({mode:Ze,file:null,fileName:void 0});const o=at(i,t.fileConfig);if(!o.valid)return h("fileTooLarge"===o.error?a("fileTooLarge",{maxSize:o.maxSizeMB}):"fileTypeNotAllowed"===o.error?a("fileTypeNotAllowed"):a("fileInvalid")),void(e.target.value="");h(null),n({mode:Ze,file:i,fileName:(0,A.SB)(i)})};return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(We,{items:[{value:Ye,label:a("textInput")},{value:Ze,label:a("fileInput")}],value:i,onChange:e=>{l(e)},ariaLabel:t.label}),i===Ye?(0,e.jsx)(Se,{value:(0,A.oJ)(r.text),placeholder:t.placeholder||d.enter,onChange:u,disabled:t.readOnly,rows:t.rows}):(0,e.jsx)("div",null,(0,e.jsx)(Re,{type:"file",accept:s,onFileChange:p,disabled:t.readOnly,"aria-label":t.label}),f?(0,e.jsx)("div",{"data-testid":"text-or-file-error",role:"alert"},f):null,(0,A.E$)(r.file)&&!f?(0,e.jsx)("div",{"data-testid":"text-or-file-name"},r.fileName||(0,A.SB)(r.file)):null))}case T.Vw.SCRIPTED:{const r="string"==typeof c&&c.trim().length>0?c:(0,A.oJ)(t.defaultValue)||t.description||t.label;return(0,e.jsx)(Pe,{html:r||""})}case T.Vw.SWITCH:return(0,e.jsx)(Te,{checked:Boolean(c),onChange:(e,t)=>{n(t)},disabled:t.readOnly,"aria-label":t.label});case T.Vw.RADIO:{const r=t.options||[],i=(0,A.ZF)(!0,r),o=null==c?void 0:String(c),s=e=>{var t;if("number"!==i)n(e);else{const i=Number(e);if(Number.isFinite(i))n(i);else{const i=r.find((t=>String(t.value)===e));n(null!==(t=null==i?void 0:i.value)&&void 0!==t?t:e)}}};return(0,e.jsx)(ke,{options:r.map((e=>({label:e.label,value:String(e.value)}))),value:o,onChange:s,disabled:t.readOnly,"aria-label":t.label})}case T.Vw.GEOMETRY:{const t=(0,A.oJ)(c).trim();if(!t)return(0,e.jsx)("div",{css:l.typo.hint,"data-testid":"geometry-field"},a("geometryFieldMissing"));let r=0,n=0,i=t,o=!1;try{const e=JSON.parse(t),o=Array.isArray(null==e?void 0:e.rings)?e.rings:[];r=o.length,n=o.reduce(((e,t)=>e+(Array.isArray(t)?t.filter(Array.isArray).length:0)),0),i=JSON.stringify(e,null,2)}catch(e){o=!0}const s=i.length>1500?`${i.slice(0,1500)}\u2026`:i;return(0,e.jsx)("div",{"data-testid":"geometry-field"},(0,e.jsx)("div",{css:l.typo.hint},o?a("geometryFieldParseError"):a("geometryFieldReady",{rings:r,vertices:n})),s?(0,e.jsx)("pre",{"aria-label":a("geometryFieldPreviewLabel")},s):null)}case T.Vw.SLIDER:{const r="number"==typeof c?c:"string"==typeof c&&""!==c.trim()?Number(c):"number"==typeof t.defaultValue?t.defaultValue:null!==(E=t.min)&&void 0!==E?E:0,i=Number.isFinite(r)?r:null!==(O=t.min)&&void 0!==O?O:0,o="number"==typeof t.decimalPrecision&&t.decimalPrecision>=0?t.decimalPrecision:void 0;return(0,e.jsx)(Ae,{value:i,min:null!==(R=t.min)&&void 0!==R?R:0,max:null!==(S=t.max)&&void 0!==S?S:100,step:null!==(w=t.step)&&void 0!==w?w:1,decimalPrecision:o,onChange:e=>{n(e)},disabled:t.readOnly,"aria-label":t.label})}case T.Vw.NUMERIC_INPUT:{const r="number"==typeof c?c:"string"==typeof c&&""!==c.trim()?Number(c):void 0,i=void 0===r&&"number"==typeof t.defaultValue?t.defaultValue:void 0,o="number"==typeof t.decimalPrecision&&t.decimalPrecision>=0?t.decimalPrecision:2;let s=null;if(void 0!==r&&Number.isFinite(r)){if(0===o){r%1!=0&&(s=a("integerRequired"))}if(!s&&"number"==typeof t.min){(t.minExclusive?r<=t.min:r<t.min)&&(s=t.minExclusive?a("mustBeGreaterThan",{value:t.min}):a("mustBeAtLeast",{value:t.min}))}if(!s&&"number"==typeof t.max){(t.maxExclusive?r>=t.max:r>t.max)&&(s=t.maxExclusive?a("mustBeLessThan",{value:t.max}):a("mustBeAtMost",{value:t.max}))}}const u=void 0===r&&void 0!==i?{defaultValue:i}:{value:r};return(0,e.jsx)("div",null,(0,e.jsx)(Ie,Object.assign({},u,{placeholder:t.placeholder||d.enter,min:t.min,max:t.max,step:t.step,precision:o,disabled:t.readOnly,"aria-label":t.label,"aria-invalid":!!s,"aria-describedby":s?`${t.name}-error`:void 0,onChange:e=>{n(void 0!==e?e:null)}})),s&&(0,e.jsx)("div",{id:`${t.name}-error`,css:l.typo.hint,role:"alert","data-testid":"numeric-input-error"},s))}case T.Vw.TAG_INPUT:{const r=Array.isArray(c)?c:[];return(0,e.jsx)(_e,{value:r,placeholder:t.placeholder||a("placeholderTags"),onChange:e=>{n(e)}})}case T.Vw.COLOR:{const r=t.colorConfig,i="string"==typeof c?(0,A.$e)(c,r)||c:void 0,o="string"==typeof i&&i.startsWith("#")?i:"#000000";return(0,e.jsx)(Me,{value:o,onChange:e=>{const t=(0,A.FK)(e,r)||e;n(t)}})}case T.Vw.DATE:{const r="string"==typeof c?(0,A.Wx)(c):"",i=r?`${r}T00:00:00`:"";return(0,e.jsx)(De,{mode:"date",value:i,onChange:e=>{const t=("string"==typeof e?e:"").split("T")[0]||"",r=(0,A.OD)(t);n(r)},"aria-label":t.label,disabled:t.readOnly})}case T.Vw.MONTH:case T.Vw.WEEK:return((t,r,n,i,o)=>(0,e.jsx)(Re,{type:t,value:(0,A.oJ)(r),placeholder:n,onChange:e=>{i(e)},disabled:o}))(t.type===T.Vw.MONTH?"month":"week",c,(0,A.Td)(t,d,a),n,t.readOnly);case T.Vw.TIME:{const r="string"==typeof c?(0,A.BU)(c):"";return(0,e.jsx)(Re,{type:"time",value:r,onChange:e=>{const t="string"==typeof c?c:void 0,r=(0,A.rI)(e,t);n(r)},disabled:t.readOnly})}}})()};var ct=u(787),dt=u.n(ct),ft=u(4945),ht=u.n(ft),pt=u(8424),mt=u(4540);const vt=[{value:T.hL.POLYGON,label:"drawingModePolygon",icon:K(),tooltip:"drawingModePolygonTooltip",hideLabel:!0},{value:T.hL.RECTANGLE,label:"drawingModeRectangle",icon:dt(),tooltip:"drawingModeRectangleTooltip",hideLabel:!0}],gt=Object.freeze([]),yt=Object.freeze({modules:!1,submission:!1,workspaces:!1,parameters:!1}),bt=(e,t)=>e.modules===t.modules&&e.submission===t.submission&&e.workspaces===t.workspaces&&e.parameters===t.parameters,Et=e=>Boolean(e.modules||e.submission||e.workspaces||e.parameters),Ot=e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}},Rt=e=>{if(!(null==e?void 0:e.length))return[];const t=[],r=new Set;for(const n of e){if(!n||n.type!==T.QL.GEOMETRY)continue;if("string"!=typeof n.name)continue;const e=n.name.trim();e&&!r.has(e)&&(r.add(e),t.push(e))}return t},St=({orderResult:t,translate:r,onReuseGeography:n,onBack:i,onReset:o,config:s})=>{var a,l;const u=(0,T.MN)(),c=Boolean(t.cancelled),d=!c&&!!t.success,f=!c&&!d,h=(null==s?void 0:s.syncMode)?"sync":"async",p="sync"===t.serviceMode||"async"===t.serviceMode||"schedule"===t.serviceMode?t.serviceMode:h,m=((t,r)=>{const[n,i]=e.React.useState(null),o=e.React.useRef(null);return e.hooks.useEffectWithPreviousValues((()=>{if(o.current){try{URL.revokeObjectURL(o.current)}catch(e){}o.current=null}const e="string"==typeof t?t.trim():"";if(e)i(e);else{if(r instanceof Blob)try{const e=URL.createObjectURL(r);return o.current=e,void i(e)}catch(e){return void i(null)}i(null)}}),[t,r]),e.hooks.useUnmount((()=>{if(o.current){try{URL.revokeObjectURL(o.current)}catch(e){}o.current=null}})),n})(t.downloadUrl,t.blob),v=[],g=(t,r)=>{const n=(e=>{if(null==e)return null;if("string"==typeof e)return e.trim()||null;if("number"==typeof e)return Number.isFinite(e)?e.toString():null;if(e instanceof Date){const t=e.getTime();if(!Number.isFinite(t))return null;try{return e.toISOString()}catch(e){return null}}if(e instanceof Blob)return e.type?e.type:"blob";if("boolean"==typeof e)return e?"true":"false";try{return JSON.stringify(e)}catch(e){return null}})(r);if(!n)return;const i=t?`order-row-${t}-${v.length}`:`order-row-${v.length}`,o=t?`${t}: ${n}`:n;v.push((0,e.jsx)("div",{css:u.typo.caption,key:i},o))};g(r("jobId"),t.jobId),g(r("workspace"),t.workspaceName);const y="schedule"===p?"deliveryModeSchedule":"async"===p?"deliveryModeAsync":"deliveryModeSync";g(r("deliveryMode"),r(y)),t.downloadFilename&&g(r("downloadFilename"),t.downloadFilename);const b=(0,A.Nn)(t.status);b&&g(r("flowStatus"),b);const E=(0,A.Nn)(t.statusMessage);E&&E!==(0,A.Nn)(t.message)&&g(r("flowMessage"),E);const O=(0,A.Nn)(null===(a=t.blobMetadata)||void 0===a?void 0:a.type);O&&g(r("blobType"),O);const R=(0,A.sH)(null===(l=t.blobMetadata)||void 0===l?void 0:l.size);if(R&&g(r("blobSize"),R),"sync"!==p){const e=t.email,n=(null==s?void 0:s.maskEmailOnSuccess)&&d?(0,A.q2)(e):e;g(r("notificationEmail"),n)}t.code&&f&&g(r("errorCode"),t.code);const S=t.scheduleMetadata,w=S&&"string"==typeof S.start&&""!==S.start.trim()&&"string"==typeof S.name&&""!==S.name.trim()&&"string"==typeof S.category&&""!==S.category.trim(),k=r(c?"orderCancelledTitle":d?"sync"===p?"orderComplete":"orderConfirmation":"orderSentError"),_=r(c?"actionNewOrder":d?"reuseGeography":"actionRetry"),C=c?r("tooltipNewOrder"):d?r("tooltipReuseGeography"):void 0,M=e.hooks.useEventCallback((()=>{c||d?null==n||n():null==i||i()})),x=e.hooks.useEventCallback((()=>{o?o():null==i||i()})),L=d&&Boolean(m);let j=null;if(c){j=r((t.code||"").toString().toUpperCase().includes("TIMEOUT")?"orderCancelledTimeoutMessage":"orderCancelledMessage")}else if(d)"async"===p&&(j=r("emailNotificationSent"));else{const e=(t.code||"").toString().toUpperCase(),n=(0,A.Nn)(t.message)||(0,A.Nn)(t.statusMessage)||"";j="FME_JOB_CANCELLED_TIMEOUT"===e?r("jobCancelledTimeout"):"FME_JOB_CANCELLED"===e?r("jobCancelled"):"FME_JOB_FAILURE"===e||/FME\s*Flow\s*transformation\s*failed/i.test(n)?r("fmeFlowTransformationFailed"):n||r("errorUnknown")}let N=null;if(w&&d&&S){const t=(0,I.xH)(S.start||"").isPast?(0,e.jsx)(Be,{type:"warning",text:r("schedulePastTimeWarning"),variant:"default",withIcon:!0}):null;N=(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{css:u.typo.caption},r("scheduleJobName"),": ",S.name),(0,e.jsx)("div",{css:u.typo.caption},r("scheduleJobCategory"),": ",S.category),(0,e.jsx)("div",{css:u.typo.caption},r("scheduleStartTime"),": ",S.start),S.trigger?(0,e.jsx)("div",{css:u.typo.caption},r("scheduleTrigger"),": ",S.trigger):null,S.description?(0,e.jsx)("div",{css:u.typo.caption},r("scheduleJobDescription"),":"," ",S.description):null,t)}return(0,e.jsx)("div",{css:u.form.layout},(0,e.jsx)("div",{css:u.form.content},(0,e.jsx)("div",{css:u.form.body},(0,e.jsx)("div",{css:u.typo.title},k),v,N,L&&(0,e.jsx)("div",{css:u.typo.caption},(0,e.jsx)("a",{href:m,target:"_blank",rel:"noopener noreferrer",css:u.typo.link,download:t.downloadFilename},r("clickToDownload"))),j?(0,e.jsx)("div",{css:u.typo.caption},j):null),(0,e.jsx)("div",{css:u.form.footer},(0,e.jsx)(Ge,{secondaryButton:{text:r("actionEnd"),onClick:x,tooltip:r("tooltipCancel"),tooltipPlacement:"bottom",logging:{enabled:!0,prefix:"FME-Export"}},primaryButton:{text:_,onClick:M,type:"primary",tooltip:C,tooltipPlacement:"bottom",logging:{enabled:!0,prefix:"FME-Export"}}}))))},wt=({workspaceParameters:t,workspaceName:r,workspaceItem:n,onBack:i,onSubmit:o,isSubmitting:s,translate:a,widgetId:l,config:u,geometryJson:c})=>{const d=e.ReactRedux.useDispatch(),[f]=e.React.useState((()=>new mt.DF)),[h,p]=e.React.useState({}),m=null!=c?c:null,[v,g]=e.React.useState((()=>Ot(m)));e.hooks.useEffectWithPreviousValues((()=>{const e=Ot(null!=c?c:null);g((t=>t===e?t:e))}),[c]);const[y,b]=e.React.useState((()=>Rt(t)));e.hooks.useEffectWithPreviousValues((()=>{const e=Rt(t);b((t=>t.length===e.length&&t.every(((t,r)=>t===e[r]))?t:e))}),[t]);const E=e.hooks.useEventCallback((e=>a(1===e?"formValidationSingleError":"formValidationMultipleErrors"))),O=e.React.useRef(null),R=e.React.useRef(""),S=t.map((e=>e.name)).join(",");O.current&&R.current===S||(O.current=((e,t)=>{const r=()=>e.convertParametersToFields(t);return{getFormConfig:r,validateValues:t=>{const n=e.validateFormValues(t,r()),i=Object.assign({},n.errors),o=t.start;if((0,A.uI)(o))try{(0,I.Xz)(o.trim())||(i.start="invalidDateTimeFormat")}catch(e){i.start="invalidDateTimeFormat"}return{isValid:0===Object.keys(i).length,errors:i}},initializeValues:()=>(0,A.bE)(r())}})(f,t),R.current=S);const k=O.current,_=(0,w.UA)(k);e.hooks.useEffectOnce((()=>{_.validateForm()})),e.hooks.useUpdateEffect((()=>{_.validateForm()}),[_.values,_.validateForm]),e.hooks.useUpdateEffect((()=>{_.resetForm(),p({})}),[r,t,_.resetForm]);const C=e.hooks.useEventCallback(((e,t)=>t instanceof File?(p((r=>Object.assign(Object.assign({},r),{[e]:t}))),void _.updateField(e,t.name)):null===t&&e in h?(p((t=>Object.assign(Object.assign({},t),{[e]:null}))),void _.updateField(e,"")):void _.updateField(e,t))),M=_.values,x=_.setValues,L=e.hooks.useLatest(M);e.hooks.useEffectWithPreviousValues((()=>{if(!y.length)return;const e=v||"",t=L.current;if(!t)return;if(!y.some((r=>{const n=null==t?void 0:t[r];return("string"==typeof n?n:"")!==e})))return;const r=Object.assign({},t);y.forEach((t=>{r[t]=e})),x(r)}),[y,v,L,x]);const j=e.hooks.useEventCallback((()=>{const e=_.validateForm();if(!e.isValid){const t=Object.keys(e.errors).length,r={message:E(t),type:T.By.VALIDATION,code:"FORM_INVALID",severity:T.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now(),kind:"runtime"};return void d(pt.fmeActions.setError("general",r,l))}const t=Object.assign({},_.values);Object.keys(h).forEach((e=>{const r=h[e];r&&(t[e]=r)})),o({type:r,data:t})})),N=e.hooks.useEventCallback((e=>(0,A.Ox)(e))),D=e.hooks.useEventCallback((e=>{const t=(0,A.Z_)(e);return t?(0,A.I0)(t,a):void 0}));return(0,e.jsx)(ze,{variant:"layout",title:(null==n?void 0:n.title)||r,subtitle:(null==n?void 0:n.description)?N(n.description):a("configureWorkspaceParameters"),onBack:i,onSubmit:j,isValid:_.isValid,loading:s},(null==u?void 0:u.allowScheduleMode)&&(0,e.jsx)($e,{values:_.values,onChange:C,translate:a,disabled:s}),(null==u?void 0:u.allowRemoteDataset)&&(0,e.jsx)(He,{label:a("remoteDatasetUploadLabel"),helper:a("remoteDatasetUploadHelper")},(0,e.jsx)(ut,{field:{name:"__upload_file__",label:a("remoteDatasetUploadLabel"),type:T.Vw.FILE,required:!1,readOnly:!1},value:_.values.__upload_file__,onChange:e=>C("__upload_file__",e),translate:a})),(null==u?void 0:u.allowRemoteDataset)&&(null==u?void 0:u.allowRemoteUrlDataset)&&(0,e.jsx)(He,{label:a("remoteDatasetUrlLabel"),helper:a("remoteDatasetUrlHelper")},(0,e.jsx)(we,{value:_.values.__remote_dataset_url__||"",onChange:e=>C("__remote_dataset_url__",e)})),k.getFormConfig().map((t=>{if(!t||!t.name||!t.type)return null;const r=t.type===T.Vw.SWITCH||t.type===T.Vw.CHECKBOX;return(0,e.jsx)(He,{key:t.name,label:t.label,required:t.required,error:D(_.errors[t.name]),check:r},(0,e.jsx)(ut,{field:t,value:_.values[t.name],onChange:e=>C(t.name,e),translate:a}))})).filter(Boolean))},Tt=({widgetId:t,state:r,instructionText:n,loadingState:i,canStartDrawing:o,error:s,onFormBack:a,onFormSubmit:l,orderResult:u,onReuseGeography:c,onBack:d,drawnArea:f,areaWarning:h,formatArea:p,showHeaderActions:m,drawingMode:v=T.hL.POLYGON,onDrawingModeChange:g,isDrawing:y,clickCount:b,isCompleting:E,onReset:O,canReset:R=!0,config:S,onWorkspaceSelected:I,selectedWorkspace:_,workspaceItems:C,workspaceParameters:M,workspaceItem:x,isPrefetchingWorkspaces:L=!1,workspacePrefetchProgress:j,workspacePrefetchStatus:N,geometryJson:D,isStartupValidating:P,startupValidationStep:U,startupValidationError:F,onRetryValidation:V,submissionPhase:B="idle",modeNotice:W})=>{var q,G;const z=e.hooks.useTranslation(k),H=(0,T.MN)(),$=e.ReactRedux.useDispatch(),K=e.React.useRef();K.current||(K.current=t&&t.trim()?t:`__local_${Date.now()}_${Math.random().toString(36).slice(2,11)}`);const Q=K.current,J=null!=i?i:yt,[X,Y]=e.React.useState(J),Z=e.hooks.useLatest(X),ee=(0,w.d7)((e=>{Y(e)}),T.gM);e.hooks.useEffectWithPreviousValues((()=>{const e=Z.current,t=J;if(Et(t))return ee.cancel(),void(bt(e,t)||Y(t));Et(e)?ee(t):bt(e,t)||Y(t)}),[J.modules,J.parameters,J.workspaces,J.submission,ee]);const te=X,re=Boolean(te.modules),ne=Boolean(te.submission),ie=Boolean(te.workspaces),oe=null==o||o,se=e.React.useRef([]),ae=e.hooks.useEventCallback((()=>vt.map((e=>Object.assign(Object.assign({},e),{label:z(e.label),tooltip:z(e.tooltip)})))));e.hooks.useUpdateEffect((()=>{se.current=ae()}),[ae]),0===se.current.length&&(se.current=ae());const le=se.current,ue=e.hooks.useEventCallback((()=>{const t=(0,A.uI)(n)?n:z("drawingModeTooltip");return(0,e.jsx)("div",{css:H.form.layout},(0,e.jsx)("div",{css:H.form.content},(0,e.jsx)("div",{css:[H.form.body,H.centered]},(0,e.jsx)("div",{css:H.typo.instruction,role:"status","aria-live":"polite","aria-atomic":!0},t),(0,e.jsx)(We,{items:le,value:v,onChange:e=>{null==g||g(e)},"aria-label":z("drawingModeTooltip")}))))})),ce=e=>{if("number"!=typeof e||!Number.isFinite(e)||e<=0)return;const t=Math.abs(e);if("function"==typeof p)try{return p(t)}catch(e){}if(t>Number.MAX_SAFE_INTEGER)try{return`${t.toExponential(2)} m\xb2`}catch(e){return`${t} m\xb2`}try{return`${Math.round(t).toLocaleString()} m\xb2`}catch(e){return`${Math.round(t)} m\xb2`}},de=Boolean(h)&&(r===T.nE.WORKSPACE_SELECTION||r===T.nE.EXPORT_OPTIONS||r===T.nE.EXPORT_FORM);let fe=null;if(de){const e=ce(f),t="number"==typeof(null==S?void 0:S.largeArea)&&S.largeArea>0?ce(S.largeArea):void 0;fe=(0,A.ag)({currentAreaText:e,thresholdAreaText:t,translate:z})}const he=e.hooks.useEventCallback(((t,r,n)=>{const i=[];if(Array.isArray(n))for(const e of n)null!=e&&i.push(e);const o=z("pleaseWait"),s=i.some((e=>"string"==typeof e&&e===o));return o&&o!==t&&o!==r&&!s&&i.push(o),(0,e.jsx)(qe,{state:(0,T.aE)(t,r,i.length?i:void 0)})})),pe=e.hooks.useEventCallback(((t,r,n,i,o)=>{const s=[];n?s.push({label:z("actionRetry"),onClick:n}):r&&s.push({label:z("back"),onClick:r});const a=(0,A.id)(null==S?void 0:S.supportEmail),l=(0,A.Ej)(z,a,o);let u=t;try{u=(0,A.I0)(String(t),z)}catch(e){}const c=l?Ke(a,z,H,l):void 0;return(0,e.jsx)(qe,{state:(0,T.Qg)(u,{code:i,actions:s,detail:c})})})),me=(0,A.Nn)(null==S?void 0:S.repository),ve=e.hooks.usePrevious(me),ge=(0,A.Nn)(null==S?void 0:S.fmeServerUrl),ye=(0,A.Nn)(null==S?void 0:S.fmeServerToken),be=Boolean(ge&&ye&&me),[Ee,Oe]=e.React.useState(null),Re=(0,w.CH)({repository:me||void 0,fmeServerUrl:ge||void 0,fmeServerToken:ye||void 0},{enabled:be}),Se=(0,w.SB)(null==Ee?void 0:Ee.name,{repository:null!==(G=null!==(q=null==Ee?void 0:Ee.repository)&&void 0!==q?q:me)&&void 0!==G?G:void 0,fmeServerUrl:ge||void 0,fmeServerToken:ye||void 0},{enabled:Boolean(Ee&&be)}),we=e.hooks.useLatest(Re.refetch),Te=Array.isArray(C)?C:gt,ke=me||null,Ae=(Array.isArray(Re.data)?Re.data:gt).filter((e=>(null==e?void 0:e.type)===T.h6)),Ie=Ae.filter((e=>{const t=(0,A.Nn)(null==e?void 0:e.repository);return!t||!me||t===me})),_e=0===Ie.length?gt:Ie.slice().sort(((e,t)=>(e.title||e.name).localeCompare(t.title||t.name,void 0,{sensitivity:"base"})));e.hooks.useEffectWithPreviousValues((()=>{if(!be)return;const e=_e;e===gt&&0===Te.length||e!==Te&&(((e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1){const n=e[r],i=t[r];if(!n||!i)return!1;if(n.name!==i.name)return!1;if((n.title||"")!==(i.title||""))return!1;if((0,A.Nn)(null==n?void 0:n.repository)!==(0,A.Nn)(null==i?void 0:i.repository))return!1}return!0})(e,Te)||$(pt.fmeActions.setWorkspaceItems(e,Q)))}),[_e,Te,be,$,Q]),e.hooks.useUpdateEffect((()=>{be||Te.length&&$(pt.fmeActions.clearWorkspaceState(Q))}),[be,Te.length,$,Q]),e.hooks.useUpdateEffect((()=>{if(ve===me)return;if(Oe(null),$(pt.fmeActions.clearWorkspaceState(Q)),!me||!be)return;const e=we.current;"function"==typeof e&&e()}),[me,ve,be,$,Q]),e.hooks.useUpdateEffect((()=>{be||Ee&&Oe(null)}),[be,Ee]),e.hooks.useUpdateEffect((()=>{if(!Ee)return;const e=Se.data;if(!e)return;const t=Ee.name;t&&(I?I(t,e.parameters,e.item):$(pt.fmeActions.applyWorkspaceData({workspaceName:t,parameters:e.parameters,item:e.item},Q)),Oe(null))}),[Ee,Se.data,I,$,Q]);const Ce=Te.length>0,Me=_e.length>0,xe=!!be&&Boolean(Re.isLoading||!Ce&&!Me&&Re.isFetching),Le=e.hooks.usePrevious(xe);e.React.useEffect((()=>{Le!==xe&&$(pt.fmeActions.setLoadingFlag("workspaces",xe,Q))}),[xe,Le,$,Q]);const je=Boolean(Se.isFetching),Ne=e.hooks.usePrevious(je);e.React.useEffect((()=>{Ne!==je&&$(pt.fmeActions.setLoadingFlag("parameters",je,Q))}),[je,Ne,$,Q]);const De=e.hooks.useEventCallback(((e,t)=>{if(!e)return null;if((0,A.zf)(e))return null;try{return(0,A.I0)(t,z)}catch(e){return z(t)}})),Pe=Re.isError&&be?De(Re.error,"failedToLoadWorkspaces"):null,Ue=(Se.isError?De(Se.error,"failedToLoadWorkspaceDetails"):null)||Pe,Fe=e.hooks.useEventCallback((()=>{if(Oe(null),!be)return void $(pt.fmeActions.clearWorkspaceState(Q));const e=we.current;"function"==typeof e&&e()})),Ge=e.hooks.useEventCallback((()=>Te.map(((t,r)=>{const n=t.title||t.name,i=t.name&&t.name.trim()?t.name:`workspace-${r}`;return(0,e.jsx)("div",{key:i,role:"listitem","aria-label":n},(0,e.jsx)(Ve,{text:n,icon:ht(),type:"tertiary",onClick:()=>{var e,r;const n=null!==(r=null!==(e=(0,A.Nn)(null==t?void 0:t.repository))&&void 0!==e?e:ke)&&void 0!==r?r:void 0;Oe({name:t.name,repository:n})},logging:{enabled:!0,prefix:"FME-Export-WorkspaceSelection"}}))})))),ze=()=>a&&l?M&&_?(0,e.jsx)(e.React.Fragment,null,(()=>{if(!W)return null;const{messageKey:t,params:r,severity:n}=W;if(!t)return null;let i="";try{i=z(t,r||{})}catch(e){i=z(t)}if(!i)return null;const o="info"===n?"info":"warning";return(0,e.jsx)(Be,{type:o,text:i,variant:"default",withIcon:!0,style:{marginBlockEnd:12}})})(),(0,e.jsx)(wt,{widgetId:Q,workspaceParameters:M,workspaceName:_,workspaceItem:x,onBack:a,onSubmit:l,isSubmitting:ne,translate:z,config:S,geometryJson:D})):he(z("loadingWorkspaceDetails"),z("loadingWorkspaceDetailsDetail"),[z("configureWorkspaceParameters")]):pe(z("missingExportConfiguration"),d);return(0,e.jsx)("div",{css:H.parent},(0,e.jsx)("div",{css:H.header},m?(()=>{const t=Boolean(de&&fe);let n=null;if(r!==T.nE.INITIAL&&!(r===T.nE.DRAWING&&0===(b||0))){(0,A.AR)(O,R,r,null!=f?f:0,y,b)&&(n=(0,e.jsx)(Ve,{tooltip:z("tooltipCancel"),tooltipPlacement:"bottom",onClick:O,color:"inherit",type:"default",variant:"contained",text:z("cancel"),size:"sm","aria-label":z("tooltipCancel"),logging:{enabled:!0,prefix:"FME-Export-Header"},block:!1}))}return t||n?(0,e.jsx)(e.React.Fragment,null,t?(0,e.jsx)("div",{css:H.headerAlert},(0,e.jsx)(Be,{variant:"icon",type:"warning",text:null!=fe?fe:void 0,role:"alert",tooltipPlacement:"bottom"})):null,n):null})():null),(0,e.jsx)("div",{css:H.content},(()=>{if(r===T.nE.STARTUP_VALIDATION){if(F){const e=(null==S?void 0:S.supportEmail)||"";return pe(F.message,void 0,V||(()=>{window.location.reload()}),F.code,F.userFriendlyMessage||e)}const e=U||z("validatingStartup");return he(e)}if(r===T.nE.ORDER_RESULT&&u)return(0,e.jsx)(St,{orderResult:u,translate:z,onReuseGeography:c,onBack:d,onReset:O,config:S});if(ne){const e=Boolean(null==S?void 0:S.syncMode),t=z(e?"submittingOrderSync":"submittingOrder");let r=null,n=null;switch(B){case"preparing":r="submissionPhasePreparing",n="submissionPhasePreparingDetail";break;case"uploading":r="submissionPhaseUploading",n="submissionPhaseUploadingDetail";break;case"finalizing":r="submissionPhaseFinalizing",n="submissionPhaseFinalizingDetail";break;case"submitting":r="submissionPhaseSubmitting",n="submissionPhaseSubmittingDetail";break;default:r=null,n=null}return r&&n?he(z(r),z(n)):he(t,z(e?"submittingOrderSyncDetail":"pleaseWait"))}if(s)return pe(s.message,void 0,"info"!==s.severity?d:void 0,s.code,s.userFriendlyMessage);switch(r){case T.nE.INITIAL:return(()=>{const e=z("statusPreparingMapTools"),t=z("statusPreparingMapToolsDetail");return re?he(e,t,[z("drawingModeTooltip")]):oe?ue():he(e,t,[z("drawingModeTooltip")])})();case T.nE.DRAWING:return E?(0,e.jsx)(qe,{state:(0,T.aE)(z("loadingGeometryValidation"),z("loadingGeometryValidationDetail"))}):0===(b||0)?ue():(0,e.jsx)("div",{css:H.centered},(0,e.jsx)("div",{css:H.typo.instruction,role:"status","aria-live":"polite","aria-atomic":!0},n));case T.nE.EXPORT_OPTIONS:case T.nE.WORKSPACE_SELECTION:return E?(0,e.jsx)(qe,{state:(0,T.aE)(z("loadingGeometryValidation"),z("loadingGeometryValidationDetail"))}):(()=>{if((0,A.Yn)(ie,Te,r,Boolean(Ue))){const e=Boolean(L&&Te.length&&r===T.nE.WORKSPACE_SELECTION),t=e?z("prefetchingWorkspaces"):Te.length?z("loadingWorkspaceDetails"):z("loadingWorkspaces"),n=e?"":Te.length?z("loadingWorkspaceDetailsDetail"):z("loadingWorkspacesDetail");return he(t,n,[z("tooltipBackToOptions")])}if(Ue)return pe(Ue,d,Fe);if(!Te.length){const t=[{label:z("actionRetry"),onClick:Fe},{label:z("back"),onClick:d}];return(0,e.jsx)(qe,{state:(0,T.Dd)(z("noWorkspacesFound"),t)})}return(0,e.jsx)("div",{css:H.selection.container},(0,e.jsx)("div",{css:H.btn.group,role:"list"},Ge()))})();case T.nE.EXPORT_FORM:return ze();case T.nE.ORDER_RESULT:return pe(z("orderResultMissing"),d)}})()))};var kt=u(2238);const At={actionRetry:"F\xf6rs\xf6k igen",actionReload:"Ladda om sidan",actionEnd:"Avsluta",errorUnknown:"Ett ok\xe4nt fel intr\xe4ffade",validatingStartup:"Verifierar inst\xe4llningar\u2026",statusValidatingMap:"Kontrollerar kartkonfiguration\u2026",statusValidatingConnection:"Verifierar anslutning\u2026",statusValidatingEmail:"Kontrollerar e-postadress\u2026",contactSupportEmail:"Kontakta supporten via {email}.",actionRetryValidation:"F\xf6rs\xf6k igen",emailInvalid:"Ogiltig e-postadress.",errorSetupRequired:"Widgeten m\xe5ste konfigureras.",hintSetupWidget:"Slutf\xf6r konfigurationen innan widgeten anv\xe4nds.",submissionPhasePreparing:"F\xf6rbereder best\xe4llningen\u2026",submissionPhaseUploading:"Laddar upp dataset\u2026",submissionPhaseFinalizing:"Slutf\xf6r beg\xe4ran\u2026",submissionPhaseSubmitting:"Skickar best\xe4llning\u2026",actionOpenSettings:"\xd6ppna inst\xe4llningspanelen.",errorConnectionIssue:"Anslutningen misslyckades.",connectionSettingsHint:"Kontrollera anslutningsinst\xe4llningarna.",errorTokenIssue:"API-nyckeln saknas eller \xe4r ogiltig.",tokenSettingsHint:"Kontrollera inst\xe4llningarna f\xf6r API-nyckeln.",errorServerIssue:"Serverfel vid anslutning.",serverUrlSettingsHint:"Granska inst\xe4llningarna f\xf6r server-URL.",errorRepositoryAccess:"Repositoryt kunde inte n\xe5s.",repositoryNotAccessible:"Repositoryt kunde inte verifieras med den h\xe4r API-nyckeln. Kontrollera beh\xf6righeter eller v\xe4lj ett annat repository.",repositorySettingsHint:"Kontrollera repositoryinst\xe4llningen.",errorNetworkIssue:"N\xe4tverksfel eller proxy blockerar anslutningen.",networkConnectionHint:"Kontrollera n\xe4tverksanslutningen.",missingServerUrl:"FME-serverns URL saknas.",missingToken:"API-nyckeln saknas.",tokenWithWhitespace:"API-nyckeln f\xe5r inte inneh\xe5lla blanksteg.",missingRepository:"V\xe4lj ett FME Flow-repository.",missingWorkspace:"V\xe4lj en workspace.",invalidRepository:"Ogiltigt repository.",invalidWorkspace:"Ogiltig workspace.",serverUrlRequired:"Ange FME-serverns URL.",serverUrlFormatHint:"Exempel p\xe5 giltig URL: https://fme.server.com.",tokenRequired:"Ange API-nyckeln f\xf6r FME Server.",statusPreparingMapTools:"Initierar kartverktyg\u2026",hintStartDrawing:"Klicka p\xe5 kartan f\xf6r att ange utbredning f\xf6r din best\xe4llning.",hintDrawRectangle:"Forts\xe4tt dra f\xf6r att rita en rektangel.",hintDrawPolygonContinue:"Forts\xe4tt klicka f\xf6r att l\xe4gga till h\xf6rn.",hintDrawPolygonComplete:"Dubbelklicka f\xf6r att avsluta polygonen.",hintSelectDrawingMode:"V\xe4lj ett ritl\xe4ge f\xf6r att b\xf6rja.",errorOrderFailed:"Best\xe4llningen misslyckades.",errorJobSubmission:"FME-jobbet kunde inte skickas.",errorMapInit:"Kartstart misslyckades.",errorDrawingComplete:"Ritningen kunde inte slutf\xf6ras.",labelDrawingLayer:"Rityta",userEmailMissingError:"Anv\xe4ndarens e-postadress kr\xe4vs f\xf6r denna funktion.",errorLoadingTimeout:"Inl\xe4sningen tog f\xf6r l\xe5ng tid. F\xf6rs\xf6k igen.",geometryMissingCode:"Geometri saknas.",geometryTypeInvalidCode:"Endast polygoner st\xf6ds.",geometryInvalidCode:"Ogiltig geometri.",geometrySerializationFailedCode:"Geometrin kunde inte serialiseras.",geometryMissingMessage:"Ingen geometri angavs.",geometryPolygonRequired:"Geometrin m\xe5ste vara en polygon.",geometryNotSimple:"Polygonen korsar sig sj\xe4lv.",geometryValidationFailedMessage:"Polygonen kunde inte valideras.",geometryAreaTooLargeCode:"Omr\xe5det \xe4r f\xf6r stort.",hintGeometryInvalid:"Polygonen \xe4r inte sluten, korsar sig sj\xe4lv eller har noll area.",hintAreaTooLarge:"Prova med ett mindre omr\xe5de.",mapInitErrorCode:"Misslyckades att initiera kartan.",drawingCompleteErrorCode:"Misslyckades att avsluta ritning.",requestCancelled:"Beg\xe4ran avbr\xf6ts.",connectionFailedMessage:"Anslutningen till FME Server misslyckades.",requestTimedOut:"Beg\xe4ran tog f\xf6r l\xe5ng tid och avbr\xf6ts.",urlTooLongMessage:"URL:en \xe4r f\xf6r l\xe5ng.",headersTooLargeMessage:"Beg\xe4rans rubriker \xe4r f\xf6r omfattande.",offlineNotice:"Ingen n\xe4tverksanslutning hittades.",corsBlocked:"Beg\xe4ran blockerades av CORS-regler.",rateLimitExceeded:"F\xf6r m\xe5nga f\xf6rfr\xe5gningar. F\xf6rs\xf6k igen senare.",configurationInvalid:"Konfigurationen \xe4r ogiltig.",scheduleStartLabel:"Starttid",scheduleStartHelper:"Format: \xc5\xc5\xc5\xc5-MM-DD TT:MM:SS (FME Servers lokala tid)",scheduleStartPlaceholder:"2025-01-15 14:30:00",scheduleNameLabel:"Jobbnamn",scheduleNameHelper:"Namn f\xf6r det schemalagda jobbet (max 128 tecken)",scheduleNamePlaceholder:"Dataexport Sverige Q1",scheduleCategoryLabel:"Kategori",scheduleCategoryHelper:"Organisera jobbet i en kategori",scheduleCategoryPlaceholder:"Dataexport",scheduleDescriptionLabel:"Beskrivning (valfritt)",scheduleDescriptionPlaceholder:"Beskrivning av det schemalagda jobbet",scheduleInfoTitle:"Schema: K\xf6r en g\xe5ng (Runonce)",scheduleTimezoneHelper:"Starttiden m\xe5ste anges i FME Servers lokala tidszon, inte din lokala tid.",scheduleConfirmTitle:"Bekr\xe4fta schemalagt jobb",scheduleConfirmMessage:"Vill du schemal\xe4gga det h\xe4r jobbet?",SCHEDULE_START_REQUIRED:"Starttid kr\xe4vs f\xf6r schemalagda jobb",SCHEDULE_START_INVALID_FORMAT:"Ogiltigt datumformat. Anv\xe4nd: \xc5\xc5\xc5\xc5-MM-DD TT:MM:SS",SCHEDULE_START_INVALID_DATE:"Ogiltigt datum eller tid",SCHEDULE_START_PARSE_ERROR:"Kunde inte tolka starttiden",SCHEDULE_START_IN_PAST:"Starttiden ligger i det f\xf6rflutna",SCHEDULE_NAME_REQUIRED:"Jobbnamn kr\xe4vs",SCHEDULE_NAME_TOO_LONG:"Jobbnamnet \xe4r f\xf6r l\xe5ngt (max 128 tecken)",SCHEDULE_NAME_INVALID_CHARS:"Jobbnamnet inneh\xe5ller ogiltiga tecken",SCHEDULE_CATEGORY_REQUIRED:"Kategori kr\xe4vs",SCHEDULE_CATEGORY_TOO_LONG:"Kategorin \xe4r f\xf6r l\xe5ng (max 128 tecken)"};var It=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const _t=1048576;function Ct(t){var n,i,o,s;const{id:a,widgetId:l,useMapWidgetIds:u,dispatch:c,config:d}=t,f=null!==(n=a)&&void 0!==n?n:l,h=(0,pt.createFmeSelectors)(f),p=e.ReactRedux.useSelector(h.selectViewMode),m=e.ReactRedux.useSelector(h.selectDrawingTool),v=e.ReactRedux.useSelector(h.selectGeometryJson),g=e.ReactRedux.useSelector(h.selectDrawnArea),y=e.ReactRedux.useSelector(h.selectWorkspaceItems),b=e.ReactRedux.useSelector(h.selectWorkspaceParameters),O=e.ReactRedux.useSelector(h.selectWorkspaceItem),R=e.ReactRedux.useSelector(h.selectSelectedWorkspace),S=e.ReactRedux.useSelector(h.selectOrderResult),k=e.ReactRedux.useSelector(h.selectLoading),_=e.ReactRedux.useSelector(h.selectLoadingFlag("submission")),C=e.ReactRedux.useSelector(h.selectCanExport),M=e.ReactRedux.useSelector(h.selectPrimaryError),x=e.hooks.usePrevious(p),L=e.hooks.useEventCallback((e=>{if(!e)return null;const t="number"==typeof e.timestampMs?e.timestampMs:Date.now();return Object.assign(Object.assign({},e),{timestamp:new Date(t),timestampMs:t,kind:"runtime"})})),j="general"===(null==M?void 0:M.scope)?M.details:null,N=L(j),D=(null==j?void 0:j.severity)===T.MU.ERROR,P=null!==(i=null==M?void 0:M.details)&&void 0!==i?i:null,U=null!==(o=null==d?void 0:d.repository)&&void 0!==o?o:null,F=(0,w.ho)(y,{repository:null!==(s=null==d?void 0:d.repository)&&void 0!==s?s:void 0,fmeServerUrl:null==d?void 0:d.fmeServerUrl,fmeServerToken:null==d?void 0:d.fmeServerToken},{enabled:p===T.nE.WORKSPACE_SELECTION&&y.length>0&&!D}),{isPrefetching:V,progress:B,prefetchStatus:W}=F,q=B?{loaded:B.loaded,total:B.total}:null,G=ue(),z=e.hooks.useTranslation(At),H=e.hooks.useEventCallback((e=>z(e))),$=e.hooks.useCancelablePromiseMaker(),K=e.hooks.useLatest(d),Q=e.hooks.useLatest(p),J=e.hooks.useLatest(m),[X,Y]=e.React.useState(!1),Z=e.React.useRef(null),ee=e.React.useRef(null),te=e.React.useRef(!1),re=e.React.useRef(Symbol(f?`fme-popup-${f}`:"fme-popup")),ne=e.React.useRef(null),[ie,oe]=e.React.useState({isActive:!1,clickCount:0}),[se,ae]=e.React.useState("idle"),le=e.hooks.useEventCallback((e=>{oe((t=>Object.assign(Object.assign({},t),e)))})),ce=e.hooks.useEventCallback((e=>{"normalizing"!==e?"resolvingDataset"!==e?"applyingDefaults"!==e&&"complete"!==e||ae("finalizing"):ae("uploading"):ae("preparing")})),de=e.hooks.useEventCallback((e=>{J.current!==e&&c(pt.fmeActions.setDrawingTool(e,f))})),[fe,he]=e.React.useState(!1),[pe,me]=e.React.useState(null),[ve,ge]=e.React.useState(),ye=p===T.nE.STARTUP_VALIDATION,be=ye&&j?j:null,Ee=ye?N:null,Oe=ye&&!be,Re=ye?ve:void 0,Se=e.hooks.useEventCallback((e=>{he(Boolean(e))})),we=e.hooks.useEventCallback((()=>{me(null)})),Te=e.hooks.useEventCallback(((e,t,r)=>{var n,i;if(!e)return void me(null);const o={};let s="forcedAsyncDefault";switch(e.reason){case"runtime":"number"==typeof e.value&&(o.seconds=Math.max(0,Math.round(e.value))),"number"==typeof e.threshold&&(o.threshold=Math.max(0,Math.round(e.threshold))),s="forcedAsyncRuntime";break;case"transformers":"number"==typeof e.value&&(o.count=Math.max(0,Math.round(e.value))),"number"==typeof e.threshold&&(o.threshold=Math.max(0,Math.round(e.threshold))),s="forcedAsyncTransformers";break;case"fileSize":if("number"==typeof e.value){const t=e.value/_t;o.sizeMb=t>=10?Math.round(t):t.toFixed(1)}if("number"==typeof e.threshold){const t=e.threshold/_t;o.thresholdMb=t>=10?Math.round(t):t.toFixed(1)}s="forcedAsyncFileSize";break;case"area":"number"==typeof e.value&&(o.area=t&&(null===(n=null==r?void 0:r.view)||void 0===n?void 0:n.spatialReference)?(0,A.Jd)(e.value,t,r.view.spatialReference):Math.max(0,Math.round(e.value)).toLocaleString()),"number"==typeof e.threshold&&(o.threshold=t&&(null===(i=null==r?void 0:r.view)||void 0===i?void 0:i.spatialReference)?(0,A.Jd)(e.threshold,t,r.view.spatialReference):Math.max(0,Math.round(e.threshold)).toLocaleString()),s="forcedAsyncArea"}me({messageKey:s,severity:"warning",params:o})})),ke=e.hooks.useEventCallback((()=>{null!=ne.current&&("undefined"!=typeof window&&window.clearTimeout(ne.current),ne.current=null)})),Ae=e.hooks.useEventCallback((()=>{const e=K.current;if(!(null==e?void 0:e.fmeServerUrl)||!(null==e?void 0:e.fmeServerToken))return;const t=e.repository||T.nu,r=(0,A.hs)(e.fmeServerToken),n=["fme","workspaces",t,e.fmeServerUrl,r];E.fetchQuery({queryKey:n,staleTime:3e5,retry:1,queryFn:e=>It(this,[e],void 0,(function*({signal:e}){var r;const n=Ue(),i=yield n.getRepositoryItems(t,T.h6,void 0,void 0,e);return Array.isArray(null===(r=null==i?void 0:i.data)||void 0===r?void 0:r.items)?i.data.items:[]}))}).then((e=>{Array.isArray(e)&&e.length&&c(pt.fmeActions.setWorkspaceItems(e,f))})).catch((e=>{(0,A.fA)("Repository warmup error",e)}))})),Ie=e.hooks.useEventCallback((()=>{ke(),"undefined"!=typeof window?ne.current=window.setTimeout((()=>{ne.current=null,Ae()}),300):Ae()}));e.hooks.useUpdateEffect((()=>{ye||ge(void 0)}),[ye]);const _e=e.hooks.useEventCallback((e=>{if(!(null==e?void 0:e.view))return;const t=e.view,r=null==t?void 0:t.popup;r&&A.Fv.acquire(re.current,r,t);try{"function"==typeof t.closePopup?t.closePopup():r&&"function"==typeof r.close&&r.close()}catch(e){(0,A.fA)("Failed to close map popup",e)}})),Ce=e.hooks.useEventCallback((()=>{A.Fv.release(re.current)})),Me=e.hooks.useEventCallback((()=>{var t,r;const n=null===(t=K.current)||void 0===t?void 0:t.autoCloseOtherWidgets;if(void 0===n||n)try{const t="function"==typeof e.getAppStore?(0,e.getAppStore)():null,n=null===(r=null==t?void 0:t.getState)||void 0===r?void 0:r.call(t),i=null==n?void 0:n.widgetsRuntimeInfo,o=(0,A.UE)(i,f);o.length&&c(e.appActions.closeWidgets(o))}catch(e){(0,A.fA)("closeOtherWidgets error",e)}})),xe=(0,w.rG)(c,f),Le=(0,A.bQ)(),je=e.hooks.useEventCallback((e=>{c(pt.fmeActions.clearError("export",f)),c(pt.fmeActions.clearError("import",f)),c(pt.fmeActions.setViewMode(e,f))})),Ne=(null==d?void 0:d.drawingColor)||T.Ve,De=e.React.useRef((0,A.gV)((0,A.Xk)(Ne)));e.hooks.useUpdateEffect((()=>{De.current=(0,A.gV)((0,A.Xk)(Ne))}),[Ne]);const Pe=e.hooks.useEventCallback((()=>{var e;if(null===(e=Z.current)||void 0===e?void 0:e.dispose)try{Z.current.dispose()}catch(e){(0,A.fA)("Failed to dispose FME client",e)}Z.current=null,ee.current=null})),Ue=e.hooks.useEventCallback((()=>{var e,t,r,n,i,o,s;const a=K.current;if(!a)throw new Error("FME client configuration unavailable");const l=[null!==(t=null!==(e=a.fmeServerUrl)&&void 0!==e?e:a.fme_server_url)&&void 0!==t?t:"",null!==(i=null!==(n=null!==(r=a.fmeServerToken)&&void 0!==r?r:a.fme_server_token)&&void 0!==n?n:a.fmw_server_token)&&void 0!==i?i:"",null!==(o=a.repository)&&void 0!==o?o:"",null!==(s=a.requestTimeout)&&void 0!==s?s:""].map((e=>(null!=e?e:0===e)?String(e):"")).join("|");if(Z.current&&ee.current===l||(Pe(),Z.current=(0,kt.ER)(a),ee.current=l),!Z.current)throw new Error("Failed to initialize FME client");return Z.current}));e.hooks.useUpdateEffect((()=>{d||Pe()}),[d]),e.hooks.useUpdateEffect((()=>{(null==d?void 0:d.fmeServerUrl)&&(null==d?void 0:d.fmeServerToken)?Ie():ke()}),[null==d?void 0:d.fmeServerUrl,null==d?void 0:d.fmeServerToken,null==d?void 0:d.repository,Ie,ke]),e.hooks.useUnmount((()=>{Le.cancel(),vt.cancel(),Pe(),Ce(),ke()}));const Fe=e.hooks.useEventCallback((()=>{const e=J.current;c(pt.fmeActions.resetState(f)),Se(!1),c(pt.fmeActions.clearWorkspaceState(f)),e&&c(pt.fmeActions.setDrawingTool(e,f))})),Ve=e.hooks.useEventCallback((()=>{c(pt.fmeActions.resetToDrawing(f)),Se(!1),le({isActive:!1,clickCount:0})})),[Be,We]=e.React.useState(0),Ge=e.hooks.useEventCallback((()=>{We((e=>e+1))})),ze=e.hooks.useEventCallback(((t,r)=>{var n;if(!t)return null;if("CANCELLED"===t.code||"ABORT"===t.code||/cancel/i.test(t.message))return null;const i=t.message||"errorUnknown",o=(0,A.I0)(i,H),s=(t.code||"").toUpperCase(),a="GEOMETRY_INVALID"===s||"INVALID_GEOMETRY"===s,l="AREA_TOO_LARGE"===s,u=a||l,d="CONFIG_INCOMPLETE"===s,h=u||d,p=t.userFriendlyMessage,m=(0,A.id)(null===(n=K.current)||void 0===n?void 0:n.supportEmail),v=a?H("hintGeometryInvalid"):l?H("hintAreaTooLarge"):d?H("hintSetupWidget"):(0,A.KP)(H,i,t.code,m,"string"==typeof p?p:void 0).hint,g=[],y=null!=r?r:()=>{if(c(pt.fmeActions.clearError("general",f)),u){Y(!0),c(pt.fmeActions.setViewMode(T.nE.DRAWING,f));try{!Ze&&He&&Xe&&wt(Xe)}catch(e){}}};g.push({label:H("actionRetry"),onClick:y}),(0,A.xs)()&&g.push({label:H("actionReload"),onClick:()=>{var e;try{null===(e=globalThis.location)||void 0===e||e.reload()}catch(e){}}});const b=(0,A.Nn)(v),E=b?h?b:Ke(m,H,G,b):void 0;return(0,e.jsx)(qe,{state:(0,T.Qg)(o,{code:h?void 0:t.code,actions:g,detail:E})})})),{modules:He,loading:$e,errorKey:Qe}=(0,w.Gb)(Be),Je=(0,w.Vp)(),{jimuMapView:Xe,setJimuMapView:Ye,sketchViewModel:Ze,setSketchViewModel:et,graphicsLayer:tt,setGraphicsLayer:rt,setCleanupHandles:nt,teardownDrawingResources:it,cleanupResources:ot}=Je;e.hooks.useEffectWithPreviousValues((()=>{c(pt.fmeActions.setLoadingFlag("modules",Boolean($e),f))}),[$e,c,f]),e.hooks.useUpdateEffect((()=>{Qe&&xe(Qe,T.By.MODULE,"MAP_MODULES_LOAD_FAILED")}),[Qe,xe]),e.hooks.useUpdateEffect((()=>{!$e&&He&&"MAP_MODULES_LOAD_FAILED"===(null==N?void 0:N.code)&&c(pt.fmeActions.clearError("general",f))}),[$e,He,null==N?void 0:N.code,c,f]);const st=e.hooks.useEventCallback((()=>{if(!v||!(null==He?void 0:He.Polygon))return null;const e=He.Polygon;try{if("function"==typeof(null==e?void 0:e.fromJSON))return e.fromJSON(v)}catch(e){return null}return null}));e.hooks.useUpdateEffect((()=>{if(p!==T.nE.EXPORT_FORM)return void we();const e=K.current;if(!e)return void we();let t=null;(0,A.Mm)({data:{}},e,{workspaceItem:O,areaWarning:fe,drawnArea:g,onModeOverride:e=>{t=e}}),t?Te(t,He,Xe):we()}),[p,O,fe,g,He,Xe,null==d?void 0:d.syncMode,null==d?void 0:d.allowScheduleMode,null==d?void 0:d.largeArea,we,Te]);const at=e.hooks.useWidgetActived(f),lt=e.hooks.useEventCallback((e=>{Y(!1),(null==e?void 0:e.clearLocalGeometry)&&le({clickCount:0}),Ze&&(0,w.uB)(Ze),le({isActive:!1})})),ut=e.hooks.useEventCallback(((e,t)=>{lt(t),c(pt.fmeActions.setViewMode(e,f))})),ct=e.hooks.useEventCallback((e=>{ge(e)})),dt=e.hooks.useEventCallback((()=>{ge(void 0),c(pt.fmeActions.clearError("general",f)),c(pt.fmeActions.completeStartup(f)),Ie();const e=Q.current,t=null==e,r=e===T.nE.STARTUP_VALIDATION||e===T.nE.INITIAL;(t||r)&&je(T.nE.DRAWING)})),ft=e.hooks.useEventCallback((e=>{ge(void 0),c(pt.fmeActions.setError("general",e,f))})),ht=e.hooks.useEventCallback(((e,t,r)=>({message:H(e),type:T.By.CONFIG,code:t,severity:T.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now(),userFriendlyMessage:(null==d?void 0:d.supportEmail)?String(d.supportEmail):"",suggestion:H("actionRetryValidation"),retry:r,kind:"runtime"}))),vt=(0,A.bQ)(),gt=e.hooks.useEventCallback((()=>It(this,void 0,void 0,(function*(){const e=vt.abortAndCreate();c(pt.fmeActions.clearError("general",f)),ct(H("validatingStartup"));try{ct(H("statusValidatingMap"));const t=Array.isArray(u)&&u.length>0;ct(H("statusValidatingConnection"));const r=yield(0,mt.k3)({config:d,translate:H,signal:e.signal,mapConfigured:t});if(!r.isValid)return void(r.error?ft(r.error):r.requiresSettings?ft(ht("configurationInvalid","VALIDATION_FAILED",gt)):ge(void 0));if(!(null==d?void 0:d.syncMode)){ct(H("statusValidatingEmail"));try{const e=yield(0,A.hS)(d);if(!(0,A.B9)(e))return void ft(ht("userEmailMissingError","UserEmailMissing",gt))}catch(e){return void ft(ht("userEmailMissingError","UserEmailMissing",gt))}}dt()}catch(e){const t=(0,I.Pi)(e)||"errorUnknown",r="object"==typeof e&&null!==e&&"code"in e?String(e.code):"STARTUP_VALIDATION_FAILED";ft(ht(t,r,gt))}finally{vt.finalize(e)}})))),yt=e.hooks.useEventCallback((()=>{Ge(),gt()}));e.hooks.useEffectOnce((()=>(gt(),()=>{vt.cancel()})));const bt=e.hooks.useEventCallback(((e=!1)=>{Le.cancel(),vt.cancel(),ge(void 0),Y(!1),e?ot():it(),le({isActive:!1,clickCount:0}),Fe()}));e.hooks.useEffectWithPreviousValues((e=>{const t=e[0];if(!t)return;const r=d,n=(null==t?void 0:t.fmeServerUrl)!==(null==r?void 0:r.fmeServerUrl),i=(null==t?void 0:t.fmeServerToken)!==(null==r?void 0:r.fmeServerToken),o=(null==t?void 0:t.repository)!==(null==r?void 0:r.repository);try{if(n||i||o){bt(!1);const e=window.setTimeout((()=>{gt()}),50);return()=>{window.clearTimeout(e)}}}catch(e){}}),[d]),e.hooks.useUpdateEffect((()=>{try{const e=Array.isArray(u)&&u.length>0;bt(!e)}catch(e){}gt()}),[u]);const Et=e.hooks.useEventCallback((()=>{(0,w.yN)(tt)})),Ot=e.hooks.useEventCallback((e=>It(this,void 0,void 0,(function*(){var t,r,n;const i=null===(t=e.graphic)||void 0===t?void 0:t.geometry;if(i&&!te.current){te.current=!0;try{lt(),Se(!1);const t=yield(0,I.DU)(i,He);if(!t.valid){try{null==tt||tt.remove(e.graphic)}catch(e){}return it(),c(pt.fmeActions.setGeometry(null,0,f)),Se(!1),ut(T.nE.INITIAL,{clearLocalGeometry:!0}),void(t.error&&c(pt.fmeActions.setError("general",t.error,f)))}const o=null!==(r=t.simplified)&&void 0!==r?r:i,s=yield(0,I.x0)(o,He);if(!s||s<=0)return Se(!1),void xe(H("geometryInvalidCode"),T.By.VALIDATION,"ZERO_AREA");const a=Math.abs(s),l=(0,I.nW)(a,{maxArea:null==d?void 0:d.maxArea,largeArea:null==d?void 0:d.largeArea});if(l.exceedsMaximum){const t=(0,I.M4)(a,null==d?void 0:d.maxArea);try{null==tt||tt.remove(e.graphic)}catch(e){}if(it(),c(pt.fmeActions.setGeometry(null,0,f)),Se(!1),ut(T.nE.INITIAL,{clearLocalGeometry:!0}),t.message){const e=t.message||"geometryAreaTooLargeCode";xe(e,T.By.VALIDATION,t.code)}return}if(Se(l.shouldWarn),e.graphic){e.graphic.geometry=o;const t=null===(n=De.current)||void 0===n?void 0:n.HIGHLIGHT_SYMBOL;t&&(e.graphic.symbol=t)}c(pt.fmeActions.completeDrawing(o,a,T.nE.WORKSPACE_SELECTION,f))}catch(e){Se(!1),xe(H("errorDrawingComplete"),T.By.VALIDATION,"DRAWING_COMPLETE_ERROR")}finally{te.current=!1}}})))),Rt=e.hooks.useEventCallback((t=>{xt!==e.WidgetState.Closed&&(c(pt.fmeActions.setOrderResult(t,f)),je(T.nE.ORDER_RESULT))})),St=e.hooks.useEventCallback((e=>It(this,void 0,void 0,(function*(){if(_||!C)return;const r=(0,I.M4)(g,null==d?void 0:d.maxArea);if(!r.ok&&r.message)return ae("idle"),void xe(r.message,T.By.VALIDATION,r.code);c(pt.fmeActions.setLoadingFlag("submission",!0,f)),ae("preparing");let n=null,i=null;try{const r=K.current,o=(null==e?void 0:e.data)||{};we();const s=(0,A.Mm)({data:o},r,{workspaceItem:O,areaWarning:fe,drawnArea:g,onModeOverride:Te});i="sync"===s||"async"===s||"schedule"===s?s:null;const a=Ue(),l="async"===i||"schedule"===i?yield(0,A.hS)(r):"",u=R;if(!u)return void ae("idle");n=Le.abortAndCreate();const h=`widget_${(null==t?void 0:t.id)||"fme"}`,p=yield(0,mt._L)({rawFormData:o,userEmail:l,geometryJson:v,geometry:st()||void 0,modules:He,config:r,workspaceParameters:b,workspaceItem:O,selectedWorkspaceName:u,areaWarning:fe,drawnArea:g,makeCancelable:$,fmeClient:a,signal:n.signal,remoteDatasetSubfolder:h,onStatusChange:ce});if(p.aoiError)return ae("idle"),void c(pt.fmeActions.setError("general",p.aoiError,f));const m=p.params;if(!m)throw new Error("Submission parameter preparation failed");ae("submitting");const y=yield $(a.runWorkspace(u,m,void 0,n.signal));if(n.signal.aborted)return;((e,t,r,n,i)=>{var o;const s=(0,I.Hz)(e,t,r,H);let a=Object.assign(Object.assign({},s),i?{serviceMode:i}:{});if(n&&(null==d?void 0:d.allowScheduleMode)){const e=(0,A.Nn)(n.start),t=(0,A.Nn)(n.name),r=(0,A.Nn)(n.category),i=(0,A.Nn)(n.description),s=(0,A.Nn)(n.trigger);if(e&&t&&r){const n=Object.assign(Object.assign(Object.assign(Object.assign({},null!==(o=a.scheduleMetadata)&&void 0!==o?o:{}),{start:e,name:t,category:r}),i?{description:i}:{}),s?{trigger:s}:{});a=Object.assign(Object.assign({},a),{scheduleMetadata:n})}}Rt(a)})(y,u,l,o,i)}catch(e){((e,t)=>{var r;if((0,A.zf)(e))return;const n=(0,I.Pi)(e)||"errorUnknown";let i="";try{i=(0,A.I0)(n,H)}catch(e){i=H("errorUnknown")}const o=(0,A.id)(null===(r=K.current)||void 0===r?void 0:r.supportEmail),s=(0,A.Ej)(H,o),a=`${H("errorOrderFailed")}. ${i}. ${s}`.trim(),l=Object.assign({success:!1,message:a,code:e.code||"SUBMISSION_ERROR"},t?{serviceMode:t}:{});Rt(l)})(e,i)}finally{ae("idle"),c(pt.fmeActions.setLoadingFlag("submission",!1,f)),Le.finalize(n)}})))),wt=e.hooks.useEventCallback((e=>{var t;if(Ye(e),He)try{_e(e);const r=(0,mt.fW)(e,He,rt);try{r.title=H("labelDrawingLayer")}catch(e){}const{sketchViewModel:n,cleanup:i}=(0,mt.CY)({jmv:e,modules:He,layer:r,onDrawComplete:Ot,dispatch:c,widgetId:f,symbols:null===(t=De.current)||void 0===t?void 0:t.DRAWING_SYMBOLS,onDrawingSessionChange:le,onSketchToolStart:de});nt(i),et(n)}catch(e){xe(H("errorMapInit"),T.By.MODULE,"MAP_INIT_ERROR")}}));e.hooks.useUpdateEffect((()=>{He&&Xe&&!Ze&&wt(Xe)}),[He,Xe,Ze,wt]),e.hooks.useUpdateEffect((()=>{var e,t;if(!X||!Ze)return;Y(!1);const r=(null!=m?m:T.hL.POLYGON)===T.hL.RECTANGLE?"rectangle":"polygon";try{const n=null===(t=(e=Ze).create)||void 0===t?void 0:t.call(e,r);n&&"function"==typeof n.catch&&n.catch((e=>{(0,A.fA)("Sketch create promise error",e)}))}catch(e){(0,A.fA)("Sketch auto-start error",e)}}),[X,Ze,m]),e.hooks.useUpdateEffect((()=>{var e;const t=null===(e=De.current)||void 0===e?void 0:e.DRAWING_SYMBOLS;if(t){if(Ze)try{Ze.polygonSymbol=t.polygon,Ze.polylineSymbol=t.polyline,Ze.pointSymbol=t.point}catch(e){}if(tt)try{tt.graphics.forEach((e=>{var r;"polygon"===(null===(r=null==e?void 0:e.geometry)||void 0===r?void 0:r.type)&&(e.symbol=t.polygon)}))}catch(e){}}}),[Ze,tt,null==d?void 0:d.drawingColor]),e.hooks.useUpdateEffect((()=>{!at&&Ze&&(0,w.uB)(Ze)}),[at,Ze]),e.hooks.useUpdateEffect((()=>{const e=Xe;return()=>{e&&ot()}}),[Xe,ot]),e.hooks.useEffectOnce((()=>()=>{Le.cancel(),vt.cancel(),Pe(),ot(),c(pt.fmeActions.removeWidgetState(f))}));const Ct=e.hooks.useEventCallback(((e,t,r)=>0===r?H("hintStartDrawing"):e===T.hL.RECTANGLE?H("hintDrawRectangle"):e===T.hL.POLYGON?H(r<3?"hintDrawPolygonContinue":"hintDrawPolygonComplete"):H("hintSelectDrawingMode"))),Mt=e.hooks.useEventCallback((t=>{if(!Ze)return;e.ReactDOM.unstable_batchedUpdates((()=>{le({isActive:!0,clickCount:0}),c(pt.fmeActions.setDrawingTool(t,f)),c(pt.fmeActions.setViewMode(T.nE.DRAWING,f)),Se(!1)})),Et();try{const e=Ze;Boolean("active"===(null==e?void 0:e.state)||(null==e?void 0:e._creating))&&(0,w.uB)(Ze)}catch(e){(0,w.uB)(Ze)}const r=t===T.hL.RECTANGLE?"rectangle":"polygon";if(null==Ze?void 0:Ze.create)try{const e=Ze.create(r);e&&"function"==typeof e.catch&&e.catch((e=>{(0,A.fA)("Sketch create promise error",e)}))}catch(e){(0,A.fA)("Sketch create error",e)}})),xt=e.ReactRedux.useSelector((e=>{var t,r;return null===(r=null===(t=e.widgetsRuntimeInfo)||void 0===t?void 0:t[f])||void 0===r?void 0:r.state})),Lt=e.hooks.usePrevious(xt),jt=e.hooks.usePrevious(U),Nt=p===T.nE.DRAWING&&0===ie.clickCount&&!ie.isActive&&!te.current&&Ze&&!_&&!D;e.hooks.useUpdateEffect((()=>{Nt&&xt!==e.WidgetState.Closed&&Mt(m)}),[p,ie.clickCount,ie.isActive,m,Ze,_,Mt,xt,D]);const Dt=e.hooks.useEventCallback((()=>{Le.cancel(),ae("idle"),Et(),Se(!1),le({isActive:!1,clickCount:0}),Ze&&(0,w.uB)(Ze),Ve(),Me(),Xe&&_e(Xe)}));e.hooks.useUpdateEffect((()=>{xt===e.WidgetState.Closed&&Lt!==e.WidgetState.Closed&&Dt()}),[xt,Lt,Dt]),e.hooks.useUpdateEffect((()=>{const t=xt===e.WidgetState.Opened||xt===e.WidgetState.Active,r=Lt===e.WidgetState.Closed||Lt===e.WidgetState.Hidden||void 0===Lt;if(t&&r){Me(),Xe&&_e(Xe);const e=Q.current;e!==T.nE.ORDER_RESULT&&e!==T.nE.EXPORT_FORM&&e!==T.nE.WORKSPACE_SELECTION||Ve(),Q.current===T.nE.STARTUP_VALIDATION&&gt()}}),[xt,Lt,Xe,Me,_e,Ve]),e.hooks.useUpdateEffect((()=>{D&&it()}),[D,it]),e.hooks.useUpdateEffect((()=>{if(!Boolean(v))return void(fe&&Se(!1));const e=(0,I.nW)(g,{maxArea:null==d?void 0:d.maxArea,largeArea:null==d?void 0:d.largeArea}).shouldWarn;e!==fe&&Se(e)}),[v,g,fe,null==d?void 0:d.largeArea,null==d?void 0:d.maxArea,Se]),e.hooks.useUpdateEffect((()=>{U!==jt&&fe&&Se(!1)}),[U,jt,fe,Se]),e.hooks.useUpdateEffect((()=>{xt!==e.WidgetState.Closed&&xt!==e.WidgetState.Hidden||Ce()}),[xt,Ce]),e.hooks.useUpdateEffect((()=>{Xe||Ce()}),[Xe,Ce]);const Pt=e.hooks.useEventCallback(((e,t,r)=>{c(pt.fmeActions.applyWorkspaceData({workspaceName:e,parameters:t,item:r},f)),je(T.nE.EXPORT_FORM)})),Ut=e.hooks.useEventCallback((()=>{je(T.nE.INITIAL)})),Ft=e.hooks.useEventCallback((()=>{var e;const t=null!==(e=Q.current)&&void 0!==e?e:p,r=T.lh[t]||T.nE.INITIAL;je(x&&x!==t?x:r)}));if($e)return(0,e.jsx)("div",{css:G.parent},(0,e.jsx)(qe,{state:{kind:"loading",message:H("statusPreparingMapTools")}}));if(!He)return(0,e.jsx)("div",{css:G.parent},ze({message:"errorMapInit",type:T.By.MODULE,code:"MAP_MODULES_LOAD_FAILED",severity:T.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now()},yt));if(Ee)return(0,e.jsx)("div",{css:G.parent},ze(Ee,gt));if(!ye&&D&&N)return(0,e.jsx)("div",{css:G.parent},ze(N));const Vt=(ie.isActive||g>0)&&!_&&!$e,Bt=Boolean(u&&1===u.length);let Wt=d;if(d){const e=Object.assign({},d);delete e.fme_server_token,delete e.fmw_server_token,Wt=Object.assign(Object.assign({},e),{fmeServerToken:d.fmeServerToken})}return(0,e.jsx)("div",{css:G.parent},Bt&&(0,e.jsx)(r.JimuMapViewComponent,{useMapWidgetId:u[0],onActiveViewChange:wt}),(0,e.jsx)(Tt,{widgetId:f,config:Wt,geometryJson:v,workspaceItems:y,state:p,error:P,instructionText:Ct(m,ie.isActive,ie.clickCount),loadingState:Object.assign(Object.assign({},k),{modules:$e,submission:_}),isPrefetchingWorkspaces:V,workspacePrefetchProgress:q,workspacePrefetchStatus:W,modules:He,canStartDrawing:!!Ze,submissionPhase:se,modeNotice:pe,onFormBack:()=>je(T.nE.WORKSPACE_SELECTION),onFormSubmit:St,orderResult:S,onReuseGeography:()=>je(T.nE.WORKSPACE_SELECTION),onBack:Ft,drawnArea:g,areaWarning:fe,formatArea:e=>{var t;return(0,A.Jd)(e,He,null===(t=null==Xe?void 0:Xe.view)||void 0===t?void 0:t.spatialReference)},drawingMode:m,onDrawingModeChange:e=>{c(pt.fmeActions.setDrawingTool(e,f)),Ze&&((0,w.uB)(Ze),le({isActive:!1,clickCount:0}))},isDrawing:ie.isActive,clickCount:ie.clickCount,isCompleting:te.current,showHeaderActions:p!==T.nE.STARTUP_VALIDATION&&Vt,onReset:Dt,canReset:!0,onWorkspaceSelected:Pt,onWorkspaceBack:Ut,selectedWorkspace:R,workspaceParameters:b,workspaceItem:O,isStartupValidating:Oe,startupValidationStep:Re,startupValidationError:be,onRetryValidation:gt}))}function Mt(r){return(0,e.jsx)(t.Ht,{client:E},(0,e.jsx)(Ct,Object.assign({},r)),!1)}function xt(e){u.p=e}Reflect.set(Mt,"mapExtraStateProps",((e,t)=>{const r=e["fme-state"],n=(null==t?void 0:t.id)||(null==t?void 0:t.widgetId);return{state:(null==r?void 0:r.byId)&&n&&r.byId[n]||pt.initialFmeState}}))})(),c})())}}}));