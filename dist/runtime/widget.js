/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-core/react","jimu-arcgis","jimu-ui","jimu-ui/basic/color-picker","jimu-theme","jimu-ui/basic/date-picker"],(function(e,t){var r={},n={},o={},i={},s={},a={},l={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(a,"__esModule",{value:!0}),{setters:[function(e){r.DataRecordSetChangeMessage=e.DataRecordSetChangeMessage,r.MessageManager=e.MessageManager,r.React=e.React,r.ReactDOM=e.ReactDOM,r.ReactRedux=e.ReactRedux,r.SessionManager=e.SessionManager,r.WidgetState=e.WidgetState,r.appActions=e.appActions,r.css=e.css,r.getAppStore=e.getAppStore,r.hooks=e.hooks,r.jsx=e.jsx},function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){o[t]=e[t]}))},function(e){i.AdvancedButtonGroup=e.AdvancedButtonGroup,i.Alert=e.Alert,i.Button=e.Button,i.Checkbox=e.Checkbox,i.FormGroup=e.FormGroup,i.Label=e.Label,i.Loading=e.Loading,i.LoadingType=e.LoadingType,i.MultiSelect=e.MultiSelect,i.NumericInput=e.NumericInput,i.Option=e.Option,i.Radio=e.Radio,i.RichDisplayer=e.RichDisplayer,i.SVG=e.SVG,i.Select=e.Select,i.Slider=e.Slider,i.Switch=e.Switch,i.Table=e.Table,i.TagInput=e.TagInput,i.TextArea=e.TextArea,i.TextInput=e.TextInput,i.Tooltip=e.Tooltip,i.UrlInput=e.UrlInput},function(e){s.ColorPicker=e.ColorPicker},function(e){Object.keys(e).forEach((function(t){a[t]=e[t]}))},function(e){l.DatePicker=e.DatePicker}],execute:function(){e((()=>{var e={71:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.3 15.6A7.3 7.3 0 1 0 8.3 1a7.3 7.3 0 0 0 0 14.6M8.3 2A6.3 6.3 0 1 1 2 8.3 6.307 6.307 0 0 1 8.3 2m3.5 6.8h-4v-5h1v4h3z" clip-rule="evenodd"></path></svg>'},657:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m4-3a4 4 0 0 1-4 4 6.5 6.5 0 0 0-6.5 6.5h-1a7.5 7.5 0 0 1 5.286-7.168A4 4 0 1 1 12 5m1 5.5v1h-2v-1a1 1 0 1 1 2 0m-3 0v1H9v4h6v-4h-1v-1a2 2 0 1 0-4 0m0 2v2h4v-2z" clip-rule="evenodd"></path></svg>'},787:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.002 1H14A1 1 0 0 1 15 2.002v11.997A1 1 0 0 1 14 15H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1.002-1M2 14h12V2H2z" clip-rule="evenodd"></path></svg>'},884:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14 2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3.986l.001-.024L0 4a2 2 0 0 1 2-2zm1 2.934L8.277 9.416a.5.5 0 0 1-.554 0L1 4.935V12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1zM14 3H2a1 1 0 0 0-.97.752L8 8.398l6.97-4.646A1 1 0 0 0 14 3"></path></svg>'},930:(e,t,r)=>{"use strict";r.d(t,{$j:()=>O,Fh:()=>E,Mb:()=>f,XV:()=>m,c$:()=>p,dB:()=>g,gg:()=>c,hS:()=>S,lH:()=>R,m4:()=>y,qC:()=>v,qm:()=>b,xs:()=>u,yC:()=>w});var n=r(9244),o=r(3417),i=r(2238),s=r(6920),a=r(4986),l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const u=()=>{if("undefined"==typeof navigator)return!1;try{const e=null===globalThis||void 0===globalThis?void 0:globalThis.navigator;return Boolean(e&&!e.onLine)}catch(e){return!1}},c=e=>e?e.length<=4?"*".repeat(e.length):e.length<=8?`${e.slice(0,2)}${"*".repeat(e.length-4)}${e.slice(-2)}`:`${e.slice(0,4)}${"*".repeat(Math.max(4,e.length-8))}${e.slice(-4)}`:"",d=e=>{const t=(0,a.Nn)(e);if(!t)return"token:none";let r=0;for(let e=0;e<t.length;e+=1)r=31*r+t.charCodeAt(e)>>>0;return`token:${r.toString(36)}`},f=(e,t,r,n)=>{const s=(0,a.Nn)(e),l=(0,a.Nn)(t);if(!s||!l)return null;const u=Object.assign({fmeServerUrl:s,fmeServerToken:l,repository:(0,a.Nn)(r)||o.nu},Number.isFinite(n)?{requestTimeout:n}:{});try{return(0,i.ER)(u)}catch(e){return null}},p=(e,...t)=>h(e,t),h=(e,t)=>{const r=e.replace(/\/$/,""),n=t.filter((e=>"string"==typeof e&&e.length>0)).map((e=>e.split("/").filter((e=>Boolean(e)&&"."!==e&&".."!==e)).map((e=>encodeURIComponent(e))).join("/"))).join("/");return n?`${r}/${n}`:r},m=(e={},t=[],r=!1)=>{const n=new URLSearchParams;if("object"!=typeof e||null===e)return n;const o=new Set(t);for(const[t,r]of Object.entries(e)){if(null==r||o.has(t))continue;const e=(0,s.wc)(r);if(null==e)continue;if((0,a.E$)(e)){n.append(t,(0,s.SB)(e));continue}const i=(0,a.P6)(e);i?n.append(t,i):n.append(t,(0,a.N7)(e))}if(r){const t=t=>{const r=n.get(t);if(null!==r)return r;const o=null==e?void 0:e[t];return"string"==typeof o?o:""},r="xml"===t("opt_responseformat").trim().toLowerCase()?"xml":"json";n.set("opt_responseformat",r);const o="false"===t("opt_showresult").trim().toLowerCase()?"false":"true";n.set("opt_showresult",o);const i="sync"===t("opt_servicemode").trim().toLowerCase()?"sync":"async";n.set("opt_servicemode",i)}return n},v=(e,t,r,n)=>{},g=e=>{const t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(`^https?://${t}`,"i")},y=(e,t)=>{var r;return null!==(r=null==e?void 0:e.some((e=>{if(!e||!e._fmeInterceptor)return!1;const r=e.urls;if(r instanceof RegExp)return r.source===t.source&&r.flags===t.flags;const n="string"==typeof r?r:String(r||"");return t.test(n)})))&&void 0!==r&&r};function b(e,t,r){const n=`${e}::${t||""}::${r||""}`;let o=5381;for(let e=0;e<n.length;e++)o=(o<<5)+o^n.charCodeAt(e);return Math.abs(o>>>0).toString(36)}const E=e=>(null!=e?e:"").toLowerCase().includes("application/json"),w=e=>{const t=(0,a.P6)(e);if(!t)return null;try{return new URL(t)}catch(e){return null}},O=e=>{const t=w(e);return t&&t.hostname||null},S=e=>l(void 0,void 0,void 0,(function*(){const t=yield n.SessionManager.getInstance().getUserInfo(),r=((null==t?void 0:t.email)||(null==e?void 0:e.defaultRequesterEmail)||"").trim().toLowerCase();if(!o.Xw.test(r)){const e=new Error("MISSING_REQUESTER_EMAIL");throw e.name="MISSING_REQUESTER_EMAIL",e}return r})),R={fme:["fme"],workspaces:(e,t,r)=>[...R.fme,"workspaces",e||o.nu,t,d(r)],workspaceItem:(e,t,r,n)=>[...R.fme,"workspace-item",e,t||o.nu,r,d(n)],repositories:(e,t)=>[...R.fme,"repositories",e,d(t)],health:(e,t)=>[...R.fme,"health",e,d(t)]}},1020:(e,t,r)=>{"use strict";var n=r(8972),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,i={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:u,ref:c,props:i,_owner:a.current}}t.jsx=u},1138:(e,t,r)=>{"use strict";r.d(t,{$5:()=>O,GC:()=>g,Ok:()=>T,Wz:()=>p,bN:()=>v,fA:()=>m,fV:()=>w,ps:()=>h,r5:()=>R,sJ:()=>u,zf:()=>f});var n=r(3417),o=r(3890),i=r(1181);const s="error",a=Object.freeze({GEOMETRY_SERIALIZATION_FAILED:"polygon",MAP_MODULES_LOAD_FAILED:"map",FORM_INVALID:"warning"}),l=Object.freeze([{token:"GEOMETRY",icon:"polygon"},{token:"AREA",icon:"polygon"},{token:"MAP",icon:"map"},{token:"MODULE",icon:"map"},{token:"FORM",icon:"warning"},{token:"TOKEN",icon:"person-lock"},{token:"AUTH",icon:"person-lock"},{token:"REPOSITORY",icon:"folder"},{token:"REPO",icon:"folder"},{token:"DATA",icon:"data"},{token:"NETWORK",icon:"shared-no"},{token:"OFFLINE",icon:"shared-no"},{token:"CONNECTION",icon:"shared-no"},{token:"REQUEST",icon:"shared-no"},{token:"SERVER",icon:"feature-service"},{token:"GATEWAY",icon:"feature-service"},{token:"URL",icon:"link-tilted"},{token:"TIMEOUT",icon:"time"},{token:"CONFIG",icon:"setting"},{token:"EMAIL",icon:"email"}]),u=e=>{if("string"!=typeof e)return s;const t=e.trim();if(!t)return s;const r=t.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toUpperCase();const n=a[r];if(n)return n;const o=r.split(/[^A-Z0-9]+/).filter(Boolean),i=new Set(o);for(const{token:e,icon:t}of l)if(i.has(e)||r.includes(e))return t;return s},c=/\baborted?\b/i,d=e=>"string"==typeof e?e:"number"==typeof e||"boolean"==typeof e?String(e):"",f=e=>{var t;if(!e)return!1;if("object"==typeof e&&null!==e){const r=e,n=d(null!==(t=r.name)&&void 0!==t?t:r.code);if("AbortError"===n||"ABORT_ERR"===n||"ERR_ABORTED"===n)return!0;if(!n||"Error"===n){const e=d(r.message);return c.test(e)||e.includes("signal is aborted")}return!1}return"string"==typeof e&&c.test(e)},p=(e,t)=>{if(e)try{e.signal.aborted||e.abort(t)}catch(t){try{e.abort()}catch(e){}}},h=(e,t,r)=>{if(!e)return()=>{};if(e.aborted){const n=e.reason;return p(t,n),r&&r(n),()=>{}}const n=()=>{const n=e.reason;p(t,n),r&&r(n)};return e.addEventListener("abort",n),()=>{try{e.removeEventListener("abort",n)}catch(e){}}},m=(e,t)=>{},v=e=>{if(!e)return!0;const t=e.code||"",r=e.message||"";return"CANCELLED"===t||"ABORT"===t||/cancel/i.test(r)},g=(e,t,r)=>{const n=[];return t.onRetry&&n.push({label:r("actionRetry"),onClick:t.onRetry}),t.onReload&&n.push({label:r("actionReload"),onClick:t.onReload}),n},y={codeToKey:n.jF,statusToKey:n.KG,messagePatterns:n.a9},b=e=>{if("number"==typeof e)return y.statusToKey[e]?y.statusToKey[e]:void 0},E=(e,t,r="network")=>{const n=((e,t)=>{const r=null!=t?t:(0,o.Ko)(e);let n,i;return e&&"object"==typeof e&&(n=e.code,i=null==e?void 0:e.message),{status:r,code:"string"==typeof n?n:void 0,message:"string"==typeof i?i:void 0,isRequestFailed:"REQUEST_FAILED"===n}})(e,t);if("network"===r&&n.isRequestFailed)return b(n.status);if(n.code&&y.codeToKey[n.code])return y.codeToKey[n.code];if("geometry"!==r){const e=b(n.status);if(e)return e}if(n.message){const e=(e=>{const t=e.toLowerCase();for(const{pattern:e,key:r}of y.messagePatterns)if(e.test(t))return r})(n.message);if(e)return e}return"geometry"===r?"geometrySerializationFailedCode":void 0},w=(e,t)=>E(e,t,"network"),O=(e,t={})=>{var r,o,i,s,a,l;const u=Date.now();return{message:e,type:null!==(r=t.type)&&void 0!==r?r:n.By.NETWORK,code:null!==(o=t.code)&&void 0!==o?o:"UNKNOWN",severity:null!==(i=t.severity)&&void 0!==i?i:n.MU.ERROR,recoverable:null===(s=t.recoverable)||void 0===s||s,timestamp:new Date,timestampMs:u,userFriendlyMessage:null!==(a=t.userFriendlyMessage)&&void 0!==a?a:"",suggestion:null!==(l=t.suggestion)&&void 0!==l?l:"",retry:t.retry,kind:"runtime"}},S=(e,t,r={})=>{var o,i,s,a,l,u;const c=Date.now(),d=null!==(o=r.code)&&void 0!==o?o:`${e.toUpperCase()}_ERROR`,f=null!==(i=r.scope)&&void 0!==i?i:"general",p=null!==(s=r.recoverable)&&void 0!==s?s:e!==n.By.MODULE;return{message:t,type:e,code:d,severity:null!==(a=r.severity)&&void 0!==a?a:n.MU.ERROR,recoverable:p,timestampMs:c,userFriendlyMessage:null!==(l=r.userFriendlyMessage)&&void 0!==l?l:"",suggestion:null!==(u=r.suggestion)&&void 0!==u?u:"",details:r.details,kind:"serializable",errorId:`${f}_${d}`}},R=(e,t={})=>S(n.By.GEOMETRY,e,t),T=(e,t,r)=>{const n=e.code.toUpperCase(),o="GEOMETRY_INVALID"===n||"INVALID_GEOMETRY"===n,s="AREA_TOO_LARGE"===n,a="CONFIG_INCOMPLETE"===n,l=o||s||a,u=(0,i.I0)(e.message,t)||e.message,c=e.userFriendlyMessage||void 0;let d;return d=o?t("hintGeometryInvalid"):s?t("hintAreaTooLarge"):a?t("hintSetupWidget"):(0,i.Ej)(t,r,c),{message:u,code:l?void 0:e.code,hint:d}}},1181:(e,t,r)=>{"use strict";r.d(t,{$e:()=>G,$j:()=>a,BU:()=>N,Ej:()=>d,FK:()=>$,HK:()=>x,I0:()=>u,JR:()=>S,Jd:()=>ee,LH:()=>re,OD:()=>M,Ox:()=>m,PE:()=>te,RM:()=>y,SP:()=>R,WZ:()=>I,Wx:()=>_,Xk:()=>q,Z_:()=>g,dC:()=>O,hk:()=>L,kz:()=>ne,q2:()=>c,rI:()=>j,xi:()=>l});var n=r(9244),o=r(3417),i=r(4986),s=r(3890);const a=e=>{if(!(0,i.Bf)(e)||e<0)return null;const t=["B","KiB","MiB","GiB","TiB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${n>0&&r<10?r.toFixed(1):Math.round(r).toString()} ${t[n]}`},l=(e,t)=>Number.isFinite(e)?"number"==typeof t&&t>=0?e.toFixed(t):e.toString():"";function u(e,t){return e?t(e):""}const c=e=>{const t=(0,i.Nn)(e);if(!t||!(0,s.B9)(t))return t||"";const r=t.indexOf("@");if(r<=1)return`**${t.slice(r)}`;const n=t.slice(0,r),o=t.slice(r);return`${n.slice(0,2)}****${o}`},d=(e,t,r)=>{const n=(0,i.Nn)(t);if(!n)return(0,i.Nn)(r)||"";return e("contactSupportEmail").replace(o.BY,n)},f=Object.freeze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),p=/&(?:amp|lt|gt|quot|#39);/g,h=(e,t)=>{if(e.length>6)return"";if(!/^[0-9a-f]+$/i.test(e))return"";const r=Number.parseInt(e,t);if(!Number.isFinite(r)||r<0||r>1114111)return"";try{return String.fromCodePoint(r)}catch(e){return""}},m=e=>{if(!e)return"";const t=(e=>{var t;try{if("undefined"!=typeof DOMParser&&"function"==typeof DOMParser){const r=(new DOMParser).parseFromString(e,"text/html");return(null===(t=null==r?void 0:r.body)||void 0===t?void 0:t.textContent)||""}const r=document.createElement("div");return r.textContent=e,r.textContent||""}catch(e){}return null})(e);if(null!==t)return t.replace(/\s+/g," ").trim();const r=e.replace(/<\s*(script|style)[^>]*>[\s\S]*?<\s*\/\s*\1\s*>/gi,"").replace(/<[^>]*>/g,"");return r.replace(/&#(\d+);/g,((e,t)=>h(t,10))).replace(/&#x([\da-f]+);/gi,((e,t)=>h(t,16))).replace(p,(e=>f[e]||e)).replace(/\s+/g," ").trim()},v=/^(?:error|fel|warning|varning|info)\s*[:\-\u2013\u2014]?\s*/i,g=e=>{const t=(0,i.Nn)(e);if(!t)return"";return t.replace(v,"").trim()||t},y=e=>e?(0,n.css)(e):void 0,b=e=>String(e).padStart(2,"0"),E=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/,w=/^([0-9]{2}):([0-9]{2})(?::([0-9]{2}))?$/,O=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.includes("T")?t:`${t}T00:00:00`,[n="",o=""]=r.split("T"),i=E.exec(n),s=w.exec(o);if(!i||!s)return null;const a=Number(i[1]),l=Number(i[2]),u=Number(i[3]),c=Number(s[1]),d=Number(s[2]),f=s[3]?Number(s[3]):0;if(!(Number.isFinite(a)&&Number.isFinite(l)&&Number.isFinite(u)&&Number.isFinite(c)&&Number.isFinite(d)&&Number.isFinite(f)))return null;if(l<1||l>12)return null;if(u<1||u>31)return null;if(c<0||c>23)return null;if(d<0||d>59)return null;if(f<0||f>59)return null;const p=new Date(a,l-1,u,c,d,f,0);return p.getFullYear()!==a||p.getMonth()!==l-1||p.getDate()!==u||p.getHours()!==c||p.getMinutes()!==d||p.getSeconds()!==f||Number.isNaN(p.getTime())?null:p},S=(e,t="iso")=>{if(!e)return"";const r=e.getTime();if(Number.isNaN(r))return"";const n=e.getFullYear(),o=b(e.getMonth()+1),i=b(e.getDate()),s=b(e.getHours()),a=b(e.getMinutes()),l=b(e.getSeconds());return"fme"===t?`${n}-${o}-${i} ${s}:${a}:${l}`:`${n}-${o}-${i}T${s}:${a}:${l}`},R=(e,t,r=0,n=[])=>{var o;if(!e)return n;for(const i of e)i&&null!=i.value&&(n.push({option:i,depth:r}),t&&(null===(o=i.children)||void 0===o?void 0:o.length)&&R(i.children,t,r+1,n));return n},T=/(Z|[+-]\d{2}(?::?\d{2})?)$/i,k=/\.(\d{1,9})$/,A=e=>{if(!e)return{base:"",fraction:"",offset:""};let t=e,r="";const n=T.exec(t);(null==n?void 0:n[1])&&(r=n[1],t=t.slice(0,-r.length));let o="";const i=k.exec(t);return(null==i?void 0:i[0])&&(o=i[0],t=t.slice(0,-o.length)),{base:t,fraction:o,offset:r}},I=e=>{const t=(e||"").trim();return A(t)},C=e=>{if(!e)return null;const t=Number(e);return Number.isFinite(t)&&t>=0&&t<=99?b(t):null},_=e=>{const t=(e||"").replace(/\D/g,"");if(8!==t.length)return"";const r=t.slice(0,4),n=t.slice(4,6),o=t.slice(6,8),i=Number(r),s=Number(n),a=Number(o);return i<1e3||i>9999||s<1||s>12||a<1||a>31?"":`${r}-${n}-${o}`},M=e=>e?e.replace(/-/g,""):"",L=e=>{const{base:t}=I(e),r=t.replace(/\D/g,"");if(r.length<12)return"";const n=r.slice(0,4),o=r.slice(4,6),i=r.slice(6,8),s=r.slice(8,10),a=r.slice(10,12),l=r.length>=14?r.slice(12,14):"";return`${n}-${o}-${i}T${s}:${a}${l?`:${l}`:""}`},x=(e,t)=>{if(!e)return"";const r=e.trim(),[n,o]=r.split("T");if(!n||!o)return console.log("inputToFmeDateTime: Invalid ISO format",e),"";const[i,s,a]=n.split("-"),{base:l,fraction:u,offset:c}=A(o),[d,f,p]=l.split(":");if(!i||4!==i.length||!/^\d{4}$/.test(i))return console.log("inputToFmeDateTime: Invalid year",i),"";const h=C(s),m=C(a),v=C(d),g=C(f);if(!(h&&m&&v&&g))return console.log("inputToFmeDateTime: Invalid date/time components",{m:s,d:a,hh:d,mi:f}),"";const y=p?C(p):"00";if(null===y)return console.log("inputToFmeDateTime: Invalid seconds",p),"";const b=`${i}${h}${m}${v}${g}${y}`,E=t?I(t):null;return`${b}${u||(null==E?void 0:E.fraction)||""}${c||(null==E?void 0:E.offset)||""}`},N=e=>{const{base:t}=I(e),r=t.replace(/\D/g,"");return 4===r.length?`${r.slice(0,2)}:${r.slice(2,4)}`:r.length>=6?`${r.slice(0,2)}:${r.slice(2,4)}:${r.slice(4,6)}`:""},j=(e,t)=>{if(!e)return"";const{base:r,fraction:n,offset:o}=A(e),i=r.split(":").map((e=>e||"")),s=i[0]||"",a=i[1]||"",l=i[2]||"",u=Number(s),c=Number(a);if(!Number.isFinite(u)||!Number.isFinite(c))return"";const d=Number(l),f=Number.isFinite(d)?b(d):"00",p=`${b(u)}${b(c)}${f}`,h=t?I(t):null;return`${p}${n||(null==h?void 0:h.fraction)||""}${o||(null==h?void 0:h.offset)||""}`},P=(e,t,r)=>Number.isFinite(e)?Math.max(t,Math.min(r,e)):t,D=e=>P(e,0,1),F=e=>P(e,0,255),U=e=>Math.round(F(e)).toString(16).padStart(2,"0"),V=e=>Number(D(e).toFixed(6)).toString(),W=e=>V(e/255),B=(e,t,r)=>`#${U(e)}${U(t)}${U(r)}`,q=e=>{const t=/^#?([0-9a-f]{6})$/i.exec(e||""),r=t?parseInt(t[1],16):parseInt(o.Ve.slice(1),16);return[r>>16&255,r>>8&255,255&r]},G=(e,t)=>{const r=(e||"").split(",").map((e=>e.trim())).filter(Boolean).map(Number);if(!r.length)return null;if("cmyk"===(null==t?void 0:t.space)||!(null==t?void 0:t.space)&&!(null==t?void 0:t.alpha)&&4===r.length){if(r.length<4||!r.slice(0,4).every(Number.isFinite))return null;const[e,t,n,o]=r,i=((e,t,r,n)=>{const o=D(e),i=D(t),s=D(r),a=D(n);return{r:F(255*(1-o)*(1-a)),g:F(255*(1-i)*(1-a)),b:F(255*(1-s)*(1-a))}})(e,t,n,o);return B(i.r,i.g,i.b)}if(r.length<3||!r.slice(0,3).every(Number.isFinite))return null;const[n,o,i]=r,s=F(Math.round(255*D(n))),a=F(Math.round(255*D(o))),l=F(Math.round(255*D(i)));return B(s,a,l)},$=(e,t)=>{const r=/^#?([0-9a-f]{6})$/i.exec(e||"");if(!r)return null;const n=parseInt(r[1],16),o=n>>16&255,i=n>>8&255,s=255&n;if("cmyk"===(null==t?void 0:t.space)){const{c:e,m:t,y:r,k:n}=((e,t,r)=>{const n=D(e/255),o=D(t/255),i=D(r/255),s=1-Math.max(n,o,i);if(s>=.999999)return{c:0,m:0,y:0,k:1};const a=1-s;return{c:D((1-n-s)/a),m:D((1-o-s)/a),y:D((1-i-s)/a),k:D(s)}})(o,i,s);return[e,t,r,n].map(V).join(",")}return[o,i,s].map(W).join(",")},z=1e6,Q=2,H=27878400,K=[{factor:.3048,label:"ft\xb2",keywords:["foot","feet"],largeUnit:{threshold:H,factor:H,label:"mi\xb2"}},{factor:.3048006096,label:"ft\xb2",keywords:[]},{factor:1609.344,label:"mi\xb2",keywords:["mile"]},{factor:1e3,label:"km\xb2",keywords:["kilometer"]},{factor:.9144,label:"yd\xb2",keywords:["yard"]},{factor:.0254,label:"in\xb2",keywords:["inch"]},{factor:.01,label:"cm\xb2",keywords:["centimeter"]},{factor:.001,label:"mm\xb2",keywords:["millimeter"]},{factor:1852,label:"nm\xb2",keywords:["nautical"]},{factor:1,label:"m\xb2",keywords:["meter"]}],X=(e,t=!1)=>t?2:e>=100?0:e>=10?1:2,Y=e=>e>=z?{value:e/z,label:"km\xb2",decimals:Q}:e>=1?{value:Math.round(e),label:"m\xb2",decimals:0}:{value:Number(e.toFixed(2)),label:"m\xb2",decimals:2},J=(e,t)=>{var r;return null!==(r=K.find((r=>((e,t)=>{if(!(0,i.Bf)(e))return!1;const r=Math.max(1e-9,1e-6*Math.abs(t));return Math.abs(e-t)<=r})(e,r.factor)||((e,t)=>t.some((t=>e.includes(t))))(t,r.keywords))))&&void 0!==r?r:null},Z=(e,t)=>{if(!t)return Y(e);const r=t.metersPerUnit;if(!(0,i.Bf)(r))return Y(e);const n="string"==typeof t.unit?t.unit.toLowerCase():"",o=J(r,n);return o?((e,t,r)=>{const n=e/(t*t);if(r.largeUnit&&n>=r.largeUnit.threshold)return{value:n/r.largeUnit.factor,label:r.largeUnit.label,decimals:2};const o=X(n,r.label.includes("km\xb2")||r.label.includes("mi\xb2"));return{value:n,label:r.label,decimals:o}})(e,r,o):((e,t,r)=>{const n=e/(t*t),o=X(n),i="string"==typeof r?(e=>{if(!e)return"units\xb2";const t=e.replace(/^esri/i,"").trim();if(!t)return"units\xb2";const r=t.toLowerCase();switch(r){case"meters":return"m\xb2";case"feet":case"internationalfeet":case"ussfeet":return"ft\xb2";case"kilometers":return"km\xb2";case"miles":return"mi\xb2";case"yards":return"yd\xb2";case"inches":return"in\xb2";case"centimeters":return"cm\xb2";case"millimeters":return"mm\xb2";case"nauticalmiles":return"nm\xb2";default:return`${r}\xb2`}})(r):"units\xb2";return{value:n,label:i,decimals:o}})(e,r,t.unit)};function ee(e,t,r){const n=Number.isFinite(e)&&e>0?e:0,o=Z(n,r);if(!o.value||o.value<=0)return`0 ${o.label}`;return`${((e,r)=>{const n=null==t?void 0:t.intl;if(n&&"function"==typeof n.formatNumber){const t=n.formatNumber(e,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:r});return"number"==typeof t?t.toString():t}return e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:r})})(o.value,o.decimals)} ${o.label}`}const te=e=>{if(!e)return"Unknown error";if("string"==typeof e)return e;if("number"==typeof e)return e.toString();if(e instanceof Error)return e.message||"Error object";if("object"==typeof e&&null!==e){const t=e;for(const e of["message","error","details","description"]){const r=t[e];if((0,i.YH)(r))return r.trim()}}return"Unknown error occurred"},re=(e,t="error")=>e?`${e}-${t}`:void 0,ne=(e,t,r,n,o)=>{if(r)return r;const s=(0,i.P6)(e);if(s)return s;if(!t)return;return(0,i.P6)(n)||o}},1337:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 0a4 4 0 0 1 4 4v3a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2V4a4 4 0 0 1 4-4M5 7h1V4a2 2 0 1 1 4 0v3h1V4a3 3 0 0 0-6 0zm4 0V4a1 1 0 0 0-2 0v3zm3 1H4a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1M7 9h1v1h1v1H8v1h1v1H8v1H7z" clip-rule="evenodd"></path></svg>'},1618:(e,t,r)=>{"use strict";r.d(t,{Ad:()=>b,DU:()=>U,M4:()=>B,NV:()=>y,QC:()=>g,nW:()=>W,x0:()=>j});var n=r(3417),o=r(4986),i=r(9063),s=r(1138),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const l=(e,t)=>{if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=Math.min(e.length,t.length,2);for(let n=0;n<r;n++){const r=e[n],o=t[n];if("number"!=typeof r||"number"!=typeof o)return!1;if(!Number.isFinite(r)||!Number.isFinite(o))return!1;if(Math.abs(r-o)>1e-9)return!1}return!0},u=e=>"number"==typeof e&&Number.isFinite(e),c=e=>Array.isArray(e)&&e.length>=2&&e.length<=4&&e.every(u),d=e=>"object"==typeof e&&null!==e,f=e=>{if(!Array.isArray(e)||e.length<4)return!1;if(!e.every(c))return!1;const t=e[0],r=e[e.length-1];return l(t,r)},p=e=>{if(!d(e))return!1;const t="geometry"in e?e.geometry:e;if(!d(t))return!1;const r="rings"in t?t.rings:void 0;return Array.isArray(r)&&r.length>0&&r.every(f)},h=e=>{if("object"!=typeof e||null===e)return{};const t=e;return{wkid:"number"==typeof t.wkid?t.wkid:void 0,latestWkid:"number"==typeof t.latestWkid?t.latestWkid:void 0}},m=e=>{const t=e;if(null==t?void 0:t.isWebMercator)return!0;const{wkid:r,latestWkid:n}=h(e);return 3857===r||3857===n},v=e=>{const t=e;if((null==t?void 0:t.isGeographic)||(null==t?void 0:t.isWGS84))return!0;const{wkid:r,latestWkid:n}=h(e);return 4326===r||4326===n},g=e=>{if(!(null==e?void 0:e.length))return[];const t=new Set,r=[];for(const i of e){if(!i||i.type!==n.QL.GEOMETRY)continue;const e=(0,o.Nn)(i.name);e&&!t.has(e)&&(t.add(e),r.push(e))}return r},y=(e,t,r,i,s,a)=>{const l=(0,o.E)(null==s?void 0:s.aoiParamName,"AreaOfInterest"),u=((e,t)=>{if(p(e))return"geometry"in e?e.geometry:e;const r=null==t?void 0:t.toJSON();return p(r)?r:null})(t,r);if(!u)return e;const c=(e=>{try{return JSON.stringify(e)}catch(e){return null}})(u);if(!c)return Object.assign(Object.assign({},e),{__aoi_error__:{message:"GEOMETRY_SERIALIZATION_FAILED",type:n.By.GEOMETRY,code:"GEOMETRY_SERIALIZATION_FAILED",severity:n.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now()}});const d=Object.assign(Object.assign({},e),{[l]:c});if(null==a?void 0:a.length){const e=new Set;for(const t of a){if("string"!=typeof t)continue;const r=(0,o.E)(t,"");r&&r!==l&&e.add(r)}for(const t of e)d[t]=c}return d},b=e=>{void 0!==e.__aoi_error__&&delete e.__aoi_error__},E=e=>"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then,w=e=>"object"==typeof e&&null!==e&&"polygon"===e.type;let O,S,R,T;const k=e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e},A=(e,t,r)=>a(void 0,void 0,void 0,(function*(){if(!e)return 0;const n=e.geodesicArea;if(r&&"function"==typeof n)try{const e=yield n(t,"square-meters");if(Number.isFinite(e)&&e>0)return e}catch(e){console.log("geodesicArea calculation failed, trying planar fallback",e)}const o=e.planarArea;if("function"==typeof o)try{const e=yield o(t,"square-meters");if(Number.isFinite(e)&&e>0)return e}catch(e){console.log("planarArea calculation failed",e)}return 0})),I=e=>a(void 0,void 0,void 0,(function*(){var t,r,n,o,s,l,u,c,d,f;try{const p=null===(t=null==e?void 0:e.esriConfig)||void 0===t?void 0:t.geometryServiceUrl;if("string"==typeof p&&p)return p;const h=yield(e=>a(void 0,void 0,void 0,(function*(){if(null==e?void 0:e.esriConfig)return e.esriConfig;if(void 0!==T)return T;try{const[e]=yield(0,i.IP)(["esri/config"]);T=k(e)}catch(e){T=null}return T})))(e);if(!h)return null;const m=h.geometryServiceUrl;if("string"==typeof m&&m)return m;const v=null===(r=h.request)||void 0===r?void 0:r.geometryServiceUrl;if("string"==typeof v&&v)return v;const g=(null===(s=null===(o=null===(n=h.portalSelf)||void 0===n?void 0:n.helperServices)||void 0===o?void 0:o.geometry)||void 0===s?void 0:s.url)||(null===(c=null===(u=null===(l=h.portalInfo)||void 0===l?void 0:l.helperServices)||void 0===u?void 0:u.geometry)||void 0===c?void 0:c.url)||(null===(f=null===(d=h.helperServices)||void 0===d?void 0:d.geometry)||void 0===f?void 0:f.url);if("string"==typeof g&&g)return g}catch(e){}return null})),C=e=>a(void 0,void 0,void 0,(function*(){if(!e)return null;try{const t=E(e)?yield e:e;if(w(t))return t}catch(e){console.log("Polygon promise resolution failed",e)}return null})),_=(e,t,r,n)=>a(void 0,void 0,void 0,(function*(){const o=null==e?void 0:e[t];if("function"!=typeof o)return null;try{const e=o(r,...n);return yield C(e)}catch(e){return null}})),M=(e,t)=>a(void 0,void 0,void 0,(function*(){const r=null==e?void 0:e.spatialReference;if(!(v(r)||m(r)))return e;const n=yield(e=>a(void 0,void 0,void 0,(function*(){var t;if(null===(t=null==e?void 0:e.normalizeUtils)||void 0===t?void 0:t.normalizeCentralMeridian)return e.normalizeUtils;if(void 0!==O)return O;try{const[e]=yield(0,i.IP)(["esri/geometry/support/normalizeUtils"]);O=k(e)}catch(e){O=null}return O})))(t);if(!(null==n?void 0:n.normalizeCentralMeridian))return e;try{const t=yield n.normalizeCentralMeridian([e]),r=Array.isArray(t)?t[0]:null;if(w(r)){if(r!==e){const t=e.extent,n=r.extent;t&&n&&Math.abs(t.xmin-n.xmin)>180&&console.log("[Geometry] Normalized dateline-crossing polygon",{originalExtent:t,normalizedExtent:n})}return r}}catch(e){}return e})),L=(e,t)=>a(void 0,void 0,void 0,(function*(){let r=e;return r=yield M(r,t),r=yield((e,t)=>a(void 0,void 0,void 0,(function*(){var r,o;const i=null==e?void 0:e.spatialReference,s=v(i)||m(i),a=v(i);let l=e;if(s){const e=[n.In,"meters"],o=null!==(r=yield _(null==t?void 0:t.geometryEngineAsync,"geodesicDensify",l,e))&&void 0!==r?r:yield _(null==t?void 0:t.geometryEngine,"geodesicDensify",l,e);o&&(l=o)}const u=[a?Math.max(n.In*n.qc,n.wF):n.In],c=null!==(o=yield _(null==t?void 0:t.geometryEngineAsync,"densify",l,u))&&void 0!==o?o:yield _(null==t?void 0:t.geometryEngine,"densify",l,u);return c&&(l=c),l})))(r,t),r})),x=(e,t)=>a(void 0,void 0,void 0,(function*(){var r;const n=yield I(t);if(!n)return 0;const{geometryService:o,AreasAndLengthsParameters:s}=yield a(void 0,void 0,void 0,(function*(){if(void 0!==S&&void 0!==R)return{geometryService:S,AreasAndLengthsParameters:R};try{const[e,t]=yield(0,i.IP)(["esri/rest/geometryService","esri/rest/support/AreasAndLengthsParameters"]),r=k(e),n=k(t);if(!r||!n)return console.log("Geometry service modules returned null after unwrap"),S=null,R=null,{geometryService:null,AreasAndLengthsParameters:null};S=r,R=n}catch(e){console.log("Failed to load geometry service modules",e),S=null,R=null}return{geometryService:S,AreasAndLengthsParameters:R}}));if(!(null==o?void 0:o.areasAndLengths)||"function"!=typeof o.areasAndLengths||!s)return 0;try{const t=new s({polygons:[e],areaUnit:"square-meters",lengthUnit:"meters",calculationType:"geodesic",geodesic:!0}),i=yield o.areasAndLengths(n,t),a=null===(r=null==i?void 0:i.areas)||void 0===r?void 0:r[0];if(Number.isFinite(a)&&Math.abs(a)>0)return Math.abs(a)}catch(e){console.log("Geometry service area calculation failed, using fallback",e)}return 0})),N=(e,t)=>{if(!e)return null;if("function"==typeof e)return e;if("object"!=typeof e)return null;const r=e,n=t?["geodesicArea","geodesic","planarArea","planar"]:["planarArea","planar","geodesicArea","geodesic"];for(const e of n){const t="function"==typeof(o=r[e])?o:null;if(t)return t}var o;return r.area?N(r.area,t):null},j=(e,t)=>a(void 0,void 0,void 0,(function*(){var r,n,o,i,s,l,u,c;if(!e||"polygon"!==e.type)return 0;const d=e,f=null!==(n=null===(r=d.rings)||void 0===r?void 0:r.reduce(((e,t)=>e+(Array.isArray(t)?t.length:0)),0))&&void 0!==n?n:0;f>1e4&&console.log("[Geometry] Processing complex polygon",{vertices:f,rings:null!==(i=null===(o=d.rings)||void 0===o?void 0:o.length)&&void 0!==i?i:0,estimatedProcessingTime:`${Math.round(f/100)}ms`});let p=d;try{p=yield L(d,t)}catch(e){p=d}const h=(e=>{var t;try{if(v(e.spatialReference)||m(e.spatialReference))return!0;const r=null===(t=e.toJSON)||void 0===t?void 0:t.call(e);if(r&&"object"==typeof r){const e=r.spatialReference;return v(e)||m(e)}}catch(e){}return!1})(p),g=((e,t,r)=>{const n=[],o=N(null==t?void 0:t.geometryOperators,r);return o&&n.push((()=>a(void 0,void 0,void 0,(function*(){try{const t=o.length>=2?[e,"square-meters"]:[e],r=o(...t),n=E(r)?yield r:r;if("number"==typeof n&&Math.abs(n)>0)return Math.abs(n)}catch(e){}return 0})))),(null==t?void 0:t.geometryEngineAsync)&&n.push((()=>A(t.geometryEngineAsync,e,r))),(null==t?void 0:t.geometryEngine)&&n.push((()=>A(t.geometryEngine,e,r))),n})(p,t,h);for(const e of g)try{const t=yield e();if(t>0)return t}catch(e){}const y=yield x(p,t);return y>0?(console.log("[Performance] Fell back to geometry service for area calculation",{polygonVertices:null!==(u=null===(l=null===(s=p.rings)||void 0===s?void 0:s[0])||void 0===l?void 0:l.length)&&void 0!==u?u:0,spatialReference:null===(c=p.spatialReference)||void 0===c?void 0:c.wkid}),y):0})),P=(e,t,r)=>a(void 0,void 0,void 0,(function*(){return((e,t,r)=>a(void 0,void 0,void 0,(function*(){var n;const o=null==r?void 0:r.simplify;if("function"==typeof o){const i=yield o(e),s=yield C(i);if(s){const e=null!==(n=null==r?void 0:r.isSimple)&&void 0!==n?n:null==t?void 0:t.isSimple;if("function"!=typeof e)return s;{const t=e(s);if(E(t)?yield t:t)return s}}}const i=null==t?void 0:t.simplify;if("function"==typeof i){const r=yield C(i(e));if(r){const e=null==t?void 0:t.isSimple;if("function"!=typeof e)return r;{const t=e(r);if(E(t)?yield t:t)return r}}}const s=null==t?void 0:t.isSimple;if("function"==typeof s){const t=s(e);if(E(t)?yield t:t)return e}return null})))(e,t,r)})),D=e=>{if(!Array.isArray(e)||0===e.length)return!1;const t=e[0],r=e[e.length-1];return Boolean(t&&r&&Array.isArray(t)&&Array.isArray(r)&&t[0]===r[0]&&t[1]===r[1])},F=(e,t)=>({valid:!1,error:(0,s.r5)(e,{code:t,scope:"general"})}),U=(e,t)=>a(void 0,void 0,void 0,(function*(){if(!e)return F("geometryMissingMessage","NO_GEOMETRY");if("polygon"!==e.type)return F("geometryPolygonRequired","INVALID_GEOMETRY_TYPE");if(!(null==t?void 0:t.geometryEngine)&&!(null==t?void 0:t.geometryEngineAsync))return{valid:!0};try{const r=t.geometryEngine,n=t.geometryEngineAsync;let o=e;const i=yield P(o,r,n);if(!i)return F("geometryNotSimple","INVALID_GEOMETRY");o=i;const s=o.rings,a=Array.isArray(s)?s:[];if(!(e=>{if(!Array.isArray(e)||0===e.length)return!1;for(const t of e){if(!Array.isArray(t)||t.length<4)return!1;if(!D(t))return!1}return!0})(a))return F("geometryInvalidCode","GEOMETRY_INVALID");const l=yield j(o,t);return!l||l<=0?F("geometryInvalidCode","GEOMETRY_INVALID"):((e,t,r,n)=>{if(e.length<=1)return!0;const o=null==r?void 0:r.contains;if("function"!=typeof o)return!0;try{const r=null==n?void 0:n.Polygon;if(!r)return!0;const i=r.fromJSON({rings:[e[0]],spatialReference:t.spatialReference});for(let n=1;n<e.length;n++)if(!o(i,r.fromJSON({rings:[e[n]],spatialReference:t.spatialReference})))return!1}catch(e){return!0}return!0})(a,o,r,t)?{valid:!0,simplified:o}:F("geometryInvalidCode","GEOMETRY_INVALID")}catch(e){return F("geometryValidationFailedMessage","GEOMETRY_VALIDATION_ERROR")}})),V=e=>{if("number"==typeof e&&Number.isFinite(e)&&!(e<=0))return e},W=(e,t)=>{const r=Math.abs(e)||0,n=V(null==t?void 0:t.maxArea),o=V(null==t?void 0:t.largeArea),i="number"==typeof n&&r>n;return{area:r,maxThreshold:n,warningThreshold:o,exceedsMaximum:i,shouldWarn:!i&&"number"==typeof o&&r>o}},B=(e,t)=>{const r=V(t);return!r||e<=r?{ok:!0}:{ok:!1,message:"geometryAreaTooLargeCode",code:"AREA_TOO_LARGE"}}},1658:(e,t,r)=>{"use strict";r.d(t,{q:()=>g});var n=r(4880),o=r(9757),i=r(6261),s=r(6500),a=class extends s.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const i=t.queryKey,s=t.queryHash??(0,n.F$)(i,t);let a=this.get(s);return a||(a=new o.X({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){i.jG.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,n.MK)(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>(0,n.MK)(e,t))):t}notify(e){i.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){i.jG.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){i.jG.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},l=r(6158),u=class extends s.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#r=new Map,this.#n=0}#t;#r;#n;build(e,t,r){const n=new l.s({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);const t=c(e);if("string"==typeof t){const r=this.#r.get(t);r?r.push(e):this.#r.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=c(e);if("string"==typeof t){const r=this.#r.get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#r.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=c(e);if("string"==typeof t){const r=this.#r.get(t),n=r?.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){const t=c(e);if("string"==typeof t){const r=this.#r.get(t)?.find((t=>t!==e&&t.state.isPaused));return r?.continue()??Promise.resolve()}return Promise.resolve()}clear(){i.jG.batch((()=>{this.#t.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#t.clear(),this.#r.clear()}))}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,n.nJ)(t,e)))}findAll(e={}){return this.getAll().filter((t=>(0,n.nJ)(e,t)))}notify(e){i.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return i.jG.batch((()=>Promise.all(e.map((e=>e.continue().catch(n.lQ))))))}};function c(e){return e.options.scope?.id}var d=r(9658),f=r(6035);function p(e){return{onFetch:(t,r)=>{const o=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let r=!1;const c=(0,n.ZM)(t.options,t.fetchOptions),d=async(e,o,i)=>{if(r)return Promise.reject();if(null==o&&e.pages.length)return Promise.resolve(e);const s=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:o,direction:i?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",(()=>{r=!0})),t.signal)}),e})(),a=await c(s),{maxPages:l}=t.options,u=i?n.ZZ:n.y9;return{pages:u(e.pages,a,l),pageParams:u(e.pageParams,o,l)}};if(i&&s.length){const e="backward"===i,t={pages:s,pageParams:a},r=(e?m:h)(o,t);l=await d(t,r,e)}else{const t=e??s.length;do{const e=0===u?a[0]??o.initialPageParam:h(o,l);if(u>0&&null==e)break;l=await d(l,e),u++}while(u<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function h(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function m(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var v=r(3096);const g=new class{#o;#i;#s;#a;#l;#u;#c;#d;constructor(e={}){this.#o=e.queryCache||new a,this.#i=e.mutationCache||new u,this.#s=e.defaultOptions||{},this.#a=new Map,this.#l=new Map,this.#u=0}mount(){this.#u++,1===this.#u&&(this.#c=d.m.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#o.onFocus())})),this.#d=f.t.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#o.onOnline())})))}unmount(){this.#u--,0===this.#u&&(this.#c?.(),this.#c=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#o.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#o.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#o.build(this,t),o=r.state.data;return void 0===o?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,n.d2)(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(o))}getQueriesData(e){return this.#o.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,r){const o=this.defaultQueryOptions({queryKey:e}),i=this.#o.get(o.queryHash),s=i?.state.data,a=(0,n.Zw)(t,s);if(void 0!==a)return this.#o.build(this,o).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return i.jG.batch((()=>this.#o.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,r)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#o.get(t.queryHash)?.state}removeQueries(e){const t=this.#o;i.jG.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const r=this.#o;return i.jG.batch((()=>(r.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const r={revert:!0,...t},o=i.jG.batch((()=>this.#o.findAll(e).map((e=>e.cancel(r)))));return Promise.all(o).then(n.lQ).catch(n.lQ)}invalidateQueries(e,t={}){return i.jG.batch((()=>(this.#o.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},o=i.jG.batch((()=>this.#o.findAll(e).filter((e=>!e.isDisabled()&&!e.isStatic())).map((e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(n.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(o).then(n.lQ)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=this.#o.build(this,t);return r.isStaleByTime((0,n.d2)(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.lQ).catch(n.lQ)}fetchInfiniteQuery(e){return e.behavior=p(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.lQ).catch(n.lQ)}ensureInfiniteQueryData(e){return e.behavior=p(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return f.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#o}getMutationCache(){return this.#i}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#a.set((0,n.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach((t=>{(0,n.Cp)(e,t.queryKey)&&Object.assign(r,t.defaultOptions)})),r}setMutationDefaults(e,t){this.#l.set((0,n.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#l.values()],r={};return t.forEach((t=>{(0,n.Cp)(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)})),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#o.clear(),this.#i.clear()}}({defaultOptions:{queries:{staleTime:v.ST.FIVE_MINUTES,gcTime:v.ST.TEN_MINUTES,retry:(e,t)=>{var r;const n=(null==t?void 0:t.status)||(null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status);return n!==v.jL.UNAUTHORIZED&&n!==v.jL.FORBIDDEN&&(!(n&&n>=v.H4.CLIENT_ERROR_MIN&&n<v.H4.SERVER_ERROR_MIN)&&e<3)},refetchOnWindowFocus:!1,refetchOnReconnect:!1}}})},1692:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(2775),o=r(4880),i=class{#f;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,o.gn)(this.gcTime)&&(this.#f=n.zs.setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(o.S$?1/0:3e5))}clearGcTimeout(){this.#f&&(n.zs.clearTimeout(this.#f),this.#f=void 0)}}},1787:(e,t,r)=>{"use strict";r.d(t,{DF:()=>h,fW:()=>I,CY:()=>_,JV:()=>S,G1:()=>C,MB:()=>y,Ou:()=>M.Ou,c2:()=>M.c2});var n=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class o{constructor(){this.cache=new Map}execute(e,t){return n(this,void 0,void 0,(function*(){const r=this.cache.get(e);if(r)return r;const n=t();return this.cache.set(e,n),n.finally((()=>{this.cache.delete(e)}))}))}}const i={healthCheck:new o,validateConnection:new o};var s=r(9063),a=r(3890),l=r(3096),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const c=e=>l.K2.some((t=>e.toLowerCase().includes(t.toLowerCase()))),d=e=>l.o0.some((t=>e.toLowerCase().includes(t.toLowerCase())));function f(e){var t;if(!e)return"";const r=null!==(t=null==e?void 0:e.data)&&void 0!==t?t:e;if("ok"===(null==r?void 0:r.status)&&!(null==r?void 0:r.version)&&!(null==r?void 0:r.build))return"";const n=/\bFME\s+(?:Flow|Server)\s+(\d{4}(?:\.\d+)?)\b/i,o=/\b(\d+\.\d+(?:\.\d+)?|20\d{2}(?:\.\d+)?)\b/,i=["version","fmeVersion","fmeflowVersion","app.version","about.version","server.version","edition","build","productName","product","name","message"];for(const e of i){const t=e.includes(".")?e.split(".").reduce(((e,t)=>null==e?void 0:e[t]),r):null==r?void 0:r[e];if("string"==typeof t){const e=t.match(n);if(e)return e[1];const r=t.match(o);if(r)return r[1]}if("number"==typeof t&&Number.isFinite(t)){if(t>=2020&&t<2100)return String(t);if(t>0&&t<100)return String(t)}}try{const e=Object.values(r||{});for(const t of e)if("string"==typeof t){const e=t.match(n);if(e)return e[1];const r=t.match(o);if(r)return r[1]}}catch(e){}return""}var p=r(3417);class h{isRenderableParam(e){if(!e||"string"!=typeof e.name)return!1;if(p.oh.has(e.name))return!1;if(p.vN.has(e.type))return!1;if(p.np.has(e.type)){const t=e.choiceSettings;return t&&Array.isArray(t.choices)&&t.choices.length>0||null!==e.defaultValue&&void 0!==e.defaultValue&&""!==e.defaultValue}return!0}getRenderableParameters(e){return e.filter((e=>this.isRenderableParam(e)))}mapListOptions(e){const t=e.choiceSettings;if(!t||!Array.isArray(t.choices))return;const r=e.nodeDelimiter,n=e.type===p.QL.tree;return t.choices.map((e=>{var t,o,i,a,l;const u=null!==(o=null!==(t=e.value)&&void 0!==t?t:e.id)&&void 0!==o?o:e.code,c=(0,s.sL)(u),d=null!==(l=null!==(a=null!==(i=e.display)&&void 0!==i?i:e.caption)&&void 0!==a?a:e.label)&&void 0!==l?l:e.name,f=(0,s.P6)(d,String(c)),p=n&&r&&"string"==typeof d?d:"string"==typeof e.path&&e.path?e.path:void 0;return Object.assign(Object.assign(Object.assign(Object.assign({label:f,value:c},e.description&&{description:e.description}),p&&{path:p}),e.disabled&&{disabled:!0}),e.metadata&&{metadata:e.metadata})}))}extractToggleMetaValue(e,t){if(e)for(const r of t){if(!(r in e))continue;const t=(0,s.FJ)(e[r]);if(void 0!==t)return t}}getDecimalPrecision(e){const t=e.decimalPrecision;if("number"!=typeof t||!Number.isFinite(t)||t<0)return;const r=Math.floor(t);return r>=0?Math.min(r,6):void 0}getSliderMeta(e,t,r){const n="boolean"==typeof e.minimumExclusive&&e.minimumExclusive,o="boolean"==typeof e.maximumExclusive&&e.maximumExclusive;if(e.type!==p.QL.RANGE_SLIDER)return{min:"number"==typeof e.minimum?e.minimum:void 0,max:"number"==typeof e.maximum?e.maximum:void 0,minExclusive:n,maxExclusive:o};const i="number"==typeof e.minimum,s="number"==typeof e.maximum,a="number"==typeof t&&t>=0?Math.floor(t):void 0,l=i?e.minimum:r?0:void 0,u=s?e.maximum:r?100:void 0;let c;return void 0!==a?c=a>0?Number(`0.${"0".repeat(a-1)}1`):1:r&&(c=1),{min:l,max:u,step:c,minExclusive:n,maxExclusive:o}}shouldUseRangeSliderUi(e){if(e.type!==p.QL.RANGE_SLIDER)return!1;if(e.control&&"object"==typeof e.control){const t=e.control;if("boolean"==typeof t.useRangeSlider)return t.useRangeSlider;if("boolean"==typeof t.useSlider)return t.useSlider}const t=(e.description||"").toLowerCase();return!(t.includes("no slider")||t.includes("noslider")||t.includes("without slider"))}getParameterMetadata(e){const t=(0,s.Qd)(e.defaultValue)?e.defaultValue:void 0;return(0,s.W1)([e.metadata,e.attributes,e.definition,e.control,e.schema,e.ui,e.extra,t])}normalizeOptionItem(e,t){var r,n,o,i,a,l,u,c;if(null==e)return null;if("string"==typeof e||"number"==typeof e){const t=(0,s.sL)(e);return{label:String(t),value:t,isLeaf:!0}}if(!(0,s.Qd)(e))return null;const d=e,f=null!==(r=(0,s.Xl)(d,["caption","label","name","title","displayName"]))&&void 0!==r?r:`Option ${t+1}`,p=null!==(c=null!==(u=null!==(l=null!==(a=null!==(i=null!==(o=null!==(n=d.value)&&void 0!==n?n:d.id)&&void 0!==o?o:d.code)&&void 0!==i?i:d.path)&&void 0!==a?a:d.name)&&void 0!==l?l:d.key)&&void 0!==u?u:f)&&void 0!==c?c:t,h=(0,s.sL)(p),m=(0,s.vq)(d.children),v=null==m?void 0:m.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({label:f,value:h},(0,s.Xl)(d,["description","detail","tooltip","hint","helper"])&&{description:(0,s.Xl)(d,["description","detail","tooltip","hint","helper"])}),(0,s.Xl)(d,["path","fullPath","groupPath","folder"])&&{path:(0,s.Xl)(d,["path","fullPath","groupPath","folder"])}),(!0===d.disabled||!0===d.readOnly||!1===d.selectable)&&{disabled:!0}),(null==v?void 0:v.length)&&{children:v}),(0,s.IT)(d)&&{metadata:(0,s.IT)(d)}),(null==v?void 0:v.length)?{}:{isLeaf:!0})}collectMetaOptions(e){const t=["options","items","values","choices","entries","list","records","data","nodes","children"];for(const r of t){const t=(0,s.vq)(e[r]);if(!(null==t?void 0:t.length))continue;const n=t.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e));if(n.length)return n}}extractScriptedOptions(e,t){const r=this.getParameterMetadata(e),n=this.collectMetaOptions(r);return(null==n?void 0:n.length)?n:t}buildScriptedNodes(e,t){if(!(null==e?void 0:e.length))return;return e.some((e=>e.children&&e.children.length>0))?this.buildNodesFromHierarchy(e,t):this.buildNodesFromPaths(e,t)}buildNodesFromHierarchy(e,t){const r=(e,n)=>{var o;const i=e.path?e.path.split(t).map((e=>e.trim())).filter(Boolean):n?[...n,e.label]:[e.label],s=e.metadata&&"string"==typeof e.metadata.id&&e.metadata.id||(null!=e.value?String(e.value):i.join("|")),a=(null===(o=e.children)||void 0===o?void 0:o.length)?e.children.map((e=>r(e,i))):void 0;return Object.assign(Object.assign(Object.assign(Object.assign({id:s,label:e.label,path:i},void 0!==e.value?{value:e.value}:{}),e.disabled?{disabled:!0}:{}),e.metadata?{metadata:e.metadata}:{}),a&&a.length?{children:a}:{isLeaf:!0})};return e.map((e=>r(e,void 0)))}buildNodesFromPaths(e,t){const r=new RegExp(`[${t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}]`),n=[],o=new Map,i=(e,t)=>{const r=e.join("|")||(t?String(t.value):"root"),s=o.get(r);if(s)return s;const a={id:r,label:e[e.length-1]||(null==t?void 0:t.label)||r,path:[...e],children:[]};if(o.set(r,a),e.length>1){const t=e.slice(0,-1);i(t).children.push(a)}else n.push(a);return a};for(const t of e){const e=t.path?t.path.split(r).map((e=>e.trim())).filter(Boolean):[t.label],n=i(e,t);n.value=t.value,t.metadata&&(n.metadata=Object.assign(Object.assign({},n.metadata||{}),t.metadata)),t.disabled&&(n.disabled=!0),t.description&&(n.metadata=Object.assign(Object.assign({},n.metadata||{}),{description:t.description}))}const s=e=>{const t=e.children.map((e=>s(e)));return Object.assign(Object.assign(Object.assign(Object.assign({id:e.id,label:e.label,path:e.path},void 0!==e.value?{value:e.value}:{}),e.disabled?{disabled:!0}:{}),e.metadata?{metadata:e.metadata}:{}),t.length?{children:t}:{isLeaf:!0})};return n.map((e=>s(e)))}deriveTableConfig(e){var t,r,n;const o=this.getParameterMetadata(e),i=null!==(n=null!==(r=null!==(t=(0,s.vq)(o.columns))&&void 0!==t?t:(0,s.vq)(o.fields))&&void 0!==r?r:(0,s.vq)(o.tableColumns))&&void 0!==n?n:(0,s.vq)(o.schema);if(!(null==i?void 0:i.length))return;const a=i.map(((e,t)=>this.normalizeTableColumn(e,t))).filter((e=>null!=e)),l=this.validateTableColumns(a);if(!l.length)return;const u=(0,s.hU)(o,["minRows","minimumRows","minRowCount"]),c=(0,s.hU)(o,["maxRows","maximumRows","maxRowCount"]),d=this.normalizeRowBounds(u,c);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({columns:l},void 0!==d.minRows&&{minRows:d.minRows}),void 0!==d.maxRows&&{maxRows:d.maxRows}),(0,s.Xl)(o,["addRowLabel","addLabel"])&&{addRowLabel:(0,s.Xl)(o,["addRowLabel","addLabel"])}),(0,s.Xl)(o,["removeRowLabel","removeLabel"])&&{removeRowLabel:(0,s.Xl)(o,["removeRowLabel","removeLabel"])}),(0,s.Xl)(o,["helper","helperText","instructions"])&&{helperText:(0,s.Xl)(o,["helper","helperText","instructions"])}),(0,s.Cq)(o,["allowReorder","reorder"],!1)&&{allowReorder:!0}),(0,s.Cq)(o,["showHeader","displayHeader"],!0)&&{showHeader:!0})}validateTableColumns(e){if(!(null==e?void 0:e.length))return[];const t=new Set,r=[];for(const n of e)(null==n?void 0:n.key)&&(t.has(n.key)||("select"!==n.type||n.options&&0!==n.options.length)&&(r.push(n),t.add(n.key)));return r}normalizeRowBounds(e,t){const r="number"==typeof e&&Number.isFinite(e)&&e>=0?Math.floor(e):void 0;let n="number"==typeof t&&Number.isFinite(t)&&t>=0?Math.floor(t):void 0;return void 0!==r&&void 0!==n&&r>n&&(n=r),{minRows:r,maxRows:n}}normalizeTableColumn(e,t){var r,n,o,i;if(!(0,s.Qd)(e))return null;const a=e,l=null!==(r=(0,s.Xl)(a,["key","name","field","id"]))&&void 0!==r?r:`column_${t}`,u=null!==(n=(0,s.Xl)(a,["label","title","caption","name"]))&&void 0!==n?n:l,c=(0,s.Xl)(a,["type","inputType","fieldType"]),d=c?{text:"text",string:"text",number:"number",numeric:"number",float:"number",integer:"number",select:"select",choice:"select",dropdown:"select",list:"select",boolean:"boolean",checkbox:"boolean",date:"date",time:"time",datetime:"datetime","date-time":"datetime"}[c.toLowerCase()]:void 0,f=null!==(i=null!==(o=(0,s.vq)(a.options))&&void 0!==o?o:(0,s.vq)(a.choices))&&void 0!==i?i:(0,s.vq)(a.values),p=null==f?void 0:f.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e));return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({key:l,label:u},d&&{type:d}),(0,s.Cq)(a,["required","isRequired"],!1)&&{required:!0}),(0,s.Cq)(a,["readOnly","readonly"],!1)&&{readOnly:!0}),(0,s.Xl)(a,["placeholder","prompt"])&&{placeholder:(0,s.Xl)(a,["placeholder","prompt"])}),void 0!==(0,s.hU)(a,["min","minimum"])&&{min:(0,s.hU)(a,["min","minimum"])}),void 0!==(0,s.hU)(a,["max","maximum"])&&{max:(0,s.hU)(a,["max","maximum"])}),void 0!==(0,s.hU)(a,["step","increment"])&&{step:(0,s.hU)(a,["step","increment"])}),(0,s.Xl)(a,["pattern","regex"])&&{pattern:(0,s.Xl)(a,["pattern","regex"])}),(null==p?void 0:p.length)&&{options:p}),(0,s.Xl)(a,["description","detail","helper","hint"])&&{description:(0,s.Xl)(a,["description","detail","helper","hint"])}),void 0!==a.defaultValue&&{defaultValue:a.defaultValue}),void 0!==a.width&&{width:a.width})}deriveScriptedConfig(e,t){var r;if(e.type!==p.QL.SCRIPTED)return;const n=this.getParameterMetadata(e),o=this.extractScriptedOptions(e,t),i=e.nodeDelimiter||e.delimiter||(0,s.Xl)(n,["breadcrumbSeparator","pathSeparator","delimiter"])||"/",a=this.buildScriptedNodes(o,i),l=(0,s.Cq)(n,["allowMultiple","multiple","multiSelect","supportsMultiple"],Array.isArray(e.defaultValue)),u=(0,s.Cq)(n,["allowManualEntry","allowManual","allowCustom","allowFreeform"],!1),c=(0,s.Cq)(n,["allowSearch","searchable","enableSearch","supportsSearch"],(null!==(r=null==o?void 0:o.length)&&void 0!==r?r:0)>15),d=(0,s.hU)(n,["pageSize","page_size","limit","pageLimit"]),f=(0,s.Xl)(n,["instructions","instruction","helper","hint"])||(0,s.Nn)(e.description),h=(0,s.Xl)(n,["searchPlaceholder","searchLabel","searchPrompt"]),m=(0,s.Cq)(n,["autoSelectSingleLeaf","autoSelectSingle","autoSelect"],!0),v=(0,s.Xl)(n,["maxResultsHint","resultsHint","resultsMessage"]);return{allowMultiple:l,allowSearch:c,hierarchical:Boolean(null==a?void 0:a.some((e=>e.children&&e.children.length>0))),allowManualEntry:u,searchPlaceholder:h,instructions:f,breadcrumbSeparator:i,pageSize:d,maxResultsHint:v,autoSelectSingleLeaf:m,nodes:a}}deriveDateTimeConfig(e){var t;if(![p.QL.DATE_TIME,p.QL.DATETIME,p.QL.TIME].includes(e.type))return;const r=this.getParameterMetadata(e),n=(0,s.Cq)(r,["includeSeconds","showSeconds","seconds"],!0),o="string"==typeof e.defaultValue?e.defaultValue:void 0,i=o?(0,s.WZ)(o):{fraction:"",offset:"",base:""},a=(0,s.Cq)(r,["includeMilliseconds","milliseconds","fractional"],!1)||i.fraction&&i.fraction.length>1,l=null!==(t=(0,s.vq)(r.timezones))&&void 0!==t?t:(0,s.vq)(r.timezoneOptions),u=null==l?void 0:l.map(((e,t)=>this.normalizeOptionItem(e,t))).filter((e=>null!=e)),c=(0,s.Xl)(r,["defaultTimezone","timezoneDefault"])||(0,s.Xl)(r,["timezoneOffset","defaultOffset"])||i.offset||void 0,d=(0,s.Xl)(r,["timezoneMode","timezone","tzMode"]),f="fixed"===d||"select"===d?d:(null==u?void 0:u.length)?"select":i.offset||"offset"===d?"offset":void 0;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({includeSeconds:n,includeMilliseconds:a},f&&{timezoneMode:f}),i.offset&&{timezoneOffset:i.offset}),(null==u?void 0:u.length)&&{timezoneOptions:u}),c&&{defaultTimezone:c}),(0,s.Xl)(r,["helper","hint","instructions"])&&{helperText:(0,s.Xl)(r,["helper","hint","instructions"])}),{showTimezoneBadge:Boolean(i.offset)})}deriveSelectConfig(e,t,r){var n;if(!new Set([p.Vw.SELECT,p.Vw.MULTI_SELECT,p.Vw.COORDSYS,p.Vw.ATTRIBUTE_NAME,p.Vw.ATTRIBUTE_LIST,p.Vw.DB_CONNECTION,p.Vw.WEB_CONNECTION,p.Vw.REPROJECTION_FILE]).has(e))return;const o=this.getParameterMetadata(t),i=t.type===p.QL.tree,a=Boolean(null==r?void 0:r.some((e=>e.path||e.children&&e.children.length>0))),l=(0,s.Cq)(o,["hierarchical","tree","grouped","nested"],i||a),u=(0,s.Cq)(o,["allowSearch","searchable","enableSearch"],(null!==(n=null==r?void 0:r.length)&&void 0!==n?n:0)>25),c=(0,s.Cq)(o,["allowCustomValues","allowCustom","allowManual","allowFreeform"],!1),d=(0,s.hU)(o,["pageSize","page_size","limit","pageLimit"]),f=(0,s.Xl)(o,["instructions","hint","helper"]);return u||c||d||f||l?Object.assign(Object.assign({allowSearch:u,allowCustomValues:c,hierarchical:l},d&&{pageSize:d}),f&&{instructions:f}):void 0}deriveFileConfig(e,t){var r,n;if(!new Set([p.Vw.FILE,p.Vw.TEXT_OR_FILE,p.Vw.REPROJECTION_FILE]).has(e))return;const o=this.getParameterMetadata(t),i=null!==(n=null!==(r=o.accept)&&void 0!==r?r:o.accepted)&&void 0!==n?n:o.extensions,a=(()=>{if(i){if(Array.isArray(i)){const e=i.map((e=>(0,s.Nn)(e))).filter((e=>Boolean(e)));return e.length?e:void 0}if("string"==typeof i){const e=i.split(/[,;\s]+/).map((e=>e.trim())).filter(Boolean);return e.length?e:void 0}}})(),l=(0,s.hU)(o,["maxSizeMb","maxSize","fileSizeMb","maxUploadMb"]),u=(0,s.Cq)(o,["allowMultiple","multiple","multi"],!1),c=(0,s.Xl)(o,["helper","hint","instructions"]),d=(0,s.Xl)(o,["capture","captureMode"]);return a||l||u||c||d?Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a&&{accept:a}),void 0!==l&&{maxSizeMb:l}),u&&{multiple:!0}),c&&{helperText:c}),d&&{capture:d}):void 0}extractChoiceSetConfig(e){if(!e||!e.choiceSet)return;const t=e.choiceSet,r=t.type;if(r)switch(r){case"attributeNames":return Object.assign({type:"attributeNames"},t);case"coordinateSystems":return Object.assign({type:"coordinateSystems"},t);case"dbConnections":return Object.assign({type:"dbConnections"},t);case"webConnections":return Object.assign({type:"webConnections"},t)}}parseToggleOptionEntries(e){return Array.isArray(e)?e.map((e=>{var t;return{value:(0,s.FJ)(null==e?void 0:e.value),label:null!==(t=(0,s.Nn)(null==e?void 0:e.label))&&void 0!==t?t:void 0}})).filter((e=>void 0!==e.value||e.label)):[]}resolveToggleOptionsFromEntries(e,t,r){var n,o;let i=this.extractToggleMetaValue(r,["checkedValue","checked_value","trueValue","true_value","onValue","on_value","yesValue","yes_value"]),a=this.extractToggleMetaValue(r,["uncheckedValue","unchecked_value","falseValue","false_value","offValue","off_value","noValue","no_value"]);if(2===e.length){const[r,l]=e;if(void 0!==t&&void 0===a&&(void 0!==r.value&&(0,s.$X)(r.value,t)?(a=r.value,void 0===i&&(i=l.value)):void 0!==l.value&&(0,s.$X)(l.value,t)&&(a=l.value,void 0===i&&(i=r.value))),void 0===i&&(i=null!==(n=r.value)&&void 0!==n?n:l.value),void 0===a){const e=null!==(o=l.value)&&void 0!==o?o:r.value;a=void 0!==e&&void 0!==i&&(0,s.$X)(e,i)&&void 0!==r.value&&!(0,s.$X)(r.value,i)?r.value:e}}else 1===e.length&&void 0===i&&(i=e[0].value);return{checkedValue:i,uncheckedValue:a}}applyToggleDefaults(e,t,r,n){let o=e,i=t;return void 0!==n&&(void 0===o&&n&&(o=(0,s.FJ)(!0)),void 0!==i||n||(i=(0,s.FJ)(!1))),void 0===i&&void 0!==r&&(i=r),void 0!==o&&void 0!==i&&(0,s.$X)(o,i)&&(i=void 0),{checkedValue:o,uncheckedValue:i}}extractToggleLabels(e,t,r,n){var o,i;return{checkedLabel:(0,s.Xl)(e,["checkedLabel","checked_caption","checkedText","checked_label","trueLabel"])||(null===(o=t.find((e=>e.label&&void 0!==r&&void 0!==e.value&&(0,s.$X)(e.value,r))))||void 0===o?void 0:o.label),uncheckedLabel:(0,s.Xl)(e,["uncheckedLabel","unchecked_caption","uncheckedText","unchecked_label","falseLabel"])||(null===(i=t.find((e=>e.label&&void 0!==n&&void 0!==e.value&&(0,s.$X)(e.value,n))))||void 0===i?void 0:i.label)}}deriveToggleConfig(e,t,r){if(e!==p.Vw.SWITCH&&e!==p.Vw.CHECKBOX)return;const n=this.getParameterMetadata(t),o=(0,s.FJ)(t.defaultValue),i=(0,s.Dr)(t.defaultValue),a=this.parseToggleOptionEntries(r);let{checkedValue:l,uncheckedValue:u}=this.resolveToggleOptionsFromEntries(a,o,n);const c=this.applyToggleDefaults(l,u,o,i);l=c.checkedValue,u=c.uncheckedValue;const{checkedLabel:d,uncheckedLabel:f}=this.extractToggleLabels(n,a,l,u),h=Object.assign(Object.assign(Object.assign(Object.assign({},void 0!==l&&{checkedValue:l}),void 0!==u&&{uncheckedValue:u}),d&&{checkedLabel:d}),f&&{uncheckedLabel:f});return Object.keys(h).length?h:void 0}deriveColorConfig(e){if(e.type!==p.QL.COLOR&&e.type!==p.QL.COLOR_PICK)return;const t=this.getParameterMetadata(e),r=(0,s.Xl)(t,["colorSpace","colourSpace","space","colorModel","colourModel"]),n=null==r?void 0:r.trim().toLowerCase();let o;if("cmyk"===n?o="cmyk":"rgb"===n&&(o="rgb"),!o){const t=("string"==typeof e.defaultValue?e.defaultValue:"").split(",").map((e=>e.trim())).filter(Boolean);o||(4===t.length?o="cmyk":3===t.length&&(o="rgb"))}const i=(0,s.Cq)(t,["alpha","allowAlpha","hasAlpha","supportsAlpha","includeAlpha"],!1);return o||i?Object.assign(Object.assign({},o&&{space:o}),i&&{alpha:!0}):void 0}validateParameters(e,t){const r=[],n=this.getRenderableParameters(t);for(const t of n){if(t.type===p.QL.GEOMETRY)continue;const n=e[t.name];if(!t.optional&&(0,s.Im)(n))r.push(`${t.name}:required`);else if(!(0,s.Im)(n)){const e=(0,a.ut)(t.type,t.name,n);if(e){r.push(e);continue}const o=t.choiceSettings,i=null==o?void 0:o.choices,l=(0,s.uA)(i),u=(0,a.sW)(t.name,n,l,p.d8.has(t.type));u&&r.push(u)}}return{isValid:0===r.length,errors:r}}parseConditionClause(e){const t=this.parseVisibilityState(e.then);if(!t)return null;const r=Object.keys(e).filter((e=>e.startsWith("$")));if(0===r.length)return{then:t};const n={then:t};for(const t of r)n[t]=e[t];return n}buildVisibilityExpression(e,t){const r=(0,s.Qd)(t)?this.parseVisibilityState(t.value):void 0;return Object.assign({if:e},r&&{default:{value:r,override:(0,s.Cq)(t,["override"],!1)}})}deriveVisibilityConfig(e){const t=this.getParameterMetadata(e).visibility;if(!(0,s.Qd)(t))return;const r=t,n=(0,s.vq)(r.if);if(!(null==n?void 0:n.length))return;const o=[];for(const e of n){if(!(0,s.Qd)(e))continue;const t=e,r=this.parseConditionClause(t);r&&o.push(r)}return o.length?this.buildVisibilityExpression(o,r.default):void 0}parseVisibilityState(e){if("string"!=typeof e)return;switch(e.trim().toLowerCase()){case"visibleenabled":case"visible_enabled":return"visibleEnabled";case"visibledisabled":case"visible_disabled":return"visibleDisabled";case"hiddenenabled":case"hidden_enabled":return"hiddenEnabled";case"hiddendisabled":case"hidden_disabled":return"hiddenDisabled";default:return}}convertParametersToFields(e){return(null==e?void 0:e.length)?this.getRenderableParameters(e).map((e=>{var t,r,n,o;const i=this.getFieldType(e),a=this.getDecimalPrecision(e),l=e.type===p.QL.RANGE_SLIDER&&this.shouldUseRangeSliderUi(e),u=e.type!==p.QL.RANGE_SLIDER||l?i:p.Vw.NUMERIC_INPUT,c=this.mapListOptions(e),d=this.deriveScriptedConfig(e,c),f=this.deriveTableConfig(e),h=this.deriveDateTimeConfig(e),m=this.deriveSelectConfig(u,e,c),v=this.deriveFileConfig(u,e),g=this.deriveColorConfig(e),y=this.deriveToggleConfig(u,e,c),b=this.deriveVisibilityConfig(e),E=this.extractChoiceSetConfig(e),w=this.isReadOnlyField(u,d),O=null!==(o=null!==(n=null!==(r=null!==(t=null==d?void 0:d.instructions)&&void 0!==t?t:null==f?void 0:f.helperText)&&void 0!==r?r:null==h?void 0:h.helperText)&&void 0!==n?n:null==v?void 0:v.helperText)&&void 0!==o?o:null==m?void 0:m.instructions,{min:S,max:R,step:T,minExclusive:k,maxExclusive:A}=this.getSliderMeta(e,a,l),I=(()=>{if(u===p.Vw.PASSWORD)return"";if(e.type===p.QL.GEOMETRY)return"";if(u===p.Vw.MULTI_SELECT)return(0,s.$r)(e.defaultValue);if((u===p.Vw.SWITCH||u===p.Vw.CHECKBOX)&&y){const t=(0,s.FJ)(e.defaultValue);if(void 0!==t&&void 0!==y.checkedValue&&(0,s.$X)(t,y.checkedValue))return y.checkedValue;if(void 0!==t&&void 0!==y.uncheckedValue&&(0,s.$X)(t,y.uncheckedValue))return y.uncheckedValue;const r=(0,s.Dr)(e.defaultValue);if(void 0!==r){if(r&&void 0!==y.checkedValue)return y.checkedValue;if(!r&&void 0!==y.uncheckedValue)return y.uncheckedValue}if(void 0!==t)return t;if(void 0!==y.uncheckedValue)return y.uncheckedValue;if(void 0!==y.checkedValue)return y.checkedValue}return e.defaultValue})();return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.name,label:e.prompt||e.description||e.name,type:u,required:!e.optional,readOnly:w,description:e.prompt||e.description,defaultValue:I,placeholder:e.prompt||e.description||""},(null==c?void 0:c.length)&&{options:[...c]}),e.type===p.QL.TEXT_EDIT&&{rows:3}),(void 0!==S||void 0!==R||void 0!==T)&&{min:S,max:R,step:T}),(u===p.Vw.SLIDER||u===p.Vw.NUMERIC_INPUT)&&void 0!==a&&{decimalPrecision:a}),(u===p.Vw.SLIDER||u===p.Vw.NUMERIC_INPUT)&&void 0!==k&&{minExclusive:k}),(u===p.Vw.SLIDER||u===p.Vw.NUMERIC_INPUT)&&void 0!==A&&{maxExclusive:A}),O&&{helper:O}),d&&{scripted:d}),f&&{tableConfig:f}),h&&{dateTimeConfig:h}),m&&{selectConfig:m}),v&&{fileConfig:v}),g&&{colorConfig:g}),y&&{toggleConfig:y}),E&&{choiceSetConfig:E}),b&&{visibility:b})})):[]}getFieldType(e){if(p.d8.has(e.type))return p.Vw.MULTI_SELECT;const t=e.choiceSettings;if(t&&Array.isArray(t.choices)&&t.choices.length>0){return Array.isArray(e.defaultValue)?p.Vw.MULTI_SELECT:p.Vw.SELECT}const r=p.xA[e.type];if(r)return r;if(e.type===p.QL.text||e.type===p.QL.TEXT){const t=e.editor;if("plaintext"===t)return p.Vw.TEXTAREA;if("url"===t)return p.Vw.URL;if("stringEncoded"===e.valueType)return p.Vw.TEXTAREA}return p.Vw.TEXT}isReadOnlyField(e,t){if(e===p.Vw.MESSAGE||e===p.Vw.GEOMETRY)return!0;if(e===p.Vw.SCRIPTED){return!Boolean((null==t?void 0:t.allowManualEntry)||(null==t?void 0:t.nodes)&&t.nodes.length>0)}return!1}validateFormValues(e,t){if(!e||!(null==t?void 0:t.length))return{isValid:!0,errors:{}};const r={};for(const n of t){const t=n.visibilityState;if(t&&"visibleEnabled"!==t)continue;const o=e[n.name],i=!(0,s.Im)(o);if(n.type!==p.Vw.GEOMETRY)if(n.type!==p.Vw.TEXT_OR_FILE){if(n.required&&!i)r[n.name]="";else if(i&&(n.type===p.Vw.NUMBER||n.type===p.Vw.NUMERIC_INPUT)&&!(0,a.T6)(o)){r[n.name]="";continue}if(i&&(n.type===p.Vw.NUMBER||n.type===p.Vw.NUMERIC_INPUT||n.type===p.Vw.SLIDER)){const e=Number(o);if(!Number.isFinite(e)){r[n.name]="";continue}if("number"==typeof n.min){if(n.minExclusive?e<=n.min:e<n.min){r[n.name]="";continue}}if("number"==typeof n.max){if(n.maxExclusive?e>=n.max:e>n.max){r[n.name]="";continue}}}if(i&&n.type===p.Vw.NUMERIC_INPUT&&"number"==typeof n.decimalPrecision&&n.decimalPrecision>=0&&Number.isFinite(Number(o))){const e=Number(o),t=Math.pow(10,n.decimalPrecision);if(Number.isFinite(t)){const o=e*t,i=Math.round(o);Math.abs(o-i)>Number.EPSILON&&(r[n.name]="")}else r[n.name]=""}}else{const e=o,t=(0,s.YH)(null==e?void 0:e.text),i=(0,s.E$)(null==e?void 0:e.file);!n.required||t||i||(r[n.name]="")}}return{isValid:0===Object.keys(r).length,errors:r}}}var m=r(1138),v=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function g(e){return v(this,void 0,void 0,(function*(){const{serverUrl:t,token:r,repository:n,signal:o}=e,h=`${t}|${r}|${n||"_"}`,g={serverUrl:"pending",token:"pending",repository:n?"pending":"skip",version:""};return yield i.validateConnection.execute(h,(()=>v(this,void 0,void 0,(function*(){try{const e=(0,s.Mb)(t,r,n);if(!e)return{success:!1,steps:g,error:{message:void 0,type:"server",status:0}};let h;try{h=yield e.testConnection(o),g.serverUrl="ok",g.token="ok",g.version=f(h)}catch(e){if((0,s.zf)(e))return{success:!1,steps:g,error:{message:e.message||"aborted",type:"generic",status:0}};const n=(0,a.Ko)(e);if(n===p.jL.UNAUTHORIZED)return g.serverUrl="ok",g.token="fail",{success:!1,steps:g,error:{message:"errorTokenIssue",type:"token",status:n}};if(n!==p.jL.FORBIDDEN)return g.serverUrl="fail",g.token="skip",{success:!1,steps:g,error:{message:(0,m.fV)(e,n),type:0===n?"network":"server",status:n}};{const p=(0,s.PE)(e);if(d(p))return g.serverUrl="fail",g.token="skip",{success:!1,steps:g,error:{message:"errorServerUnreachable",type:"server",status:n}};try{const e=yield function(e,t,r){return u(this,void 0,void 0,(function*(){const n=`${e}|${t}`;return(0,a.dC)(e).ok?yield i.healthCheck.execute(n,(()=>u(this,void 0,void 0,(function*(){const n=Date.now();try{const o=(0,s.Mb)(e,t),i=yield o.testConnection(r),a=Date.now()-n,u=Number.isFinite(a)&&a>=0&&a<l.ST.MAX_RESPONSE_TIME?a:a<0?0:l.ST.MAX_RESPONSE_TIME;return{reachable:!0,version:f(i),responseTime:u}}catch(t){const r=Date.now()-n,o=Number.isFinite(r)&&r>=0&&r<l.ST.MAX_RESPONSE_TIME?r:r<0?0:l.ST.MAX_RESPONSE_TIME,i=(0,a.Ko)(t),u=(0,s.PE)(t);return i===l.jL.UNAUTHORIZED||i===l.jL.FORBIDDEN?c(u)&&!(0,a.dC)(e,{strict:!0}).ok?{reachable:!1,responseTime:o,error:"invalidUrl",status:i}:{reachable:!0,responseTime:o,error:u,status:i}:{reachable:!1,responseTime:o,error:u,status:i}}})))):{reachable:!1,responseTime:0,error:"invalidUrl",status:0}}))}(t,r,o);return(null==o?void 0:o.aborted)?{success:!1,steps:g,error:{message:"aborted",type:"generic",status:0}}:e&&e&&e.reachable?(g.serverUrl="ok",g.token="fail",{success:!1,steps:g,error:{message:"errorTokenIssue",type:"token",status:n}}):(g.serverUrl="fail",g.token="skip",{success:!1,steps:g,error:{message:"errorServerUnreachable",type:"server",status:n}})}catch(e){return g.serverUrl="fail",g.token="skip",{success:!1,steps:g,error:{message:"errorServerUnreachable",type:"server",status:n}}}}}const v=[];if(n)try{yield e.validateRepository(n,o),g.repository="ok"}catch(e){const t=(0,a.Ko)(e);if(t!==p.jL.UNAUTHORIZED&&t!==p.jL.FORBIDDEN)return g.repository="fail",{success:!1,steps:g,error:{message:(0,m.fV)(e,t),type:"repository",status:t}};g.repository="skip",v.push("repositoryNotAccessible")}return{success:!0,version:"string"==typeof g.version?g.version:"",steps:g,warnings:v.length?v:void 0}}catch(e){if((0,s.zf)(e))return{success:!1,steps:g,error:{message:e.message||"aborted",type:"generic",status:0}};const t=(0,a.Ko)(e);return{success:!1,steps:g,error:{message:(0,m.fV)(e,t),type:"generic",status:t}}}}))))}))}function y(e){return v(this,void 0,void 0,(function*(){const{config:t,useMapWidgetIds:r,translate:n,signal:o,onProgress:i}=e;i(n("validatingStartup")),i(n("statusValidatingMap"));const l=Array.isArray(r)&&r.length>0;i(n("statusValidatingConnection"));const u=yield function(e){return v(this,void 0,void 0,(function*(){var t,r,n,o;const{config:i,translate:l,signal:u,mapConfigured:c}=e;if(!i)return{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,m.$5)("errorSetupRequired",{type:p.By.CONFIG,code:"configMissing",suggestion:l("actionOpenSettings"),userFriendlyMessage:l("hintSetupWidget")})};if(!(0,a.Rv)(i,l,{mapConfigured:null==c||c}).isValid)return{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,m.$5)("errorSetupRequired",{type:p.By.CONFIG,code:"CONFIG_INCOMPLETE"})};try{const e=yield g({serverUrl:i.fmeServerUrl,token:i.fmeServerToken,repository:i.repository,signal:u});if(!e.success){const i=(null===(t=e.error)||void 0===t?void 0:t.message)||"errorValidationFailed",s=(null===(r=e.error)||void 0===r?void 0:r.type)||"server";return{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,m.$5)(i,{type:p.By.NETWORK,code:(null===(o=null===(n=e.error)||void 0===n?void 0:n.type)||void 0===o?void 0:o.toUpperCase())||"CONNECTION_ERROR",suggestion:l("token"===s?"tokenSettingsHint":"server"===s?"serverUrlSettingsHint":"repository"===s?"repositorySettingsHint":"connectionSettingsHint")})}}return{isValid:!0,canProceed:!0,requiresSettings:!1}}catch(e){return(0,s.zf)(e)?{isValid:!1,canProceed:!1,requiresSettings:!1}:{isValid:!1,canProceed:!1,requiresSettings:!0,error:(0,m.$5)("errorStartupFailed",{type:p.By.NETWORK,code:"STARTUP_NETWORK_ERROR",suggestion:l("networkConnectionHint")})}}}))}({config:t,translate:n,signal:o,mapConfigured:l});if(!u.isValid){if(u.error)throw new Error(JSON.stringify(u.error));if(u.requiresSettings){const e=(0,m.$5)("configurationInvalid",{type:p.By.CONFIG,code:"VALIDATION_FAILED"});throw new Error(JSON.stringify(e))}return{success:!1}}if(!(null==t?void 0:t.syncMode)){i(n("statusValidatingEmail"));try{const e=yield(0,s.hS)(t);if(!(0,s.B9)(e)){const e=(0,m.$5)("userEmailMissingError",{type:p.By.CONFIG,code:"UserEmailMissing"});throw new Error(JSON.stringify(e))}}catch(e){if((0,s.zf)(e))return{success:!1};const t=(0,m.$5)("userEmailMissingError",{type:p.By.CONFIG,code:"UserEmailMissing"});throw new Error(JSON.stringify(t))}}return{success:!0}}))}var b=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};var E=r(3040),w=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function O(e){return w(this,arguments,void 0,(function*({rawFormData:e,userEmail:t,geometryJson:r,geometry:n,modules:o,config:i,workspaceParameters:a,workspaceItem:l,selectedWorkspaceName:u,areaWarning:c,drawnArea:d,makeCancelable:f,fmeClient:p,signal:h,remoteDatasetSubfolder:m,onStatusChange:v}){null==v||v("normalizing");const{sanitizedFormData:g,uploadFile:y,remoteUrl:E}=(0,s.sq)(e),w=(0,s.Eo)(i||void 0),O=(0,s.cL)({data:g},t,r,n||void 0,o,{config:w,workspaceParameters:a,workspaceItem:l,areaWarning:c,drawnArea:d}),S=O.__aoi_error__;if(S)return null==v||v("complete"),{params:null,aoiError:S};const R=Object.assign({},O);Boolean(y||(0,s.YH)(E))&&(null==v||v("resolvingDataset")),yield function(e){return b(this,arguments,void 0,(function*({params:e,remoteUrl:t,uploadFile:r,config:n,workspaceParameters:o,makeCancelable:i,fmeClient:a,signal:l,subfolder:u,workspaceName:c}){var d;if((0,s.dd)(e,n),(0,s.rB)(t,n))return void(e.opt_geturl=t);if(!(0,s.pZ)(n,r))return;const f=(0,s.Nn)(c);if(!f)throw new Error("REMOTE_DATASET_WORKSPACE_REQUIRED");void 0!==e.opt_geturl&&delete e.opt_geturl;const p=null===(d=(yield i(a.uploadToTemp(r,{subfolder:u,signal:l,repository:null==n?void 0:n.repository,workspace:f}))).data)||void 0===d?void 0:d.path;(0,s.sI)({finalParams:e,uploadedPath:p,parameters:o,explicitTarget:(0,s.yo)(n)})}))}({params:R,remoteUrl:E,uploadFile:y,config:w,workspaceParameters:a,makeCancelable:f,fmeClient:p,signal:h,subfolder:m,workspaceName:(0,s.Nn)(null==l?void 0:l.name)||(0,s.Nn)(u)||null}),null==v||v("applyingDefaults");const T=(0,s._R)(R,w);return(0,s.Ad)(T),null==v||v("complete"),{params:T}}))}function S(e){return w(this,void 0,void 0,(function*(){const{formData:t,config:r,geometryJson:n,modules:o,workspaceParameters:i,workspaceItem:l,selectedWorkspace:u,areaWarning:c,drawnArea:d,fmeClient:f,submissionAbort:p,widgetId:h,translate:m,makeCancelable:v,onStatusChange:g,getActiveGeometry:y}=e;let b=null,w=null;try{const e=(null==t?void 0:t.data)||{},a=(0,s.Mm)({data:e},r,{workspaceItem:l,areaWarning:c,drawnArea:d,onModeOverride:()=>{}});w="sync"===a||"async"===a?a:null;const S="async"===w?yield(0,s.hS)(r):"",R=u;if(!R)return{success:!1,error:new Error("No workspace selected"),serviceMode:w};b=p.abortAndCreate();const T=`widget_${h||"fme"}`,k=yield O({rawFormData:e,userEmail:S,geometryJson:n,geometry:y()||void 0,modules:o,config:r,workspaceParameters:i,workspaceItem:l,selectedWorkspaceName:R,areaWarning:c,drawnArea:d,makeCancelable:v,fmeClient:f,signal:b.signal,remoteDatasetSubfolder:T,onStatusChange:g});if(k.aoiError)return{success:!1,error:k.aoiError,serviceMode:w};const A=k.params;if(!A)throw new Error("Submission parameter preparation failed");null==g||g("submitting");const I=yield v(f.runWorkspace(R,A,void 0,b.signal));if(b.signal.aborted)return{success:!1,serviceMode:w};const C=function(e,t,r,n,o){const i=(0,E.Hz)(e,t,r,n);return Object.assign(Object.assign({},i),o?{serviceMode:o}:{})}(I,R,S,m,w);return{success:!0,result:C,serviceMode:w}}catch(e){const t=function(e,t,r,n){if((0,s.zf)(e))return null;const o=(0,s.fV)(e);let i="";if(o)try{i=(0,s.I0)(o,t)}catch(e){i=""}const a=(0,s.Ej)(t,r),l=[t("errorOrderFailed"),i,a].filter(Boolean).join(". ");return Object.assign({success:!1,message:l,code:e.code||"SUBMISSION_ERROR"},n?{serviceMode:n}:{})}(e,m,(0,a.id)(null==r?void 0:r.supportEmail),w);return t?{success:!1,result:t,error:e,serviceMode:w}:{success:!1,serviceMode:w}}finally{p.finalize(b)}}))}var R=r(2242),T=r(5880),k=r(1618),A=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function I(e,t,r){const n=new t.GraphicsLayer(p.PJ);return e.view.map.add(n),r(n),n}function C(e){return A(this,void 0,void 0,(function*(){var t;const{geometry:r,modules:n,config:o,signal:i}=e;if(!r)return{success:!1,error:{code:"NO_GEOMETRY"}};if(i.aborted)return{success:!1,error:{code:"ABORTED"}};const s=yield(0,k.DU)(r,n);if(i.aborted)return{success:!1,error:{code:"ABORTED"}};if(!s.valid)return{success:!1,error:s.error};const a=null!==(t=s.simplified)&&void 0!==t?t:r,l=yield(0,k.x0)(a,n);if(i.aborted)return{success:!1,error:{code:"ABORTED"}};if(!l||l<=0)return{success:!1,error:{code:"ZERO_AREA",message:"geometryInvalidCode"}};const u=Math.abs(l),c=(0,k.nW)(u,{maxArea:null==o?void 0:o.maxArea,largeArea:null==o?void 0:o.largeArea});if(i.aborted)return{success:!1,error:{code:"ABORTED"}};if(c.exceedsMaximum){const e=(0,k.M4)(u,null==o?void 0:o.maxArea);return{success:!1,error:{code:e.code,message:e.message||"geometryAreaTooLargeCode"}}}return{success:!0,geometry:a,area:u,shouldWarn:c.shouldWarn}}))}function _({jmv:e,modules:t,layer:r,onDrawComplete:n,dispatch:o,widgetId:i,symbols:a,onDrawingSessionChange:l,onSketchToolStart:u}){const c=new t.SketchViewModel({view:e.view,layer:r,polygonSymbol:a.polygon,polylineSymbol:a.polyline,pointSymbol:a.point,defaultCreateOptions:{hasZ:!1,mode:"click"},defaultUpdateOptions:{tool:"reshape",toggleToolOnClick:!1,enableRotation:!0,enableScaling:!0,preserveAspectRatio:!1},snappingOptions:{enabled:!0,selfEnabled:!0,featureEnabled:!0},tooltipOptions:{enabled:!0,inputEnabled:!0,visibleElements:{area:!0,totalLength:!0,distance:!0,coordinates:!1,elevation:!1,rotation:!1,scale:!1,size:!1,radius:!0,direction:!0,header:!0,helpMessage:!0}},valueOptions:{directionMode:"relative",displayUnits:{length:"meters",verticalLength:"meters",area:"square-meters"},inputUnits:{length:"meters",verticalLength:"meters",area:"square-meters"}}}),d=function({sketchViewModel:e,onDrawComplete:t,dispatch:r,widgetId:n,onDrawingSessionChange:o,onSketchToolStart:i}){let a=0;const l=e.on("create",(l=>{var u,c;switch(l.state){case"start":{a=0;const t=(0,s.wk)(l.tool);if(!t)return(0,R.uB)(e),void o({isActive:!1,clickCount:0});o({isActive:!0,clickCount:0}),i("rectangle"===t?p.hL.RECTANGLE:p.hL.POLYGON);break}case"active":{const e=(0,s.wk)(l.tool);if("polygon"===e&&(null===(u=l.graphic)||void 0===u?void 0:u.geometry)){const e=null===(c=l.graphic.geometry.rings)||void 0===c?void 0:c[0],t=e?Math.max(0,e.length-1):0;t>a&&(a=t,o({clickCount:t,isActive:!0}),1===t&&r(T.fmeActions.setViewMode(p.nE.DRAWING,n)))}else"rectangle"===e&&1!==a&&(a=1,o({clickCount:1,isActive:!0}));break}case"complete":a=0,o({isActive:!1,clickCount:0});try{t(l)}catch(e){(0,s.fA)("onDrawComplete error",e)}break;case"cancel":a=0,o({isActive:!1,clickCount:0})}})),u=e.on("update",(e=>{var r;if("complete"===e.state&&Array.isArray(e.graphics)&&e.graphics.length>0&&(null===(r=e.graphics[0])||void 0===r?void 0:r.geometry)){const r=(0,s.wk)(null==e?void 0:e.tool);try{t({graphic:e.graphics[0],state:"complete",tool:null!=r?r:e.tool})}catch(e){(0,s.fA)("onDrawComplete update error",e)}}}));return()=>{try{null==l||l.remove()}catch(e){}try{null==u||u.remove()}catch(e){}try{e.__fmeCleanup__=void 0}catch(e){}}}({sketchViewModel:c,onDrawComplete:n,dispatch:o,widgetId:i,onDrawingSessionChange:l,onSketchToolStart:u});return c.__fmeCleanup__=d,{sketchViewModel:c,cleanup:d}}var M=r(5009)},1888:e=>{"use strict";e.exports=a},1920:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},2238:(e,t,r)=>{"use strict";r.d(t,{ER:()=>ce,IH:()=>m,VM:()=>h});var n=r(5009),o=r(3417),i=r(3890),s=r(3096),a=r(1138),l=r(9063),u=r(3040),c=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const d=Object.assign({},{enabled:!0,logLevel:"debug",bodyPreviewLimit:1024,warnSlowMs:1e3}),f=[];function p(e){for(f.push(e);f.length>50;)f.shift()}function h(){return[...f]}function m(){f.length=0}function v(e){return c(this,void 0,void 0,(function*(){var t,r,n,o,u,c,f;if(!d.enabled)return e.execute();const h=e.method.toUpperCase(),m=e.correlationId||g(),v=Date.now();try{const i=yield e.execute(),a=Date.now()-v,l=Number.isFinite(a)&&a>=0?a:0,d=null===(r=null===(t=e.responseInterpreter)||void 0===t?void 0:t.status)||void 0===r?void 0:r.call(t,i),g=null!==(u=null===(o=null===(n=e.responseInterpreter)||void 0===n?void 0:n.ok)||void 0===o?void 0:o.call(n,i))&&void 0!==u?u:function(e){return"number"!=typeof e?void 0:(0,s.ar)(e)}(d),b=null===(f=null===(c=e.responseInterpreter)||void 0===c?void 0:c.size)||void 0===f?void 0:f.call(c,i),w={timestamp:v,method:h,url:y(e.url,e.query),path:E(e.url),status:d,ok:g,durationMs:l,correlationId:m,caller:e.caller,transport:e.transport,retryAttempt:e.retryAttempt,responseSize:b,isAbort:!1};return R("success",w,e.body),p(w),i}catch(t){const r=Date.now()-v,n=Number.isFinite(r)&&r>=0?r:0,o=(0,i.Ko)(t),s=(0,a.zf)(t),u={timestamp:v,method:h,url:y(e.url,e.query),path:E(e.url),status:o,ok:!1,durationMs:n,correlationId:m,caller:e.caller,transport:e.transport,retryAttempt:e.retryAttempt,isAbort:s};throw R("error",u,e.body,t),p(u),t instanceof Error?t:new Error((0,l.PE)(t))}}))}function g(e="net"){const t=Date.now().toString(36);let r=Math.random().toString(36).slice(2,10);for(;r.length<8;)r+=Math.random().toString(36).slice(2);return`${e}_${t}_${r.slice(0,8)}`}function y(e,t){const r=b(e),n=function(e,t){const r=new URLSearchParams((null==e?void 0:e.search)||"");if(!t)return r;if("string"==typeof t){return new URLSearchParams(t).forEach(((e,t)=>{r.set(t,e)})),r}if(t instanceof URLSearchParams)return t.forEach(((e,t)=>{r.set(t,e)})),r;return Object.entries(t).forEach((([e,t])=>{if(null!=t)if(Array.isArray(t))r.delete(e),t.forEach((t=>{r.append(e,String(t))}));else{const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?String(t):JSON.stringify(t);r.set(e,n)}})),r}(r,t),o=function(e){const t=new URLSearchParams;for(const[r,n]of e.entries())w(r.toLowerCase())?t.set(r,"[TOKEN]"):t.set(r,O(n));return t}(n),i=function(e){const t=[];for(const[r,n]of e.entries())t.push([r,n]);return t.sort((([e],[t])=>e>t?1:e<t?-1:0)),t.map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&")}(o);if(!r){const t=O(e.split("?")[0]||"");return i?`${t}?${i}`:t}const s=`${r.origin}${r.pathname}`;return i?`${s}?${i}`:s}function b(e){if(!e)return null;try{const t=(0,l.yC)(e);return t||new URL(e,"http://localhost")}catch(e){return null}}function E(e){const t=b(e);return(null==t?void 0:t.pathname)||e.split("?")[0]||e}function w(e){return e.includes("token")||e.includes("auth")||e.includes("secret")||e.includes("key")||e.includes("password")}function O(e){let t=e;return t=t.replace(/authorization="?[^"]+"?/gi,'authorization="[TOKEN]"'),t=t.replace(/(token|fmetoken)=([^&\s]+)/gi,"$1=[TOKEN]"),t}function S(e,t){return e.length<=t?e:`${e.slice(0,t-1)}\u2026`}function R(e,t,r,o){if("silent"===d.logLevel)return;const i=r?function(e){var t;if(null==e)return"";if("string"==typeof e)return S(O(e),d.bodyPreviewLimit);if("object"==typeof e){if("undefined"!=typeof FormData&&e instanceof FormData)return"[FormData]";if("undefined"!=typeof Blob&&e instanceof Blob)return`[Blob:${e.size}]`;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return`[Binary:${e instanceof ArrayBuffer?e.byteLength:(null===(t=e.buffer)||void 0===t?void 0:t.byteLength)||0}]`}try{return S(O(JSON.stringify(e)),d.bodyPreviewLimit)}catch(e){return"[Object]"}}(r):void 0,s=o?(0,l.PE)(o):void 0;try{if("debug"===d.logLevel){const r="success"===e?"\u2713":"\u2717",o={phase:e,method:t.method,url:t.url,status:t.status,durationMs:t.durationMs,correlationId:t.correlationId,caller:t.caller,transport:t.transport};void 0!==t.responseSize&&(o.responseSize=t.responseSize),void 0!==t.retryAttempt&&(o.retry=t.retryAttempt),t.isAbort&&(o.aborted=!0),i&&(o.body=i),s&&(o.error=s),(0,n.xZ)(`[FME][net] ${r}`,o)}else if("warn"===d.logLevel){const r=`[FME][net] ${e} ${t.method} ${t.path} ${t.status||"?"} ${t.durationMs}ms`;(0,n.xZ)(r,Object.assign({correlationId:t.correlationId},t.caller&&{caller:t.caller}))}t.durationMs>=d.warnSlowMs&&(0,n.xZ)("[FME][net] slow",{method:t.method,path:t.path,durationMs:t.durationMs,correlationId:t.correlationId})}catch(e){}}const T=320,k=["message","error","detail","description","reason","text"],A=(e,t=0)=>{if(null==e)return null;if("string"==typeof e){const t=e.trim();return t||null}if("number"==typeof e||"boolean"==typeof e)return String(e);if(Array.isArray(e)){if(t>=3)return null;const r=e.map((e=>A(e,t+1))).filter((e=>Boolean(e)));if(!r.length)return null;return S(r.join(", "),T)}if("object"==typeof e){if(t>=3)return null;for(const r of k){const n=A(null==e?void 0:e[r],t+1);if(n)return n}}return null},I=e=>{if(!e)return;const t={};if(Array.isArray(e))return e.forEach(((e,r)=>{if(null!=e)if("object"!=typeof e||Array.isArray(e)){const n=A(e,1);n&&(t[String(r)]=S(n,T))}else{const n=e,o="string"==typeof n.name?n.name:void 0,i="string"==typeof n.field?n.field:void 0,s="string"==typeof n.parameter?n.parameter:void 0,a=(0,l.P6)(o)||(0,l.P6)(i)||(0,l.P6)(s)||String(r),u=A(e,1)||A(n.value,1);u&&(t[a]=S(u,T))}})),Object.keys(t).length?t:void 0;if("object"==typeof e&&!Array.isArray(e)){const r=e;for(const e of Object.keys(r)){const n=A(r[e]);n&&(t[e]=S(n,T))}return Object.keys(t).length?t:void 0}const r=A(e);return r?(t.general=S(r,T),t):void 0},C=e=>{var t,r,n,o,i,s;if(!e||"object"!=typeof e)return;const a=[null==e?void 0:e.details,null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.details,null===(n=null===(r=null==e?void 0:e.response)||void 0===r?void 0:r.data)||void 0===n?void 0:n.details,null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.details,null===(i=null==e?void 0:e.body)||void 0===i?void 0:i.details,null===(s=null==e?void 0:e.error)||void 0===s?void 0:s.details];for(const e of a){const t=I(e);if(t)return t}},_=e=>{if(void 0!==e)return e;if("function"==typeof DOMException)return new DOMException("Aborted","AbortError");const t=new Error("Aborted");return t.name="AbortError",t},M=()=>{};new class{constructor(){this.controllers=new Map,this.listeners=new Map,this.pendingReasons=new Map}register(e,t){if(!e)return;this.controllers.set(e,t);const r=this.pendingReasons.get(e);void 0!==r&&((0,a.Wz)(t,r),this.pendingReasons.delete(e))}release(e,t){if(!e)return;const r=this.controllers.get(e);if(t&&r&&r!==t)return;this.controllers.delete(e),this.pendingReasons.delete(e);const n=this.listeners.get(e);(null==n?void 0:n.size)&&(n.forEach((e=>{try{e.signal.removeEventListener("abort",e.handler)}catch(e){}})),this.listeners.delete(e))}abort(e,t){if(!e)return;const r=this.controllers.get(e);if(!r)return void this.pendingReasons.set(e,null!=t?t:_());const n=null!=t?t:_();(0,a.Wz)(r,n),this.release(e,r)}linkExternal(e,t){if(!e||!t)return M;if(t.aborted)return this.abort(e,t.reason),M;const r={signal:t,handler:()=>{const r=t.reason;this.abort(e,r)}};t.addEventListener("abort",r.handler);let n=this.listeners.get(e);return n||(n=new Set,this.listeners.set(e,n)),n.add(r),()=>{try{t.removeEventListener("abort",r.handler)}catch(e){}const n=this.listeners.get(e);n&&(n.delete(r),0===n.size&&this.listeners.delete(e))}}abortAll(e){const t=Array.from(this.controllers.entries());for(const[r,n]of t)this.abort(r,e),this.release(r,n)}};const L=(e,t)=>new o.VQ(e,e,t,(e=>(0,s.PS)(e))(t)),x={text:"TEXT",string:"STRING",text_edit:"TEXT_EDIT",textedit:"TEXT_EDIT",textarea:"TEXT_EDIT",password:"PASSWORD",url:"URL",integer:"INTEGER",int:"INTEGER",float:"FLOAT",number:"FLOAT",decimal:"FLOAT",boolean:"BOOLEAN",bool:"BOOLEAN",checkbox:"CHECKBOX",choice:"CHOICE",dropdown:"CHOICE",select:"CHOICE",listbox:"LISTBOX",lookup_choice:"LOOKUP_CHOICE",lookup_listbox:"LOOKUP_LISTBOX",tree:"SCRIPTED",range:"RANGE_SLIDER",filename:"FILENAME",file:"FILENAME",filename_mustexist:"FILENAME_MUSTEXIST",dirname:"DIRNAME",directory:"DIRNAME",dirname_mustexist:"DIRNAME_MUSTEXIST",dirname_src:"DIRNAME_SRC",lookup_file:"LOOKUP_FILE",date:"DATE",time:"TIME",datetime:"DATETIME",date_time:"DATE_TIME",month:"MONTH",week:"WEEK",color:"COLOR",colour:"COLOR",color_pick:"COLOR_PICK",colorpick:"COLOR_PICK",coordsys:"COORDSYS",coordinate_system:"COORDSYS",geometry:"GEOMETRY",message:"MESSAGE",range_slider:"RANGE_SLIDER",slider:"RANGE_SLIDER",text_or_file:"TEXT_OR_FILE",attribute_name:"ATTRIBUTE_NAME",attribute_list:"ATTRIBUTE_LIST",db_connection:"DB_CONNECTION",web_connection:"WEB_CONNECTION",reprojection_file:"REPROJECTION_FILE",scripted:"SCRIPTED",group:"GROUP"},N=e=>{var t;if(!e||"object"!=typeof e)return e;const r=Object.assign({},e);if(e.type&&(r.type=(e=>{if("string"!=typeof e)return"TEXT";const t=e.trim().toLowerCase(),r=x[t];return r||e.toUpperCase()})(e.type)),"number"===e.type&&!0===e.showSlider&&(r.type="RANGE_SLIDER"),"datetime"===e.type&&"date"===e.format&&(r.type="DATE"),"file"===e.type&&e.itemsToSelect){const t=e.itemsToSelect.toLowerCase();"folders"===t||"directories"===t?r.type=e.validateExistence?"DIRNAME_MUSTEXIST":"DIRNAME":"files"===t&&(r.type=e.validateExistence?"FILENAME_MUSTEXIST":"FILENAME")}if("text"===e.type&&"url"===e.editor&&(r.type="URL"),(null===(t=e.choiceSettings)||void 0===t?void 0:t.choices)&&!e.listOptions){const t=Array.isArray(e.choiceSettings.choices)?e.choiceSettings.choices:[];r.listOptions=t.map((e=>{var t,r,n;const o=null!==(t=e.value)&&void 0!==t?t:e.caption,i=null!==(n=null!==(r=e.display)&&void 0!==r?r:e.caption)&&void 0!==n?n:o;return Object.assign(Object.assign(Object.assign(Object.assign({caption:i,value:o},e.description&&{description:e.description}),e.path&&{path:e.path}),e.disabled&&{disabled:e.disabled}),e.metadata&&{metadata:e.metadata})})),"text"===e.type&&"URL"!==r.type&&(r.type="CHOICE")}return"tree"===e.type&&e.nodeDelimiter&&(r.metadata=Object.assign(Object.assign({},r.metadata||{}),{breadcrumbSeparator:e.nodeDelimiter,pathSeparator:e.nodeDelimiter})),e.prompt&&!e.description&&(r.description=e.prompt),"required"in e?r.optional=!e.required:"optional"in e||(r.optional=!1),"number"!==e.type&&"RANGE_SLIDER"!==r.type||("number"==typeof e.minimum&&(r.minimum=e.minimum),"number"==typeof e.maximum&&(r.maximum=e.maximum),"boolean"==typeof e.minimumExclusive&&(r.minimumExclusive=e.minimumExclusive),"boolean"==typeof e.maximumExclusive&&(r.maximumExclusive=e.maximumExclusive),"number"==typeof e.multipleOf&&(r.decimalPrecision=1===e.multipleOf?0:void 0)),"color"===e.type&&e.colorSpace&&(r.metadata=Object.assign(Object.assign({},r.metadata||{}),{colorSpace:e.colorSpace})),e.visibility&&(r.visibility=e.visibility),"group"===e.type&&Array.isArray(e.parameters)&&(r.parameters=e.parameters.map(N)),r},j=e=>{const t=(null==e?void 0:e.value)||e;if(!Array.isArray(t))return e;const r=t.map(N),n=[];for(const e of r)n.push(e),"GROUP"===e.type&&Array.isArray(e.parameters)&&n.push(...e.parameters);return n},P=e=>{const t=null==e?void 0:e.httpStatus,r=null==e?void 0:e.status;return"number"==typeof t?t:"number"==typeof r?r:void 0},D=e=>{const t=P(e);if("number"==typeof t)return(0,s.ar)(t)},F=e=>{try{const t=null==e?void 0:e.data;if(!t)return;if("string"==typeof t)return t.length;return JSON.stringify(t).length}catch(e){return}},U=e=>{var t;return null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e};let V,W,B,q,G,$=null;const z=Object.create(null),Q={esriRequest:()=>Promise.resolve({data:null}),esriConfig:{request:{maxUrlLength:4e3,interceptors:[]}},projection:{},webMercatorUtils:{},SpatialReference:function(){return{}}},H=e=>Q[e];function K(){return c(this,void 0,void 0,(function*(){if(Boolean(V&&W&&B&&q&&G))return;if($)return $;const e=(()=>c(this,void 0,void 0,(function*(){if((()=>{const e=globalThis;return Boolean(e&&o._$.some((t=>Boolean(null==e?void 0:e[t]))))})()){(e=>{var t;const r={esriRequest:e=>V=e,esriConfig:e=>W=e,projection:e=>B=e,webMercatorUtils:e=>q=e,SpatialReference:e=>G=e};for(const n of o._$){const o=null!==(t=null==e?void 0:e[n])&&void 0!==t?t:H(n);r[n](o)}})(globalThis)}else try{yield c(void 0,void 0,void 0,(function*(){const[e,t,r,n,o]=yield(0,l.IP)(["esri/request","esri/config","esri/geometry/projection","esri/geometry/support/webMercatorUtils","esri/geometry/SpatialReference"]);V=U(e),W=U(t),B=U(r),q=U(n),G=U(o);const i=ee(B);(null==i?void 0:i.load)&&(yield i.load())}))}catch(e){throw new Error("ARCGIS_MODULE_ERROR")}})))();$=e;try{yield e}catch(e){throw V=void 0,W=void 0,B=void 0,q=void 0,G=void 0,$=null,se=null,e instanceof Error?e:new Error(String(e))}}))}function X(){return c(this,void 0,void 0,(function*(){return yield K(),Z(W)}))}const Y=e=>Boolean(e&&"object"==typeof e),J=e=>"function"==typeof e?e:null,Z=e=>Y(e)&&e.request?e:null,ee=e=>Y(e)?e:null,te=(e,t,r)=>{const n=new Error(e);return n.code=e,null!=t&&(n.status=t),void 0!==r&&(n.cause=r),n},re=e=>c(void 0,void 0,void 0,(function*(){var t;let r;try{r=yield X()}catch(e){return}!function(e,t){if(null==e?void 0:e.length)for(let r=e.length-1;r>=0;r--){const n=e[r];if(!(null==n?void 0:n._fmeInterceptor))continue;const o=n.urls;(o instanceof RegExp?o.source===t.source&&o.flags===t.flags:t.test("string"==typeof o?o:String(null!=o?o:"")))&&e.splice(r,1)}}(null===(t=null==r?void 0:r.request)||void 0===t?void 0:t.interceptors,e)})),ne=/\/(?:fmedatadownload|fmedataupload|fmeapiv4)\b/i,oe=(e,t)=>({urls:t,before(t){if(!(e=>{if("string"==typeof e)return ne.test(e);if(e instanceof URL)return ne.test(e.pathname);if(e&&"object"==typeof e){const t="string"==typeof e.href?e.href:"string"==typeof e.url?e.url:null;return!!t&&ne.test(t)}return!1})(null==t?void 0:t.url))return;(null==t?void 0:t.requestOptions)||(t.requestOptions={});const r=t.requestOptions;r.headers=r.headers||{},r.query=r.query||{};const n=(e=>z[e])(e);n&&(r.query.fmetoken||(r.query.fmetoken=n),r.headers.Authorization=`fmetoken token=${n}`)},_fmeInterceptor:!0});function ie(e,t){return c(this,void 0,void 0,(function*(){var r;if(!e)return;const n=(0,l.$j)(e);if(!n)return;const o=n.toLowerCase(),i=(0,l.dB)(n);if(!t){const e=(e=>Object.prototype.hasOwnProperty.call(z,e))(o);return(e=>{delete z[e]})(o),void(e&&(yield re(i)))}let s;((e,t)=>{z[e]=t})(o,t);try{s=yield X()}catch(e){throw e instanceof Error?e:new Error(String(e))}(null===(r=null==s?void 0:s.request)||void 0===r?void 0:r.interceptors)&&((0,l.m4)(s.request.interceptors,i)||s.request.interceptors.push(oe(o,i)))}))}let se=null;const ae=(e,t)=>{const r=(e=>{const t=(0,l.Lz)(null==e?void 0:e.tm_ttc),r=(0,l.Lz)(null==e?void 0:e.tm_ttl),n=(0,l.Nn)(null==e?void 0:e.tm_tag),o={};return void 0!==t&&(o.ttc=t),void 0!==r&&(o.ttl=r),n&&(o.tag=n),o})(t),n={publishedParameters:e};return Object.keys(r).length>0&&(n.TMDirectives=r),n};class le{constructor(e){this.basePath=o.vA.BASE_PATH,this.disposed=!1,this.config=Object.freeze(Object.assign({},e)),this.setupPromise=Promise.resolve(),this.queueSetup(e)}queueSetup(e){this.setupPromise=(this.setupPromise||Promise.resolve()).catch((()=>{})).then((()=>c(this,void 0,void 0,(function*(){yield function(){return c(this,void 0,void 0,(function*(){const e=yield X();e&&(e.request.maxUrlLength=Math.max(Number(e.request.maxUrlLength)||0,o.vA.MAX_URL_LENGTH))}))}(),yield ie(e.serverUrl,e.token)})))).catch((e=>{throw e instanceof Error?e:new Error(String(e))}))}queueTeardown(e){this.setupPromise=(this.setupPromise||Promise.resolve()).catch((()=>{})).then((()=>ie(e,""))).catch((()=>{}))}dispose(){this.disposed||(this.disposed=!0,this.queueTeardown(this.config.serverUrl))}uploadToTemp(e,t){return c(this,void 0,void 0,(function*(){var r,n,i;if(null===(r=null==t?void 0:t.signal)||void 0===r?void 0:r.aborted)throw new DOMException("Aborted","AbortError");const s=this.resolveRepository(null==t?void 0:t.repository),a=(0,l.P6)(null==t?void 0:t.workspace);if(!a)throw L("DATA_UPLOAD_ERROR");const u=((0,l.P6)(null==e?void 0:e.name)||`upload_${Date.now()}`).replace(/[^A-Za-z0-9._-]/g,"_").slice(0,128)||`upload_${Date.now()}`,c=(0,l.P6)(null==t?void 0:t.subfolder).replace(/[^A-Za-z0-9_-]/g,"-").slice(0,64)||g("upload"),d=(0,l.c$)(this.config.serverUrl,"fmedataupload",s,a,u),f={opt_fullpath:"true",opt_responseformat:"json",opt_namespace:c},p={Accept:"application/json","Content-Type":e instanceof File&&e.type?e.type:"application/octet-stream"},h=yield this.request(d,{method:o.ym.PUT,headers:p,body:e,query:f,signal:null==t?void 0:t.signal,cacheHint:!1,repositoryContext:s}),m=null===(n=h.data)||void 0===n?void 0:n.file,v=null!==(i=(0,l.Nn)(null==m?void 0:m.path))&&void 0!==i?i:null;if(!v)throw L("DATA_UPLOAD_ERROR",h.status);return{data:{path:v},status:h.status,statusText:h.statusText}}))}resolveRepository(e){return e||this.config.repository}formatJobParams(e={}){if(e.publishedParameters)return e;const t=Object.entries(e).filter((([e])=>!o.d.has(e))).map((([e,t])=>({name:e,value:t})));return ae(t,e)}repoEndpoint(e,...t){return(0,l.c$)(this.config.serverUrl,this.basePath.slice(1),"repositories",e,...t)}jobsEndpoint(){return(0,l.c$)(this.config.serverUrl,this.basePath.slice(1),"jobs")}workspaceEndpoint(e,t,...r){return(0,l.c$)(this.config.serverUrl,this.basePath.slice(1),"workspaces",e,t,...r)}withApiError(e,t,r){return c(this,void 0,void 0,(function*(){var n;try{return yield e()}catch(e){const s=(0,i.Ko)(e),a=(0,i.$d)(e),l=e instanceof o.VQ?e:null,u=null!==(n=null==l?void 0:l.details)&&void 0!==n?n:C(e),c=null==l?void 0:l.severity,d="number"==typeof s?s:"number"==typeof(null==l?void 0:l.httpStatus)?l.httpStatus:0;throw new o.VQ(t,r,d,a,c,u)}}))}testConnection(e){return c(this,void 0,void 0,(function*(){return this.request("/healthcheck/liveness",{signal:e})}))}validateRepository(e,t){return c(this,void 0,void 0,(function*(){const r=this.resolveRepository(e),n=this.repoEndpoint(r);return this.request(n,{signal:t})}))}getRepositories(e){return c(this,void 0,void 0,(function*(){return this.withApiError((()=>c(this,void 0,void 0,(function*(){const t=(0,l.c$)(this.config.serverUrl,this.basePath.slice(1),"repositories"),r=yield this.request(t,{signal:e,cacheHint:!1,query:{limit:1e3,offset:0}}),n=null==r?void 0:r.data;return{data:(0,l.o4)(n).map((e=>({name:e}))),status:r.status,statusText:r.statusText}}))),"REPOSITORIES_ERROR","REPOSITORIES_ERROR")}))}getWorkspaceParameter(e,t,r,n){return c(this,void 0,void 0,(function*(){const o=this.resolveRepository(r),i=this.workspaceEndpoint(o,e,"parameters",t),s=yield this.request(i,{signal:n,cacheHint:!1,repositoryContext:o});return Object.assign(Object.assign({},s),{data:N(s.data)})}))}getWorkspaceParameters(e,t,r){return c(this,void 0,void 0,(function*(){const n=this.resolveRepository(t),o=this.workspaceEndpoint(n,e,"parameters");return this.withApiError((()=>c(this,void 0,void 0,(function*(){const e=yield this.request(o,{signal:r,cacheHint:!1,repositoryContext:n});return Object.assign(Object.assign({},e),{data:j(e.data)})}))),"WORKSPACE_PARAMETERS_ERROR","WORKSPACE_PARAMETERS_ERROR")}))}getRepositoryItems(e,t,r,n,o){return c(this,void 0,void 0,(function*(){const i=this.resolveRepository(e),s=this.repoEndpoint(i,"items"),a={};return t&&(a.type=t),"number"==typeof r&&(a.limit=r),"number"==typeof n&&(a.offset=n),this.withApiError((()=>this.request(s,{signal:o,cacheHint:!1,repositoryContext:i,query:a})),"REPOSITORY_ITEMS_ERROR","REPOSITORY_ITEMS_ERROR")}))}getWorkspaceItem(e,t,r){return c(this,void 0,void 0,(function*(){const n=this.resolveRepository(t),o=this.workspaceEndpoint(n,e);return this.withApiError((()=>this.request(o,{signal:r,cacheHint:!1,repositoryContext:n})),"WORKSPACE_ITEM_ERROR","WORKSPACE_ITEM_ERROR")}))}submitJob(e){return c(this,arguments,void 0,(function*(e,t={},r,n){const i=this.resolveRepository(r),s=this.jobsEndpoint(),a=this.formatJobParams(t),l=Object.assign({repository:i,workspace:e},a);return this.withApiError((()=>this.request(s,{method:o.ym.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify(l),signal:n,cacheHint:!1})),"JOB_SUBMISSION_ERROR","JOB_SUBMISSION_ERROR")}))}runDataDownload(e){return c(this,arguments,void 0,(function*(e,t={},r,n){const o=this.resolveRepository(r);return yield this.runDownloadWebhook(e,t,o,n)}))}runWorkspace(e){return c(this,arguments,void 0,(function*(e,t={},r,n){return yield this.runDataDownload(e,t,r,n)}))}runDownloadWebhook(e){return c(this,arguments,void 0,(function*(e,t={},r,n){try{const i={requireHttps:this.config.requireHttps},{baseUrl:s,params:c,fullUrl:d}=(0,u.vl)(this.config.serverUrl,r,e,t,this.config.token,i),f=(()=>{var e;const t=(()=>{var e,t;if("undefined"==typeof window)return;const r=null===(t=null===(e=null===window||void 0===window?void 0:window.esriConfig)||void 0===e?void 0:e.request)||void 0===t?void 0:t.maxUrlLength,n="number"==typeof r?r:Number(r);return Number.isFinite(n)&&n>0?n:void 0})();if(void 0!==t)return t;if(null!==se)return se;const r=Z(W),n=null===(e=null==r?void 0:r.request)||void 0===e?void 0:e.maxUrlLength,o="number"==typeof n?n:Number(n);return se=Number.isFinite(o)&&o>0?o:1900,se})();if(Number.isFinite(f)&&f>0&&d.length>f)throw te("URL_TOO_LONG",0);(0,l.qC)("WEBHOOK_CALL",s,c,o.vA.WEBHOOK_LOG_WHITELIST),yield K();const p=J(V);if(!p)throw L("ARCGIS_MODULE_ERROR");const h={Accept:"application/json","Cache-Control":"no-cache"},m=new AbortController;let y=null,b=!1;const E=()=>{m.abort()};try{n&&(n.aborted?m.abort():n.addEventListener("abort",E));const e="number"==typeof this.config.timeout&&this.config.timeout>0?this.config.timeout:void 0;e&&(y=setTimeout((()=>{b=!0;try{m.abort()}catch(e){}}),e));const t=yield v({method:"GET",url:d,transport:"fme-webhook",query:c,correlationId:g("webhook"),responseInterpreter:{status:P,ok:D,size:F},execute:()=>{const t={method:"get",responseType:"json",headers:h,signal:m.signal};return"number"==typeof e&&e>0&&(t.timeout=e),p(d,t)}});return this.parseWebhookResponse(t)}catch(e){if((0,a.zf)(e)&&b)throw te("WEBHOOK_TIMEOUT",408,e);throw e instanceof Error?e:new Error(String(e))}finally{y&&clearTimeout(y);try{n&&n.removeEventListener("abort",E)}catch(e){}}}catch(e){if(e instanceof o.VQ)throw e;if(null==e?void 0:e.code)throw e instanceof Error?e:new Error(String(e));const t=(0,i.Ko)(e);throw L("DATA_DOWNLOAD_ERROR",t||0)}}))}parseWebhookResponse(e){return c(this,void 0,void 0,(function*(){var t;const r="number"==typeof(null==e?void 0:e.status)?e.status:"number"==typeof(null==e?void 0:e.httpStatus)?e.httpStatus:void 0,n="number"==typeof r?r:0;if(401===n||403===n)throw te("WEBHOOK_AUTH_ERROR",n);const o="function"==typeof(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t.get)?e.headers:void 0,i=(null==o?void 0:o.get("content-type"))||void 0;let s;if("function"==typeof(null==e?void 0:e.json))try{s=yield e.json()}catch(e){throw te("WEBHOOK_NON_JSON",n,e)}else if(void 0!==(null==e?void 0:e.data))s=e.data;else if(void 0!==(null==e?void 0:e.json))s=e.json;else if("string"==typeof(null==e?void 0:e.text))try{s=JSON.parse(e.text)}catch(e){throw te("WEBHOOK_NON_JSON",n,e)}if(!s||"object"!=typeof s)throw te("WEBHOOK_NON_JSON",n,e);if(i&&!(0,l.Fh)(i))throw te("WEBHOOK_NON_JSON",n,{contentType:i});return{data:s,status:n,statusText:null==e?void 0:e.statusText}}))}request(e){return c(this,arguments,void 0,(function*(e,t={}){var r,n,s;if(this.disposed)throw L("CLIENT_DISPOSED");try{yield this.setupPromise}catch(e){this.queueSetup(this.config);try{yield this.setupPromise}catch(e){throw L("ARCGIS_MODULE_ERROR")}}yield K();const u=e=>e.startsWith("/")?e.slice(1):e,c=u(this.basePath||""),d=c?[c]:[],f=u(e),p=e.startsWith("http")?e:e.startsWith("/fme")?(0,l.c$)(this.config.serverUrl,f):f?(0,l.c$)(this.config.serverUrl,...d,f):(0,l.c$)(this.config.serverUrl,...d),h=Object.assign({},t.headers||{}),m=Object.assign({},t.query||{});if(!t.method||t.method===o.ym.GET){const e=(0,l.qm)(this.config.serverUrl,this.config.token,t.repositoryContext);void 0===m.__scope&&(m.__scope=e)}const y={method:(null===(r=t.method)||void 0===r?void 0:r.toLowerCase())||"get",query:m,responseType:"json",headers:h,signal:t.signal};try{const e=null===(n=(0,l.$j)(this.config.serverUrl))||void 0===n?void 0:n.toLowerCase(),r=new URL(p,(null===(s=globalThis.location)||void 0===s?void 0:s.origin)||"http://d").host.toLowerCase();e&&r===e&&this.config.token&&(m.fmetoken||(m.fmetoken=this.config.token),y.headers=y.headers||{},y.headers.Authorization=`fmetoken token=${this.config.token}`);const o="number"==typeof t.timeout?t.timeout:"number"==typeof this.config.timeout?this.config.timeout:void 0;"number"==typeof o&&o>0&&(y.timeout=o),void 0!==t.cacheHint&&(y.cacheHint=t.cacheHint),void 0!==t.body&&(y.body=t.body);const i=J(V);if(!i)throw L("ARCGIS_MODULE_ERROR");const a=g("fme"),u=yield v({method:"string"==typeof y.method?y.method.toUpperCase():"GET",url:p,transport:"fme-flow-api",body:y.body,query:m,correlationId:a,responseInterpreter:{status:P,ok:D,size:F},execute:()=>i(p,y)});return{data:u.data,status:u.httpStatus||u.status||200,statusText:u.statusText}}catch(e){if("AbortError"===(null==e?void 0:e.name))return{data:void 0,status:0,statusText:"requestAborted"};if(e instanceof o.VQ)throw e;const t=(0,i.Ko)(e)||0,r=(0,i.$d)(e);let n="REQUEST_FAILED";(0,l.PE)(e).includes("Unexpected token")&&(n="INVALID_RESPONSE_FORMAT");const s=(0,a.fV)(e,t),u=C(e),c=s||n;throw new o.VQ(c,n,t,r,void 0,u)}}))}}const ue=e=>({serverUrl:e.fmeServerUrl||e.fme_server_url||"",token:e.fmeServerToken||e.fme_server_token||e.fmw_server_token||"",repository:e.repository||"",timeout:e.requestTimeout,requireHttps:e.requireHttps});function ce(e){const t=ue(e);try{(0,i.e6)(t)}catch(e){throw L("INVALID_CONFIG")}return new le(Object.assign(Object.assign({},t),{serverUrl:t.serverUrl.replace(/\/$/,"")}))}},2242:(e,t,r)=>{"use strict";r.d(t,{CH:()=>S,Gb:()=>h,SB:()=>R,UA:()=>g,Vp:()=>m,YG:()=>b,bQ:()=>O,bn:()=>k,d7:()=>p,ho:()=>T,j_:()=>E,kg:()=>w,rG:()=>v,uB:()=>d,yN:()=>f});var n=r(9244),o=r(3930),i=r(7665),s=r(3417),a=r(5880),l=r(9063),u=(r(1787),function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))});const c=(e,t)=>{if(e)try{t(e)}catch(e){}},d=e=>{c(e,(e=>{e.cancel()}))},f=e=>{c(e,(e=>{e.removeAll()}))},p=(e,t,r)=>{const o=Number.isFinite(t)&&t>=0?t:0,i=n.React.useRef(null),s=n.React.useRef(!1),a=n.React.useRef(null),l=n.hooks.useLatest(e),u=n.hooks.useLatest(r),c=n.hooks.useEventCallback((e=>{var t;if(s.current===e)return;s.current=e;const r=null===(t=u.current)||void 0===t?void 0:t.onPendingChange;if("function"==typeof r)try{r(e)}catch(e){}})),d=n.hooks.useEventCallback((()=>{i.current&&(clearTimeout(i.current),i.current=null),a.current=null,s.current&&c(!1)})),f=n.hooks.useEventCallback(((...e)=>{a.current=e,i.current&&clearTimeout(i.current),c(!0),i.current=setTimeout((()=>{i.current=null,a.current=null;try{l.current(...e)}finally{c(!1)}}),o)})),p=n.hooks.useEventCallback((()=>{if(!a.current)return;const e=a.current;d(),l.current(...e)})),h=n.React.useRef(null),m=n.hooks.useLatest(f),v=n.hooks.useLatest(d),g=n.hooks.useLatest(p);if(!h.current){const e=(...e)=>{m.current(...e)};e.cancel=()=>v.current(),e.flush=()=>g.current(),e.isPending=()=>s.current,h.current=e}n.hooks.useEffectOnce((()=>()=>{v.current()}));const y=h.current;if(!y)throw new Error("debounceUnavailable");return y},h=e=>{const[t,r]=n.React.useState({modules:null,loading:!0,errorKey:null});return n.hooks.useEffectWithPreviousValues((()=>{let t=!1;r((t=>({modules:0===e?t.modules:null,loading:!0,errorKey:null})));return u(void 0,void 0,void 0,(function*(){var e,n;try{const o=yield(0,l.IP)(s.RF);if(t)return;const[i,a,u,c,d,f,p,h,m,v,g]=o;try{const e=f;(null==e?void 0:e.load)&&"function"==typeof e.load&&(yield e.load())}catch(e){}const y=null!==(n=null!==(e=null==c?void 0:c.operators)&&void 0!==e?e:null==u?void 0:u.operators)&&void 0!==n?n:null;r({modules:{SketchViewModel:i,GraphicsLayer:a,geometryEngine:u,geometryEngineAsync:c,webMercatorUtils:d,projection:f,SpatialReference:p,normalizeUtils:h,Polyline:m,Polygon:v,Graphic:g,geometryOperators:y},loading:!1,errorKey:null})}catch(e){t||r({modules:null,loading:!1,errorKey:"errorMapInit"})}})),()=>{t=!0}}),[e]),t},m=()=>{const[e,t]=n.React.useState({jimuMapView:null,sketchViewModel:null,graphicsLayer:null,cleanupHandles:null}),r=n.hooks.useEventCallback(((e,r)=>{t((t=>{var n;if("sketchViewModel"===e&&t.sketchViewModel&&t.sketchViewModel!==r)try{const e=null===(n=t.sketchViewModel)||void 0===n?void 0:n.__fmeCleanup__;"function"==typeof e&&e()}catch(e){}if("cleanupHandles"===e&&t.cleanupHandles&&t.cleanupHandles!==r)try{t.cleanupHandles()}catch(e){}return Object.assign(Object.assign({},t),{[e]:r})}))})),o=n.hooks.useEventCallback((r=>{const{sketchViewModel:n,graphicsLayer:o,jimuMapView:i,cleanupHandles:s}=e;if(s)try{s()}catch(u){}var a,l,u;d(n),c(n,(e=>{"function"==typeof e.destroy&&e.destroy()})),l=o,(null===(u=null==(a=i)?void 0:a.view)||void 0===u?void 0:u.map)&&c(l,(e=>{e.parent&&a.view.map.remove(e)})),f(o),(e=>{c(e,(e=>{const t=e.destroy;"function"==typeof t&&t.call(e)}))})(o),t((e=>Object.assign(Object.assign({},e),{jimuMapView:r?null:e.jimuMapView,sketchViewModel:null,graphicsLayer:null,cleanupHandles:null})))})),i=n.hooks.useEventCallback((()=>{o(!1)})),s=n.hooks.useEventCallback((()=>{o(!0)}));return Object.assign(Object.assign({},e),{setJimuMapView:e=>r("jimuMapView",e),setSketchViewModel:e=>r("sketchViewModel",e),setGraphicsLayer:e=>r("graphicsLayer",e),setCleanupHandles:e=>r("cleanupHandles",e),teardownDrawingResources:i,cleanupResources:s})},v=(e,t)=>n.hooks.useEventCallback(((r,n,o)=>{const i={message:r,type:n,code:o||"UNKNOWN",severity:s.MU.ERROR,recoverable:!0,timestampMs:Date.now(),kind:"serializable",userFriendlyMessage:"",suggestion:""};e(a.fmeActions.setError("general",i,t))})),g=(e,t)=>{const[r,o]=n.React.useState((()=>e.initializeValues())),[i,s]=n.React.useState(!0),[a,l]=n.React.useState({}),u=n.hooks.useEventCallback((e=>{o(e),null==t||t(e)})),c=n.hooks.useEventCallback(((e,t)=>{const n=Object.assign(Object.assign({},r),{[e]:t});u(n)})),d=n.hooks.useEventCallback((()=>{const t=e.validateValues(r);return s(t.isValid),l(t.errors),t})),f=n.hooks.useEventCallback((()=>{const t=e.initializeValues();l({}),s(!0),u(t)}));return{values:r,isValid:i,errors:a,updateField:c,validateForm:d,resetForm:f,setValues:u,setIsValid:s,setErrors:l}};let y=0;const b=()=>{const e=n.React.useRef();return e.current||(y>=Number.MAX_SAFE_INTEGER&&(y=0),y+=1,e.current=`fme-${y}`),e.current},E=(e,t,r)=>{const[o,i]=n.hooks.useControlled({controlled:e,default:t});return[o,n.hooks.useEventCallback((e=>{i(e),null==r||r(e)}))]},w=(e,t)=>{const r=Number.isFinite(t)&&t>=0?t:0,o=e=>{if(!e)return null;const t=e.message,r=e.detail,n=e.messages,o=Array.isArray(n)?n.filter((e=>null!=e)):void 0;return null!=t||null!=r||o&&0!==o.length?{message:t,detail:r,messages:o}:null},[i,s]=n.React.useState("loading"===e.kind),a=n.React.useRef("loading"===e.kind?Date.now():null),l=n.React.useRef("loading"===e.kind?o(e):null);n.hooks.useEffectWithPreviousValues((()=>{let t=null;if("loading"===e.kind)l.current=o(e),null==a.current&&(a.current=Date.now()),s(!0);else if(null!=a.current){const e=Date.now()-a.current,n=Number.isFinite(e)&&e>=0?e:0,o=Math.max(0,r-n);o>0?t=setTimeout((()=>{s(!1),a.current=null,l.current=null}),o):(s(!1),a.current=null,l.current=null)}else s(!1),l.current=null;return()=>{t&&clearTimeout(t)}}),[e,r]);const u="loading"===e.kind;return{showLoading:u||i,snapshot:u?o(e):l.current}},O=()=>{const e=n.React.useRef(null),t=n.hooks.useEventCallback((()=>{const t=e.current;(0,l.Wz)(t),e.current=null})),r=n.hooks.useEventCallback((()=>{t();const r=new AbortController;return e.current=r,r})),o=n.hooks.useEventCallback((t=>{t&&e.current===t&&(e.current=null)}));return{controllerRef:e,abortAndCreate:r,cancel:t,finalize:o}};function S(e,t){var r;return(0,o.I)({queryKey:l.lH.workspaces(e.repository||s.nu,e.fmeServerUrl,e.fmeServerToken),queryFn:t=>u(this,[t],void 0,(function*({signal:t}){var r;const n=(0,l.Mb)(e.fmeServerUrl,e.fmeServerToken,e.repository);if(!n)throw new Error("FME client not initialized");const o=e.repository||s.nu,i=yield n.getRepositoryItems(o,s.h6,void 0,void 0,t);return Array.isArray(null===(r=null==i?void 0:i.data)||void 0===r?void 0:r.items)?i.data.items:[]})),enabled:(null===(r=null==t?void 0:t.enabled)||void 0===r||r)&&Boolean(e.fmeServerUrl&&e.fmeServerToken)})}function R(e,t,r){var n;return(0,o.I)({queryKey:l.lH.workspaceItem(e,t.repository||s.nu,t.fmeServerUrl,t.fmeServerToken),queryFn:r=>u(this,[r],void 0,(function*({signal:r}){var n;if(!e)throw new Error("Workspace name required");const o=(0,l.Mb)(t.fmeServerUrl,t.fmeServerToken,t.repository);if(!o)throw new Error("FME client not initialized");const i=t.repository||s.nu,[a,u]=yield Promise.allSettled([o.getWorkspaceItem(e,i,r),o.getWorkspaceParameters(e,i,r)]);if("rejected"===a.status)throw a.reason instanceof Error?a.reason:new Error(String(a.reason));const c="fulfilled"===u.status&&Array.isArray(null===(n=u.value)||void 0===n?void 0:n.data)?u.value.data:[];return{item:a.value.data,parameters:c}})),enabled:(null===(n=null==r?void 0:r.enabled)||void 0===n||n)&&Boolean(e&&t.fmeServerUrl&&t.fmeServerToken),staleTime:s.ST.TEN_MINUTES,refetchOnMount:!1})}function T(e,t,r){var o,a;const c=(0,i.jE)(),[d,f]=n.React.useState((()=>({isPrefetching:!1,progress:null,prefetchStatus:"idle"}))),p=null===(o=null==r?void 0:r.enabled)||void 0===o||o,h=null!==(a=null==r?void 0:r.chunkSize)&&void 0!==a?a:10,m=n.hooks.useLatest(t),v=n.hooks.useLatest(e),g=n.hooks.useLatest(null==r?void 0:r.onProgress);return n.hooks.useEffectWithPreviousValues((()=>{var e;const t=v.current;if(!p||!(null==t?void 0:t.length))return void f({isPrefetching:!1,progress:null,prefetchStatus:"idle"});const r=null!==(e=m.current)&&void 0!==e?e:{},n=r.repository||s.nu,o=r.fmeServerUrl,i=r.fmeServerToken;if(!o||!i)return;const a=(0,l.Mb)(o,i,n);if(!a)return;let d=!1;const y=new Set,b=e=>(y.add(e),()=>{y.delete(e)}),E=e=>{y.forEach((t=>{(0,l.Wz)(t,e)})),y.clear()},w=(e,t)=>(0,l.ps)(e,t);return(()=>{u(this,void 0,void 0,(function*(){var e;f({isPrefetching:!0,progress:{loaded:0,total:t.length},prefetchStatus:"loading"});const r=[];for(let e=0;e<t.length;e+=h)r.push(t.slice(e,e+h));let p=0;try{for(const h of r){if(d)break;const r=5,m={active:0,queue:[]},v=e=>u(this,void 0,void 0,(function*(){for(;m.active>=r;)yield new Promise((e=>m.queue.push(e)));m.active++;try{return yield e()}finally{m.active--;const e=m.queue.shift();e&&e()}}));yield Promise.allSettled(h.map((e=>v((()=>c.prefetchQuery({queryKey:l.lH.workspaceItem(e.name,n,o,i),queryFn:t=>u(this,[t],void 0,(function*({signal:t}){const r=new AbortController,o=b(r),i=w(t,r);try{const t=r.signal,[o,i]=yield Promise.all([a.getWorkspaceItem(e.name,n,t),a.getWorkspaceParameters(e.name,n,t)]);return{item:o.data,parameters:Array.isArray(null==i?void 0:i.data)?i.data:[]}}finally{i(),o()}})),staleTime:s.ST.TEN_MINUTES})))))),p+=h.length,f((e=>Object.assign(Object.assign({},e),{progress:{loaded:p,total:t.length}}))),null===(e=g.current)||void 0===e||e.call(g,p,t.length)}d||f({isPrefetching:!1,progress:null,prefetchStatus:"success"})}catch(e){d||((0,l.fA)("Workspace prefetch error",e),f({isPrefetching:!1,progress:null,prefetchStatus:"error"}))}finally{E()}}))})(),()=>{d=!0,E()}}),[p,c,h,g,null==t?void 0:t.repository,null==t?void 0:t.fmeServerUrl,null==t?void 0:t.fmeServerToken,e]),d}function k(e,t,r=500){const o=n.React.useRef({});return n.hooks.useEventCallback(((n,i)=>{if(i)o.current[n]=Date.now(),e(a.fmeActions.setLoadingFlag(n,!0,t));else{const i=o.current[n];if(i){const s=Date.now()-i,l=Math.max(0,r-s);l>0?setTimeout((()=>{e(a.fmeActions.setLoadingFlag(n,!1,t)),delete o.current[n]}),l):(e(a.fmeActions.setLoadingFlag(n,!1,t)),delete o.current[n])}else e(a.fmeActions.setLoadingFlag(n,!1,t))}}))}},2606:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1 1v14h14V1zm9.082 13c-.005-.037-.113-.274-.122-.309a1.5 1.5 0 0 0 .718-1.267 1.2 1.2 0 0 0-.053-.358c.152-.176.263-.383.326-.607q.046.003.093.003c.3.002.593-.091.836-.266q.06.066.126.124c.42.412.977.654 1.564.68H14v2h-3.918M14 11h-.43a1.46 1.46 0 0 1-.906-.433c-.264-.23-.258-.782-.617-.782-.482 0-.52.677-1.003.677-.219 0-.38-.177-.599-.177-.193 0-.445.102-.445.293v.502c0 .424-.506.508-.506.934 0 .171.184.236.184.41 0 .58-.893.502-.893 1.08 0 .191.215.305.215.486V14H6.375q.087-.243.09-.502c0-.547-1.043-.393-1.207-.72-.407-.813.693-1.022.693-1.673 0-.16-.082-.488-.334-.513-.351-.035-.443.154-.797.154a.406.406 0 0 1-.437-.36c0-.386.308-.566.308-.952 0-.25-.102-.393-.102-.643a.62.62 0 0 1 .59-.643c.323 0 .464.264.618.54a.64.64 0 0 0 .617.308c.49 0 .798-.61.798-.977a.47.47 0 0 1 .437-.488c.347 0 .476.36.824.36.57 0 .55-.756 1.053-1.03.618-.332.438-1.052.36-1.44-.032-.169.29-.5.464-.487.72.05.412-.54.412-.823q0-.073.022-.142c.111-.332.595-.438.595-.836 0-.281-.233-.41-.233-.693a.65.65 0 0 1 .22-.44H14zM2 14V2h8.278c-.013.077-.132.356-.132.44 0 .194.038.387.112.567a1.6 1.6 0 0 0-.422.643 1.4 1.4 0 0 0-.074.442 1.7 1.7 0 0 0-.536.43 1.32 1.32 0 0 0-.32 1.091q.046.205.066.414a2 2 0 0 0-.649.67 1.46 1.46 0 0 0-.674-.166 1.45 1.45 0 0 0-1.383 1.086 1.44 1.44 0 0 0-1.086-.469 1.62 1.62 0 0 0-1.591 1.643c0 .254.113.293.084.574s-.29.535-.29 1.022a1.37 1.37 0 0 0 .984 1.29 1.58 1.58 0 0 0-.003 1.549c.143.286.636.774.534.774z"></path></svg>'},2686:e=>{"use strict";e.exports=o},2775:(e,t,r)=>{"use strict";r.d(t,{Zq:()=>i,zs:()=>o});var n={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},o=new class{#p=n;#h=!1;setTimeoutProvider(e){this.#p=e}setTimeout(e,t){return this.#p.setTimeout(e,t)}clearTimeout(e){this.#p.clearTimeout(e)}setInterval(e,t){return this.#p.setInterval(e,t)}clearInterval(e){this.#p.clearInterval(e)}};function i(e){setTimeout(e,0)}},3040:(e,t,r)=>{"use strict";r.d(t,{Eo:()=>m,Hz:()=>T,Jo:()=>p,Lz:()=>b,Mm:()=>v,_R:()=>y,cL:()=>E,o4:()=>w,vl:()=>C});var n=r(9244),o=r(5132),i=r(1181),s=r(3417),a=r(1618),l=r(6920),u=r(4986),c=r(3890),d=r(930),f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const p=(e,t,r,s,a,l)=>{var u,c;if(!e)return(0,o.Qg)(r("msgNoResult"),{code:"NO_RESULT",actions:s.onBack?[{label:r("btnBack"),onClick:s.onBack}]:void 0});const d=Boolean(e.cancelled),f=!d&&Boolean(e.success),p=!d&&!f,h=(null==t?void 0:t.syncMode)?"sync":"async",m="sync"===e.serviceMode||"async"===e.serviceMode?e.serviceMode:h,v=[];void 0!==e.jobId&&null!==e.jobId&&v.push(`${r("lblJobId")}: ${e.jobId}`),e.workspaceName&&v.push(`${r("lblWorkspace")}: ${e.workspaceName}`);const g="async"===m?"optAsyncMode":"optSyncMode";if(v.push(`${r("lblDelivery")}: ${r(g)}`),e.downloadFilename&&v.push(`${r("lblFilename")}: ${e.downloadFilename}`),e.status&&v.push(`${r("lblFmeStatus")}: ${e.status}`),e.statusMessage&&e.statusMessage!==e.message&&v.push(`${r("lblFmeMessage")}: ${e.statusMessage}`),(null===(u=e.blobMetadata)||void 0===u?void 0:u.type)&&v.push(`${r("lblBlobType")}: ${e.blobMetadata.type}`),null===(c=e.blobMetadata)||void 0===c?void 0:c.size){const t=(0,i.$j)(e.blobMetadata.size);t&&v.push(`${r("lblBlobSize")}: ${t}`)}if("sync"!==m&&e.email){const n=(null==t?void 0:t.maskEmailOnSuccess)&&f?(0,i.q2)(e.email):e.email;v.push(`${r("lblEmail")}: ${n}`)}e.code&&p&&v.push(`${r("lblErrorCode")}: ${e.code}`);let y=null;if(d){y=r((e.code||"").toString().toUpperCase().includes("TIMEOUT")?"msgOrderTimeout":"msgOrderCancelled")}else if(f)"async"===m&&(y=r("msgEmailSent"));else{const t=(e.code||"").toString().toUpperCase(),n=e.message||e.statusMessage||"";y="FME_JOB_CANCELLED_TIMEOUT"===t?r("msgJobTimeout"):"FME_JOB_CANCELLED"===t?r("msgJobCancelled"):"FME_JOB_FAILURE"===t||/FME\s*Flow\s*transformation\s*failed/i.test(n)?r("errTransformFailed"):n||r("msgJobFailed")}const b=[];d?b.push({label:r("btnNewOrder"),onClick:()=>{var e;null===(e=s.onReuseGeography)||void 0===e||e.call(s)},type:"primary"}):f?b.push({label:r("btnReuseArea"),onClick:()=>{var e;null===(e=s.onReuseGeography)||void 0===e||e.call(s)},type:"primary"}):b.push({label:r("btnRetry"),onClick:()=>{var e;null===(e=s.onBack)||void 0===e||e.call(s)},type:"primary"}),b.push({label:r("btnEnd"),onClick:()=>{var e;s.onReset?s.onReset():null===(e=s.onBack)||void 0===e||e.call(s)},type:"default"});const E=v.length>0?(0,n.jsx)(n.React.Fragment,null,...v.map(((e,t)=>(0,n.jsx)("div",{key:t},e)))):null;let w=null;if(f&&"sync"===m){const t=e.downloadUrl||l||null;t&&(w=(0,n.jsx)("div",{style:{marginBottom:"0.5rem"}},(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",download:e.downloadFilename||"download"},r("btnDownloadFallback"))))}const O=a||E||w||y?(0,n.jsx)(n.React.Fragment,null,a,E,w,y&&(0,n.jsx)("div",null,y)):void 0;if(p){const t=r("titleOrderFailed");return(0,o.Qg)(t,{code:e.code,actions:b,detail:O})}return{kind:"success",title:r(d?"titleOrderCancelled":"sync"===m?"titleOrderComplete":"titleOrderConfirmed"),message:void 0,actions:b,detail:O}},h=["sync","async"],m=e=>{if(!e)return null!=e?e:void 0;const t=e.syncMode;let r="boolean"==typeof t?t:(0,u.Dr)(t);if(void 0===r&&(r=Boolean(t)),"boolean"==typeof t&&t===r)return e;const n=Object.assign(Object.assign({},e),{syncMode:r});return"function"==typeof e.set&&Object.defineProperty(n,"set",{value:e.set,writable:!0,configurable:!0}),n},v=(e,t,r)=>{var n;const o=(null==e?void 0:e.data)||{},i=(0,u.P6)(o._serviceMode).toLowerCase();let a;a="sync"===i||"async"===i?i:(null==t?void 0:t.syncMode)?"sync":"async";const l=((e,t)=>{var r,n;if(!t)return null;if(t.areaWarning)return{reason:"area",value:t.drawnArea,threshold:null==e?void 0:e.largeArea};if("number"==typeof(null==e?void 0:e.largeArea)&&null!=t.drawnArea&&t.drawnArea>e.largeArea)return{reason:"area",value:t.drawnArea,threshold:e.largeArea};if(t.formData&&e)try{const o=(null===(r=t.formData)||void 0===r?void 0:r.data)||{},i=g({data:o},t.userEmail||"","sync",e),a=null===(n=t.workspaceItem)||void 0===n?void 0:n.name;if(a&&e.fmeServerUrl&&e.repository&&_({serverUrl:e.fmeServerUrl,repository:e.repository,workspace:a,parameters:i,token:e.fmeServerToken,options:{requireHttps:e.requireHttps}})){const{fullUrl:t}=C(e.fmeServerUrl,e.repository,a,i,e.fmeServerToken,{requireHttps:e.requireHttps});return{reason:"url_length",urlLength:t.length,threshold:s.vA.MAX_URL_LENGTH}}}catch(e){}return null})(t,{workspaceItem:null==r?void 0:r.workspaceItem,areaWarning:null==r?void 0:r.areaWarning,drawnArea:null==r?void 0:r.drawnArea,formData:e,userEmail:o.opt_requesteremail||""});return l&&"sync"===a?(null===(n=null==r?void 0:r.onModeOverride)||void 0===n||n.call(r,{forcedMode:"async",previousMode:"sync",reason:l.reason,value:l.value,threshold:l.threshold,urlLength:l.urlLength}),"async"):a},g=(e,t,r="async",n)=>{var o;const i=(null==e?void 0:e.data)||{},s=h.includes(r)?r:"async",a=null===(o=null==n?void 0:n.showResult)||void 0===o||o,l=Object.assign(Object.assign({},i),{opt_servicemode:s,opt_responseformat:"json",opt_showresult:a?"true":"false"}),c=(0,u.P6)(t);return"async"===s&&c&&(l.opt_requesteremail=c),l},y=(e,t)=>{if(!t)return e;const r=Object.assign({},e),n=e=>{const t=b(e);if(!(void 0===t||t<=0))return t},o=(()=>{const t=e.opt_servicemode;if("string"==typeof t)return t;const n=r.opt_servicemode;return"string"==typeof n?n:""})(),i=(0,u.P6)(o).toLowerCase(),s="sync"===i||!i&&Boolean(null==t?void 0:t.syncMode);if(s||void 0===r.tm_ttc){if(s&&!("tm_ttc"in r)){const e=n(null==t?void 0:t.tm_ttc);void 0!==e&&(r.tm_ttc=e)}}else delete r.tm_ttc;if(!("tm_ttl"in r)){const e=n(null==t?void 0:t.tm_ttl);void 0!==e&&(r.tm_ttl=e)}return r},b=e=>{if("number"==typeof e&&Number.isFinite(e)){if(e<0)return;return Math.floor(e)}const t=(0,u.Nn)(e);if(!t||!/^\d+$/.test(t))return;const r=Number(t);return!Number.isFinite(r)||r<0?void 0:Math.floor(r)},E=(e,t,r,n,o,i)=>{const{config:s,workspaceParameters:u,workspaceItem:c,areaWarning:d,drawnArea:p}=i||{},h=m(s),b=(null==e?void 0:e.data)||{},E=v({data:b},h,{workspaceItem:c,areaWarning:d,drawnArea:p}),{_serviceMode:w,__upload_file__:O,__remote_dataset_url__:S}=b,R=f(b,["_serviceMode","__upload_file__","__remote_dataset_url__"]),T=g({data:R},t,E,h),k=(0,a.QC)(u),A=(0,a.NV)(T,r,n,o,h,k),I=y(A,h);return(0,l.dd)(I,h),I},w=e=>{if(Array.isArray(e))return(0,l.is)((0,l.YD)(e,"name"));const t="object"==typeof e&&null!==e?e:null,r=null==t?void 0:t.items;return Array.isArray(r)?(0,l.is)((0,l.YD)(r,"name")):[]},O=(e,t,r)=>({success:!0,blob:e,email:r,workspaceName:t,downloadFilename:`${t}_export.zip`,blobMetadata:{type:(0,u.Nn)(e.type),size:"number"==typeof e.size&&Number.isFinite(e.size)?e.size:void 0}}),S=(e,t,r)=>({success:!0,jobId:"number"==typeof e.jobId?e.jobId:void 0,email:r,workspaceName:t,downloadUrl:e.url,downloadFilename:e.url?`${t}_export.zip`:void 0,status:e.status,statusMessage:e.message}),R=(e,t,r="FME_JOB_FAILURE")=>Object.assign(Object.assign(Object.assign({success:!1,message:e,code:r},"number"==typeof(null==t?void 0:t.jobId)&&{jobId:t.jobId}),(null==t?void 0:t.status)&&{status:t.status}),(null==t?void 0:t.message)&&{statusMessage:t.message}),T=(e,t,r,n)=>{const o=e,i=null==o?void 0:o.data;if(!i)return{success:!1,message:n("noDataInResponse"),code:"NO_DATA"};if(i.blob instanceof Blob)return O(i.blob,t,r);const s=k(o),a=(s.status||"").toString().trim().toUpperCase();if("ABORTED"===a){const e=s.message||"",t=e.toLowerCase(),r=["timeout","time limit","time-limit","max execution","maximum execution","max runtime","maximum runtime","max run time"].some((e=>t.includes(e)));return{success:!1,cancelled:!0,message:n(r?"jobCancelledTimeout":"jobCancelled"),code:r?"FME_JOB_CANCELLED_TIMEOUT":"FME_JOB_CANCELLED",status:s.status,statusMessage:e,jobId:"number"==typeof s.jobId?s.jobId:void 0}}if(new Set(["FAILURE","FAILED","JOB_FAILURE","FME_FAILURE"]).has(a)){const e=(0,u.Nn)(s.message)||n("jobFailed");return R(e,s,"FME_JOB_FAILURE")}var l;return"SUCCESS"===a||"string"==typeof(l=s.url)&&/^https?:\/\//.test(l)||"number"==typeof s.jobId&&s.jobId>0?S(s,t,r):R(s.message||n("errorJobSubmission"),s)},k=e=>{var t,r,n;const o=e||{},i=(null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.serviceResponse)||(null==o?void 0:o.data)||o;return{status:(null===(r=null==i?void 0:i.statusInfo)||void 0===r?void 0:r.status)||(null==i?void 0:i.status),message:(null===(n=null==i?void 0:i.statusInfo)||void 0===n?void 0:n.message)||(null==i?void 0:i.message),jobId:"number"==typeof(null==i?void 0:i.jobID)?i.jobID:null==i?void 0:i.id,url:null==i?void 0:i.url}},A=e=>Array.from(e.entries()).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),I=(e,t={})=>{for(const r of s.T5){const n=b(t[r]);void 0!==n&&e.set(r,String(n))}const r=((e,t)=>{const r=(0,u.Nn)(e);return r?r.slice(0,t):void 0})(t.tm_tag,128);r&&e.set("tm_tag",r)},C=(e,t,r,n={},o,i)=>{var a,l,u,f;const p=(0,d.c$)(e,"fmedatadownload",t,r),h=null!==(l=null!==(a=(0,d.yC)(e))&&void 0!==a?a:(0,d.yC)(p))&&void 0!==l?l:void 0,m=(null==h?void 0:h.hostname)||"",v=null===(u=null==i?void 0:i.requireHttps)||void 0===u||u,g=null!==(f=null==i?void 0:i.strict)&&void 0!==f?f:!(e=>{if(!e)return!1;const t=e.replace(/^\[|\]$/g,"").toLowerCase();return"localhost"===t||"::1"===t||"0:0:0:0:0:0:0:1"===t||!!t.startsWith("127.")})(m)&&v,y=(0,c._Y)(p,{strict:g,requireHttps:v});if(!y.ok)throw((e,t,r)=>{const n=new Error(e);return n.code=e,null!=t&&(n.status=t),void 0!==r&&(n.cause=r),n})("WEBHOOK_AUTH_ERROR",0,y.errorKey||"invalid_url");const b=(0,d.XV)(n,[...s.GR],!0);return o&&b.set("token",o),I(b,n),{baseUrl:p,params:b,fullUrl:`${p}?${A(b)}`}},_=e=>{const{serverUrl:t,repository:r,workspace:n,parameters:o={},maxLen:i=s.vA.MAX_URL_LENGTH,token:a,options:l}=e,{fullUrl:u}=C(t,r,n,o,a,l);return"number"==typeof i&&i>0&&u.length>i}},3096:(e,t,r)=>{"use strict";r.d(t,{BY:()=>p,Bd:()=>_,FS:()=>m,GR:()=>w,H4:()=>I,In:()=>R,K2:()=>Q,KF:()=>h,KG:()=>N,LZ:()=>D,PJ:()=>o,PS:()=>M,RF:()=>c,ST:()=>L,T5:()=>b,Ve:()=>i,Xw:()=>f,_$:()=>$,_A:()=>s,a9:()=>j,ar:()=>C,bD:()=>F,d:()=>O,d8:()=>q,gM:()=>u,h6:()=>d,jF:()=>x,jL:()=>A,lh:()=>l,m2:()=>g,np:()=>B,nu:()=>U,o0:()=>H,oh:()=>V,qc:()=>k,vA:()=>a,vH:()=>v,vN:()=>W,vp:()=>z,wF:()=>T,xA:()=>G,zo:()=>P});var n=r(6055);Object.freeze([n.ZW.SET_VIEW_MODE,n.ZW.RESET_STATE,n.ZW.SET_GEOMETRY,n.ZW.SET_DRAWING_TOOL,n.ZW.COMPLETE_DRAWING,n.ZW.SET_ORDER_RESULT,n.ZW.SET_WORKSPACE_ITEMS,n.ZW.SET_WORKSPACE_PARAMETERS,n.ZW.SET_SELECTED_WORKSPACE,n.ZW.SET_WORKSPACE_ITEM,n.ZW.SET_ERROR,n.ZW.SET_ERRORS,n.ZW.CLEAR_WORKSPACE_STATE,n.ZW.CLEAR_ERROR,n.ZW.RESET_TO_DRAWING,n.ZW.COMPLETE_STARTUP,n.ZW.REMOVE_WIDGET_STATE,n.ZW.SET_LOADING_FLAG,n.ZW.APPLY_WORKSPACE_DATA]);const o=Object.freeze({title:"",listMode:"hide",elevationInfo:{mode:"on-the-ground"}}),i="#0079C1",s=Object.freeze(["FILENAME","FILENAME_MUSTEXIST","DIRNAME","DIRNAME_MUSTEXIST","DIRNAME_SRC","LOOKUP_FILE","REPROJECTION_FILE"]),a=Object.freeze({BASE_PATH:"/fmeapiv4",MAX_URL_LENGTH:4e3,WEBHOOK_EXCLUDE_KEYS:[],WEBHOOK_LOG_WHITELIST:Object.freeze(["opt_responseformat","opt_showresult","opt_servicemode"])}),l=(Object.freeze({VALIDATION:{DEFAULT_TTL_VALUE:"",DEFAULT_TTC_VALUE:""},LIMITS:{MAX_M2_CAP:1e10,MAX_REQUEST_TIMEOUT_MS:6e5},DIRECTIVES:{DESCRIPTION_MAX:512,TAG_MAX:128},COLORS:{BACKGROUND_DARK:"#181818"},TEXT:{LARGE_AREA_MESSAGE_MAX:160}}),{[n.nE.STARTUP_VALIDATION]:n.nE.STARTUP_VALIDATION,[n.nE.EXPORT_FORM]:n.nE.WORKSPACE_SELECTION,[n.nE.WORKSPACE_SELECTION]:n.nE.INITIAL,[n.nE.EXPORT_OPTIONS]:n.nE.INITIAL,[n.nE.ORDER_RESULT]:n.nE.INITIAL,[n.nE.DRAWING]:n.nE.INITIAL,[n.nE.INITIAL]:n.nE.INITIAL}),u=500,c=Object.freeze(["esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/geometry/geometryEngine","esri/geometry/geometryEngineAsync","esri/geometry/support/webMercatorUtils","esri/geometry/projection","esri/geometry/SpatialReference","esri/geometry/support/normalizeUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/Graphic"]),d="workspace",f=(Object.freeze({DEFAULT_CHUNK_SIZE:10,MIN_CHUNK_SIZE:1,MAX_CHUNK_SIZE:25}),Object.freeze({CANCELLED_PROMISE:"CancelledPromiseError",ABORT:"AbortError"}),/^[^\s@]{1,64}@[^\s@]{1,253}\.[^\s@]{2,63}$/),p=/\{\s*email\s*\}/i,h=Object.freeze(["localhost",".localhost",".local",".internal",".intranet",".home",".lan",".localdomain"]),m=Object.freeze([{start:[10,0,0,0],end:[10,255,255,255]},{start:[100,64,0,0],end:[100,127,255,255]},{start:[127,0,0,0],end:[127,255,255,255]},{start:[169,254,0,0],end:[169,254,255,255]},{start:[172,16,0,0],end:[172,31,255,255]},{start:[192,168,0,0],end:[192,168,255,255]},{start:[0,0,0,0],end:[0,255,255,255]}]),v=/\.(zip|kmz|json|geojson|gml)(\?.*)?$/i,g=4e3,y=Object.freeze(["tm_ttc","tm_ttl","tm_tag"]),b=Object.freeze(["tm_ttc","tm_ttl"]),E=Object.freeze(["opt_servicemode","opt_responseformat","opt_showresult","opt_requesteremail"]),w=Object.freeze([...a.WEBHOOK_EXCLUDE_KEYS,...y]),O=new Set([...y,...E]),S=(Object.freeze(["sync","async"]),Object.freeze({M2_PER_KM2:1e6,AREA_DECIMALS:2,METERS_PER_KILOMETER:1e3,SQUARE_FEET_PER_SQUARE_MILE:27878400})),R=(Object.freeze([{factor:.3048,label:"ft\xb2",keywords:["foot","feet"],largeUnit:{threshold:S.SQUARE_FEET_PER_SQUARE_MILE,factor:S.SQUARE_FEET_PER_SQUARE_MILE,label:"mi\xb2"}},{factor:.3048006096,label:"ft\xb2",keywords:[]},{factor:1609.344,label:"mi\xb2",keywords:["mile"]},{factor:S.METERS_PER_KILOMETER,label:"km\xb2",keywords:["kilometer"]},{factor:.9144,label:"yd\xb2",keywords:["yard"]},{factor:.0254,label:"in\xb2",keywords:["inch"]},{factor:.01,label:"cm\xb2",keywords:["centimeter"]},{factor:.001,label:"mm\xb2",keywords:["millimeter"]},{factor:1852,label:"nm\xb2",keywords:["nautical"]},{factor:1,label:"m\xb2",keywords:["meter"]}]),Object.freeze({GEOMETRY_SERIALIZATION_FAILED:"polygon",MAP_MODULES_LOAD_FAILED:"map",FORM_INVALID:"warning"}),Object.freeze([{token:"GEOMETRY",icon:"polygon"},{token:"AREA",icon:"polygon"},{token:"MAP",icon:"map"},{token:"MODULE",icon:"map"},{token:"FORM",icon:"warning"},{token:"TOKEN",icon:"person-lock"},{token:"AUTH",icon:"person-lock"},{token:"REPOSITORY",icon:"folder"},{token:"REPO",icon:"folder"},{token:"DATA",icon:"data"},{token:"NETWORK",icon:"shared-no"},{token:"OFFLINE",icon:"shared-no"},{token:"CONNECTION",icon:"shared-no"},{token:"REQUEST",icon:"shared-no"},{token:"SERVER",icon:"feature-service"},{token:"GATEWAY",icon:"feature-service"},{token:"URL",icon:"link-tilted"},{token:"TIMEOUT",icon:"time"},{token:"CONFIG",icon:"setting"},{token:"EMAIL",icon:"email"}]),Object.freeze({WGS84:4326,WEB_MERCATOR:3857}),50),T=1e-6,k=1/111319.49079327358,A=Object.freeze({UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,BAD_REQUEST:400,TIMEOUT:408,GATEWAY_TIMEOUT:504,TOO_MANY_REQUESTS:429,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,NETWORK_ERROR:0,SERVER_ERROR_MIN:500,SERVER_ERROR_MAX:599}),I=Object.freeze({SUCCESS_MIN:200,SUCCESS_MAX:399,CLIENT_ERROR_MIN:400,CLIENT_ERROR_MAX:499,SERVER_ERROR_MIN:500,SERVER_ERROR_MAX:599,MIN_VALID:100,MAX_VALID:599}),C=e=>"number"==typeof e&&e>=I.SUCCESS_MIN&&e<=I.SUCCESS_MAX,_=e=>"number"==typeof e&&e>=I.MIN_VALID&&e<=I.MAX_VALID,M=e=>!e||e<I.MIN_VALID||(!!(e=>"number"==typeof e&&e>=I.SERVER_ERROR_MIN)(e)||(e===A.TIMEOUT||e===A.TOO_MANY_REQUESTS)),L=Object.freeze({SECOND:1e3,MINUTE:6e4,FIVE_MINUTES:3e5,TEN_MINUTES:6e5,MAX_RESPONSE_TIME:3e5,SLOW_REQUEST_THRESHOLD:1e3}),x={INVALID_RESPONSE_FORMAT:"errorTokenIssue",WEBHOOK_AUTH_ERROR:"errorTokenIssue",WEBHOOK_TIMEOUT:"requestTimedOut",REPOSITORIES_ERROR:"errorRepositoryAccess",REPOSITORY_ITEMS_ERROR:"errorRepositoryAccess",JOB_SUBMISSION_ERROR:"errorJobSubmission",INVALID_CONFIG:"errorSetupRequired",CONFIG_INCOMPLETE:"errorSetupRequired",configMissing:"errorSetupRequired",GEOMETRY_MISSING:"geometryMissingCode",GEOMETRY_TYPE_INVALID:"geometryTypeInvalidCode",GEOMETRY_SERIALIZATION_FAILED:"geometrySerializationFailedCode",URL_TOO_LONG:"urlTooLongMessage",WEBHOOK_URL_TOO_LONG:"urlTooLongMessage",PARAMETER_VALIDATION_ERROR:"errorParameterValidation",WORKSPACE_PARAMETERS_ERROR:"errorWorkspaceParameters"},N={401:"errorTokenIssue",408:"requestTimedOut",429:"rateLimitExceeded",431:"headersTooLargeMessage"},j=Object.freeze([{pattern:/timeout/i,key:"requestTimedOut"},{pattern:/cors/i,key:"corsBlocked"},{pattern:/url.*too/i,key:"urlTooLongMessage"},{pattern:/remote_dataset_workspace_required/i,key:"REMOTE_DATASET_WORKSPACE_REQUIRED"}]),P={require_https:"require_https",no_query_or_hash:"invalid_url",invalid_url:"invalid_url"},D=Object.freeze(["fmeServerUrl","fmeServerToken","repository"]),F=Object.freeze(["status","statusCode","httpStatus"]),U="_",V=Object.freeze(new Set(["MAXX","MINX","MAXY","MINY","AreaOfInterest","AREA","ExtentGeoJson","tm_ttc","tm_ttl","tm_tag"])),W=Object.freeze(new Set([n.QL.NOVALUE,n.QL.GROUP,n.QL.group])),B=Object.freeze(new Set([n.QL.DB_CONNECTION,n.QL.WEB_CONNECTION,n.QL.ATTRIBUTE_NAME,n.QL.ATTRIBUTE_LIST,n.QL.COORDSYS,n.QL.REPROJECTION_FILE])),q=Object.freeze(new Set([n.QL.LISTBOX,n.QL.LOOKUP_LISTBOX,n.QL.ATTRIBUTE_LIST,n.QL.listbox])),G=Object.freeze({[n.QL.text]:n.Vw.TEXT,[n.QL.number]:n.Vw.NUMBER,[n.QL.checkbox]:n.Vw.CHECKBOX,[n.QL.dropdown]:n.Vw.RADIO,[n.QL.listbox]:n.Vw.MULTI_SELECT,[n.QL.tree]:n.Vw.SELECT,[n.QL.password]:n.Vw.PASSWORD,[n.QL.datetime]:n.Vw.DATE_TIME,[n.QL.message]:n.Vw.MESSAGE,[n.QL.group]:n.Vw.HIDDEN,[n.QL.file]:n.Vw.FILE,[n.QL.color]:n.Vw.COLOR,[n.QL.range]:n.Vw.SLIDER,[n.QL.FLOAT]:n.Vw.NUMERIC_INPUT,[n.QL.INTEGER]:n.Vw.NUMBER,[n.QL.TEXT_EDIT]:n.Vw.TEXTAREA,[n.QL.PASSWORD]:n.Vw.PASSWORD,[n.QL.BOOLEAN]:n.Vw.SWITCH,[n.QL.CHECKBOX]:n.Vw.SWITCH,[n.QL.CHOICE]:n.Vw.RADIO,[n.QL.LOOKUP_CHOICE]:n.Vw.RADIO,[n.QL.LISTBOX]:n.Vw.MULTI_SELECT,[n.QL.LOOKUP_LISTBOX]:n.Vw.MULTI_SELECT,[n.QL.FILENAME]:n.Vw.FILE,[n.QL.FILENAME_MUSTEXIST]:n.Vw.FILE,[n.QL.DIRNAME]:n.Vw.FILE,[n.QL.DIRNAME_MUSTEXIST]:n.Vw.FILE,[n.QL.DIRNAME_SRC]:n.Vw.FILE,[n.QL.DATE_TIME]:n.Vw.DATE_TIME,[n.QL.DATETIME]:n.Vw.DATE_TIME,[n.QL.URL]:n.Vw.URL,[n.QL.LOOKUP_URL]:n.Vw.URL,[n.QL.LOOKUP_FILE]:n.Vw.FILE,[n.QL.DATE]:n.Vw.DATE,[n.QL.TIME]:n.Vw.TIME,[n.QL.MONTH]:n.Vw.MONTH,[n.QL.WEEK]:n.Vw.WEEK,[n.QL.COLOR]:n.Vw.COLOR,[n.QL.COLOR_PICK]:n.Vw.COLOR,[n.QL.RANGE_SLIDER]:n.Vw.SLIDER,[n.QL.MESSAGE]:n.Vw.MESSAGE,[n.QL.TEXT_OR_FILE]:n.Vw.TEXT_OR_FILE,[n.QL.REPROJECTION_FILE]:n.Vw.REPROJECTION_FILE,[n.QL.COORDSYS]:n.Vw.COORDSYS,[n.QL.ATTRIBUTE_NAME]:n.Vw.ATTRIBUTE_NAME,[n.QL.ATTRIBUTE_LIST]:n.Vw.ATTRIBUTE_LIST,[n.QL.DB_CONNECTION]:n.Vw.DB_CONNECTION,[n.QL.WEB_CONNECTION]:n.Vw.WEB_CONNECTION,[n.QL.SCRIPTED]:n.Vw.SCRIPTED}),$=Object.freeze(["esriRequest","esriConfig","projection","webMercatorUtils","SpatialReference"]),z=Object.freeze({DEFAULT_MAX_SIZE_MB:150,ONE_MB_IN_BYTES:1048576,GEOMETRY_PREVIEW_MAX_LENGTH:1500,DEFAULT_ALLOWED_EXTENSIONS:Object.freeze([".zip",".kmz",".json",".geojson",".gml"]),DEFAULT_ALLOWED_MIME_TYPES:Object.freeze(new Set(["application/zip","application/x-zip-compressed","application/vnd.google-earth.kmz","application/json","application/geo+json","application/gml+xml","text/plain",""].map((e=>e.toLowerCase())))),FILE_DISPLAY_KEYS:Object.freeze(["text","path","location","value","dataset","defaultValue","fileName","filename","file_path","file","uri","url","name"])}),Q=Object.freeze(["failed to fetch","networkerror","net::","dns","enotfound","econnrefused","timeout","name or service not known","err_name_not_resolved","unable to load","/sharing/proxy","proxy"]),H=Object.freeze(["unable to load","/sharing/proxy","proxy"])},3128:(e,t,r)=>{"use strict";r.d(t,{$W:()=>i,MN:()=>l});var n=r(9244),o=r(1888);const i={icon:{small:16,medium:18,large:24},tooltip:{delay:{enter:100,next:0,leave:0,touch:700},position:{top:"top",bottom:"bottom",left:"left",right:"right"},showArrow:!0},button:{defaults:{block:!0,tooltipPosition:"top"},offset:"10px",textPadding:"18px"},zIndex:{selectMenu:1005,overlay:1e3},loading:{width:32,height:32,delay:1e3,detailDelay:1600,cycleInterval:5200},required:"*"},s=e=>{var t;return{fontFamily:null==e?void 0:e.fontFamily,fontWeight:null===(t=null==e?void 0:e.fontWeight)||void 0===t?void 0:t.toString(),fontSize:null==e?void 0:e.fontSize,fontStyle:null==e?void 0:e.fontStyle,lineHeight:null==e?void 0:e.lineHeight,color:null==e?void 0:e.color}},a=(e,t={})=>(0,n.css)(Object.assign({display:"inline"===e?"inline-flex":"flex",flexFlow:"column"===e?"column nowrap":"inline"===e?"row wrap":void 0},t)),l=()=>(e=>{var t,r,o,l,u,c;const d=e.sys.spacing,f=e.sys.color,p=e.sys.typography,h=null==d?void 0:d(2),m="1 1 auto";return{row:a("row",{gap:h}),buttonGroup:a("column",{inlineSize:"100%",gap:h}),fullWidth:a("column",{inlineSize:"100%",flex:m,minInlineSize:0}),relative:(0,n.css)({position:"relative"}),rowAlignCenter:(0,n.css)({alignItems:"center"}),disabledPicker:a("row",{pointerEvents:"none"}),textareaResize:(0,n.css)({resize:"vertical"}),parent:a("column",{overflowY:"auto",blockSize:"100%",position:"relative",gap:h,padding:null==d?void 0:d(1),backgroundColor:null===(t=null==f?void 0:f.surface)||void 0===t?void 0:t.paper}),header:a("row",{alignItems:"center",justifyContent:"flex-end",gap:h,marginBlockEnd:null==d?void 0:d(2)}),headerAlert:(0,n.css)({marginInlineEnd:"auto",display:"flex",alignItems:"center"}),content:a("column",{flex:m,minBlockSize:0,gap:h}),centered:a("column",{placeContent:"center",alignItems:"center",textAlign:"center",flex:m,minBlockSize:0,gap:h}),loadingText:(0,n.css)({}),loadingSpinner:(0,n.css)({"& .donut-loading":{top:"60% !important"}}),overlay:(0,n.css)({position:"absolute",inset:"50% auto auto 50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:i.zIndex.overlay}),alert:(0,n.css)({width:"100% !important"}),alertInline:(0,n.css)({opacity:.8}),alertContent:a("row",{alignItems:"flex-start",gap:h}),alertMessage:(0,n.css)(Object.assign({flex:m},s(null==p?void 0:p.label2))),alertIcon:(0,n.css)({display:"inline-flex",alignItems:"center",justifyContent:"center",flex:"0 0 auto"}),typo:{caption:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.body1)),{marginBlockEnd:null==d?void 0:d(3)})),label:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.label1)),{fontWeight:"400",marginBlockEnd:0})),title:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.title1)),{margin:`${null==d?void 0:d(1)} 0`})),instruction:(0,n.css)(Object.assign(Object.assign({textAlign:"center"},s(null==p?void 0:p.body1)),{margin:`${null==d?void 0:d(3)} 0`})),link:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.body1)),{color:null===(r=null==f?void 0:f.action.link)||void 0===r?void 0:r.default,textDecoration:"underline",wordBreak:"break-all","&:hover":{color:null===(o=null==f?void 0:f.action.link)||void 0===o?void 0:o.hover,textDecoration:"underline"}})),loadingMessage:(0,n.css)(Object.assign({},s(null==p?void 0:p.label2))),required:(0,n.css)({marginInlineStart:null==d?void 0:d(1)}),hint:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.label3)),{marginBlockStart:null==d?void 0:d(1)})),errorMessage:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.label3)),{color:null===(l=null==f?void 0:f.error)||void 0===l?void 0:l.main,marginBlockStart:null==d?void 0:d(1)}))},btn:{flex:(0,n.css)({flex:m}),group:a("column",{inlineSize:"100%",gap:h}),text:e=>(0,n.css)({flex:m,textAlign:e||"start",paddingInlineEnd:i.button.textPadding}),icon:(0,n.css)({position:"absolute",zIndex:1,insetBlockStart:"50%",insetInlineEnd:i.button.offset,transform:"translateY(-50%)"})},form:{layout:a("column",{flex:m,minBlockSize:0,gap:h}),header:(0,n.css)({flex:"0 0 auto"}),sliderField:a("row",{alignItems:"center",width:"100%",gap:h}),sliderValue:(0,n.css)(Object.assign(Object.assign({},s(null==p?void 0:p.label2)),{textAlign:"center"})),content:a("column",{flex:m,gap:h}),body:a("column",{flex:m,gap:h,overflowY:"auto"}),footer:a("column",{flex:"0 0 auto",gap:h})},field:(0,n.css)({marginBlockEnd:null==d?void 0:d(3)}),checkLabel:a("row",{alignItems:"center",justifyContent:"space-between",inlineSize:"100%"}),selection:{container:a("column",{flex:m,gap:h,minBlockSize:0}),warning:(0,n.css)({marginBlockStart:"auto"}),message:(0,n.css)(Object.assign({marginBlockStart:"auto"},s(null==p?void 0:p.body2)))},tooltipWrap:{block:a("row",{inlineSize:"100%",minInlineSize:0}),inline:a("inline",{minInlineSize:0}),anchor:a("row",{flex:m,minInlineSize:0,"& > *":{flex:m,minInlineSize:0}})},stateView:{frame:a("column",{inlineSize:"100%",blockSize:"100%",minBlockSize:0}),error:a("column",{flex:m,inlineSize:"100%",blockSize:"100%",minBlockSize:0,gap:h,alignItems:"stretch"}),errorContent:a("column",{gap:h,flex:"1 1 auto",justifyContent:"center"}),errorIcon:(0,n.css)({marginBlockEnd:null!==(u=null==d?void 0:d(2))&&void 0!==u?u:0}),errorActions:(0,n.css)({inlineSize:"100%",marginBlockStart:"auto",alignSelf:"stretch"}),infoLine:(0,n.css)({marginBlockEnd:null!==(c=null==d?void 0:d(2))&&void 0!==c?c:0})}}})((0,o.useTheme)())},3417:(e,t,r)=>{"use strict";r.d(t,{$W:()=>s.$W,BY:()=>o.BY,Bd:()=>o.Bd,By:()=>n.By,Dd:()=>i.Dd,FS:()=>o.FS,GR:()=>o.GR,In:()=>o.In,KF:()=>o.KF,KG:()=>o.KG,LZ:()=>o.LZ,MN:()=>s.MN,MU:()=>n.MU,PJ:()=>o.PJ,PS:()=>o.PS,QL:()=>n.QL,Qg:()=>i.Qg,RF:()=>o.RF,ST:()=>o.ST,T5:()=>o.T5,VQ:()=>i.VQ,Ve:()=>o.Ve,Vw:()=>n.Vw,Xw:()=>o.Xw,ZW:()=>n.ZW,_$:()=>o._$,_A:()=>o._A,a9:()=>o.a9,aE:()=>i.aE,bD:()=>o.bD,d:()=>o.d,d8:()=>o.d8,gM:()=>o.gM,h6:()=>o.h6,hL:()=>n.hL,jF:()=>o.jF,jL:()=>o.jL,lh:()=>o.lh,m2:()=>o.m2,nE:()=>n.nE,np:()=>o.np,nu:()=>o.nu,oh:()=>o.oh,qc:()=>o.qc,vA:()=>o.vA,vH:()=>o.vH,vN:()=>o.vN,vp:()=>o.vp,wF:()=>o.wF,xA:()=>o.xA,ym:()=>n.ym,zo:()=>o.zo});var n=r(6055),o=r(3096),i=r(5132),s=r(3128)},3624:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},3744:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},3890:(e,t,r)=>{"use strict";r.d(t,{$d:()=>S,B9:()=>E,CL:()=>i,H9:()=>a,Ko:()=>O,Rv:()=>k,T6:()=>f,Xz:()=>A,ZF:()=>s,_Y:()=>v,dC:()=>g,e6:()=>R,id:()=>w,pZ:()=>c,rB:()=>u,sW:()=>h,ut:()=>p});var n=r(3417),o=r(9063);const i=e=>{const t=(0,o.Bv)(e);if(!t||t.length>n.m2)return!1;let r;try{r=new URL(t)}catch(e){return!1}if(r.username||r.password||"https:"!==r.protocol)return!1;const i=r.hostname.toLowerCase();if(!i||(e=>{const t=e.toLowerCase();return n.KF.some((e=>t===e||t.endsWith(e)))})(i))return!1;const s=(e=>{const t=e.split(".");if(4!==t.length)return null;const r=t.map((e=>{if(!/^\d+$/.test(e))return NaN;const t=Number(e);return t>=0&&t<=255?t:NaN}));return r.every(Number.isInteger)?r:null})(i);if(s&&(a=s,n.FS.some((({start:e,end:t})=>{for(let r=0;r<4;r++)if(a[r]<e[r]||a[r]>t[r])return!1;return!0}))))return!1;var a;if(i.includes(":")&&(e=>{const t=e.toLowerCase();return"::1"===t||t.startsWith("::1:")||"0:0:0:0:0:0:0:1"===t||t.startsWith("fc")||t.startsWith("fd")||/^fe[89ab][0-9a-f]/i.test(t)})(i))return!1;if(/\.[^/]+$/.test(r.pathname)){const e=`${r.pathname}${r.search}`;if(!n.vH.test(e))return!1}return!0},s=(e,t)=>{if(!e||!(null==t?void 0:t.length))return;return t.every((e=>(e=>{if((0,o.Bf)(e))return!0;if("string"!=typeof e)return!1;const t=e.trim();if(!t)return!1;const r=Number(t);return Number.isFinite(r)&&String(r)===t})(e.value)))?"number":void 0},a=e=>{if(Array.isArray(e))return e.map((e=>"string"==typeof e?e:String(e)));if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t.map(String):e?[e]:[]}catch(t){return e?[e]:[]}return[]},l=e=>Boolean(null==e?void 0:e.allowRemoteDataset),u=(e,t)=>{if(!l(t))return!1;if(!(null==t?void 0:t.allowRemoteUrlDataset))return!1;const r=(0,o.Nn)(e);return!!r&&i(r)},c=(e,t)=>!!l(e)&&(!!t&&("undefined"!=typeof Blob&&t instanceof Blob||(0,o.E$)(t))),d=e=>{if("number"==typeof e)return e;if("string"==typeof e){const t=Number(e.trim());return Number.isFinite(t)?t:null}return null},f=e=>null!==d(e),p=(e,t,r)=>{switch(e){case"integer":return(e=>{const t=d(e);return null!==t&&Number.isInteger(t)})(r)?null:`${t}:integer`;case"float":return f(r)?null:`${t}:number`;default:return null}},h=(e,t,r,n)=>{if(!r)return null;const o=e=>"number"==typeof e&&Number.isFinite(e)||"string"==typeof e?e:"boolean"==typeof e?e?"true":"false":JSON.stringify(null!=e?e:null);if(n){if((Array.isArray(t)?t:[t]).some((e=>!r.has(o(e)))))return`${e}:choice`}else if(!r.has(o(t)))return`${e}:choice`;return null},m=e=>{const t=(0,o.yC)(e||"");if(!t)return"";t.search="",t.hash="",t.username="",t.password="";const r="/"===t.pathname?"":t.pathname.replace(/\/$/,"");return`${t.origin}${r}`};function v(e,t){const r=(0,o.Nn)(e);if(!r)return{ok:!1,errorKey:"invalid_url"};const n=g(r,t);if(!n.ok)return{ok:!1,errorKey:y(n.reason)};return{ok:!0,normalized:m(r)||r}}function g(e,t){const r=(0,o.Bv)(e);if(!r)return{ok:!1,reason:"invalid_url"};try{const e=new URL(r),n=e.protocol.toLowerCase();if("http:"!==n&&"https:"!==n)return{ok:!1,reason:"invalid_url"};if((null==t?void 0:t.requireHttps)&&"https:"!==n)return{ok:!1,reason:"require_https"};if(e.username||e.password)return{ok:!1,reason:"invalid_url"};if(e.search||e.hash)return{ok:!1,reason:"no_query_or_hash"};if(e.hostname.endsWith("."))return{ok:!1,reason:"invalid_url"};if(null==t?void 0:t.strict){const t=e.hostname||"";if(!t.includes(".")||t.length<4)return{ok:!1,reason:"invalid_url"}}return{ok:!0}}catch(e){return{ok:!1,reason:"invalid_url"}}}const y=e=>e&&n.zo[e]||"invalid_url",b=/^no[-_]?reply@/i,E=e=>!("string"!=typeof e||!e)&&(!b.test(e)&&n.Xw.test(e)),w=e=>{const t=(0,o.Nn)(e);return t&&E(t)?t:void 0},O=e=>{if(!e||"object"!=typeof e)return;const t=e;for(const e of n.bD){const r=t[e];if((0,n.Bd)(r))return r}const r=t.details;if(r&&"object"==typeof r){const e=r.httpStatus||r.status;if((0,n.Bd)(e))return e}const i=(0,o.PE)(e);if("string"==typeof i){const e=/status:\s*(\d{3})/i.exec(i);if(e){const t=parseInt(e[1],10);if((0,n.Bd)(t))return t}}},S=e=>{if(e&&"object"==typeof e){const t=e;if("boolean"==typeof t.isRetryable)return t.isRetryable}const t=O(e);return(0,n.PS)(t)},R=e=>{if(!e.serverUrl||!e.token||!e.repository)throw new Error("Missing required configuration")},T=e=>e?n.LZ.filter((t=>{var r;return!(null===(r=e[t])||void 0===r?void 0:r.trim())})):[...n.LZ];const k=(e,t,r)=>{var n;const o=T(e),i=null===(n=null==r?void 0:r.mapConfigured)||void 0===n||n;return o.length>0||!i?{isValid:!1,canProceed:!1,requiresSettings:!0}:{isValid:!0,canProceed:!0,requiresSettings:!1}},A=e=>{const t=e.trim();return/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(t)}},3930:(e,t,r)=>{"use strict";r.d(t,{I:()=>C});var n=r(9658),o=r(6261),i=r(9757),s=r(6500),a=r(4658),l=r(4880),u=r(2775),c=class extends s.Q{constructor(e,t){super(),this.options=t,this.#m=e,this.#v=null,this.#g=(0,a.T)(),this.bindMethods(),this.setOptions(t)}#m;#y=void 0;#b=void 0;#E=void 0;#w;#O;#g;#v;#S;#R;#T;#k;#A;#I;#C=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#y.addObserver(this),d(this.#y,this.options)?this.#_():this.updateResult(),this.#M())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return f(this.#y,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return f(this.#y,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#L(),this.#x(),this.#y.removeObserver(this)}setOptions(e){const t=this.options,r=this.#y;if(this.options=this.#m.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#y))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#y.setOptions(this.options),t._defaulted&&!(0,l.f8)(this.options,t)&&this.#m.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#y,observer:this});const n=this.hasListeners();n&&p(this.#y,r,this.options,t)&&this.#_(),this.updateResult(),!n||this.#y===r&&(0,l.Eh)(this.options.enabled,this.#y)===(0,l.Eh)(t.enabled,this.#y)&&(0,l.d2)(this.options.staleTime,this.#y)===(0,l.d2)(t.staleTime,this.#y)||this.#j();const o=this.#P();!n||this.#y===r&&(0,l.Eh)(this.options.enabled,this.#y)===(0,l.Eh)(t.enabled,this.#y)&&o===this.#I||this.#D(o)}getOptimisticResult(e){const t=this.#m.getQueryCache().build(this.#m,e),r=this.createResult(t,e);return function(e,t){if(!(0,l.f8)(e.getCurrentResult(),t))return!0;return!1}(this,r)&&(this.#E=r,this.#O=this.options,this.#w=this.#y.state),r}getCurrentResult(){return this.#E}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"!==r||this.options.experimental_prefetchInRender||"pending"!==this.#g.status||this.#g.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(e,r))})}trackProp(e){this.#C.add(e)}getCurrentQuery(){return this.#y}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#m.defaultQueryOptions(e),r=this.#m.getQueryCache().build(this.#m,t);return r.fetch().then((()=>this.createResult(r,t)))}fetch(e){return this.#_({...e,cancelRefetch:e.cancelRefetch??!0}).then((()=>(this.updateResult(),this.#E)))}#_(e){this.#N();let t=this.#y.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.lQ)),t}#j(){this.#L();const e=(0,l.d2)(this.options.staleTime,this.#y);if(l.S$||this.#E.isStale||!(0,l.gn)(e))return;const t=(0,l.j3)(this.#E.dataUpdatedAt,e)+1;this.#k=u.zs.setTimeout((()=>{this.#E.isStale||this.updateResult()}),t)}#P(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#y):this.options.refetchInterval)??!1}#D(e){this.#x(),this.#I=e,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#y)&&(0,l.gn)(this.#I)&&0!==this.#I&&(this.#A=u.zs.setInterval((()=>{(this.options.refetchIntervalInBackground||n.m.isFocused())&&this.#_()}),this.#I))}#M(){this.#j(),this.#D(this.#P())}#L(){this.#k&&(u.zs.clearTimeout(this.#k),this.#k=void 0)}#x(){this.#A&&(u.zs.clearInterval(this.#A),this.#A=void 0)}createResult(e,t){const r=this.#y,n=this.options,o=this.#E,s=this.#w,u=this.#O,c=e!==r?e.state:this.#b,{state:f}=e;let m,v={...f},g=!1;if(t._optimisticResults){const o=this.hasListeners(),s=!o&&d(e,t),a=o&&p(e,r,t,n);(s||a)&&(v={...v,...(0,i.k)(f.data,e.options)}),"isRestoring"===t._optimisticResults&&(v.fetchStatus="idle")}let{error:y,errorUpdatedAt:b,status:E}=v;m=v.data;let w=!1;if(void 0!==t.placeholderData&&void 0===m&&"pending"===E){let e;o?.isPlaceholderData&&t.placeholderData===u?.placeholderData?(e=o.data,w=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#T?.state.data,this.#T):t.placeholderData,void 0!==e&&(E="success",m=(0,l.pl)(o?.data,e,t),g=!0)}if(t.select&&void 0!==m&&!w)if(o&&m===s?.data&&t.select===this.#S)m=this.#R;else try{this.#S=t.select,m=t.select(m),m=(0,l.pl)(o?.data,m,t),this.#R=m,this.#v=null}catch(e){this.#v=e}this.#v&&(y=this.#v,m=this.#R,b=Date.now(),E="error");const O="fetching"===v.fetchStatus,S="pending"===E,R="error"===E,T=S&&O,k=void 0!==m,A={status:E,fetchStatus:v.fetchStatus,isPending:S,isSuccess:"success"===E,isError:R,isInitialLoading:T,isLoading:T,data:m,dataUpdatedAt:v.dataUpdatedAt,error:y,errorUpdatedAt:b,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>c.dataUpdateCount||v.errorUpdateCount>c.errorUpdateCount,isFetching:O,isRefetching:O&&!S,isLoadingError:R&&!k,isPaused:"paused"===v.fetchStatus,isPlaceholderData:g,isRefetchError:R&&k,isStale:h(e,t),refetch:this.refetch,promise:this.#g,isEnabled:!1!==(0,l.Eh)(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===A.status?e.reject(A.error):void 0!==A.data&&e.resolve(A.data)},n=()=>{const e=this.#g=A.promise=(0,a.T)();t(e)},o=this.#g;switch(o.status){case"pending":e.queryHash===r.queryHash&&t(o);break;case"fulfilled":"error"!==A.status&&A.data===o.value||n();break;case"rejected":"error"===A.status&&A.error===o.reason||n()}}return A}updateResult(){const e=this.#E,t=this.createResult(this.#y,this.options);if(this.#w=this.#y.state,this.#O=this.options,void 0!==this.#w.data&&(this.#T=this.#y),(0,l.f8)(t,e))return;this.#E=t;this.#F({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#C.size)return!0;const n=new Set(r??this.#C);return this.options.throwOnError&&n.add("error"),Object.keys(this.#E).some((t=>{const r=t;return this.#E[r]!==e[r]&&n.has(r)}))})()})}#N(){const e=this.#m.getQueryCache().build(this.#m,this.options);if(e===this.#y)return;const t=this.#y;this.#y=e,this.#b=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#M()}#F(e){o.jG.batch((()=>{e.listeners&&this.listeners.forEach((e=>{e(this.#E)})),this.#m.getQueryCache().notify({query:this.#y,type:"observerResultsUpdated"})}))}};function d(e,t){return function(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&f(e,t,t.refetchOnMount)}function f(e,t,r){if(!1!==(0,l.Eh)(t.enabled,e)&&"static"!==(0,l.d2)(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&h(e,t)}return!1}function p(e,t,r,n){return(e!==t||!1===(0,l.Eh)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&h(e,r)}function h(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&e.isStaleByTime((0,l.d2)(t.staleTime,e))}var m=r(8972),v=r(7665);r(4848);function g(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var y=m.createContext(g()),b=()=>m.useContext(y),E=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},w=e=>{m.useEffect((()=>{e.clearReset()}),[e])},O=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:o})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(o&&void 0===e.data||(0,l.GU)(r,[e.error,n])),S=m.createContext(!1),R=()=>m.useContext(S),T=(S.Provider,e=>{if(e.suspense){const t=1e3,r=e=>"static"===e?e:Math.max(e??t,t),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>r(n(...e)):r(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}}),k=(e,t)=>e.isLoading&&e.isFetching&&!t,A=(e,t)=>e?.suspense&&t.isPending,I=(e,t,r)=>t.fetchOptimistic(e).catch((()=>{r.clearReset()}));function C(e,t){return function(e,t,r){const n=R(),i=b(),s=(0,v.jE)(r),a=s.defaultQueryOptions(e);s.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=n?"isRestoring":"optimistic",T(a),E(a,i),w(i);const u=!s.getQueryCache().get(a.queryHash),[c]=m.useState((()=>new t(s,a))),d=c.getOptimisticResult(a),f=!n&&!1!==e.subscribed;if(m.useSyncExternalStore(m.useCallback((e=>{const t=f?c.subscribe(o.jG.batchCalls(e)):l.lQ;return c.updateResult(),t}),[c,f]),(()=>c.getCurrentResult()),(()=>c.getCurrentResult())),m.useEffect((()=>{c.setOptions(a)}),[a,c]),A(a,d))throw I(a,c,i);if(O({result:d,errorResetBoundary:i,throwOnError:a.throwOnError,query:s.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;if(s.getDefaultOptions().queries?._experimental_afterQuery?.(a,d),a.experimental_prefetchInRender&&!l.S$&&k(d,n)){const e=u?I(a,c,i):s.getQueryCache().get(a.queryHash)?.promise;e?.catch(l.lQ).finally((()=>{c.updateResult()}))}return a.notifyOnChangeProps?d:c.trackResult(d)}(e,c,t)}},4321:e=>{"use strict";e.exports=i},4337:e=>{"use strict";e.exports=s},4658:(e,t,r)=>{"use strict";function n(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch((()=>{})),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}r.d(t,{T:()=>n})},4712:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.333 0h4c.737 0 1.334.597 1.334 1.333v1.334h8C15.403 2.667 16 3.264 16 4v10.667c0 .736-.597 1.333-1.333 1.333H1.333A1.333 1.333 0 0 1 0 14.667V1.333C0 .597.597 0 1.333 0m0 7.333v7.334h13.334V7.333zm0-1.333h13.334V4H5.334V1.335h-4z" clip-rule="evenodd"></path></svg>'},4848:(e,t,r)=>{"use strict";e.exports=r(1020)},4880:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>m,EN:()=>h,Eh:()=>c,F$:()=>p,GU:()=>I,MK:()=>d,S$:()=>o,ZM:()=>A,ZZ:()=>T,Zw:()=>s,d2:()=>u,f8:()=>y,gn:()=>a,hT:()=>k,j3:()=>l,lQ:()=>i,nJ:()=>f,pl:()=>S,y9:()=>R,yy:()=>O});var n=r(2775),o="undefined"==typeof window||"Deno"in globalThis;function i(){}function s(e,t){return"function"==typeof e?e(t):e}function a(e){return"number"==typeof e&&e>=0&&e!==1/0}function l(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t){return"function"==typeof e?e(t):e}function c(e,t){return"function"==typeof e?e(t):e}function d(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:i,queryKey:s,stale:a}=e;if(s)if(n){if(t.queryHash!==p(s,t.options))return!1}else if(!m(t.queryKey,s))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&((!o||o===t.state.fetchStatus)&&!(i&&!i(t)))}function f(e,t){const{exact:r,status:n,predicate:o,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(h(t.options.mutationKey)!==h(i))return!1}else if(!m(t.options.mutationKey,i))return!1}return(!n||t.state.status===n)&&!(o&&!o(t))}function p(e,t){return(t?.queryKeyHashFn||h)(e)}function h(e){return JSON.stringify(e,((e,t)=>E(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t))}function m(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((r=>m(e[r],t[r]))))}var v=Object.prototype.hasOwnProperty;function g(e,t){if(e===t)return e;const r=b(e)&&b(t);if(!(r||E(e)&&E(t)))return t;const n=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),i=o.length,s=r?new Array(i):{};let a=0;for(let l=0;l<i;l++){const i=r?l:o[l],u=e[i],c=t[i];if(u===c){s[i]=u,(r?l<n:v.call(e,i))&&a++;continue}if(null===u||null===c||"object"!=typeof u||"object"!=typeof c){s[i]=c;continue}const d=g(u,c);s[i]=d,d===u&&a++}return n===i&&a===n?e:s}function y(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function b(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function E(e){if(!w(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!w(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function O(e){return new Promise((t=>{n.zs.setTimeout(t,e)}))}function S(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?g(e,t):t}function R(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function T(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var k=Symbol();function A(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==k?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function I(e,t){return"function"==typeof e?e(...t):!!e}},4945:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M28 6h2v20h-2zM17 6l-1.43 1.393L23.15 15H2v2h21.15l-7.58 7.573L17 26l10-10z"></path></svg>'},4986:(e,t,r)=>{"use strict";r.d(t,{$X:()=>T,$r:()=>m,B_:()=>M,Bf:()=>d,Bv:()=>s,Cq:()=>y,Dr:()=>p,E:()=>A,E$:()=>f,Gt:()=>C,He:()=>I,IT:()=>O,Im:()=>o,N7:()=>k,Nn:()=>l,P6:()=>a,Qd:()=>c,Td:()=>x,W1:()=>E,Xl:()=>g,YH:()=>i,hU:()=>b,ps:()=>R,sL:()=>S,uA:()=>_,vq:()=>w,wK:()=>u});const n=(e,t)=>{if("string"==typeof e){const r=e.trim();return r||(null==t?void 0:t.allowEmpty)?r:(null==t?void 0:t.nullable)?null:void 0}return(null==t?void 0:t.allowNumeric)&&"number"==typeof e&&Number.isFinite(e)?String(e):(null==t?void 0:t.nullable)?null:void 0},o=e=>null==e||""===e||(Array.isArray(e)?0===e.length:"string"==typeof e&&!i(e)),i=e=>"string"==typeof e&&e.trim().length>0,s=e=>{const t=l(e);return null!=t?t:""},a=(e,t="")=>{const r=l(e);return r&&r.length>0?r:t},l=e=>n(e,{allowNumeric:!1}),u=e=>n(e,{allowNumeric:!0}),c=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),d=e=>"number"==typeof e&&Number.isFinite(e),f=e=>e instanceof File,p=e=>{if("boolean"==typeof e)return e;if("number"==typeof e){if(!Number.isFinite(e))return;return 0!==e}const t=n(e,{allowNumeric:!1});if(!t)return;const r=t.toLowerCase();return!!["true","1","yes","y","on"].includes(r)||!["false","0","no","n","off"].includes(r)&&void 0},h=e=>{if(d(e))return e;const t=n(e,{allowNumeric:!1});if(!t)return;const r=Number(t);return Number.isFinite(r)?r:void 0},m=e=>Array.isArray(e)?e:null==e?[]:[e],v=(e,t,r,n)=>{if(!e)return n;for(const n of t){const t=r(e[n]);if(void 0!==t)return t}return n},g=(e,t)=>v(e,t,u),y=(e,t,r=!1)=>{var n;return null!==(n=v(e,t,p,r))&&void 0!==n?n:r},b=(e,t)=>v(e,t,h),E=e=>{const t={};for(const r of e)if(c(r))for(const[e,n]of Object.entries(r))null==n||e in t||(t[e]=n);return t},w=e=>{if(Array.isArray(e))return e;if(c(e))for(const t of["data","items","options"]){const r=e[t];if(Array.isArray(r))return r}},O=e=>{if(!c(e))return;const t=Object.entries(e).filter((([,e])=>void 0!==e));return t.length?Object.fromEntries(t):void 0},S=e=>d(e)||"string"==typeof e?e:"boolean"==typeof e?e?"true":"false":JSON.stringify(null!=e?e:null),R=e=>{if(null!=e){if("string"==typeof e){const t=e.trim();if(!t)return;return S(t)}return"number"==typeof e||"boolean"==typeof e?S(e):void 0}},T=(e,t)=>{const r=R(e);if(void 0===r)return!1;const n=R(t);return void 0!==n&&r===n},k=e=>{if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return String(e);if(void 0===e)return"undefined";if(null===e)return"null";if("object"==typeof e)try{return JSON.stringify(e)}catch(t){return Object.prototype.toString.call(e)}return Object.prototype.toString.call(e)},A=(e,t)=>{var r;return(null!==(r=l(e))&&void 0!==r?r:"").replace(/[^A-Za-z0-9_\-]/g,"").trim()||t},I=(e,t)=>null==e?t?[]:"":t?Array.isArray(e)?e:[e]:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:"",C=(e,t)=>{if(!e||("string"==typeof(r=e)||"function"!=typeof(null==r?void 0:r[Symbol.iterator])))return[];var r;const n=[];let o=0;for(const r of e){const e=t(r,o++);null!=e&&n.push(e)}return n},_=e=>(null==e?void 0:e.length)?new Set(e.map((e=>S(e.value)))):null,M=(e,t)=>({enter:e("phEnter",{field:t}),select:e("phSelect",{field:t})}),L=Object.freeze({email:"phEmail",phone:"phPhone",search:"phSearch"}),x=(e,t,r,n)=>(null==e?void 0:e.placeholder)?e.placeholder:n?r(L[n]):t.enter},5009:(e,t,r)=>{"use strict";r.d(t,{Ou:()=>A,c2:()=>I,xZ:()=>f,z9:()=>d});var n=r(9244),o=r(1658),i=r(5880),s=r(3417),a=r(2238),l=r(930),u=r(1181);let c=!1;const d=e=>{c=e},f=(...e)=>{c&&console.log(...e)},p=(e,t)=>{c&&console.table(e,t)},h={success:"color: #28a745; font-weight: bold",info:"color: #007bff; font-weight: bold",warn:"color: #ffc107; font-weight: bold",error:"color: #dc3545; font-weight: bold",action:"color: #0078d4; font-weight: bold"},m=(e,t="info",...r)=>{c&&console.log(`%c[FME Debug] ${e}`,h[t],...r)},v=()=>{var e;return"undefined"==typeof window?null:null!==(e=window.__FME_DEBUG__)&&void 0!==e?e:null},g=e=>e?{serverUrl:e.fmeServerUrl||"[NONE]",repository:e.repository||"[NONE]",token:e.fmeServerToken?(0,l.gg)(e.fmeServerToken):"[NONE]",timeout:e.requestTimeout,largeArea:e.largeArea,maxArea:e.maxArea}:null,y=e=>{var t,r,n,o;return{method:null!==(t=e.method)&&void 0!==t?t:"[UNKNOWN]",path:null!==(r=e.path)&&void 0!==r?r:"[UNKNOWN]",status:null!==(n=e.status)&&void 0!==n?n:"?",duration:(null!==(o=e.durationMs)&&void 0!==o?o:0)+"ms",ok:void 0===e.ok?"?":e.ok?"\u2713":"\u2717",time:new Date(e.timestamp).toLocaleTimeString()}},b=e=>{var t;try{return null!==(t=e.__FME_DEBUG__)&&void 0!==t?t:null}catch(e){return null}},E=(e,t)=>{t.forEach((t=>{((e,t)=>{try{Object.defineProperty(e,"__FME_DEBUG__",{configurable:!0,enumerable:!1,writable:!0,value:t})}catch(r){try{e.__FME_DEBUG__=t}catch(e){}}})(t,e)}))},w=e=>{for(const t of e){const e=b(t);if(e)return e}return null},O=e=>(t=s.By.NETWORK,r="TEST_ERROR")=>{const n=v();n&&(n.dispatch(n.actions.setError("general",{type:t,code:r,message:"Test error message",severity:s.MU.ERROR,recoverable:!0,timestampMs:Date.now()},e)),m("Test error dispatched","warn"))},S=e=>{var t;return`${void 0===e.ok?"?":e.ok?"\u2713":"\u2717"} ${null!==(t=e.status)&&void 0!==t?t:void 0===e.ok||e.ok?"":"error"}`},R=()=>()=>{var e,t,r,n,o,i;const s=v();if(!s)return"";const a=null===(e=s.getState)||void 0===e?void 0:e.call(s),l=null===(t=s.getConfig)||void 0===t?void 0:t.call(s),u=null!==(n=null===(r=s.getNetworkHistory)||void 0===r?void 0:r.call(s))&&void 0!==n?n:[],c=null!==(i=null===(o=s.getQueryCache)||void 0===o?void 0:o.call(s))&&void 0!==i?i:[],d=g(l),p=(e=>e?{viewMode:e.viewMode,drawingTool:e.drawingTool,hasGeometry:!!e.geometryJson,drawnArea:e.drawnArea,selectedWorkspace:e.selectedWorkspace,hasError:!!(e.errors&&Object.keys(e.errors).length>0)}:null)(a),h={total:(y=u).length,failed:y.filter((e=>void 0!==e.ok&&!e.ok)).length,avgDurationMs:y.length>0?Math.round(y.reduce(((e,t)=>e+t.durationMs),0)/y.length):0,slowRequests:y.filter((e=>e.durationMs>1e3)).length};var y;const b={timestamp:(new Date).toISOString(),widgetId:s.widgetId,config:d,state:p,networkSummary:h,queryCacheSize:c.length,recentRequests:u.slice(-10).map((e=>({method:e.method,path:e.path,status:e.status,ok:e.ok,durationMs:e.durationMs,time:new Date(e.timestamp).toISOString()})))},E=JSON.stringify(b,null,2);return m("Debug Package:","success"),f(E),(e=>{try{navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then((()=>{m("Copied to clipboard","success")}),(e=>{m("Could not copy to clipboard","error"),f("Clipboard error:",e)})):m("Clipboard API not available","warn")}catch(e){m("Clipboard API not available or permissions denied","warn"),f("Clipboard error:",e)}})(E),E},T=e=>{return{widgetId:e.widgetId,getConfig:()=>e.config,getState:()=>(e=>{var t,r;const o=(0,n.getAppStore)().getState()["fme-state"];return null!==(r=null===(t=null==o?void 0:o.byId)||void 0===t?void 0:t[e])&&void 0!==r?r:null})(e.widgetId),getQueryCache:()=>o.q.getQueryCache().getAll().map((e=>({queryKey:e.queryKey,state:e.state,queryHash:e.queryHash}))),getMutationCache:()=>o.q.getMutationCache().getAll().map((e=>({mutationId:e.mutationId,state:e.state}))),clearQueryCache:()=>{o.q.clear(),m("Query cache cleared","warn")},invalidateQueries:e=>{o.q.invalidateQueries(e),m("Queries invalidated","warn",e)},getAppState:()=>(0,n.getAppStore)().getState(),dispatch:e=>{const t=(0,n.getAppStore)();m("Dispatching action:","action",e),t.dispatch(e)},actions:i.fmeActions,getNetworkHistory:()=>(0,a.VM)(),clearNetworkHistory:()=>{(0,a.IH)(),m("Network history cleared","warn")},utils:{maskToken:e=>(0,l.gg)(e),formatArea:(e,t)=>(0,u.Jd)(e,{intl:{formatNumber:(e,t)=>{var r,n;return e.toLocaleString(void 0,{minimumFractionDigits:null!==(r=null==t?void 0:t.minimumFractionDigits)&&void 0!==r?r:0,maximumFractionDigits:null!==(n=null==t?void 0:t.maximumFractionDigits)&&void 0!==n?n:2})}}},t),safeLogParams:e=>e},helpers:{inspectState:()=>{var e;const t=v();if(!t)return;const r=null===(e=t.getState)||void 0===e?void 0:e.call(t);r?(m("Widget State:","success"),p({viewMode:r.viewMode,drawingTool:r.drawingTool,hasGeometry:!!r.geometryJson,drawnArea:r.drawnArea,selectedWorkspace:r.selectedWorkspace})):m("No state found","error")},inspectQueries:()=>{var e,t;const r=v();if(!r)return;const n=null!==(t=null===(e=r.getQueryCache)||void 0===e?void 0:e.call(r))&&void 0!==t?t:[];m("Query Cache:","info"),p(n.map((e=>({queryKey:JSON.stringify(e.queryKey),status:e.state.status,hasData:!!e.state.data}))))},resetToDrawing:(t=e.widgetId,()=>{const e=v();e&&(e.dispatch(e.actions.resetState(t)),m("Widget reset to drawing state","success"))}),testError:O(e.widgetId),inspectNetwork:e=>{var t,r;const n=v();if(!n)return;const o=((e,t)=>{let r=[...e];return(null==t?void 0:t.failed)&&(r=r.filter((e=>void 0!==e.ok&&!e.ok))),(null==t?void 0:t.slow)&&(r=r.filter((e=>e.durationMs>1e3))),r})(null!==(r=null===(t=n.getNetworkHistory)||void 0===t?void 0:t.call(n))&&void 0!==r?r:[],e);0!==o.length?(m(`Network History (${o.length} requests):`,"warn"),p(o.map(y))):m("No network requests found","warn")},showFullState:()=>{var e;const t=v();if(!t)return;const r=null===(e=t.getState)||void 0===e?void 0:e.call(t);r?(m("Full Widget State:","success"),f(r)):m("No state found","error")},showConfig:()=>{var e;const t=v();if(!t)return;const r=null===(e=t.getConfig)||void 0===e?void 0:e.call(t),n=g(r);n?(m("Widget Config:","success"),p(n)):m("No config found","error")},showTimeline:()=>{var e,t,r;const n=v();if(!n)return;const o=null!==(t=null===(e=n.getNetworkHistory)||void 0===e?void 0:e.call(n))&&void 0!==t?t:[],i=null===(r=n.getState)||void 0===r?void 0:r.call(n);if(0===o.length)return void m("No timeline data","warn");m("Timeline:","info");const s=o.map((e=>({time:new Date(e.timestamp).toLocaleTimeString(),event:`${e.method} ${e.path}`,status:S(e),duration:e.durationMs+"ms"})));p(s),i&&(f("Current State:"),f("  View Mode:",i.viewMode),f("  Has Geometry:",!!i.geometryJson),f("  Selected Workspace:",i.selectedWorkspace||"[NONE]"))},exportDebugInfo:R()}};var t},k=e=>{const t=(e=>{if("string"!=typeof e)return null;const t=e.trim();return t.length?t:null})(e.widgetId);if(!t||!e.config)return null;const r=(()=>{if("undefined"==typeof window)return[];const e=[],t=new Set,r=r=>{r&&!t.has(r)&&(t.add(r),e.push(r))};let n=window,o=0;for(;n&&o<100;){r(n);let e=null;try{e=n.parent}catch(e){break}if(!e||e===n||t.has(e))break;n=e,o++}try{r(window.opener)}catch(e){}return e})();return 0===r.length?null:{widgetId:t,config:e.config,targets:r}},A=e=>{const t=k(e);if(!t)return;const{widgetId:r,config:n,targets:o}=t,i=Boolean(w(o)),s=T({widgetId:r,config:n});E(s,o),i||(m("Global debug object available at window.__FME_DEBUG__","action"),m("Try: __FME_DEBUG__.getState() or __FME_DEBUG__.getConfig()","action"),m("Helpers: __FME_DEBUG__.helpers.inspectState() | inspectQueries() | inspectNetwork()","action"),m("Export: __FME_DEBUG__.helpers.exportDebugInfo() | showTimeline() | showConfig()","action"))},I=e=>{const t=k(e);if(!t)return;const{widgetId:r,config:n,targets:o}=t;if(!w(o))return;const i=T({widgetId:r,config:n});E(i,o)}},5132:(e,t,r)=>{"use strict";r.d(t,{Dd:()=>i,Qg:()=>s,VQ:()=>a,aE:()=>o});var n=r(6055);const o=(e,t,r)=>({kind:"loading",message:e,detail:t,messages:r}),i=(e,t)=>({kind:"empty",message:e,actions:t}),s=(e,t)=>({kind:"error",message:e,code:null==t?void 0:t.code,actions:null==t?void 0:t.actions,recoverable:null==t?void 0:t.recoverable,detail:null==t?void 0:t.detail});class a extends Error{constructor(e,t,r,o,i=n.MU.ERROR,s){super(e),this.name="FmeFlowApiError",this.code=t,this.httpStatus=r,this.status=r,this.retryable=Boolean(o),this.isRetryable=this.retryable,this.severity=i,this.details=s?Object.freeze(Object.assign({},s)):void 0}}},5160:(e,t,r)=>{"use strict";var n=r(8972);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,s=n.useRef,a=n.useEffect,l=n.useMemo,u=n.useDebugValue},5502:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 4.429V15h14V1L6.833 7.857zM14 3v11H2V6.114l4.182 2.51a1.2 1.2 0 0 0 1.398-.118z" clip-rule="evenodd"></path></svg>'},5668:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2"></path><path fill="#000" fill-rule="evenodd" d="m11.002 7.002-3 3-3-3v-4a2.893 2.893 0 0 1 3-3 2.893 2.893 0 0 1 3 3zm-3-6h-.038a1.893 1.893 0 0 0-1.963 1.962l.001.018v3.606l2 2 2-2V2.964A1.894 1.894 0 0 0 8.04 1z" clip-rule="evenodd"></path><path fill="#000" d="M4.072 1.908a10.4 10.4 0 0 1-1.939-.433L0 13.077c1.2.504 2.493.746 3.793.711A10.7 10.7 0 0 0 7 13.31v1.678H2v1h11v-1H8v-2a11.9 11.9 0 0 1 4.207-.8A6.62 6.62 0 0 1 16 13.277L13.867 1.674a8.2 8.2 0 0 0-2.236-.61 3.5 3.5 0 0 1 .336 1.066q.514.097 1.009.27l1.72 9.163a8.3 8.3 0 0 0-2.489-.376 12.8 12.8 0 0 0-4.526.852l-.604.204-.363.108a9.7 9.7 0 0 1-2.921.436 9.5 9.5 0 0 1-2.668-.363l1.81-9.697q.53.115 1.068.18v-.173a3.4 3.4 0 0 1 .069-.826"></path></svg>'},5880:(e,t,r)=>{"use strict";r.d(t,{createFmeSelectors:()=>S,fmeActions:()=>v,initialFmeState:()=>g});var n=r(7390),o=r.n(n);function i(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var s=e=>Array.isArray(e)?e:[e];function a(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var l="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function u(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let o,i=0;function s(){let t=r;const{length:s}=arguments;for(let e=0,r=s;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}}const a=t;let u;if(1===t.s)u=t.v;else if(u=e.apply(null,arguments),i++,n){const e=o?.deref?.()??o;null!=e&&n(e,u)&&(u=e,0!==i&&i--);o="object"==typeof u&&null!==u||"function"==typeof u?new l(u):u}return a.s=1,a.v=u,u}return s.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function c(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,o=0,l={},c=e.pop();"object"==typeof c&&(l=c,c=e.pop()),i(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...r,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:h=u,argsMemoizeOptions:m=[],devModeChecks:v={}}=d,g=s(p),y=s(m),b=a(e),E=f((function(){return n++,c.apply(null,arguments)}),...g);const w=h((function(){o++;const e=function(e,t){const r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}(b,arguments);return t=E.apply(null,e),t}),...y);return Object.assign(w,{resultFunc:c,memoizedResultFunc:E,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var d,f=c(u),p=Object.assign(((e,t=f)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>p}),h=r(3417),m=r(9063);const v={setViewMode:(e,t)=>({type:h.ZW.SET_VIEW_MODE,viewMode:e,widgetId:t}),resetState:e=>({type:h.ZW.RESET_STATE,widgetId:e}),setGeometry:(e,t,r)=>({type:h.ZW.SET_GEOMETRY,geometryJson:E(e),drawnArea:t,widgetId:r}),setDrawingTool:(e,t)=>({type:h.ZW.SET_DRAWING_TOOL,drawingTool:e,widgetId:t}),completeDrawing:(e,t,r,n)=>({type:h.ZW.COMPLETE_DRAWING,geometryJson:E(e),drawnArea:t,nextViewMode:r,widgetId:n}),setOrderResult:(e,t)=>({type:h.ZW.SET_ORDER_RESULT,orderResult:e,widgetId:t}),setWorkspaceItems:(e,t)=>({type:h.ZW.SET_WORKSPACE_ITEMS,workspaceItems:e,widgetId:t}),setWorkspaceParameters:(e,t,r)=>({type:h.ZW.SET_WORKSPACE_PARAMETERS,workspaceParameters:e,workspaceName:t,widgetId:r}),setSelectedWorkspace:(e,t)=>({type:h.ZW.SET_SELECTED_WORKSPACE,workspaceName:e,widgetId:t}),setWorkspaceItem:(e,t)=>({type:h.ZW.SET_WORKSPACE_ITEM,workspaceItem:e,widgetId:t}),setError:(e,t,r)=>({type:h.ZW.SET_ERROR,scope:e,error:t,widgetId:r}),setErrors:(e,t)=>{const r={};for(const[t,n]of Object.entries(e))void 0!==n&&(r[t]=n);return{type:h.ZW.SET_ERRORS,errors:r,widgetId:t}},clearError:(e,t)=>({type:h.ZW.CLEAR_ERROR,scope:e,widgetId:t}),clearWorkspaceState:e=>({type:h.ZW.CLEAR_WORKSPACE_STATE,widgetId:e}),resetToDrawing:e=>({type:h.ZW.RESET_TO_DRAWING,widgetId:e}),completeStartup:e=>({type:h.ZW.COMPLETE_STARTUP,widgetId:e}),setLoadingFlag:(e,t,r)=>({type:h.ZW.SET_LOADING_FLAG,flag:e,value:t,widgetId:r}),applyWorkspaceData:(e,t)=>({type:h.ZW.APPLY_WORKSPACE_DATA,workspaceName:e.workspaceName,workspaceParameters:e.parameters,workspaceItem:e.item,widgetId:t}),removeWidgetState:e=>({type:h.ZW.REMOVE_WIDGET_STATE,widgetId:e})},g={viewMode:h.nE.STARTUP_VALIDATION,drawingTool:h.hL.POLYGON,geometryJson:null,drawnArea:0,orderResult:null,workspaceItems:[],selectedWorkspace:null,workspaceParameters:[],workspaceItem:null,loading:{workspaces:!1,parameters:!1,modules:!1,submission:!1,geometryValidation:!1},errors:{}},y=null!==(d=o().default)&&void 0!==d?d:o(),b=e=>{var t;return null!==(t=(0,m.Nn)(e))&&void 0!==t?t:null},E=e=>{if(!e)return null;const t=null==e?void 0:e.toJSON;if("function"!=typeof t)return null;try{return t.call(e)}catch(e){return null}};const w={[h.MU.ERROR]:3,[h.MU.WARNING]:2,[h.MU.INFO]:1},O={general:0,export:1,import:2};const S=e=>{const t=t=>((e,t)=>{var r,n;const o=null===(n=null===(r=null==e?void 0:e["fme-state"])||void 0===r?void 0:r.byId)||void 0===n?void 0:n[t];return null!=o?o:null})(t,e),r=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.geometryJson)&&void 0!==n?n:null},n=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.drawnArea)&&void 0!==n?n:g.drawnArea},o=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.selectedWorkspace)&&void 0!==n?n:g.selectedWorkspace},i=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceParameters)&&void 0!==n?n:g.workspaceParameters},s=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceItem)&&void 0!==n?n:g.workspaceItem},a=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.errors)&&void 0!==n?n:g.errors},l=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.loading)&&void 0!==n?n:g.loading},u=f([r,n],((e,t)=>Boolean(e)&&t>0)),c=f([a],(e=>(e=>{let t=null,r=-1,n=Number.POSITIVE_INFINITY;for(const[o,i]of Object.entries(e)){if(!i)continue;if(!(i.severity in w))continue;if(!(o in O))continue;const e=w[i.severity],s=O[o];(e>r||e===r&&s<n)&&(t={scope:o,details:i},r=e,n=s)}return t})(e))),d=f([r,n,o,i,s,a],((e,t,r,n,o,i)=>{var s;const a=Boolean(e)&&Number.isFinite(t)&&t>0,l=Boolean(b(r)),u=n.length>0||null!==o,c=null==i?void 0:i.general,d=!!c&&(null!==(s=w[c.severity])&&void 0!==s?s:0)>=w[h.MU.ERROR];return a&&l&&u&&!d})),p=f([l],(e=>e.workspaces||e.parameters||e.modules||e.submission));return{selectSlice:t,selectViewMode:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.viewMode)&&void 0!==n?n:g.viewMode},selectDrawingTool:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.drawingTool)&&void 0!==n?n:g.drawingTool},selectGeometryJson:r,selectDrawnArea:n,selectWorkspaceItems:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceItems)&&void 0!==n?n:g.workspaceItems},selectWorkspaceParameters:i,selectWorkspaceItem:s,selectSelectedWorkspace:o,selectOrderResult:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.orderResult)&&void 0!==n?n:g.orderResult},selectErrors:a,selectErrorByScope:e=>r=>{var n,o,i;return null!==(i=null===(o=null===(n=t(r))||void 0===n?void 0:n.errors)||void 0===o?void 0:o[e])&&void 0!==i?i:null},selectLoading:l,selectLoadingFlag:e=>r=>{var n,o,i;return null!==(i=null===(o=null===(n=t(r))||void 0===n?void 0:n.loading)||void 0===o?void 0:o[e])&&void 0!==i?i:g.loading[e]},selectHasValidAoi:u,selectPrimaryError:c,selectCanExport:d,selectIsBusy:p}};y({byId:{}})},5938:e=>{"use strict";e.exports=l},6035:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(6500),o=r(4880),i=new class extends n.Q{#U=!0;#V;#W;constructor(){super(),this.#W=e=>{if(!o.S$&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#V||this.setEventListener(this.#W)}onUnsubscribe(){this.hasListeners()||(this.#V?.(),this.#V=void 0)}setEventListener(e){this.#W=e,this.#V?.(),this.#V=e(this.setOnline.bind(this))}setOnline(e){this.#U!==e&&(this.#U=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#U}}},6055:(e,t,r)=>{"use strict";var n,o,i,s,a,l,u,c,d;r.d(t,{By:()=>a,MU:()=>s,QL:()=>u,Vw:()=>i,ZW:()=>d,hL:()=>o,nE:()=>n,ym:()=>l}),function(e){e.STARTUP_VALIDATION="startup-validation",e.INITIAL="initial",e.DRAWING="drawing",e.WORKSPACE_SELECTION="workspace-selection",e.EXPORT_FORM="export-form",e.EXPORT_OPTIONS="export-options",e.ORDER_RESULT="order-result"}(n||(n={})),function(e){e.POLYGON="polygon",e.RECTANGLE="rectangle"}(o||(o={})),function(e){e.TEXT="text",e.NUMBER="number",e.TEXTAREA="textarea",e.SELECT="select",e.MULTI_SELECT="multi-select",e.CHECKBOX="checkbox",e.PASSWORD="password",e.FILE="file",e.DATE_TIME="date-time",e.URL="url",e.SWITCH="switch",e.RADIO="radio",e.SLIDER="slider",e.NUMERIC_INPUT="numeric-input",e.TAG_INPUT="tag-input",e.COLOR="color",e.DATE="date",e.TIME="time",e.EMAIL="email",e.PHONE="phone",e.SEARCH="search",e.MESSAGE="message",e.TABLE="table",e.MONTH="month",e.WEEK="week",e.COORDSYS="coord-sys",e.ATTRIBUTE_NAME="attribute-name",e.ATTRIBUTE_LIST="attribute-list",e.DB_CONNECTION="db-connection",e.WEB_CONNECTION="web-connection",e.TEXT_OR_FILE="text-or-file",e.REPROJECTION_FILE="reprojection-file",e.SCRIPTED="scripted",e.GEOMETRY="geometry",e.HIDDEN="hidden"}(i||(i={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error"}(s||(s={})),function(e){e.VALIDATION="validation",e.CONFIG="config",e.NETWORK="network",e.MODULE="module",e.GEOMETRY="geometry"}(a||(a={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(l||(l={})),function(e){e.text="text",e.number="number",e.checkbox="checkbox",e.dropdown="dropdown",e.listbox="listbox",e.tree="tree",e.password="password",e.datetime="datetime",e.message="message",e.group="group",e.file="file",e.color="color",e.range="range",e.TEXT="TEXT",e.INTEGER="INTEGER",e.FLOAT="FLOAT",e.BOOLEAN="BOOLEAN",e.CHECKBOX="CHECKBOX",e.CHOICE="CHOICE",e.LISTBOX="LISTBOX",e.LOOKUP_LISTBOX="LOOKUP_LISTBOX",e.LOOKUP_CHOICE="LOOKUP_CHOICE",e.TEXT_OR_FILE="TEXT_OR_FILE",e.TEXT_EDIT="TEXT_EDIT",e.PASSWORD="PASSWORD",e.FILENAME="FILENAME",e.FILENAME_MUSTEXIST="FILENAME_MUSTEXIST",e.DIRNAME="DIRNAME",e.DIRNAME_MUSTEXIST="DIRNAME_MUSTEXIST",e.DIRNAME_SRC="DIRNAME_SRC",e.COORDSYS="COORDSYS",e.STRING="STRING",e.URL="URL",e.LOOKUP_URL="LOOKUP_URL",e.LOOKUP_FILE="LOOKUP_FILE",e.DATE_TIME="DATE_TIME",e.DATETIME="DATETIME",e.DATE="DATE",e.TIME="TIME",e.MONTH="MONTH",e.WEEK="WEEK",e.COLOR="COLOR",e.COLOR_PICK="COLOR_PICK",e.RANGE_SLIDER="RANGE_SLIDER",e.GEOMETRY="GEOMETRY",e.MESSAGE="MESSAGE",e.ATTRIBUTE_NAME="ATTRIBUTE_NAME",e.ATTRIBUTE_LIST="ATTRIBUTE_LIST",e.DB_CONNECTION="DB_CONNECTION",e.WEB_CONNECTION="WEB_CONNECTION",e.REPROJECTION_FILE="REPROJECTION_FILE",e.SCRIPTED="SCRIPTED",e.NOVALUE="NOVALUE",e.GROUP="GROUP"}(u||(u={})),function(e){e.QUEUED="QUEUED",e.PULLED="PULLED",e.RUNNING="RUNNING",e.SUCCESS="SUCCESS",e.FME_FAILURE="FME_FAILURE",e.JOB_FAILURE="JOB_FAILURE",e.ABORTED="ABORTED"}(c||(c={})),function(e){e.SET_VIEW_MODE="fme/SET_VIEW_MODE",e.RESET_STATE="fme/RESET_STATE",e.SET_GEOMETRY="fme/SET_GEOMETRY",e.SET_DRAWING_TOOL="fme/SET_DRAWING_TOOL",e.COMPLETE_DRAWING="fme/COMPLETE_DRAWING",e.SET_ORDER_RESULT="fme/SET_ORDER_RESULT",e.SET_WORKSPACE_ITEMS="fme/SET_WORKSPACE_ITEMS",e.SET_WORKSPACE_PARAMETERS="fme/SET_WORKSPACE_PARAMETERS",e.SET_SELECTED_WORKSPACE="fme/SET_SELECTED_WORKSPACE",e.SET_WORKSPACE_ITEM="fme/SET_WORKSPACE_ITEM",e.SET_ERROR="fme/SET_ERROR",e.SET_ERRORS="fme/SET_ERRORS",e.CLEAR_WORKSPACE_STATE="fme/CLEAR_WORKSPACE_STATE",e.CLEAR_ERROR="fme/CLEAR_ERROR",e.RESET_TO_DRAWING="fme/RESET_TO_DRAWING",e.COMPLETE_STARTUP="fme/COMPLETE_STARTUP",e.REMOVE_WIDGET_STATE="fme/REMOVE_WIDGET_STATE",e.SET_LOADING_FLAG="fme/SET_LOADING_FLAG",e.APPLY_WORKSPACE_DATA="fme/APPLY_WORKSPACE_DATA"}(d||(d={}))},6158:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var n=r(6261),o=r(1692),i=r(8904),s=class extends o.k{#m;#B;#i;#q;constructor(e){super(),this.#m=e.client,this.mutationId=e.mutationId,this.#i=e.mutationCache,this.#B=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#B.includes(e)||(this.#B.push(e),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#B=this.#B.filter((t=>t!==e)),this.scheduleGc(),this.#i.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#B.length||("pending"===this.state.status?this.scheduleGc():this.#i.remove(this))}continue(){return this.#q?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#G({type:"continue"})},r={client:this.#m,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#q=(0,i.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#G({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#G({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#i.canRun(this)});const n="pending"===this.state.status,o=!this.#q.canStart();try{if(n)t();else{this.#G({type:"pending",variables:e,isPaused:o}),await(this.#i.config.onMutate?.(e,this,r));const t=await(this.options.onMutate?.(e,r));t!==this.state.context&&this.#G({type:"pending",context:t,variables:e,isPaused:o})}const i=await this.#q.start();return await(this.#i.config.onSuccess?.(i,e,this.state.context,this,r)),await(this.options.onSuccess?.(i,e,this.state.context,r)),await(this.#i.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(i,null,e,this.state.context,r)),this.#G({type:"success",data:i}),i}catch(t){try{throw await(this.#i.config.onError?.(t,e,this.state.context,this,r)),await(this.options.onError?.(t,e,this.state.context,r)),await(this.#i.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(void 0,t,e,this.state.context,r)),t}finally{this.#G({type:"error",error:t})}}finally{this.#i.runNext(this)}}#G(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),n.jG.batch((()=>{this.#B.forEach((t=>{t.onMutationUpdate(e)})),this.#i.notify({mutation:this,type:"updated",action:e})}))}}},6261:(e,t,r)=>{"use strict";r.d(t,{jG:()=>o});var n=r(2775).Zq;var o=function(){let e=[],t=0,r=e=>{e()},o=e=>{e()},i=n;const s=n=>{t?e.push(n):i((()=>{r(n)}))};return{batch:n=>{let s;t++;try{s=n()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{o((()=>{t.forEach((e=>{r(e)}))}))}))})()}return s},batchCalls:e=>(...t)=>{s((()=>{e(...t)}))},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{o=e},setScheduler:e=>{i=e}}}()},6278:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},6500:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var n=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},6920:(e,t,r)=>{"use strict";r.d(t,{AR:()=>h,SB:()=>d,YD:()=>g,Yn:()=>m,bE:()=>p,dd:()=>u,is:()=>v,sI:()=>l,sq:()=>a,wc:()=>f,yo:()=>c});var n=r(3417),o=r(4986),i=r(3890),s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const a=e=>{var t;const{__upload_file__:r,__remote_dataset_url__:n,opt_geturl:i}=e,a=s(e,["__upload_file__","__remote_dataset_url__","opt_geturl"]),l=(0,o.Nn)(i),u=Object.assign({},a);l&&(u.opt_geturl=l);return{sanitizedFormData:(e=>{const t={};for(const[r,n]of e)t[r]=f(n);return t})(Object.entries(u)),uploadFile:r instanceof File?r:null,remoteUrl:null!==(t=(0,o.Nn)(n))&&void 0!==t?t:""}},l=({finalParams:e,uploadedPath:t,parameters:r,explicitTarget:o})=>{if(!t)return;if(o)return void(e[o]=t);const i=(e=>{if(e)for(const t of e){if(!t)continue;const e=String(t.type);if(n._A.includes(e)&&t.name)return t.name}})(r);i?e[i]=t:void 0===e.SourceDataset&&(e.SourceDataset=t)},u=(e,t)=>{if(!e)return;if(!Boolean((null==t?void 0:t.allowRemoteDataset)&&(null==t?void 0:t.allowRemoteUrlDataset)))return void(void 0!==e.opt_geturl&&delete e.opt_geturl);const r=(0,o.Nn)(e.opt_geturl);r&&(0,i.CL)(r)?e.opt_geturl=r:void 0!==e.opt_geturl&&delete e.opt_geturl},c=e=>{if(!(null==e?void 0:e.uploadTargetParamName))return null;return(0,o.E)(e.uploadTargetParamName,"")||null},d=(e,t)=>{const r=(0,o.Nn)(null==e?void 0:e.name);return r||(t?t("lblUnnamedFile"):"unnamed-file")},f=e=>{var t;if(!e||"object"!=typeof e||Array.isArray(e))return e;if(!(e=>"object"==typeof e&&null!==e&&!Array.isArray(e)&&"mode"in e)(e))return e;const r=e;if("file"===r.mode)return(e=>{var t,r,n;return(0,o.E$)(e.file)?e.file:null!==(n=null!==(t=(0,o.Nn)(e.fileName))&&void 0!==t?t:(0,o.wK)(null!==(r=e.fileName)&&void 0!==r?r:e.file))&&void 0!==n?n:""})(r);if("text"===r.mode){return null!==(t=(0,o.wK)(r.text))&&void 0!==t?t:""}return e},p=e=>{var t;const r={};for(const n of e)(null==n?void 0:n.name)&&(r[n.name]=null!==(t=n.defaultValue)&&void 0!==t?t:"");return r},h=(e,t,r,n,o,i)=>!(!e||!t||"order-result"===r)&&("drawing"===r?Boolean(i&&i>0)||Boolean(o):n>0&&"initial"!==r),m=(e,t,r,n)=>{if(n)return!1;return("workspace-selection"===r||"export-options"===r)&&e},v=e=>{const t=new Set,r=[];for(const n of e)t.has(n)||(t.add(n),r.push(n));return r},g=(e,t)=>(0,o.Gt)(e,(e=>{if("object"!=typeof e||null===e)return;const r=e;return(0,o.Nn)(r[t])}))},7390:(e,t,r)=>{var n;!function(){"use strict";var o=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var a="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,a)))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var d=["setPrototypeOf"],f=(d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function p(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function h(e,t){return s(e,a,!0),e}function m(e,t){var r=e[t];s(e,t,(function(){return B(r.apply(e,arguments))}))}function v(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=B.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=S.call(this);return o[e]=B(t),b(o)}d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),p.prototype=new Error,p.prototype.constructor=Error;var g=B([]);function y(e,t,r){var n=e[0];if(1===e.length)return v.call(this,n,t,r);var o,i=e.slice(1),s=this[n];if("object"==typeof s&&null!==s)o=B.setIn(s,i,t);else{var a=i[0];o=""!==a&&isFinite(a)?y.call(g,i,t):x.call(L,i,t)}if(n in this&&s===o)return this;var l=S.call(this);return l[n]=o,b(l)}function b(e){for(var t in f){if(f.hasOwnProperty(t))m(e,f[t])}o.use_static||(s(e,"flatMap",w),s(e,"asObject",R),s(e,"asMutable",S),s(e,"set",v),s(e,"setIn",y),s(e,"update",j),s(e,"updateIn",D),s(e,"getIn",F));for(var r=0,n=e.length;r<n;r++)e[r]=B(e[r]);return h(e)}function E(){return new Date(this.getTime())}function w(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return b(r)}function O(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=i(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return W(r)}function S(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(T(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function R(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this),i=o[0],s=o[1];r[i]=s}return W(r)}function T(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,a)||e instanceof Date?e:B.asMutable(e,{deep:!0})}function k(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function A(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,o=Array.isArray(e),s=t&&t.deep,a=t&&t.mode||"merge",l=t&&t.merger;function d(e,n,o){var a,d=B(n[o]),f=l&&l(e[o],d,t),p=e[o];void 0===r&&void 0===f&&e.hasOwnProperty(o)&&u(d,p)||(u(p,a=void 0!==f?f:s&&c(p)&&c(d)?B.merge(p,d,t):d)&&e.hasOwnProperty(o)||(void 0===r&&(r=k(e,i(e))),r[o]=a))}if(o)for(var f=0,p=e.length;f<p;f++){var h=e[f];for(n in h)h.hasOwnProperty(n)&&d(void 0!==r?r:this,h,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&d(this,e,n);"replace"===a&&function(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=k(e,i(e))),delete r[n])}(this,e)}return void 0===r?this:W(r)}function I(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return B.merge(this,e,{deep:r,mode:"replace"})}var C,_,M,L=B({});function x(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return N.call(this,n,t,r);var o,s=e.slice(1),a=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?B.setIn(a,s,t):x.call(L,s,t),this.hasOwnProperty(n)&&a===o)return this;var l=k(this,i(this));return l[n]=o,W(l)}function N(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=B.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=k(this,i(this));return o[e]=B(t),W(o)}function j(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return B.set(this,e,t.apply(n,[n].concat(r)))}function P(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function D(e,t){var r=Array.prototype.slice.call(arguments,2),n=P(this,e);return B.setIn(this,e,t.apply(n,[n].concat(r)))}function F(e,t){var r=P(this,e);return void 0===r?t:r}function U(e){var t,r=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=T(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function V(){return{}}function W(e){return o.use_static||(s(e,"merge",A),s(e,"replace",I),s(e,"without",O),s(e,"asMutable",U),s(e,"set",N),s(e,"setIn",x),s(e,"update",j),s(e,"updateIn",D),s(e,"getIn",F)),h(e)}function B(e,t,r){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(B);if(Array.isArray(e))return b(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||s(i,"asMutable",E),h(i);var i,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:V)();for(var c in e)Object.getOwnPropertyDescriptor(e,c)&&(u[c]=B(e[c],void 0,r));return W(u)}function q(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function G(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return B.from=B,B.isImmutable=l,B.ImmutableError=p,B.merge=q(A),B.replace=q(I),B.without=q(O),B.asMutable=(C=U,_=S,M=E,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?_.apply(t,e):t instanceof Date?M.apply(t,e):C.apply(t,e)}),B.set=G(N,v),B.setIn=G(x,y),B.update=q(j),B.updateIn=q(D),B.getIn=q(F),B.flatMap=q(w),B.asObject=q(R),o.use_static||(B.static=e({use_static:!0})),Object.freeze(B),B}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},7413:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 1 8 1a7 7 0 0 1 0 14" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M11.53 5.47a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06L7 8.94l3.47-3.47a.75.75 0 0 1 1.06 0" clip-rule="evenodd"></path></svg>'},7665:(e,t,r)=>{"use strict";r.d(t,{Ht:()=>a,jE:()=>s});var n=r(8972),o=r(4848),i=n.createContext(void 0),s=e=>{const t=n.useContext(i);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},a=({client:e,children:t})=>(n.useEffect((()=>(e.mount(),()=>{e.unmount()})),[e]),(0,o.jsx)(i.Provider,{value:e,children:t}))},7711:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m1.373 8 2.07-2.071.83.828L2.2 8.828a3.515 3.515 0 0 0 4.97 4.971l2.072-2.071.828.828L8 14.627A4.686 4.686 0 1 1 1.373 8M13.799 7.172l-2.071 2.07.828.83L14.627 8A4.686 4.686 0 1 0 8 1.373l-2.071 2.07.828.83L8.828 2.2a3.515 3.515 0 0 1 4.971 4.97"></path><path fill="#000" d="M5.515 9.657a.586.586 0 0 0 .828.828l4.142-4.142a.586.586 0 0 0-.828-.828z"></path></svg>'},8418:(e,t,r)=>{"use strict";r(5160)},8904:(e,t,r)=>{"use strict";r.d(t,{II:()=>c,cc:()=>u,v_:()=>l});var n=r(9658),o=r(6035),i=r(4658),s=r(4880);function a(e){return Math.min(1e3*2**e,3e4)}function l(e){return"online"!==(e??"online")||o.t.isOnline()}var u=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function c(e){let t,r=!1,c=0;const d=(0,i.T)(),f=()=>"pending"!==d.status,p=()=>n.m.isFocused()&&("always"===e.networkMode||o.t.isOnline())&&e.canRun(),h=()=>l(e.networkMode)&&e.canRun(),m=e=>{f()||(t?.(),d.resolve(e))},v=e=>{f()||(t?.(),d.reject(e))},g=()=>new Promise((r=>{t=e=>{(f()||p())&&r(e)},e.onPause?.()})).then((()=>{t=void 0,f()||e.onContinue?.()})),y=()=>{if(f())return;let t;const n=0===c?e.initialPromise:void 0;try{t=n??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(m).catch((t=>{if(f())return;const n=e.retry??(s.S$?0:3),o=e.retryDelay??a,i="function"==typeof o?o(c,t):o,l=!0===n||"number"==typeof n&&c<n||"function"==typeof n&&n(c,t);!r&&l?(c++,e.onFail?.(c,t),(0,s.yy)(i).then((()=>p()?void 0:g())).then((()=>{r?v(t):y()}))):v(t)}))};return{promise:d,status:()=>d.status,cancel:t=>{if(!f()){const r=new u(t);v(r),e.onCancel?.(r)}},continue:()=>(t?.(),d),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:h,start:()=>(h()?y():g().then(y),d)}}},8972:e=>{"use strict";e.exports=n},9063:(e,t,r)=>{"use strict";r.d(t,{_R:()=>u._R,sI:()=>a.sI,$X:()=>o.$X,LH:()=>i.LH,Fm:()=>O,uA:()=>o.uA,Jo:()=>u.Jo,Ej:()=>i.Ej,gV:()=>f,c$:()=>S.c$,AR:()=>a.AR,RB:()=>w,ZF:()=>R.ZF,UE:()=>E,GC:()=>l.GC,Mb:()=>S.Mb,Yw:()=>k,dB:()=>S.dB,Mm:()=>u.Mm,PE:()=>i.PE,$j:()=>S.$j,o4:()=>u.o4,WZ:()=>i.WZ,SP:()=>i.SP,hk:()=>i.hk,Wx:()=>i.Wx,BU:()=>i.BU,Jd:()=>i.Jd,Ok:()=>l.Ok,JR:()=>i.JR,xi:()=>i.xi,kz:()=>i.kz,hS:()=>S.hS,sJ:()=>l.sJ,SB:()=>a.SB,Td:()=>o.Td,FK:()=>i.FK,Xk:()=>i.Xk,bE:()=>a.bE,OD:()=>i.OD,HK:()=>i.HK,rI:()=>i.rI,m4:()=>S.m4,zf:()=>l.zf,Im:()=>o.Im,E$:()=>o.E$,Bf:()=>o.Bf,Fh:()=>S.Fh,xs:()=>S.xs,YH:()=>o.YH,Qd:()=>o.Qd,B9:()=>R.B9,ps:()=>l.ps,IP:()=>m,fA:()=>l.fA,B_:()=>o.B_,qm:()=>S.qm,fV:()=>l.fV,W1:()=>o.W1,He:()=>o.He,sL:()=>o.sL,Eo:()=>u.Eo,wk:()=>p,FJ:()=>o.ps,$e:()=>i.$e,dC:()=>i.dC,Lz:()=>u.Lz,sq:()=>a.sq,H9:()=>R.H9,Cq:()=>o.Cq,hU:()=>o.hU,Xl:()=>o.Xl,Fv:()=>b,cL:()=>u.cL,lH:()=>S.lH,Ad:()=>s.Ad,I0:()=>i.I0,yo:()=>a.yo,Wz:()=>l.Wz,qC:()=>S.qC,yC:()=>S.yC,dd:()=>a.dd,rB:()=>R.rB,Yn:()=>a.Yn,bN:()=>l.bN,pZ:()=>R.pZ,Z_:()=>i.Z_,v:()=>i.Ox,RM:()=>i.RM,$r:()=>o.$r,Dr:()=>o.Dr,IT:()=>o.IT,P6:()=>o.P6,wK:()=>o.wK,Nn:()=>o.Nn,Bv:()=>o.Bv,vq:()=>o.vq,bQ:()=>T.bQ});var n=r(5880),o=r(4986),i=r(1181),s=r(1618),a=r(6920),l=r(1138),u=r(3040),c=r(9244),d=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const f=(e,t)=>{const r=[e[0],e[1],e[2]],n="number"==typeof(null==t?void 0:t.outlineWidth)?t.outlineWidth:2,o=Math.min(5,Math.max(.1,n)),i="number"==typeof(null==t?void 0:t.fillOpacity)?t.fillOpacity:.2,s=Math.min(1,Math.max(0,i)),a={type:"simple-fill",color:[...r,s],outline:{color:r,width:o}};return{HIGHLIGHT_SYMBOL:a,DRAWING_SYMBOLS:{polygon:a,polyline:{type:"simple-line",color:r,width:o},point:{type:"simple-marker",style:"circle",size:8,color:r,outline:{color:[255,255,255],width:1}}}}},p=e=>{if(!e)return null;const t=e.toLowerCase();return"extent"===t||"rectangle"===t?"rectangle":"polygon"===t?"polygon":null},h=e=>{var t;return null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e};function m(e){return d(this,void 0,void 0,(function*(){if(!Array.isArray(e)||!e.length)return[];const t=null===globalThis||void 0===globalThis?void 0:globalThis.__ESRI_TEST_STUB__;if("function"==typeof t)return t(e);try{const t=yield Promise.resolve().then(r.bind(r,2686)),n=null==t?void 0:t.loadArcGISJSAPIModules;if("function"!=typeof n)throw new Error("ARCGIS_MODULE_ERROR");return((yield n(e))||[]).map(h)}catch(e){throw console.log("Critical: Failed to load jimu-arcgis module",e),new Error("ARCGIS_MODULE_ERROR")}}))}const v=(e,t)=>{try{e&&"function"==typeof e.closePopup&&e.closePopup()}catch(e){}},g=(e,t)=>{if(!e)return null;const r=e,n="boolean"==typeof r.autoOpenEnabled?r.autoOpenEnabled:void 0;v(t);try{r.autoOpenEnabled=!1}catch(e){}let o=null;if("function"==typeof e.watch)try{o=e.watch("visible",(e=>{e&&v(t)}))}catch(e){}return{popup:e,view:t||null,handle:o,prevAutoOpen:n}},y=e=>{var t,r;if(e){try{null===(r=null===(t=e.handle)||void 0===t?void 0:t.remove)||void 0===r||r.call(t)}catch(e){}(e=>{const t=e.popup;try{const r="boolean"!=typeof e.prevAutoOpen||e.prevAutoOpen;t.autoOpenEnabled=r}catch(e){}})(e)}};const b=new class{constructor(){this.record=null,this.owners=new Set}acquire(e,t,r){var n;if(!t)return void this.release(e);const o=null===(n=this.record)||void 0===n?void 0:n.popup;if(!o||o!==t){this.teardown(),this.owners.clear();const e=g(t,r);if(!e)return;this.record=e}this.owners.add(e)}release(e){this.owners.delete(e)&&0===this.owners.size&&this.teardown()}releaseAll(){(0!==this.owners.size||this.record)&&(this.owners.clear(),this.teardown())}teardown(){this.record&&(y(this.record),this.record=null)}},E=(e,t)=>{if(!e)return[];const r=[];for(const[n,o]of Object.entries(e)){if(n===t||!o)continue;const e=o.state;if(!e)continue;const i=String(e).toUpperCase();i!==c.WidgetState.Closed&&i!==c.WidgetState.Hidden&&r.push(n)}return r};function w(e){const t=[];let r=0,n=!1;if(!e)return{attributes:t,layerCount:r,totalAttributeCount:0,hasGeometry:n};const o=e.map;if(!o||!o.layers)return{attributes:t,layerCount:r,totalAttributeCount:0,hasGeometry:n};try{const e=o.allLayers||o.layers;if(!e)return{attributes:t,layerCount:r,totalAttributeCount:0,hasGeometry:n};e.forEach((e=>{if(!e||!e.type)return;const o="feature"===e.type,i="graphics"===e.type;if(!o&&!i)return;const s=e.fields;if(!s||!Array.isArray(s)||0===s.length)return;r++;const a=e.title||e.name||e.id||"Unknown Layer",l=e.id,u=e.geometryType;u&&(n=!0),s.forEach((e=>{var r,n,o;if(!e||!e.name)return;let i;if(e.domain)if("coded-value"===e.domain.type){const t=e.domain;i={type:t.type||"unknown",codedValues:null===(r=t.codedValues)||void 0===r?void 0:r.map((e=>({name:e.name,code:e.code})))}}else i={type:e.domain.type||"unknown"};const s={name:e.name,alias:e.alias||e.name,type:e.type||"string",nullable:null===(n=e.nullable)||void 0===n||n,editable:null===(o=e.editable)||void 0===o||o,layerName:a,layerId:l,geometryType:u,domain:i};t.push(s)}))}))}catch(e){console.log("Error collecting layer attributes",e)}return{attributes:t,layerCount:r,totalAttributeCount:t.length,hasGeometry:n}}function O(e){if(!e||!e.attributes||0===e.attributes.length)return[];const t=new Set,r=[];return e.attributes.forEach((e=>{if(!e||!e.name)return;if(t.has(e.name))return;t.add(e.name);const n=e.layerName&&"Unknown Layer"!==e.layerName?`${e.name} (${e.layerName})`:e.alias||e.name;r.push({value:e.name,label:n})})),r.sort(((e,t)=>e.label.localeCompare(t.label))),r}var S=r(930),R=r(3890),T=r(2242);const k=(e,t)=>({setDrawingTool:r=>{e(n.fmeActions.setDrawingTool(r,t))},setViewMode:r=>{e(n.fmeActions.setViewMode(r,t))},setError:(r,o)=>{e(n.fmeActions.setError(r,o,t))},clearError:r=>{e(n.fmeActions.clearError(r,t))},setGeometry:(r,o)=>{e(n.fmeActions.setGeometry(r,o,t))},setWorkspaceItems:r=>{e(n.fmeActions.setWorkspaceItems(r,t))},applyWorkspaceData:r=>{e(n.fmeActions.applyWorkspaceData(r,t))},completeDrawing:(r,o,i)=>{e(n.fmeActions.completeDrawing(r,o,i,t))},clearWorkspaceState:()=>{e(n.fmeActions.clearWorkspaceState(t))},resetState:()=>{e(n.fmeActions.resetState(t))},resetToDrawing:()=>{e(n.fmeActions.resetToDrawing(t))},setLoadingFlag:(r,o)=>{e(n.fmeActions.setLoadingFlag(r,o,t))},setOrderResult:r=>{e(n.fmeActions.setOrderResult(r,t))},completeStartup:()=>{e(n.fmeActions.completeStartup(t))},removeWidgetState:()=>{e(n.fmeActions.removeWidgetState(t))}})},9124:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C1 1.567 4.134 0 8 0s7 1.567 7 3.5M2 5.304V6.5C2 7.692 4.615 9 8 9s6-1.308 6-2.5V5.304C12.775 6.32 10.546 7 8 7s-4.775-.68-6-1.696M8 10c2.546 0 4.775-.68 6-1.696V9.5c0 1.192-2.615 2.5-6 2.5s-6-1.308-6-2.5V8.304C3.225 9.32 5.454 10 8 10m6 1.304C12.775 12.32 10.546 13 8 13s-4.775-.68-6-1.696V12.5C2 13.692 4.615 15 8 15s6-1.308 6-2.5zM14 3.5C14 4.692 11.385 6 8 6S2 4.692 2 3.5 4.615 1 8 1s6 1.308 6 2.5" clip-rule="evenodd"></path></svg>'},9244:e=>{"use strict";e.exports=r},9658:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(6500),o=r(4880),i=new class extends n.Q{#$;#V;#W;constructor(){super(),this.#W=e=>{if(!o.S$&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#V||this.setEventListener(this.#W)}onUnsubscribe(){this.hasListeners()||(this.#V?.(),this.#V=void 0)}setEventListener(e){this.#W=e,this.#V?.(),this.#V=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#$!==e&&(this.#$=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#$?this.#$:"hidden"!==globalThis.document?.visibilityState}}},9757:(e,t,r)=>{"use strict";r.d(t,{X:()=>a,k:()=>l});var n=r(4880),o=r(6261),i=r(8904),s=r(1692),a=class extends s.k{#z;#Q;#H;#m;#q;#s;#K;constructor(e){super(),this.#K=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#m=e.client,this.#H=this.#m.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#z=u(this.options),this.state=e.state??this.#z,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#q?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=u(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#z=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#H.remove(this)}setData(e,t){const r=(0,n.pl)(this.state.data,e,this.options);return this.#G({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#G({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#q?.promise;return this.#q?.cancel(e),t?t.then(n.lQ).catch(n.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#z)}isActive(){return this.observers.some((e=>!1!==(0,n.Eh)(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some((e=>"static"===(0,n.d2)(e.options.staleTime,this)))}isStale(){return this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,n.j3)(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#q?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#q?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#H.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#q&&(this.#K?this.#q.cancel({revert:!0}):this.#q.cancelRetry()),this.scheduleGc()),this.#H.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#G({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#q?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#q)return this.#q.continueRetry(),this.#q.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const r=new AbortController,o=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#K=!0,r.signal)})},s=()=>{const e=(0,n.ZM)(this.options,t),r=(()=>{const e={client:this.#m,queryKey:this.queryKey,meta:this.meta};return o(e),e})();return this.#K=!1,this.options.persister?this.options.persister(e,r,this):e(r)},a=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#m,state:this.state,fetchFn:s};return o(e),e})();this.options.behavior?.onFetch(a,this),this.#Q=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===a.fetchOptions?.meta||this.#G({type:"fetch",meta:a.fetchOptions?.meta}),this.#q=(0,i.II)({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:e=>{e instanceof i.cc&&e.revert&&this.setState({...this.#Q,fetchStatus:"idle"}),r.abort()},onFail:(e,t)=>{this.#G({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#G({type:"pause"})},onContinue:()=>{this.#G({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const e=await this.#q.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#H.config.onSuccess?.(e,this),this.#H.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof i.cc){if(e.silent)return this.#q.promise;if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#G({type:"error",error:e}),this.#H.config.onError?.(e,this),this.#H.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#G(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...l(t.data,this.options),fetchMeta:e.meta??null};case"success":const r={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#Q=e.manual?r:void 0,r;case"error":const n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),o.jG.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#H.notify({query:this,type:"updated",action:e})}))}};function l(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,i.v_)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function u(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}}},t={};function u(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,u),o.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="";var c={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(c),u.d(c,{__set_webpack_public_path__:()=>wt,default:()=>Et});var e=u(9244);u(8972),u(8418);function t(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function r(e,r){if(t(e,r))return!0;if("object"!=typeof e||null===e||"object"!=typeof r||null===r)return!1;const n=Object.keys(e),o=Object.keys(r);if(n.length!==o.length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(r,n[o])||!t(e[n[o]],r[n[o]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;"undefined"!=typeof globalThis&&globalThis;var n=u(7665),o=function(){return null},i=u(2686),s=u(1658),a=u(4321),l=u(4337),d=u(2242),f=u(3417);const p={btnBack:"Back",btnSubmit:"Submit Export",btnCancel:"Cancel",btnRetry:"Retry",btnNewOrder:"New Export",btnEnd:"Close",btnDownload:"Download",btnDownloadFallback:"Click here if download didn't start",btnAddRow:"Add Row",btnDeleteRow:"Delete Row",btnMoveUp:"Move Up",btnMoveDown:"Move Down",btnReuseArea:"New Export with Same Area",btnReload:"Reload Page",btnRetryValidation:"Retry",btnOpenSettings:"Open Settings",lblJobId:"Job ID",lblWorkspace:"Workspace",lblEmail:"Email Address",lblFilename:"Filename",lblDelivery:"Delivery Method",lblFmeStatus:"FME Flow Status",lblFmeMessage:"FME Flow Message",lblErrorCode:"Error Code",lblBlobType:"File Type",lblBlobSize:"File Size",lblGeomPreview:"Geometry Preview (Esri JSON)",lblUploadFile:"Upload File (TEMP Resource)",lblRemoteUrl:"Remote URL (HTTPS)",lblTableValue:"Value",lblTableActions:"Actions",lblUnnamedFile:"Unnamed File",lblActions:"Actions",lblDrawLayer:"Drawing Layer",titleOrderConfirmed:"Export Submitted",titleOrderComplete:"Export Completed",titleOrderFailed:"Export Failed",titleOrderCancelled:"Export Cancelled",titleConfigParams:"Configure Workspace Parameters",actionRetry:"Retry",actionReload:"Reload",actionOpenSettings:"Open Settings",statusSubmitting:"Submitting job\u2026",statusProcessing:"FME Flow processing\u2026",statusValidating:"Checking settings\u2026",statusPreparing:"Preparing\u2026",statusUploading:"Uploading\u2026",statusTransforming:"Transforming\u2026",statusDownloading:"Downloading\u2026",statusInitMap:"Preparing map tools\u2026",statusLoadWorkspaces:"Fetching workspaces\u2026",statusLoadParams:"Fetching workspace parameters\u2026",statusValidateGeom:"Validating geometry\u2026",statusPreparingMapTools:"Preparing map tools\u2026",statusValidatingMap:"Verifying map configuration\u2026",statusValidatingConnection:"Testing connection to FME Flow\u2026",statusValidatingEmail:"Validating email address\u2026",statusCheckMap:"Verifying map configuration\u2026",statusCheckConnection:"Testing connection to FME Flow\u2026",statusCheckEmail:"Validating email address\u2026",validatingStartup:"Validating widget startup\u2026",submittingOrder:"Submitting export job\u2026",submittingOrderSync:"Processing export\u2026",msgOrderCancelled:"Export cancelled",msgOrderTimeout:"Export cancelled due to time limit. FME Flow workspace exceeded maximum runtime",msgNoResult:"Nothing available",msgJobCancelled:"Job cancelled",msgJobTimeout:"Job exceeded time limit",msgJobFailed:"Job failed in FME Flow",msgProcessingWait:"Processing. Please wait\u2026",msgValidating:"Validating parameter values\u2026",msgUploading:"Uploading data source\u2026",msgConfiguring:"Configuring FME Flow job\u2026",msgProcessingOrder:"Processing export\u2026",msgTransforming:"FME Flow transforming data\u2026",msgPrepDownload:"Preparing download\u2026",msgLoadingDraw:"Loading drawing tools\u2026",msgCheckGeom:"Validating geometry\u2026",msgPleaseWait:"This can take a few minutes\u2026",msgProcessingActive:"FME Flow processing\u2026",msgLargeArea:"The area ({current}) is large and may result in longer processing time",msgLargeAreaThreshold:"The area {current} is large and may result in longer processing time. Recommended area is below {threshold}",msgNoWorkspaces:"No workspaces found in this repository",msgAsyncForced:"The area {area} is large and may result in longer processing time",forcedAsyncArea:"The area {area} is large and may result in longer processing time",forcedAsyncUrlLength:"URL length ({urlLength} characters) exceeds limit. Automatically switched to email notification mode",msgNoGeometry:"No area selected. Draw an area on the map",msgGeomReady:"Area defined ({rings} polygons, {vertices} vertices)",msgContactSupport:"Please contact support at {email}",msgEmailSent:"Email notification will be sent when job is complete",msgTableEmpty:"No rows have been added",msgSetupWidget:"Widget needs to be configured before it can be used",msgCheckSettings:"Check connection settings in configuration panel",msgCheckToken:"Verify API token in settings",msgCheckUrl:"Check FME Flow server URL in settings",msgCheckRepo:"Select a valid repository in settings",msgCheckNetwork:"Check network connection and firewall settings",msgServerUrlReq:"Enter FME Flow server URL",msgTokenReq:"Enter API token for FME Flow",msgUrlTooLong:"URL exceeds maximum allowed length",msgHeadersLarge:"Request headers are too large",msgOffline:"No network connection",msgCorsBlock:"Request was blocked by CORS policy",msgRateLimit:"Too many requests. Please wait and try again",msgConfigInvalid:"Invalid widget configuration",msgCancelled:"Request was cancelled by user",msgTimeout:"Request exceeded time limit",msgWorkspacesReady:"Workspaces available for selection",msgFormReady:"Parameters ready for input",msgOrderSuccess:"Export was submitted",msgOrderFail:"Export failed",msgJobCompletionPublished:"Export job completion notification sent to other widgets",msgJobMessagePublishFailed:"Failed to notify other widgets about export completion",errNoSetup:"Widget is not configured",errTokenInvalid:"API token is missing or invalid",errNoRepository:"Repository cannot be accessed",errNoAccess:"Repository could not be verified with current API token. Check permissions or select another repository",errServerUnreach:"FME Flow server cannot be reached",errConnectFail:"Connection to FME Flow failed",errAuthFail:"Authentication to FME Flow failed",errValidateFail:"Server invalid or incorrect configuration",errStartupFail:"Widget could not start",errSubmitFail:"Job could not be submitted",errWorkspaceLoad:"Workspace could not be loaded",errParamsLoad:"Workspace parameters could not be fetched",errRepoLoad:"Repository could not be loaded",errDatasetResolve:"Data source could not be determined",errGeomProcess:"Geometry processing failed",errNoServerUrl:"FME Flow server URL is missing",errNoToken:"API token is missing",errTokenSpace:"API token cannot contain spaces",errNoRepoSelected:"No repository has been selected",errNoWorkspace:"No workspace has been selected",errRepoInvalid:"Invalid repository",errWorkspaceInvalid:"Invalid workspace",errOrderFail:"Export order failed",errJobSubmit:"FME Flow job could not be submitted",errMapInit:"Map could not be initialized",errDrawComplete:"Drawing could not be completed",errNoUserEmail:"User email address is missing",errLoadTimeout:"Loading exceeded time limit",errEmailInvalid:"Invalid email address",errTransformFailed:"FME Flow transformation failed. See log file above for details",errLoadWorkspaces:"Could not fetch workspaces from repository",errLoadParams:"Could not fetch workspace parameters",errNoConfig:"Export configuration is missing",errGeomParse:"Could not parse geometry JSON",errFileLarge:"File is too large. Max {maxSize} MB allowed",errFileType:"File type not supported. Please use one of the following formats: .zip, .kmz, .json, .geojson, .gml",errFileInvalid:"Invalid file",errDateTimeFormat:"Invalid date format. Use YYYY-MM-DD HH:MM:SS",errGeomMissing:"Geometry is missing",errGeomType:"Only polygon geometry is allowed",errGeomInvalid:"Invalid geometry",errGeomSerialize:"Geometry could not be serialized",errGeomNotSimple:"Polygon intersects itself",errGeomValidate:"Geometry could not be validated",errAreaLarge:"Area exceeds maximum limit",errGeomReq:"No geometry has been specified",errGeomPolygon:"Geometry must be a polygon",errorTokenIssue:"API token is missing or invalid",errorServerUnreachable:"FME Flow server cannot be reached",errorSetupRequired:"Widget is not configured",errorValidationFailed:"Server invalid or incorrect configuration",errorStartupFailed:"Widget could not start",errorRepositoryAccess:"Repository cannot be accessed",errorJobSubmission:"FME Flow job could not be submitted",errorMapInit:"Map could not be initialized",errorOrderFailed:"Export failed",errorWidgetIdMissing:"Widget ID is missing or invalid",configurationInvalid:"Invalid widget configuration",userEmailMissingError:"User email address is missing",geometryMissingCode:"Geometry is missing",geometryTypeInvalidCode:"Only polygon geometry is allowed",geometrySerializationFailedCode:"Geometry could not be serialized",geometryInvalidCode:"Invalid geometry",geometryAreaTooLargeCode:"Area exceeds maximum limit",urlTooLongMessage:"URL exceeds maximum allowed length",requestTimedOut:"Request exceeded time limit",requestAborted:"Request was aborted",rateLimitExceeded:"Too many requests. Please wait and try again",headersTooLargeMessage:"Request headers are too large",corsBlocked:"Request was blocked by CORS policy",REMOTE_DATASET_WORKSPACE_REQUIRED:"FME Flow workspace requires remote dataset configuration",failedToLoadWorkspaces:"Failed to load workspaces",valRequiredField:"This field is required",valSingleError:"Fill in the required field",valMultipleErrors:"Fill in all required fields",valIntegerOnly:"Only integers allowed (no decimals)",valInvalidNumber:"Invalid numeric value",valGreaterThan:"Must be greater than {value}",valAtLeast:"Must be at least {value}",valLessThan:"Must be less than {value}",valAtMost:"Must be at most {value}",phSelect:"Select {field}\u2026",phEnter:"Enter {field}\u2026",phTags:"Enter tags (separate with commas)",phEmail:"example@example.com",phPhone:"+46 70-123 45 67",phSearch:"Search\u2026",phSelectOption:"Select an option",optSyncMode:"Direct Download",optAsyncMode:"Email Notification",optPolygon:"Polygon",optRectangle:"Rectangle",optTextInput:"Text Input",optFileInput:"File Upload",tipDrawMode:"Select drawing mode to define export area",tipDrawPolygon:"Draw a polygon to define export area",tipDrawRectangle:"Draw a rectangle to define export area",tipSubmitOrder:"Submit export to FME Flow",tipCancel:"Cancel and start over",tipReuseArea:"Create new export with same area",tipNewOrder:"Create new export with same area",hintUploadFile:"Select file to use as input to workspace",hintRemoteUrl:"Enter secure HTTPS URL to remote data source",hintFileFormats:"Allowed formats: .zip, .kmz, .json, .geojson, .gml (max 150 MB)",hintUrlFormat:"Example: https://fmeflow.example.com",hintClickMap:"Click on map to define export area",hintDrawRect:"Drag to draw a rectangle",hintDrawContinue:"Click to add more corner points",hintDrawComplete:"Double-click to complete polygon",hintSelectMode:"Select drawing mode to start",hintGeomInvalid:"Polygon is invalid (not closed, self-intersecting, or without area)",hintAreaLarge:"Reduce area size for faster export",hintGeometryInvalid:"Polygon is invalid (not closed, self-intersecting, or without area)",hintAreaTooLarge:"Large area may result in longer export time. Consider reducing size",hintSetupWidget:"Widget needs to be configured before it can be used",contactSupportEmail:"Contact support at {email}",tokenSettingsHint:"Verify API token in settings",serverUrlSettingsHint:"Check FME Flow server URL in settings",repositorySettingsHint:"Select a valid repository in settings",connectionSettingsHint:"Check connection settings in configuration panel",networkConnectionHint:"Check network connection and firewall settings",largeAreaWarning:"The drawn area ({current}) is very large",largeAreaWarningWithThreshold:"The drawn area ({current}) exceeds the recommended limit ({threshold}). Consider reducing the area",ariaButton:"Button",ariaLoading:"Loading",ariaErrorActions:"Error Handling",ariaEmptyActions:"Empty Results",ariaSuccessActions:"Successful Action",ariaRequired:"Required Field",alertSyncSuccess:"Download started automatically",alertSyncFallback:"If download didn't start, use the link below",alertAsyncSuccess:"You will receive an email when the export is complete",alertAsyncQueued:"Export job submitted and queued for processing",alertSyncError:"Export failed during processing",alertAsyncError:"Export job could not be completed",alertCancelledTimeout:"Export cancelled due to timeout",alertCancelledUser:"Export was cancelled",alertJobFailed:"FME Flow transformation failed",alertTransformError:"Data transformation could not be completed"};var h=u(9063),m=u(9124),v=u.n(m),g=u(884),y=u.n(g),b=u(6278),E=u.n(b),w=u(5668),O=u.n(w),S=u(4712),R=u.n(S),T=u(3744),k=u.n(T),A=u(7711),I=u.n(A),C=u(2606),_=u.n(C),M=u(657),L=u.n(M),x=u(5502),N=u.n(x),j=u(3624),P=u.n(j),D=u(1337),F=u.n(D),U=u(7413),V=u.n(U),W=u(71),B=u.n(W),q=u(1920),G=u.n(q),$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const z=f.$W,Q={error:E(),map:_(),polygon:N(),warning:G(),"person-lock":L(),folder:R(),data:v(),"shared-no":F(),"feature-service":O(),"link-tilted":I(),time:B(),setting:P(),email:y(),info:k(),success:V()},H={warning:"warning",error:"error",info:"info",success:"success"},K=()=>(0,f.MN)(),X=d.YG,Y=d.j_,J=(e,t)=>[...e,(0,h.RM)(t)].filter(Boolean),Z=(e,t)=>J([e.fullWidth],t),ee=e=>{const{id:t,required:r,errorText:n,errorSuffix:o}=e||{};return{"aria-required":!!r,"aria-invalid":!!n,"aria-describedby":n&&t?(0,h.LH)(t,o):void 0}},te=(t,r)=>{const{tooltip:n,placement:o,block:i,jimuCss:s,jimuStyle:a,styles:l}=r;if(!n)return t;const u=[s,(0,h.RM)(a),i?l.tooltipWrap.block:l.tooltipWrap.inline];return(0,e.jsx)("span",{css:u},(0,e.jsx)(se,{content:n,placement:o},(0,e.jsx)("span",{css:l.tooltipWrap.anchor},t)))},re=e=>"auto"===e?z.tooltip.position.top:e,ne=(t,r)=>(0,e.jsx)(se,{content:t("valRequiredField"),placement:"bottom"},(0,e.jsx)("span",{css:r.typo.required,"aria-label":t("ariaRequired"),role:"img","aria-hidden":"false"},z.required)),oe=({loading:t,children:r,text:n,icon:o,alignText:i})=>{const s=K();if(t)return(0,e.jsx)(a.Loading,{type:a.LoadingType.Donut});if(r)return(0,e.jsx)(e.React.Fragment,null,r);const l="string"==typeof o&&o.length>0||null!=o&&e.React.isValidElement(o),u=!!n;if(!l&&!u)return null;if(l&&!u)return"string"==typeof o?(0,e.jsx)(ie,{src:o,size:z.icon.large}):o;if(u&&!l)return(0,e.jsx)(e.React.Fragment,null,n);const c="string"==typeof o?(0,e.jsx)(ie,{src:o,size:z.icon.medium}):o,d=(0,e.jsx)("span",{css:s.btn.icon,"aria-hidden":"true"},c);return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{css:s.btn.text(i)},n),d)},ie=t=>{var r,{src:n,size:o=z.icon.medium,className:i,style:s,role:l="img","aria-label":u,"aria-hidden":c}=t,d=$(t,["src","size","className","style","role","aria-label","aria-hidden"]);const f=null!==(r=Q[n])&&void 0!==r?r:n,p=null!=c?c:!u;return(0,e.jsx)(a.SVG,Object.assign({},d,{src:f,size:o,className:i,role:l,"aria-label":u,"aria-hidden":p,css:J([],s)}))},se=t=>{var{content:r,children:n,showArrow:o=z.tooltip.showArrow,placement:i=z.tooltip.position.top,disabled:s=!1}=t,l=$(t,["content","children","showArrow","placement","disabled"]);const u=r;if(!e.React.isValidElement(n)||!u||s)return(0,e.jsx)(e.React.Fragment,null,n);const c=((t,r)=>{const n=(null==t?void 0:t.props)||{};if(!n.disabled&&!n["aria-disabled"])return t;const o="string"==typeof r?r:void 0;return(0,e.jsx)("span",{"aria-disabled":"true","aria-label":o},t)})(n,u),d=re(i);return(0,e.jsx)(a.Tooltip,Object.assign({title:u,showArrow:o,placement:d},l),c)},ae=t=>(0,e.jsx)(a.Checkbox,Object.assign({},t)),le=t=>{var{value:r,defaultValue:n,required:o=!1,maxLength:i,errorText:s,type:l="text",step:u,onChange:c,onBlur:d,onFileChange:f}=t,p=$(t,["value","defaultValue","required","maxLength","errorText","type","step","onChange","onBlur","onFileChange"]);const h=K(),m="file"===l,[v,g]=Y(r,n||""),[y,b]=m?[void 0,void 0]:[v,g],E=e.hooks.useEventCallback((e=>{const t=e.target.value;m||b(t),m&&f?f(e):c&&c(t)})),w=e.hooks.useEventCallback((e=>{d&&d(m?"":e.target.value)})),O=ee({id:p.id,required:o,errorText:s});return m?(0,e.jsx)("input",Object.assign({},p,{type:"file",onChange:E,onBlur:w,required:o,title:s},O,{css:Z(h,p.style)})):(0,e.jsx)(a.TextInput,Object.assign({},p,{type:l,value:y,step:u,onChange:E,onBlur:w,required:o,maxLength:i,title:s},O,{css:Z(h,p.style)}))},ue=t=>{var{value:r,defaultValue:n,onChange:o,rows:i=2,onBlur:s}=t,l=$(t,["value","defaultValue","onChange","rows","onBlur"]);const u=K(),[c,d]=Y(r,n||""),f=e.hooks.useEventCallback((e=>{const t=e.target.value;d(t),null==o||o(t)})),p=e.hooks.useEventCallback((e=>{null==s||s(e.target.value)})),h=l.validationMessage||l.errorText,m=ee({id:l.id,required:l.required,errorText:h,errorSuffix:"error"}),v=l,{rows:g}=v,y=$(v,["rows"]);return(0,e.jsx)(a.TextArea,Object.assign({},y,{value:c,onChange:f,rows:i,onBlur:p,css:J([u.fullWidth,u.textareaResize],l.style)},m))},ce=({value:t,defaultValue:r,placeholder:n,style:o,onChange:i})=>{const s=K();return(0,e.jsx)(a.UrlInput,{value:t,defaultValue:r,placeholder:n,schemes:["https"],onChange:e=>{const t=((null==e?void 0:e.value)||"").trim();null==i||i(t)},css:Z(s,o)})},de=t=>(0,e.jsx)(a.Switch,Object.assign({},t)),fe=({options:t,value:r,defaultValue:n,onChange:o,style:i,disabled:s,"aria-label":l})=>{const u=K(),c=void 0!==r;return(0,e.jsx)("div",{css:Z(u,i),role:"radiogroup","aria-label":l},t.map(((t,i)=>(0,e.jsx)(a.Label,{key:`${t.value}-${i}`,check:!0,centric:!0},(0,e.jsx)(a.Radio,Object.assign({value:t.value},c?{checked:r===t.value}:{defaultChecked:n===t.value},{disabled:s,onChange:e=>{null==o||o(e.target.value)}})),t.label))))},pe=({value:t,defaultValue:r,min:n,max:o,step:i,onChange:s,style:l,disabled:u,"aria-label":c,decimalPrecision:d,showValue:f=!0,valueFormatter:p})=>{const m=K(),v=e.hooks.useEventCallback((e=>"function"==typeof p?p(e):(0,h.xi)(e,d))),g="number"==typeof t&&Number.isFinite(t)?t:"number"==typeof r&&Number.isFinite(r)?r:void 0,y=f&&"number"==typeof g?v(g):"";return(0,e.jsx)("div",{css:m.form.sliderField},(0,e.jsx)(a.Slider,{value:t,defaultValue:r,min:n,max:o,step:i,disabled:u,"aria-label":c,onChange:e=>{const t=parseFloat(e.target.value);!Number.isNaN(t)&&Number.isFinite(t)&&(null==s||s(t))},css:Z(m,l)}),f&&""!==y?(0,e.jsx)("div",{css:m.form.sliderValue,"aria-live":"polite",role:"status"},y):null)},he=t=>{var{style:r,onChange:n}=t,o=$(t,["style","onChange"]);const i=K();return(0,e.jsx)(a.NumericInput,Object.assign({},o,{onChange:e=>{"number"!=typeof e||Number.isNaN(e)?(null==e||Number.isNaN(e))&&(null==n||n(void 0)):null==n||n(e)},css:Z(i,r)}))},me=t=>(0,e.jsx)(a.Table,Object.assign({},t)),ve=({value:t,defaultValue:r,onChange:n,style:o,"aria-label":i})=>{const s=K();return(0,e.jsx)(l.ColorPicker,{color:t||r||"#000000",onChange:e=>{null==n||n(e)},"aria-label":i,css:Z(s,o),showArrow:!0})},ge=({options:t=[],value:r,defaultValue:n,onChange:o,placeholder:i,disabled:s=!1,style:l,coerce:u,allowSearch:c=!1,allowCustomValues:d=!1,hierarchical:f=!1})=>{const m=e.hooks.useTranslation(p),v=K(),[g,y]=Y(r,n),[b,E]=e.React.useState(""),w=i||m("phSelectOption"),O=e.hooks.useEventCallback((e=>{if("number"===u&&"string"==typeof e){const t=Number(e);return Number.isFinite(t)?t:e}return e})),S=e.hooks.useEventCallback(((e,t)=>{var r;const n=void 0!==t?t:null===(r=null==e?void 0:e.target)||void 0===r?void 0:r.value,i=O(n);y(i),null==o||o(i)})),R=e.hooks.useEventCallback((e=>{if(!d)return;const t=e.trim();if(!t)return;const r=O(t);Object.is(r,g)||(y(r),null==o||o(r))})),T=c||d,k=(0,h.SP)(t,f),A=T?b.trim():"",I=A.toLowerCase();let C=I?k.filter((({option:e})=>(e.label&&e.label.trim()?e.label.trim():String(e.value)).toLowerCase().includes(I))):k;if(d){if((e=>{if(null==e||"string"!=typeof e&&"number"!=typeof e)return;const t=String(e);C.some((({option:e})=>String(e.value)===t))||(C=[...C,{option:{value:e,label:t},depth:0}])})(g),A){const e=O(A),t="number"==typeof e||"string"==typeof e?e:A,r=String(t);C.some((({option:e})=>String(e.value)===r))||(C=[{option:{value:t,label:A},depth:0},...C])}}const _=null==g||"string"!=typeof g&&"number"!=typeof g?void 0:String(g),M=J([v.fullWidth],l);return(0,e.jsx)("div",{css:M},T?(0,e.jsx)(le,{type:"search",value:b,placeholder:m("phSearch"),onChange:e=>{E("string"==typeof e?e:"")},onKeyDown:e=>{"Enter"===e.key&&d&&(e.preventDefault(),R(e.currentTarget.value),E(""))},disabled:s}):null,(0,e.jsx)(a.Select,{value:_,onChange:S,disabled:s,placeholder:w,zIndex:z.zIndex.selectMenu,css:v.fullWidth},C.map((({option:t,depth:r},n)=>{if(!t||null==t.value)return null;const o=String(t.value),i=o===_,s=t.label&&t.label.trim()?t.label.trim():o,l=(0,h.I0)(s,m),u=t.hideLabel?"":f&&r>0?`${"- ".repeat(r)}${l}`:l;return(0,e.jsx)(a.Option,{key:`${o}-${r}-${n}`,value:t.value,active:i,disabled:Boolean(t.disabled),onClick:()=>{t.disabled||o===_||S(void 0,t.value)}},t.hideLabel?null:u)})).filter(Boolean)))},ye=t=>{var r,{text:n,icon:o,alignText:i="start",tooltip:s,type:l,tooltipDisabled:u=!1,tooltipPlacement:c=z.button.defaults.tooltipPosition,loading:d=!1,onClick:f,children:m,block:v=z.button.defaults.block,size:g,variant:y="contained",color:b,htmlType:E="button"}=t,w=$(t,["text","icon","alignText","tooltip","type","tooltipDisabled","tooltipPlacement","loading","onClick","children","block","size","variant","color","htmlType"]);const O=K(),S=e.hooks.useTranslation(p),R=e.hooks.useEventCallback((()=>{w.disabled||d||!f||f()})),T=w["aria-label"],k=(0,h.kz)(n,!!o,T,s,S("ariaButton")),A=w,{style:I,css:C}=A,_=$(A,["style","css"]),M=!!s&&!u,L=(0,e.jsx)(a.Button,Object.assign({},_,{type:l,color:b,variant:y,size:g,htmlType:E,icon:!n&&!!o,onClick:R,disabled:w.disabled||d,"aria-busy":d,"aria-live":d?"polite":void 0,"aria-label":k,title:s?void 0:w.title,css:[O.relative,!M&&C,!M&&(0,h.RM)(I)],block:v,tabIndex:null!==(r=w.tabIndex)&&void 0!==r?r:0}),(0,e.jsx)(oe,{loading:d,text:n,icon:o,alignText:i},m));return M?te(L,{tooltip:s,placement:c,block:v,jimuCss:C,jimuStyle:I,styles:O}):L},be=t=>{var{className:r,style:n,text:o,children:i,type:s="warning",withIcon:l,variant:u="default",jimuVariant:c,tooltipPlacement:d=z.tooltip.position.top}=t,f=$(t,["className","style","text","children","type","withIcon","variant","jimuVariant","tooltipPlacement"]);const p=K(),h=H[s],m=null!=i?i:null!=o?(0,e.jsx)("span",null,o):null,v="icon"!==u||h?u:"default",g=f,{css:y}=g,b=$(g,["css"]);if("icon"===v){const t="string"==typeof o?o:"string"==typeof i?i:m,l=Boolean(t),u="string"==typeof o?o:"string"==typeof i?i:void 0,f=(0,e.jsx)(a.Alert,Object.assign({},b,{type:s,withIcon:!1,variant:c,className:r,css:J([p.alert,l?void 0:y],n)}),h?(0,e.jsx)("div",{css:p.alertIcon},(0,e.jsx)(ie,{src:h,"aria-label":u})):null);return l?te(f,{tooltip:t,placement:re(d),block:!0,jimuCss:y,jimuStyle:n,styles:p}):f}return null!=m||h?(0,e.jsx)(a.Alert,Object.assign({},b,{type:s,withIcon:!1,variant:c,className:r,css:J([p.alert,y],n)}),(0,e.jsx)("div",{css:p.alertContent},h?(0,e.jsx)("div",{css:p.alertIcon},(0,e.jsx)(ie,{src:h,size:z.icon.small})):null,m?(0,e.jsx)("div",{css:p.alertMessage},m):null)):(0,e.jsx)(a.Alert,Object.assign({},b,{type:s,withIcon:!1,variant:c,className:r,css:J([p.alert,y],n)}))},Ee=({items:t,value:r,defaultValue:n,onChange:o,onTabChange:i,ariaLabel:s})=>{var l;const u=K(),[c,d]=Y(void 0,n||(null===(l=t[0])||void 0===l?void 0:l.value)),f=void 0!==r,p=f?r:c,h=e.hooks.useEventCallback((e=>{const r=t.find((t=>t.value===e)),n=r&&"number"==typeof r.value?Number(e):e;f||d(n),null==o||o(n),null==i||i(n)}));return(0,e.jsx)(a.AdvancedButtonGroup,{role:"tablist","aria-label":s,css:[u.row]},t.map(((t,r)=>{const n=p===t.value;return(0,e.jsx)(ye,{key:"string"==typeof t.value||"number"==typeof t.value?String(t.value):`tab-${r}-${t.label}`,icon:t.icon,size:"lg",text:t.hideLabel?void 0:t.label,active:n,"aria-label":t.label,type:n?"primary":"tertiary",role:"tab","aria-selected":n,tooltip:t.tooltip,tooltipPlacement:"bottom",disabled:t.disabled,onClick:()=>{n||h(t.value)},block:!1})})))},we=({state:t,className:r,style:n,renderActions:o,center:i})=>{var s,l,u;const c=K(),f=e.hooks.useTranslation(p),{showLoading:m,snapshot:v}=(0,d.kg)(t,z.loading.delay),[g,y]=e.React.useState(0),b=new Set,E=[],w=e=>{if(null!=e){if("string"==typeof e){const t=e.trim();if(!t||b.has(t))return;return b.add(t),void E.push(t)}E.push(e)}},O="loading"===t.kind?t.message:void 0,S="loading"===t.kind?t.detail:void 0,R="loading"===t.kind&&Array.isArray(t.messages)?t.messages:void 0;w(null!==(s=null==v?void 0:v.message)&&void 0!==s?s:O),w(null!==(l=null==v?void 0:v.detail)&&void 0!==l?l:S);const T=null!==(u=(null==v?void 0:v.messages)&&Array.isArray(v.messages)?v.messages:R)&&void 0!==u?u:[];for(const e of T)w(e);const k=E.length,A=E.map(((t,r)=>"string"==typeof t?t:e.React.isValidElement(t)&&null!=t.key?String(t.key):`node-${r}`)).join("|");e.hooks.useEffectWithPreviousValues((()=>{y(0)}),[A,m]),e.hooks.useEffectWithPreviousValues((()=>{0!==k||0===g?k>0&&g>=k&&y(k-1):y(0)}),[k,g]),e.hooks.useEffectWithPreviousValues((()=>{var e,t;if(!m||k<=1)return;const r=null!==(e=z.loading.detailDelay)&&void 0!==e?e:z.loading.delay,n=null!==(t=z.loading.cycleInterval)&&void 0!==t?t:0;let o=null,i=null;return o=setTimeout((()=>{y((e=>{if(k<=1)return 0;const t=e%k;return 0===t?1:t})),n>0&&(i&&clearInterval(i),i=setInterval((()=>{y((e=>k<=1?0:(e+1)%k))}),n))}),r),()=>{o&&clearTimeout(o),i&&clearInterval(i)}}),[m,k,A]);const I=k>0&&g>=0?E[Math.max(0,g)%k]:null,C=e.hooks.useEventCallback((({actions:t,ariaLabel:r})=>(null==t?void 0:t.length)?(0,e.jsx)("div",{role:"group","aria-label":r,css:c.btn.group},t.map(((t,r)=>(0,e.jsx)(ye,{key:r,onClick:t.onClick,disabled:t.disabled,type:t.type,variant:t.variant,text:t.label,block:!0})))):null)),_=o?({actions:e,ariaLabel:t})=>o(e,t):C,M=()=>(0,e.jsx)("div",{css:c.centered,role:"status","aria-live":"polite","aria-atomic":!0},m&&(0,e.jsx)("div",{css:c.loadingSpinner},(0,e.jsx)(a.Loading,{type:a.LoadingType.Donut,width:z.loading.width,height:z.loading.height})),I?(0,e.jsx)("div",{css:[c.typo.loadingMessage,c.loadingText]},I):null),L="loading"===t.kind||m?M():(()=>{switch(t.kind){case"error":{const r=_({actions:t.actions,ariaLabel:f("ariaErrorActions")}),n=null==t.detail?null:(0,e.jsx)("div",{css:c.typo.caption},t.detail);return(0,e.jsx)("div",{role:"alert","aria-live":"assertive",css:c.stateView.error},(0,e.jsx)("div",{css:c.stateView.errorContent},(0,e.jsx)("div",{css:[c.row,c.rowAlignCenter]},(0,e.jsx)(ie,{src:(0,h.sJ)(t.code),size:z.icon.large}),(0,e.jsx)("div",{css:c.typo.title},t.message)),(0,e.jsx)(e.React.Fragment,null,n,t.code?(0,e.jsx)("div",null,f("lblErrorCode"),": ",t.code):null)),r?(0,e.jsx)("div",{css:c.stateView.errorActions},r):null)}case"empty":return(0,e.jsx)("div",{role:"status","aria-live":"polite"},(0,e.jsx)("div",null,t.message),_({actions:t.actions,ariaLabel:f("ariaEmptyActions")}));case"success":{const r=_({actions:t.actions,ariaLabel:f("ariaSuccessActions")});return(0,e.jsx)("div",{role:"status","aria-live":"polite",css:c.stateView.error},t.title&&(0,e.jsx)("div",{css:c.typo.title},t.title),t.message&&(0,e.jsx)("div",{css:c.typo.caption},t.message),t.detail&&(0,e.jsx)("div",{css:[c.typo.caption,(0,e.css)({"& > div":c.stateView.infoLine})]},"string"==typeof t.detail?(0,e.jsx)("span",null,t.detail):t.detail),r?(0,e.jsx)("div",{css:c.stateView.errorActions},r):null)}case"content":return(0,e.jsx)(e.React.Fragment,null,t.node);case"loading":return M()}})(),x="boolean"==typeof i?i:m;return(0,e.jsx)("div",{className:r,css:J([c.stateView.frame,x?c.centered:void 0],n)},L)},Oe=t=>{const{buttons:r,secondaryButton:n,primaryButton:o,className:i,style:s}=t,a=K(),l=(null==r?void 0:r.length)?r.map(((e,t)=>({config:e,role:t===r.length-1?"primary":"secondary",key:t.toString()}))):[o?{config:o,role:"primary",key:"primary"}:null,n?{config:n,role:"secondary",key:"secondary"}:null].filter((e=>null!=e));return l.length?(0,e.jsx)("div",{css:J([a.btn.group],s),className:i},l.map((({config:t,role:r,key:n})=>{var o;const i="primary"===r?"primary":"default",s=Object.assign(Object.assign({},t),{type:null!==(o=t.type)&&void 0!==o?o:i});return(0,e.jsx)(ye,Object.assign({key:n},s,{block:!0,css:a.btn.flex}))}))):null},Se=t=>{const{variant:r,className:n,style:o,children:i}=t,s=e.hooks.useTranslation(p),a=K();if("layout"===r){const{title:r,subtitle:l,onBack:u,onSubmit:c,isValid:d=!0,loading:f=!1}=t;return(0,e.jsx)("div",{className:n,css:J([a.form.layout],o)},(0,e.jsx)("div",{css:a.form.header},r&&(0,e.jsx)("div",{css:a.typo.title},r),l&&(0,e.jsx)("div",{css:a.typo.caption},l)),(0,e.jsx)("div",{css:a.form.content},(0,e.jsx)("div",{css:a.form.body},i),(0,e.jsx)("div",{css:a.form.footer},(0,e.jsx)(Oe,{secondaryButton:u?{text:s("btnBack"),onClick:u,disabled:f}:void 0,primaryButton:{text:s("btnSubmit"),onClick:c,disabled:!d||f,loading:f,tooltip:s("tipSubmitOrder")}}))))}if("field"===r){const{label:r,helper:s,required:a=!1,readOnly:l=!1,error:u}=t;return(0,e.jsx)(Re,{className:n,style:o,label:r,helper:s,required:a,readOnly:l,error:u},i)}throw new Error(`Unknown Form variant: ${r}`)},Re=({className:t,style:r,label:n,helper:o,required:i=!1,readOnly:s=!1,check:l=!1,error:u,children:c})=>{const d=K(),f=e.hooks.useTranslation(p),h=X(),{id:m,child:v}=((t,r,n)=>{if(r||!e.React.isValidElement(t))return{id:void 0,child:t};const o=t.props||{},i=o.id||n;return o.id?{id:i,child:t}:{id:i,child:e.React.cloneElement(t,{id:i})}})(c,s,h);return(0,e.jsx)(a.FormGroup,{className:t,css:J([d.field],r)},l?(0,e.jsx)(a.Label,{css:[d.typo.label,d.checkLabel],check:!0},(0,e.jsx)("span",null,n,i&&ne(f,d)),!s&&v):(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(a.Label,{css:d.typo.label,check:!1,for:m},n,i&&ne(f,d)),!s&&v),o&&!u&&(0,e.jsx)("div",{css:d.typo.hint,id:m?`${m}-help`:void 0},o),u&&(0,e.jsx)("div",{id:m?`${m}-error`:void 0,css:d.typo.errorMessage,role:"alert"},u))},Te=(t,r,n,o)=>{if(!t)return(0,e.jsx)(e.React.Fragment,null,o);const i=r("msgContactSupport"),s=i.split(f.BY);return s.length<2?(0,e.jsx)(e.React.Fragment,null,i," ",(0,e.jsx)("a",{href:`mailto:${t}`,css:n.typo.link,"aria-label":r("msgContactSupport",{email:t})},t)):s.map(((o,i)=>i<s.length-1?(0,e.jsx)(e.React.Fragment,{key:i},o,(0,e.jsx)("a",{href:`mailto:${t}`,css:n.typo.link,"aria-label":r("msgContactSupport",{email:t})},t)):(0,e.jsx)(e.React.Fragment,{key:i},o)))};var ke=u(5938),Ae=u(3128);const Ie=new Set([f.Vw.SELECT,f.Vw.COORDSYS,f.Vw.ATTRIBUTE_NAME,f.Vw.DB_CONNECTION,f.Vw.WEB_CONNECTION,f.Vw.REPROJECTION_FILE]),Ce=new Set([f.Vw.MULTI_SELECT,f.Vw.ATTRIBUTE_LIST]),_e="text",Me="file",Le=e=>{var t;return null!==(t=(0,h.wK)(e))&&void 0!==t?t:""},xe=(t,r,n,o,i={})=>{const{readOnly:s,maxLength:a,overrides:l}=i,u="string"==typeof r||"number"==typeof r?String(r):"",c=l&&void 0!==l.disabled?l.disabled:s;return(0,e.jsx)(le,Object.assign({},l,{type:"number"===t?"text":t,value:u,placeholder:n,onChange:e=>{if("number"===t){if(""===e)return void o(null);const t=Number(e.replace(/,/g,"."));o(Number.isFinite(t)?t:null)}else o(e)},disabled:c,maxLength:a}))},Ne=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),je=(e,t)=>{if(Array.isArray(e))return e.map((e=>{var r;if(Ne(e)){const n={};for(const o of t)n[o.key]=null!==(r=e[o.key])&&void 0!==r?r:"";return n}return{value:e}}));if((0,h.YH)(e)){const r=e.trim();try{const e=JSON.parse(r);return Array.isArray(e)?je(e,t):[]}catch(e){return r.split(/\r?\n/).map((e=>e.trim())).filter(Boolean).map((e=>({value:e})))}}return[]},Pe=e=>{var t;return(null===(t=null==e?void 0:e.accept)||void 0===t?void 0:t.length)?e.accept.map((e=>(e=>{const t=(0,h.Nn)(e).toLowerCase();return t?"*/*"===t||t.endsWith("/*")||t.includes("/")?t:t.startsWith("*.")?`.${t.slice(2)}`:t.startsWith(".")?t:`.${t.replace(/^\*+/,"")}`:null})(e))).filter((e=>Boolean(e))):[]},De=(e,t)=>{if(!e)return{valid:!1,error:"fileInvalid"};const r=Pe(t),n="number"==typeof(null==t?void 0:t.maxSizeMb)&&Number.isFinite(t.maxSizeMb)?t.maxSizeMb:void 0,o=void 0===n?f.vp.DEFAULT_MAX_SIZE_MB:n>0?n:void 0;if(void 0!==o&&e.size>o*f.vp.ONE_MB_IN_BYTES)return{valid:!1,error:"fileTooLarge",maxSizeMB:Math.floor(o)};const i=(e.name||"").toLowerCase(),s=(e.type||"").toLowerCase();if(r.length){if(!r.some((e=>{if("*/*"===e)return!0;if(e.endsWith("/*")){const t=e.slice(0,e.length-1);return!!s&&s.startsWith(t)}return e.includes("/")?!!s&&s===e:i.endsWith(e)})))return{valid:!1,error:"fileTypeNotAllowed"}}else{if(!f.vp.DEFAULT_ALLOWED_EXTENSIONS.some((e=>i.endsWith(e))))return{valid:!1,error:"fileTypeNotAllowed"};if(!f.vp.DEFAULT_ALLOWED_MIME_TYPES.has(s))return{valid:!1,error:"fileTypeNotAllowed"}}return{valid:!0}},Fe=(e,t)=>{if("string"==typeof e){return e.trim()||void 0}if("number"==typeof e||"boolean"==typeof e)return String(e);if(e){if((0,h.E$)(e))return(0,h.SB)(e,t);if(Array.isArray(e))for(const r of e){const e=Fe(r,t);if(e)return e}else if(Ne(e)){const r=e;for(const e of f.vp.FILE_DISPLAY_KEYS)if(e in r){const n=Fe(r[e],t);if(n)return n}}}},Ue=({value:t,onChange:r,field:n,jimuMapView:o,translate:i,disabled:s,placeholder:a})=>{var l,u;const[c,d]=e.React.useState([]),[f,p]=e.React.useState(!1),[m,v]=e.React.useState(null);e.hooks.useEffectWithPreviousValues((()=>{if(n.choiceSetConfig&&"attributeNames"===n.choiceSetConfig.type)if(o){p(!0),v(null);try{const e=(0,h.RB)(o),t=(0,h.Fm)(e);d(t),p(!1)}catch(e){console.log("Failed to collect layer attributes",e),v("Failed to load attributes"),p(!1)}}else v("No map view available")}),[n.choiceSetConfig,o]);const g=n.options||[],y=0===c.length?g:(()=>{const e=new Set,t=[];return g.forEach((r=>{var n,o;const i=String(null!==(n=r.value)&&void 0!==n?n:"");i&&!e.has(i)&&(e.add(i),t.push({value:i,label:null!==(o=r.label)&&void 0!==o?o:i}))})),c.forEach((r=>{e.has(r.value)||(e.add(r.value),t.push(r))})),t})();if(m)return(0,e.jsx)(be,{type:"warning",withIcon:!0},m);if(f)return(0,e.jsx)(ge,{value:t,options:[],placeholder:"Loading attributes...",disabled:!0,"aria-label":n.label});if(0===y.length)return(0,e.jsx)(le,{type:"text",value:Le(t),placeholder:a||"Enter attribute name",onChange:e=>{const t=e.target.value;r(t)},disabled:s,"aria-label":n.label});const b=Ie.has(n.type),E=y,w=(0,h.ZF)(b,E),O=n.selectConfig;return(0,e.jsx)(ge,{value:t,options:y,placeholder:a||"Select attribute",onChange:e=>{r(e)},"aria-label":n.label,disabled:s,coerce:w,allowSearch:null===(l=null==O?void 0:O.allowSearch)||void 0===l||l,allowCustomValues:null===(u=null==O?void 0:O.allowCustomValues)||void 0===u||u,hierarchical:null==O?void 0:O.hierarchical})},Ve=({field:t,value:r,onChange:n,translate:o,disabled:i,jimuMapView:s})=>{var a;const l=e.hooks.useTranslation(p),u=null!=o?o:l,c=K(),d=Ce.has(t.type),m=t.type===f.Vw.TEXT_OR_FILE?r:(0,h.He)(r,d),v=(0,h.B_)(u,t.label),g=Boolean(i||t.readOnly),[y,b]=e.React.useState(null),E=Ie.has(t.type)||Ce.has(t.type),w=t.options||[],O=E&&!d&&1===w.length,S=O?null===(a=w[0])||void 0===a?void 0:a.value:void 0,R=e.hooks.useEventCallback((()=>{if(void 0!==S){const e=m;Object.is(e,S)||n(S)}})),T=(0,h.ZF)(E,w);e.hooks.useEffectWithPreviousValues((()=>{if(!O||void 0===S)return;const e=m;!(null==e||"string"==typeof e&&!(0,h.YH)(e))&&Object.is(e,S)||n(S)}),[O,S,m,n]);const k=()=>{var o,i,s,a;const l=t.tableConfig;if(!(null===(o=null==l?void 0:l.columns)||void 0===o?void 0:o.length)){const o=(0,h.H9)(r),i=(e,t)=>{if(g)return;const r=[...o];r[e]=t,n(r)},s=()=>{g||n([...o||[],""])},a=e=>{if(g)return;const t=o.filter(((t,r)=>r!==e));n(t)};return(0,e.jsx)("div",{"data-testid":"table-field"},0===o.length?(0,e.jsx)("div",null,u("msgTableEmpty")):(0,e.jsx)(me,{responsive:!0,hover:!0,"aria-label":t.label},(0,e.jsx)("tbody",null,o.map(((r,n)=>(0,e.jsx)("tr",{key:n},(0,e.jsx)("td",null,(0,e.jsx)(le,{type:"text",value:r,placeholder:t.placeholder||v.enter,onChange:e=>{i(n,"string"==typeof e?e:"")},disabled:g})),(0,e.jsx)("td",null,(0,e.jsx)(ye,{text:u("btnDeleteRow"),variant:"text",type:"tertiary",onClick:()=>{a(n)},"aria-label":u("btnDeleteRow"),disabled:g}))))))),(0,e.jsx)(ye,{text:u("btnAddRow"),variant:"outlined",onClick:s,"aria-label":u("btnAddRow"),disabled:g}))}const c=l.columns&&l.columns.length?l.columns:[{key:"value",label:t.label||u("lblColumnDefault"),type:"text"}],d=je(r,c).map(((e,r)=>Object.assign(Object.assign({},e),{__rowId:`${t.name}-row-${r}-${Date.now()}`}))),f=null!==(i=null==l?void 0:l.minRows)&&void 0!==i?i:0,p=null==l?void 0:l.maxRows,m=null!==(s=null==l?void 0:l.allowReorder)&&void 0!==s&&s,y=null===(a=null==l?void 0:l.showHeader)||void 0===a||a,b=(null==l?void 0:l.addRowLabel)||u("btnAddRow"),E=(null==l?void 0:l.removeRowLabel)||u("btnDeleteRow"),w=!g&&d.length>f,O=!g&&(void 0===p||d.length<p),S=(e,t,r)=>{if(g)return;const o=d.map(((n,o)=>o===e?Object.assign(Object.assign({},n),{[t]:r}):n));n(o)},R=(e,t)=>{if(g)return;const r=e+t;if(r<0||r>=d.length)return;const o=[...d],[i]=o.splice(e,1);o.splice(r,0,i),n(o)};return(0,e.jsx)("div",{"data-testid":"table-field"},0===d.length?(0,e.jsx)("div",null,u("msgTableEmpty")):(0,e.jsx)(me,{responsive:!0,hover:!0,"aria-label":t.label},y?(0,e.jsx)("thead",null,(0,e.jsx)("tr",null,c.map((t=>(0,e.jsx)("th",{key:t.key},t.label))),(0,e.jsx)("th",null,u("lblActions")))):null,(0,e.jsx)("tbody",null,d.map((r=>(0,e.jsx)("tr",{key:r.__rowId||`fallback-${Math.random()}`},c.map((n=>(0,e.jsx)("td",{key:`${r.__rowId}-${n.key}`},((r,n,o)=>{const i=o[r.key],s=g||r.readOnly,a=r.placeholder||t.placeholder||v.enter;switch(r.type){case"number":return(0,e.jsx)(le,{type:"number",value:Le(i),onChange:e=>{const t=""===e?null:Number(e.replace(/,/g,"."));S(n,r.key,Number.isFinite(t)?t:null)},disabled:s,placeholder:a});case"select":return(0,e.jsx)(ge,{value:i,options:r.options||[],placeholder:a,onChange:e=>{S(n,r.key,e)},disabled:s});case"boolean":return(0,e.jsx)(ae,{checked:Boolean(i),onChange:e=>{S(n,r.key,e.target.checked)},disabled:s,"aria-label":r.label});case"date":return(0,e.jsx)(le,{type:"date",value:Le(i),onChange:e=>{S(n,r.key,e)},disabled:s,placeholder:a});case"time":return(0,e.jsx)(le,{type:"time",value:Le(i),onChange:e=>{S(n,r.key,e)},disabled:s});case"datetime":return(0,e.jsx)(ze,{value:Le(i),onChange:e=>{S(n,r.key,e)},disabled:s,"aria-label":r.label});default:return(0,e.jsx)(le,{type:"text",value:Le(i),onChange:e=>{S(n,r.key,e)},disabled:s,placeholder:a})}})(n,d.findIndex((e=>e.__rowId===r.__rowId)),r)))),(0,e.jsx)("td",null,(0,e.jsx)(ye,{text:E,variant:"text",type:"tertiary",onClick:()=>{(e=>{if(g||!w)return;const t=d.filter(((t,r)=>r!==e));n(t)})(d.findIndex((e=>e.__rowId===r.__rowId)))},"aria-label":E,disabled:!w}),m?(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(ye,{text:u("btnMoveUp"),variant:"text",type:"tertiary",onClick:()=>{R(d.findIndex((e=>e.__rowId===r.__rowId)),-1)},"aria-label":u("btnMoveUp"),disabled:g||0===d.findIndex((e=>e.__rowId===r.__rowId))}),(0,e.jsx)(ye,{text:u("btnMoveDown"),variant:"text",type:"tertiary",onClick:()=>{R(d.findIndex((e=>e.__rowId===r.__rowId)),1)},"aria-label":u("btnMoveDown"),disabled:g||d.findIndex((e=>e.__rowId===r.__rowId))===d.length-1})):null)))))),(0,e.jsx)(ye,{text:b,variant:"outlined",onClick:()=>{(()=>{if(!O)return;const e=(e=>{const t={};for(const r of e)t[r.key]=void 0!==r.defaultValue?r.defaultValue:"";return t})(c);n([...d,e])})()},"aria-label":b,disabled:!O}))},A=()=>{const o=t.toggleConfig,i=((e,t)=>{if(t){if(void 0!==t.checkedValue&&(0,h.$X)(e,t.checkedValue))return!0;if(void 0!==t.uncheckedValue&&(0,h.$X)(e,t.uncheckedValue))return!1}const r=(0,h.Dr)(e);if(void 0!==r)return r;if("number"==typeof e)return 0!==e;if("string"==typeof e){const t=e.trim();if(!t)return!1;if("0"===t)return!1}return Boolean(e)})(null!=r&&""!==r?r:t.defaultValue,o),s=e=>{if(g)return;const t=((e,t)=>e?void 0===(null==t?void 0:t.checkedValue)||t.checkedValue:void 0!==(null==t?void 0:t.uncheckedValue)&&t.uncheckedValue)(e,o);n(t)};return t.type===f.Vw.CHECKBOX?(0,e.jsx)(ae,{checked:i,onChange:e=>{s(e.target.checked)},disabled:g,"aria-label":t.label}):(0,e.jsx)(de,{checked:i,onChange:(e,t)=>{s(t)},disabled:g,"aria-label":t.label})},I=()=>{const r=((e,t)=>{if(e&&"object"==typeof e&&!Array.isArray(e)&&"mode"in e){const r=e;if(r.mode===Me&&(0,h.E$)(r.file))return{mode:Me,file:r.file,fileName:"string"==typeof r.fileName?r.fileName:(0,h.SB)(r.file,t)};if(r.mode===_e)return{mode:_e,text:Le(r.text)}}return(0,h.E$)(e)?{mode:Me,file:e,fileName:(0,h.SB)(e,t)}:{mode:_e,text:Le(e)}})(m,u),o=r.mode===Me?Me:_e,i=Pe(t.fileConfig),s=i.length?i.join(","):void 0;return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(Ee,{items:[{value:_e,label:u("lblTextInput")},{value:Me,label:u("lblFileInput")}],value:o,onChange:e=>{var t;t=e,g||n(t===Me?{mode:Me,file:(0,h.E$)(r.file)?r.file:null,fileName:r.fileName}:{mode:_e,text:Le(r.text)})},ariaLabel:t.label}),o===_e?(0,e.jsx)(ue,{value:Le(r.text),placeholder:t.placeholder||v.enter,onChange:e=>{g||n({mode:_e,text:e})},disabled:g,rows:t.rows}):(0,e.jsx)("div",null,(0,e.jsx)(le,{type:"file",accept:s,onFileChange:e=>{if(g)return void(e.target.value="");const r=e.target.files,o=r&&r.length>0?r[0]:null;if(!o)return b(null),void n({mode:Me,file:null,fileName:void 0});const i=De(o,t.fileConfig);if(!i.valid)return b("fileTooLarge"===i.error?u("errFileLarge",{maxSize:i.maxSizeMB}):"fileTypeNotAllowed"===i.error?u("errFileType"):u("errFileInvalid")),void(e.target.value="");b(null),n({mode:Me,file:o,fileName:(0,h.SB)(o,u)})},disabled:g,"aria-label":t.label}),y?(0,e.jsx)("div",{css:c.typo.errorMessage,"data-testid":"text-or-file-error",role:"alert"},y):null,(0,h.E$)(r.file)&&!y?(0,e.jsx)("div",{"data-testid":"text-or-file-name"},r.fileName||(0,h.SB)(r.file,u)):null))},C=()=>((t,r,n,o,i)=>(0,e.jsx)(le,{type:t,value:Le(r),placeholder:n,onChange:e=>{o(e)},disabled:i}))(t.type===f.Vw.MONTH?"month":"week",m,(0,h.Td)(t,v,u),n,g);return(()=>{switch(t.type){case f.Vw.HIDDEN:return(0,e.jsx)(e.React.Fragment,null);case f.Vw.MESSAGE:return(()=>{const r=t.label||t.description||"";return r.trim()?(0,e.jsx)(be,{type:"info",withIcon:!0,open:!0,text:r,"aria-live":"polite"}):(0,e.jsx)(e.React.Fragment,null)})();case f.Vw.TEXT:case f.Vw.PASSWORD:case f.Vw.EMAIL:case f.Vw.PHONE:case f.Vw.SEARCH:return(()=>{const e={[f.Vw.PASSWORD]:"password",[f.Vw.EMAIL]:"email",[f.Vw.PHONE]:"tel",[f.Vw.SEARCH]:"search",[f.Vw.TEXT]:"text"}[t.type]||"text",r=t.type===f.Vw.PHONE?"phone":t.type===f.Vw.EMAIL?"email":t.type===f.Vw.SEARCH?"search":void 0,o=t.type===f.Vw.PASSWORD?(0,h.Td)(t,v,u):(0,h.Td)(t,v,u,r);return xe(e,m,o,n,{readOnly:g,maxLength:t.maxLength})})();case f.Vw.NUMBER:return xe("number",m,v.enter,n,{readOnly:g});case f.Vw.TEXTAREA:return(0,e.jsx)(ue,{value:Le(m),placeholder:v.enter,onChange:e=>{n(e)},disabled:g,rows:t.rows});case f.Vw.URL:return(()=>{const r=Le(m);return(0,e.jsx)(ce,{value:r,placeholder:t.placeholder||v.enter,onChange:e=>{g||n(e)}})})();case f.Vw.TABLE:return k();case f.Vw.COORDSYS:case f.Vw.DB_CONNECTION:case f.Vw.WEB_CONNECTION:case f.Vw.REPROJECTION_FILE:case f.Vw.SELECT:return(()=>{const r=t.options||[],o=t.selectConfig;if(0===r.length)return xe("text",m,v.enter,n,{readOnly:g});if(O){const e=w[0],t=(0,h.Nn)((0,h.I0)((null==e?void 0:e.label)||"",u))||(0,h.Nn)(null==e?void 0:e.value)||"";return xe("text",t,v.select,R,{readOnly:!0,overrides:{readOnly:!0,disabled:!0}})}return(0,e.jsx)(ge,{value:m,options:r,placeholder:v.select,onChange:e=>{n(e)},"aria-label":t.label,disabled:g,coerce:T,allowSearch:null==o?void 0:o.allowSearch,allowCustomValues:null==o?void 0:o.allowCustomValues,hierarchical:null==o?void 0:o.hierarchical})})();case f.Vw.ATTRIBUTE_NAME:case f.Vw.ATTRIBUTE_LIST:return(0,e.jsx)(Ue,{value:m,onChange:n,field:t,jimuMapView:s,translate:u,disabled:g,placeholder:v.select});case f.Vw.DATE_TIME:return(()=>{const t="string"==typeof m?(0,h.hk)(m):"";return(0,e.jsx)(ze,{value:t,onChange:e=>{const t="string"==typeof m?m:void 0,r=(0,h.HK)(e,t);n(r)},disabled:g})})();case f.Vw.MULTI_SELECT:return(()=>{const r=t.options||[],o=Array.isArray(m)?m:[],i=t.selectConfig;return(0,e.jsx)(He,{options:r,values:[...o],placeholder:v.select,disabled:g,onChange:e=>{n(e)},allowSearch:null==i?void 0:i.allowSearch,hierarchical:null==i?void 0:i.hierarchical})})();case f.Vw.CHECKBOX:case f.Vw.SWITCH:return A();case f.Vw.FILE:return(()=>{var o,i;const s=(0,h.E$)(r)?r:null,a=Pe(t.fileConfig),l=a.length?a.join(","):void 0,d=s?Fe(t.defaultValue,u):null!==(i=null!==(o=Fe(r,u))&&void 0!==o?o:Fe(m,u))&&void 0!==i?i:Fe(t.defaultValue,u),f=(0,h.Nn)(d)||"",p=s?(0,h.SB)(s,u):f,v=Boolean(p)?p:null;return(0,e.jsx)("div",null,(0,e.jsx)(le,{type:"file",accept:l,onFileChange:e=>{if(g)return void(e.target.value="");const r=e.target.files,o=r&&r.length>0?r[0]:null;if(!o)return b(null),void n(null);const i=De(o,t.fileConfig);if(!i.valid)return b("fileTooLarge"===i.error?u("errFileLarge",{maxSize:i.maxSizeMB}):"fileTypeNotAllowed"===i.error?u("errFileType"):u("errFileInvalid")),void(e.target.value="");b(null),n(o)},disabled:g,"aria-label":t.label}),y?(0,e.jsx)("div",{css:c.typo.errorMessage,"data-testid":"file-field-error",role:"alert"},y):null,v&&!y?(0,e.jsx)("div",{"data-testid":"file-field-display","aria-live":"polite",css:c.typo.hint},v):null)})();case f.Vw.TEXT_OR_FILE:return I();case f.Vw.SCRIPTED:return(()=>{const r=(0,h.YH)(m)?m:Le(t.defaultValue)||t.description||t.label;return(0,e.jsx)(Qe,{html:r||""})})();case f.Vw.RADIO:return(()=>{const r=t.options||[],o=(0,h.ZF)(!0,r),i=null==m?void 0:String(m);return(0,e.jsx)(fe,{options:r.map((e=>({label:e.label,value:String(e.value)}))),value:i,onChange:e=>{var t;if("number"!==o)n(e);else{const o=Number(e);if(Number.isFinite(o))n(o);else{const o=r.find((t=>String(t.value)===e));n(null!==(t=null==o?void 0:o.value)&&void 0!==t?t:e)}}},disabled:g,"aria-label":t.label})})();case f.Vw.GEOMETRY:return(()=>{const t=Le(m).trim();if(!t)return(0,e.jsx)("div",{css:c.typo.hint,"data-testid":"geometry-field"},u("msgNoGeometry"));let r=0,n=0,o=t,i=!1;try{const e=JSON.parse(t),i=Array.isArray(null==e?void 0:e.rings)?e.rings:[];r=i.length,n=i.reduce(((e,t)=>e+(Array.isArray(t)?t.filter(Array.isArray).length:0)),0),o=JSON.stringify(e,null,2)}catch(e){i=!0}const s=o.length>f.vp.GEOMETRY_PREVIEW_MAX_LENGTH?`${o.slice(0,f.vp.GEOMETRY_PREVIEW_MAX_LENGTH)}\u2026`:o;return(0,e.jsx)("div",{"data-testid":"geometry-field"},(0,e.jsx)("div",{css:c.typo.hint},i?u("errGeomParse"):u("msgGeomReady",{rings:r,vertices:n})),s?(0,e.jsx)("pre",{"aria-label":u("ariaGeomPreview")},s):null)})();case f.Vw.SLIDER:return(()=>{var r,o,i,s,a;const l="number"==typeof m?m:(0,h.YH)(m)?Number(m.trim()):"number"==typeof t.defaultValue?t.defaultValue:null!==(r=t.min)&&void 0!==r?r:0,u=Number.isFinite(l)?l:null!==(o=t.min)&&void 0!==o?o:0,c="number"==typeof t.decimalPrecision&&t.decimalPrecision>=0?t.decimalPrecision:void 0;return(0,e.jsx)(pe,{value:u,min:null!==(i=t.min)&&void 0!==i?i:0,max:null!==(s=t.max)&&void 0!==s?s:100,step:null!==(a=t.step)&&void 0!==a?a:1,decimalPrecision:c,onChange:e=>{n(e)},disabled:g,"aria-label":t.label})})();case f.Vw.NUMERIC_INPUT:return(()=>{const r="number"==typeof m?m:(0,h.YH)(m)?Number(m.trim()):void 0,o=void 0===r&&"number"==typeof t.defaultValue?t.defaultValue:void 0,i="number"==typeof t.decimalPrecision&&t.decimalPrecision>=0?t.decimalPrecision:2;let s=null;void 0!==r&&Number.isFinite(r)&&(0===i&&r%1!=0&&(s=u("valIntegerOnly")),s||"number"!=typeof t.min||(t.minExclusive?r<=t.min:r<t.min)&&(s=t.minExclusive?u("valGreaterThan",{value:t.min}):u("valAtLeast",{value:t.min})),s||"number"!=typeof t.max||(t.maxExclusive?r>=t.max:r>t.max)&&(s=t.maxExclusive?u("valLessThan",{value:t.max}):u("valAtMost",{value:t.max})));const a=void 0===r&&void 0!==o?{defaultValue:o}:{value:r};return(0,e.jsx)("div",null,(0,e.jsx)(he,Object.assign({},a,{placeholder:t.placeholder||v.enter,min:t.min,max:t.max,step:t.step,precision:i,disabled:g,"aria-label":t.label,"aria-invalid":!!s,"aria-describedby":s?`${t.name}-error`:void 0,onChange:e=>{n(void 0!==e?e:null)}})),s&&(0,e.jsx)("div",{id:`${t.name}-error`,css:c.typo.errorMessage,role:"alert","data-testid":"numeric-input-error"},s))})();case f.Vw.TAG_INPUT:return(()=>{const r=Array.isArray(m)?m:[];return(0,e.jsx)($e,{value:r,placeholder:t.placeholder||u("phTags"),onChange:e=>{g||n(e)}})})();case f.Vw.COLOR:return(()=>{const r=t.colorConfig,o="string"==typeof m?(0,h.$e)(m,r)||m:void 0,i="string"==typeof o&&o.startsWith("#")?o:"#000000";return(0,e.jsx)(ve,{value:i,onChange:e=>{if(g)return;const t=(0,h.FK)(e,r)||e;n(t)}})})();case f.Vw.DATE:return(()=>{const r="string"==typeof m?(0,h.Wx)(m):"",o=r?`${r}T00:00:00`:"";return(0,e.jsx)(ze,{mode:"date",value:o,onChange:e=>{const t=("string"==typeof e?e:"").split("T")[0]||"",r=(0,h.OD)(t);n(r)},"aria-label":t.label,disabled:g})})();case f.Vw.MONTH:case f.Vw.WEEK:return C();case f.Vw.TIME:return(()=>{const t="string"==typeof m?(0,h.BU)(m):"";return(0,e.jsx)(le,{type:"time",value:t,onChange:e=>{const t="string"==typeof m?m:void 0,r=(0,h.rI)(e,t);n(r)},disabled:g})})()}})()},We=()=>(0,Ae.MN)(),Be=d.j_,qe=(e,t)=>[...e,(0,h.RM)(t)].filter(Boolean),Ge=(e,t)=>qe([e.fullWidth],t),$e=({value:t,suggestions:r,placeholder:n,onChange:o,style:i})=>{const s=We();return(0,e.jsx)(a.TagInput,{values:t,suggestions:r,placeholder:n,onChange:e=>{null==o||o(e)},css:Ge(s,i)})},ze=({value:t,defaultValue:r,onChange:n,style:o,disabled:i,"aria-label":s,mode:a="date-time",format:l="iso"})=>{const u=We(),[c,d]=Be(t,r,n),f=()=>{const e=new Date;return"date"===a&&e.setHours(0,0,0,0),e},p=e.React.useRef(f());e.hooks.useUpdateEffect((()=>{p.current=f()}),[a]);const m=p.current,v=(0,h.dC)(c)||(0,h.dC)(r)||m,g=e.hooks.useEventCallback(((e,t)=>{if("number"==typeof e&&Number.isFinite(e)){const t=new Date(e);return"date"===a&&t.setHours(0,0,0,0),void d((0,h.JR)(t,l))}if(e instanceof Date){const t=new Date(e.getTime());return"date"===a&&t.setHours(0,0,0,0),void d((0,h.JR)(t,l))}null==e&&d("")})),y=qe([u.fullWidth,u.relative],o),b=(0,e.jsx)("div",{css:y},(0,e.jsx)(ke.DatePicker,{selectedDate:v,runtime:!1,showTimeInput:"date-time"===a,isLongTime:"date-time"===a,supportVirtualDateList:!1,disablePortal:!0,onChange:g,"aria-label":s}));return i?(0,e.jsx)("span",{"aria-disabled":"true",css:u.disabledPicker},b):b},Qe=({html:t,placeholder:r,className:n,style:o})=>t&&0!==t.trim().length?(0,e.jsx)(a.RichDisplayer,{className:n,css:(0,h.RM)(o),value:t}):(0,e.jsx)("div",{className:n,css:(0,h.RM)(o)},r||""),He=({options:t=[],values:r,defaultValues:n=[],onChange:o,placeholder:i,disabled:s=!1,style:l,allowSearch:u=!1,hierarchical:c=!1})=>{const d=e.hooks.useTranslation(p),f=We(),[m,v]=Be(r,n),[g,y]=e.React.useState(""),b=i||d("phSelectOption"),E=(u?g.trim():"").toLowerCase(),w=(0,h.SP)(t,c),O=(E?w.filter((({option:e})=>(e.label&&e.label.trim()?e.label.trim():String(e.value)).toLowerCase().includes(E))):w).map((({option:e,depth:t})=>{if(!e||null==e.value)return null;const r=e.label&&e.label.trim()?e.label.trim():String(e.value),n=c&&t>0?`${"- ".repeat(t)}${r}`:r;return{value:e.value,label:n,disabled:Boolean(e.disabled)}})).filter(Boolean),S=e.hooks.useEventCallback(((e,t)=>{const r=Array.isArray(t)?t.filter((e=>null!=e)):[];v(r),null==o||o(r)}));return(0,e.jsx)("div",{css:qe([f.fullWidth],l)},u?(0,e.jsx)(le,{type:"search",value:g,placeholder:d("phSearch"),onChange:e=>{y("string"==typeof e?e:"")},disabled:s}):null,(0,e.jsx)(a.MultiSelect,{values:m||[],defaultValues:n,onChange:S,placeholder:b,disabled:s,items:O,css:f.fullWidth}))};var Ke=u(787),Xe=u.n(Ke),Ye=u(4945),Je=u.n(Ye),Ze=u(1787),et=u(3890);class tt{constructor(e,t,r){this.fieldStates=new Map,this.fieldNames=new Set,this.formValues=e;for(const e of t)this.fieldNames.add(e.name),e.visibilityState&&this.fieldStates.set(e.name,e.visibilityState);if(r)for(const[e,t]of r)this.fieldNames.add(e),t&&this.fieldStates.set(e,t)}evaluate(e,t){const r=this.evaluateInternal(e);return t&&(this.fieldStates.set(t,r),this.fieldNames.add(t)),r}evaluateInternal(e){if(!e)return"visibleEnabled";for(const t of e.if){const r=this.evaluateClause(t);if(!0===r)return t.then;if("unknown"===r)return this.resolveDefault(e)}return this.resolveDefault(e)}resolveDefault(e){var t,r;return null!==(r=null===(t=e.default)||void 0===t?void 0:t.value)&&void 0!==r?r:"visibleEnabled"}evaluateClause(e){const t=Object.keys(e).filter((e=>e.startsWith("$")));if(0===t.length)return!0;let r=!1;for(const n of t){const t=this.evaluateCondition(n,e[n]);if(!1===t)return!1;"unknown"===t&&(r=!0)}return!r||"unknown"}evaluateCondition(e,t){switch(e){case"$equals":return this.evaluateEquals(t);case"$lessThan":return this.evaluateLessThan(t);case"$greaterThan":return this.evaluateGreaterThan(t);case"$matchesRegex":return this.evaluateMatchesRegex(t);case"$isEnabled":return this.evaluateIsEnabled(t);case"$isRuntimeValue":return this.evaluateIsRuntimeValue(t);case"$allOf":return this.evaluateAllOf(t);case"$anyOf":return this.evaluateAnyOf(t);case"$not":return this.evaluateNot(t);default:return!1}}evaluateEquals(e){if(!(0,h.Qd)(e))return!1;const{parameter:t,value:r}=e;if("string"!=typeof t)return!1;const n=this.getParameterValue(t);if(void 0===n)return"unknown";if(void 0===r)return!1;return(0,h.sL)(n)===(0,h.sL)(r)}evaluateLessThan(e){if(!(0,h.Qd)(e))return!1;const{parameter:t,value:r}=e;if("string"!=typeof t)return!1;if(null==r)return!1;const n=this.getParameterValue(t);return void 0===n?"unknown":this.compare(n,r,((e,t)=>e<t))}evaluateGreaterThan(e){if(!(0,h.Qd)(e))return!1;const{parameter:t,value:r}=e;if("string"!=typeof t)return!1;if(null==r)return!1;const n=this.getParameterValue(t);return void 0===n?"unknown":this.compare(n,r,((e,t)=>e>t))}compare(e,t,r){const n=(0,h.sL)(e),o=(0,h.sL)(t),i=Number(n),s=Number(o);if(Number.isFinite(i)&&Number.isFinite(s))return r(i,s);const a=this.toLexString(n),l=this.toLexString(o);return r(a.localeCompare(l),0)}evaluateMatchesRegex(e){if(!(0,h.Qd)(e))return!1;const{parameter:t,regex:r}=e;if("string"!=typeof t||"string"!=typeof r)return!1;const n=this.getParameterValue(t);if(void 0===n)return"unknown";const o=this.toLexString((0,h.sL)(n));try{return new RegExp(r).test(o)}catch(e){return!1}}evaluateIsEnabled(e){if(!(0,h.Qd)(e))return!1;const{parameter:t}=e;if("string"!=typeof t)return!1;if(!this.fieldNames.has(t))return!1;const r=this.fieldStates.get(t);return r?"visibleEnabled"===r||"hiddenEnabled"===r:"unknown"}evaluateIsRuntimeValue(e){if(!(0,h.Qd)(e))return!1;const{parameter:t}=e;if("string"!=typeof t)return!1;const r=this.getParameterValue(t);if(void 0===r)return!1;const n=(0,h.Nn)(r);if(n)return n.startsWith("$");const o=(0,h.sL)(r);return this.toLexString(o).startsWith("$")}evaluateAllOf(e){if(!Array.isArray(e)||0===e.length)return!1;let t=!1;for(const r of e){if(!(0,h.Qd)(r))return!1;const e=Object.keys(r).filter((e=>e.startsWith("$")));if(e.length)for(const n of e){const e=this.evaluateCondition(n,r[n]);if(!1===e)return!1;"unknown"===e&&(t=!0)}}return!t||"unknown"}evaluateAnyOf(e){if(!Array.isArray(e)||0===e.length)return!1;let t=!1;for(const r of e){if(!(0,h.Qd)(r)){console.log("Invalid condition in $anyOf (expected object)",r);continue}const e=Object.keys(r).filter((e=>e.startsWith("$")));if(e.length)for(const n of e){const e=this.evaluateCondition(n,r[n]);if(!0===e)return!0;"unknown"===e&&(t=!0)}else console.log("Invalid condition in $anyOf (no operators)",r)}return!!t&&"unknown"}evaluateNot(e){if(!(0,h.Qd)(e))return!1;const t=Object.keys(e).filter((e=>e.startsWith("$")));if(!t.length)return!1;const r=this.evaluateCondition(t[0],e[t[0]]);return"unknown"===r?"unknown":!r}getParameterValue(e){const t=this.formValues[e];if(!(0,h.Im)(t))return t}toLexString(e){return"string"==typeof e?e:String(e)}}const rt=[{value:f.hL.POLYGON,label:"optPolygon",icon:N(),tooltip:"tipDrawPolygon",hideLabel:!0},{value:f.hL.RECTANGLE,label:"optRectangle",icon:Xe(),tooltip:"tipDrawRectangle",hideLabel:!0}],nt=Object.freeze([]),ot=Object.freeze({modules:!1,submission:!1,workspaces:!1,parameters:!1,geometryValidation:!1}),it=(e,t)=>e.modules===t.modules&&e.submission===t.submission&&e.workspaces===t.workspaces&&e.parameters===t.parameters&&e.geometryValidation===t.geometryValidation,st=e=>Boolean(e.modules||e.submission||e.workspaces||e.parameters||e.geometryValidation),at=e=>{if(!e)return"";try{return JSON.stringify(e)}catch(e){return""}},lt=e=>{if(!(null==e?void 0:e.length))return[];const t=[],r=new Set;for(const n of e){if(!n||n.type!==f.QL.GEOMETRY)continue;if("string"!=typeof n.name)continue;const e=n.name.trim();e&&!r.has(e)&&(r.add(e),t.push(e))}return t},ut=(e,t,r)=>{const n=()=>e.convertParametersToFields(t);return{getFormConfig:n,validateValues:t=>{const o=e.validateFormValues(t,(()=>{const e=null==r?void 0:r();return e&&e.length>0?e:n()})()),i=Object.assign({},o.errors),s=t.start;if((0,h.YH)(s))try{(0,et.Xz)(s.trim())||(i.start="invalidDateTimeFormat")}catch(e){i.start="invalidDateTimeFormat"}return{isValid:0===Object.keys(i).length,errors:i}},initializeValues:()=>(0,h.bE)(n())}},ct=({orderResult:t,translate:r,onReuseGeography:n,onBack:o,onReset:i,config:s})=>{const a=(0,f.MN)(),[l,u]=e.React.useState(null);let c=null;if(t){const n=Boolean(t.cancelled),o=!n&&Boolean(t.success),i=(null==s?void 0:s.syncMode)?"sync":"async",l="sync"===t.serviceMode||"async"===t.serviceMode?t.serviceMode:i;if(n){const n=(t.code||"").toString().toUpperCase().includes("TIMEOUT")?"alertCancelledTimeout":"alertCancelledUser";c=(0,e.jsx)("div",{css:a.field},(0,e.jsx)(be,{type:"warning",withIcon:!0,text:r(n)}))}else if(o)c="async"===l?(0,e.jsx)("div",{css:a.field},(0,e.jsx)(be,{type:"info",withIcon:!0,text:r("alertAsyncSuccess")})):(0,e.jsx)("div",{css:a.field},(0,e.jsx)(be,{type:"success",withIcon:!0,text:r("alertSyncSuccess")}));else{const n=(t.code||"").toString().toUpperCase(),o=t.message||t.statusMessage||"",i="FME_JOB_FAILURE"===n||/FME\s*Flow\s*transformation\s*failed/i.test(o)?"alertJobFailed":"async"===l?"alertAsyncError":"alertSyncError";c=(0,e.jsx)("div",{css:a.field},(0,e.jsx)(be,{type:"error",withIcon:!0,text:r(i)}))}}const d=(0,h.Jo)(t,s,r,{onReuseGeography:n,onBack:o,onReset:i},l);return e.hooks.useEffectOnce((()=>{if(u(null),!t)return;const e=!Boolean(t.cancelled)&&Boolean(t.success),r=(null==s?void 0:s.syncMode)?"sync":"async",n="sync"===t.serviceMode||"async"===t.serviceMode?t.serviceMode:r;if(!e||"sync"!==n)return;let o=null;!t.downloadUrl&&t.blob&&(o=URL.createObjectURL(t.blob),u(o));const i=t.downloadUrl||o;if(!i)return;const a=setTimeout((()=>{try{const e=document.createElement("a");e.href=i,e.download=t.downloadFilename||"download",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}catch(e){}}),100);return()=>{clearTimeout(a),o&&setTimeout((()=>{try{URL.revokeObjectURL(o)}catch(e){}}),6e4)}})),(0,e.jsx)(e.React.Fragment,null,c,(0,e.jsx)(we,{state:d}))},dt=({workspaceParameters:t,workspaceName:r,workspaceItem:n,onBack:o,onSubmit:i,isSubmitting:s,translate:a,widgetId:l,config:u,geometryJson:c,jimuMapView:p})=>{const m=e.ReactRedux.useDispatch(),v=e.React.useRef((0,h.Yw)(m,l));e.hooks.useUpdateEffect((()=>{v.current=(0,h.Yw)(m,l)}),[m,l]);const g=v.current,[y]=e.React.useState((()=>new Ze.DF)),[b,E]=e.React.useState([]),w=e.React.useRef([]),[O,S]=e.React.useState({}),R=null!=c?c:null,[T,k]=e.React.useState((()=>at(R)));e.hooks.useEffectWithPreviousValues((()=>{const e=at(null!=c?c:null);k((t=>t===e?t:e))}),[c]);const[A,I]=e.React.useState((()=>lt(t)));e.hooks.useEffectWithPreviousValues((()=>{const e=lt(t);I((t=>t.length===e.length&&t.every(((t,r)=>t===e[r]))?t:e))}),[t]);const C=e.hooks.useEventCallback((e=>a(1===e?"valSingleError":"valMultipleErrors"))),_=e.React.useRef(null),M=e.React.useRef(""),L=t.map((e=>e.name)).join(",");_.current&&M.current===L||(_.current=ut(y,t,(()=>w.current)),M.current=L);const x=_.current,N=(0,d.UA)(x);e.hooks.useEffectOnce((()=>{N.validateForm()})),e.hooks.useUpdateEffect((()=>{N.validateForm()}),[N.values,N.validateForm]),e.hooks.useUpdateEffect((()=>{N.resetForm(),S({}),w.current=[],E([])}),[r,t,N.resetForm]);const j=e.hooks.useEventCallback(((e,t)=>t instanceof File?(S((r=>Object.assign(Object.assign({},r),{[e]:t}))),void N.updateField(e,t.name)):null===t&&e in O?(S((t=>Object.assign(Object.assign({},t),{[e]:null}))),void N.updateField(e,"")):void N.updateField(e,t))),P=N.values,D=N.setValues,F=e.hooks.useLatest(P),U=e.hooks.useEventCallback((()=>{if(!x)return;const e=x.getFormConfig(),t=new Map;for(const e of w.current)t.set(e.name,e.visibilityState);const r=new tt(F.current||{},e,t),n=e.map((e=>{const t=r.evaluate(e.visibility,e.name);return Object.assign(Object.assign({},e),{visibilityState:t})}));w.current=n,E(n);const o=[],i=[];for(const e of n)"hiddenDisabled"===e.visibilityState&&o.push(e.name),void 0!==e.visibilityState&&"visibleEnabled"!==e.visibilityState&&i.push(e.name);let s=!1;if(o.length){const e=F.current||{};let t;o.forEach((r=>{Object.prototype.hasOwnProperty.call(e,r)&&(t||(t=Object.assign({},e)),delete t[r])})),t&&(s=!0,D(t)),S((e=>{let t=null;return o.forEach((r=>{Object.prototype.hasOwnProperty.call(e,r)&&null!==e[r]&&(t||(t=Object.assign({},e)),t[r]=null)})),null!=t?t:e}))}if(i.length){const e=N.errors;let t=null;i.forEach((r=>{Object.prototype.hasOwnProperty.call(e,r)&&(t||(t=Object.assign({},e)),delete t[r])})),t&&(N.setErrors(t),N.setIsValid(0===Object.keys(t).length))}s||N.validateForm()}));e.hooks.useEffectOnce((()=>{U()})),e.hooks.useUpdateEffect((()=>{U()}),[P,U]),e.hooks.useUpdateEffect((()=>{U()}),[x,U]),e.hooks.useEffectWithPreviousValues((()=>{if(!A.length)return;const e=T||"",t=F.current;if(!t)return;if(!A.some((r=>{const n=null==t?void 0:t[r];return("string"==typeof n?n:"")!==e})))return;const r=Object.assign({},t);A.forEach((t=>{r[t]=e})),D(r)}),[A,T,F,D]);const V=e.hooks.useEventCallback((()=>{const e=N.validateForm();if(!e.isValid){const t=Object.keys(e.errors).length,r={message:C(t),type:f.By.VALIDATION,code:"FORM_INVALID",severity:f.MU.ERROR,recoverable:!0,timestampMs:Date.now(),kind:"serializable",userFriendlyMessage:"",suggestion:""};return void g.setError("general",r)}const t=Object.assign({},N.values);Object.keys(O).forEach((e=>{const r=O[e];r&&(t[e]=r)})),i({type:r,data:t})})),W=e.hooks.useEventCallback((e=>(0,h.v)(e))),B=e.hooks.useEventCallback((e=>{const t=(0,h.Z_)(e);return t?(0,h.I0)(t,a):void 0}));return(0,e.jsx)(Se,{variant:"layout",title:(null==n?void 0:n.title)||r,subtitle:(null==n?void 0:n.description)?W(n.description):a("titleConfigParams"),onBack:o,onSubmit:V,isValid:N.isValid,loading:s},(null==u?void 0:u.allowRemoteDataset)&&(0,e.jsx)(Re,{label:a("lblUploadFile"),helper:a("hintUploadFile")},(0,e.jsx)(Ve,{field:{name:"__upload_file__",label:a("lblUploadFile"),type:f.Vw.FILE,required:!1,readOnly:!1},value:N.values.__upload_file__,onChange:e=>j("__upload_file__",e),translate:a,jimuMapView:p})),(null==u?void 0:u.allowRemoteDataset)&&(null==u?void 0:u.allowRemoteUrlDataset)&&(0,e.jsx)(Re,{label:a("lblRemoteUrl"),helper:a("hintRemoteUrl")},(0,e.jsx)(ce,{value:N.values.__remote_dataset_url__||"",onChange:e=>j("__remote_dataset_url__",e)})),b.filter((e=>{var t;const r=null!==(t=e.visibilityState)&&void 0!==t?t:"visibleEnabled";return"visibleEnabled"===r||"visibleDisabled"===r})).map((t=>{if(!t||!t.name||!t.type)return null;const r=t.type===f.Vw.SWITCH||t.type===f.Vw.CHECKBOX,n="visibleDisabled"===t.visibilityState;return t.type===f.Vw.MESSAGE?(0,e.jsx)(Ve,{key:t.name,field:t,value:N.values[t.name],onChange:e=>j(t.name,e),translate:a,disabled:n,jimuMapView:p}):(0,e.jsx)(Re,{key:t.name,label:t.label,required:t.required,error:B(N.errors[t.name]),helper:t.helper,check:r},(0,e.jsx)(Ve,{field:t,value:N.values[t.name],onChange:e=>j(t.name,e),translate:a,disabled:n,jimuMapView:p}))})).filter(Boolean))},ft=({widgetId:t,state:r,instructionText:n,loadingState:o,canStartDrawing:i,error:s,onFormBack:a,onFormSubmit:l,orderResult:u,onReuseGeography:c,onBack:m,drawnArea:v,areaWarning:g,formatArea:y,showHeaderActions:b,drawingMode:E=f.hL.POLYGON,onDrawingModeChange:w,isDrawing:O,clickCount:S,isCompleting:R,isValidatingGeometry:T=!1,onReset:k,canReset:A=!0,config:I,onWorkspaceSelected:C,selectedWorkspace:_,workspaceItems:M,workspaceParameters:L,workspaceItem:x,isPrefetchingWorkspaces:N=!1,workspacePrefetchProgress:j,workspacePrefetchStatus:P,geometryJson:D,jimuMapView:F,isStartupValidating:U,startupValidationStep:V,startupValidationError:W,onRetryValidation:B,submissionPhase:q="idle",modeNotice:G})=>{var $,z,Q,H;const K=e.hooks.useTranslation(p),X=(0,f.MN)(),Y=e.ReactRedux.useDispatch(),J=e.React.useRef();J.current||(J.current=t&&t.trim()?t:`__local_${Date.now()}_${Math.random().toString(36).slice(2,11)}`);const Z=J.current,ee=e.React.useRef((0,h.Yw)(Y,Z));e.hooks.useUpdateEffect((()=>{ee.current=(0,h.Yw)(Y,Z)}),[Y,Z]);const te=null!=o?o:ot,[re,ne]=e.React.useState(te),oe=e.hooks.useLatest(re),ie=(0,d.d7)((e=>{ne(e)}),f.gM);e.hooks.useEffectWithPreviousValues((()=>{const e=oe.current,t=te;if(st(t))return ie.cancel(),void(it(e,t)||ne(t));st(e)?ie(t):it(e,t)||ne(t)}),[te.modules,te.parameters,te.workspaces,te.submission,ie]);const se=re,ae=Boolean(se.modules),le=Boolean(se.submission),ue=Boolean(se.workspaces),ce=null==i||i,de=e.React.useRef([]),fe=e.hooks.useEventCallback((()=>rt.map((e=>Object.assign(Object.assign({},e),{label:K(e.label),tooltip:K(e.tooltip)})))));e.hooks.useUpdateEffect((()=>{de.current=fe()}),[fe]),0===de.current.length&&(de.current=fe());const pe=de.current,he=e.hooks.useEventCallback((()=>{const t=(0,h.YH)(n)?n:K("tipDrawMode");return(0,e.jsx)("div",{css:X.form.layout},(0,e.jsx)("div",{css:X.form.content},(0,e.jsx)("div",{css:[X.form.body,X.centered]},(0,e.jsx)("div",{css:X.typo.instruction,role:"status","aria-live":"polite","aria-atomic":!0},t),(0,e.jsx)(Ee,{items:pe,value:E,onChange:e=>{null==w||w(e)},"aria-label":K("tipDrawMode")}))))})),me=e.hooks.useEventCallback(((t,r,n)=>{const o=[];if(Array.isArray(n))for(const e of n)null!=e&&o.push(e);const i=K("msgPleaseWait"),s=o.some((e=>"string"==typeof e&&e===i));return i&&i!==t&&i!==r&&!s&&o.push(i),(0,e.jsx)(we,{state:(0,f.aE)(t,r,o.length?o:void 0)})})),ve=e.hooks.useEventCallback(((t,r,n,o,i)=>{const s=[];n?s.push({label:K("btnRetry"),onClick:n}):r&&s.push({label:K("btnBack"),onClick:r});const a=(0,et.id)(null==I?void 0:I.supportEmail),l=(0,h.Ej)(K,a,i);let u=t;try{u=(0,h.I0)(String(t),K)}catch(e){}const c=l?Te(a,K,X,l):void 0;return(0,e.jsx)(we,{state:(0,f.Qg)(u,{code:o,actions:s,detail:c})})})),ge=null!==($=(0,h.Nn)(null==I?void 0:I.repository))&&void 0!==$?$:"",Oe=null!==(z=e.hooks.usePrevious(ge))&&void 0!==z?z:"",Se=(0,h.Nn)(null==I?void 0:I.fmeServerUrl),Re=(0,h.Nn)(null==I?void 0:I.fmeServerToken),ke=Boolean(Se&&Re&&ge),[Ae,Ie]=e.React.useState(null),Ce=(0,d.CH)({repository:ge||void 0,fmeServerUrl:Se||void 0,fmeServerToken:Re||void 0},{enabled:ke}),_e=(0,d.SB)(null==Ae?void 0:Ae.name,{repository:null!==(H=null!==(Q=null==Ae?void 0:Ae.repository)&&void 0!==Q?Q:ge)&&void 0!==H?H:void 0,fmeServerUrl:Se||void 0,fmeServerToken:Re||void 0},{enabled:Boolean(Ae&&ke)}),Me=e.hooks.useLatest(Ce.refetch),Le=Array.isArray(M)?M:nt,xe=ge||null,Ne=(Array.isArray(Ce.data)?Ce.data:nt).filter((e=>(null==e?void 0:e.type)===f.h6)),je=Ne.filter((e=>{const t=(0,h.Nn)(null==e?void 0:e.repository);return!t||!ge||t===ge})),Pe=0===je.length?nt:je.slice().sort(((e,t)=>(e.title||e.name).localeCompare(t.title||t.name,void 0,{sensitivity:"base"})));e.hooks.useEffectWithPreviousValues((()=>{if(!ke)return;const e=Pe;e===nt&&0===Le.length||e!==Le&&(((e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1){const n=e[r],o=t[r];if(!n||!o)return!1;if(n.name!==o.name)return!1;if((n.title||"")!==(o.title||""))return!1;if((0,h.Nn)(null==n?void 0:n.repository)!==(0,h.Nn)(null==o?void 0:o.repository))return!1}return!0})(e,Le)||ee.current.setWorkspaceItems(e))}),[Pe,Le,ke]),e.hooks.useUpdateEffect((()=>{ke||Le.length&&ee.current.clearWorkspaceState()}),[ke,Le.length]),e.hooks.useUpdateEffect((()=>{if(Oe===ge)return;if(Ie(null),ee.current.clearWorkspaceState(),!ge||!ke)return;const e=Me.current;"function"==typeof e&&e()}),[ge,Oe,ke]),e.hooks.useUpdateEffect((()=>{ke||Ae&&Ie(null)}),[ke,Ae]),e.hooks.useUpdateEffect((()=>{if(!Ae)return;const e=_e.data;if(!e)return;const t=Ae.name;t&&(C?C(t,e.parameters,e.item):ee.current.applyWorkspaceData({workspaceName:t,parameters:e.parameters,item:e.item}),Ie(null))}),[Ae,_e.data,C]);const De=Le.length>0,Fe=Pe.length>0,Ue=!!ke&&Boolean(Ce.isLoading||!De&&!Fe&&Ce.isFetching),Ve=Boolean(_e.isLoading),We=(0,d.bn)(Y,t);e.hooks.useUpdateEffect((()=>{We("workspaces",Ue)}),[Ue,We]),e.hooks.useUpdateEffect((()=>{We("parameters",Ve)}),[Ve,We]);const Be=e.hooks.useEventCallback(((e,t)=>{if(!e)return null;if((0,h.zf)(e))return null;try{return(0,h.I0)(t,K)}catch(e){return K(t)}})),qe=Ce.isError&&ke?Be(Ce.error,"failedToLoadWorkspaces"):null,Ge=(_e.isError?Be(_e.error,"failedToLoadWorkspaceDetails"):null)||qe,$e=e.hooks.useEventCallback((()=>{if(Ie(null),!ke)return void ee.current.clearWorkspaceState();const e=Me.current;"function"==typeof e&&e()})),ze=e.hooks.useEventCallback((()=>Le.map(((t,r)=>{const n=t.title||t.name,o=t.name&&t.name.trim()?t.name:`workspace-${r}`;return(0,e.jsx)("div",{key:o,role:"listitem","aria-label":n},(0,e.jsx)(ye,{text:n,icon:Je(),type:"tertiary",onClick:()=>{var e,r;const n=null!==(r=null!==(e=(0,h.Nn)(null==t?void 0:t.repository))&&void 0!==e?e:xe)&&void 0!==r?r:void 0;Ie({name:t.name,repository:n})},logging:{enabled:!0,prefix:"FME-Export-WorkspaceSelection"}}))})))),Qe=()=>{const e=K("statusInitMap"),t=K("msgLoadingDraw");return ae?me(e,t,[K("tipDrawMode")]):ce?he():me(e,t,[K("tipDrawMode")])},He=()=>{switch(r){case f.nE.INITIAL:return Qe();case f.nE.DRAWING:return 0===(S||0)?he():(0,e.jsx)("div",{css:X.centered},(0,e.jsx)("div",{css:X.typo.instruction,role:"status","aria-live":"polite","aria-atomic":!0},n));case f.nE.EXPORT_OPTIONS:case f.nE.WORKSPACE_SELECTION:return Ke();case f.nE.EXPORT_FORM:return Xe();case f.nE.ORDER_RESULT:return ve(K("msgNoResult"),m);default:return Qe()}},Ke=()=>{const t=Boolean(N&&Le.length&&r===f.nE.WORKSPACE_SELECTION);if((0,h.Yn)(ue||t,Le,r,Boolean(Ge))){const e=K("statusLoadWorkspaces"),r=t?"":K("statusLoadWorkspaces");return me(e,r)}if(Ge)return ve(Ge,m,$e);if(!Le.length){const t=[{label:K("btnRetry"),onClick:$e},{label:K("btnBack"),onClick:m}];return(0,e.jsx)(we,{state:(0,f.Dd)(K("msgNoWorkspaces"),t)})}return(0,e.jsx)("div",{css:X.selection.container},(0,e.jsx)("div",{css:X.btn.group,role:"list"},ze()))},Xe=()=>a&&l?L&&_?(0,e.jsx)(e.React.Fragment,null,(()=>{if(!G)return null;const{messageKey:t,params:r,severity:n}=G;if(!t)return null;let o="";try{o=K(t,r||{})}catch(e){o=K(t)}if(!o)return null;const i="info"===n?"info":"warning";return(0,e.jsx)(be,{type:i,text:o,variant:"default",withIcon:!0})})(),(0,e.jsx)(dt,{widgetId:Z,workspaceParameters:L,workspaceName:_,workspaceItem:x,onBack:a,onSubmit:l,isSubmitting:le,translate:K,config:I,geometryJson:D,jimuMapView:F})):me(K("statusLoadWorkspaces")):ve(K("errNoConfig"),m);return(0,e.jsx)("div",{css:X.parent},(0,e.jsx)("div",{css:X.header},b?(()=>{let t=null;if(r!==f.nE.INITIAL&&!(r===f.nE.DRAWING&&0===(S||0))){(0,h.AR)(k,A,r,null!=v?v:0,O,S)&&(t=(0,e.jsx)(ye,{tooltip:K("tipCancel"),tooltipPlacement:"bottom",onClick:k,color:"inherit",type:"default",variant:"contained",text:K("btnCancel"),size:"sm","aria-label":K("tipCancel"),logging:{enabled:!0,prefix:"FME-Export-Header"},block:!1}))}return t||null})():null),(0,e.jsx)("div",{css:X.content},r===f.nE.STARTUP_VALIDATION?(()=>{if(W){const e=(null==I?void 0:I.supportEmail)||"";return ve(W.message,void 0,B||(()=>{window.location.reload()}),W.code,W.userFriendlyMessage||e)}const e=V||K("statusValidating");return me(e)})():r===f.nE.ORDER_RESULT&&u?(0,e.jsx)(ct,{orderResult:u,translate:K,onReuseGeography:c,onBack:m,onReset:k,config:I}):le?(()=>{const e=Boolean(null==I?void 0:I.syncMode),t=K(e?"submittingOrderSync":"submittingOrder");let r=null;switch(q){case"preparing":r="statusPreparing";break;case"uploading":r="statusUploading";break;default:r=null}return me(t,K(r||(e?"msgProcessingWait":"msgPleaseWait")))})():Boolean(s)?ve(s.message,void 0,"info"!==s.severity?m:void 0,s.code,s.userFriendlyMessage):!T||r!==f.nE.DRAWING&&r!==f.nE.EXPORT_OPTIONS&&r!==f.nE.WORKSPACE_SELECTION?He():(0,e.jsx)(we,{state:(0,f.aE)(K("statusValidateGeom"),K("msgCheckGeom"))})))};var pt=u(2238),ht=u(1138),mt=u(1618),vt=u(5880),gt=u(5009),yt=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};function bt(t){var n,o,a,l,u;const{id:c,widgetId:m,useMapWidgetIds:v,dispatch:g,config:y}=t,b=null!==(n=c)&&void 0!==n?n:m,E=(0,vt.createFmeSelectors)(b),w=e.ReactRedux.useSelector(E.selectViewMode),O=e.ReactRedux.useSelector(E.selectDrawingTool),S=e.ReactRedux.useSelector(E.selectGeometryJson),R=e.ReactRedux.useSelector(E.selectDrawnArea),T=e.ReactRedux.useSelector(E.selectWorkspaceItems),k=e.ReactRedux.useSelector(E.selectWorkspaceParameters),A=e.ReactRedux.useSelector(E.selectWorkspaceItem),I=e.ReactRedux.useSelector(E.selectSelectedWorkspace),C=e.ReactRedux.useSelector(E.selectOrderResult),_=e.ReactRedux.useSelector(E.selectLoading,r),M=e.ReactRedux.useSelector(E.selectLoadingFlag("submission")),L=e.ReactRedux.useSelector(E.selectLoadingFlag("geometryValidation")),x=e.ReactRedux.useSelector(E.selectCanExport),N=e.ReactRedux.useSelector(E.selectPrimaryError),j=e.hooks.usePrevious(w),P=e.hooks.useEventCallback((e=>{if(!e)return null;const t="number"==typeof e.timestampMs?e.timestampMs:Date.now();return Object.assign(Object.assign({},e),{timestamp:new Date(t),timestampMs:t,kind:"runtime"})})),D="general"===(null==N?void 0:N.scope)?N.details:null,F=P(D),U=(null==D?void 0:D.severity)===f.MU.ERROR,V=null!==(o=null==N?void 0:N.details)&&void 0!==o?o:null,W=null!==(a=null==y?void 0:y.repository)&&void 0!==a?a:null,B=(0,d.ho)(T,{repository:null!==(l=null==y?void 0:y.repository)&&void 0!==l?l:void 0,fmeServerUrl:null==y?void 0:y.fmeServerUrl,fmeServerToken:null==y?void 0:y.fmeServerToken},{enabled:w===f.nE.WORKSPACE_SELECTION&&T.length>0&&!U}),{isPrefetching:q,progress:G,prefetchStatus:$}=B,z=G?{loaded:G.loaded,total:G.total}:null,Q=K(),H=e.hooks.useTranslation(p),X=e.hooks.useEventCallback((e=>H(e))),Y=e.hooks.useCancelablePromiseMaker(),J=e.hooks.useLatest(y),Z=e.hooks.useLatest(w),ee=e.hooks.useLatest(O),[te,re]=e.React.useState(!1),ne=e.React.useRef(null),oe=e.React.useRef(null),ie=e.React.useRef(!1),se=e.React.useRef(null),[ae]=e.React.useState((()=>Symbol(`fme-popup-${b}`))),le=e.React.useRef(ae),ue=e.hooks.usePrevious(b);e.hooks.useUpdateEffect((()=>{if(ue&&ue!==b){const e=le.current;e&&h.Fv.release(e);const t=Symbol(`fme-popup-${b}`);le.current=t}}),[b,ue]);const ce=e.React.useRef(null),de=e.React.useRef((0,h.Yw)(g,b));e.hooks.useUpdateEffect((()=>{de.current=(0,h.Yw)(g,b)}),[g,b]);const fe=de.current,[pe,he]=e.React.useState({isActive:!1,clickCount:0}),[me,ve]=e.React.useState("idle"),[ge,ye]=e.React.useState(""),be=e.hooks.useEventCallback((e=>{he((t=>Object.assign(Object.assign({},t),e)))})),Ee=e.hooks.useEventCallback((e=>{"normalizing"!==e?"resolvingDataset"!==e?"applyingDefaults"!==e&&"complete"!==e||ve("finalizing"):ve("uploading"):ve("preparing")})),Oe=e.hooks.useEventCallback((e=>{ee.current!==e&&fe.setDrawingTool(e)})),[Se,Re]=e.React.useState(!1),[ke,Ae]=e.React.useState(null),[Ie,Ce]=e.React.useState(),_e=w===f.nE.STARTUP_VALIDATION,Me=_e&&D?D:null,Le=_e?F:null,xe=_e&&!Me,Ne=_e?Ie:void 0,je=e.hooks.useEventCallback((e=>{Re(Boolean(e))})),Pe=e.hooks.useEventCallback((()=>{Ae(null)})),De=e.hooks.useEventCallback(((e,t,r)=>{var n,o;if(!e)return void Ae(null);const i={};let s="forcedAsyncArea";"url_length"===e.reason?(s="forcedAsyncUrlLength","number"==typeof e.urlLength&&(i.urlLength=e.urlLength.toLocaleString())):("number"==typeof e.value&&(i.area=t&&(null===(n=null==r?void 0:r.view)||void 0===n?void 0:n.spatialReference)?(0,h.Jd)(e.value,t,r.view.spatialReference):Math.max(0,Math.round(e.value)).toLocaleString()),"number"==typeof e.threshold&&(i.threshold=t&&(null===(o=null==r?void 0:r.view)||void 0===o?void 0:o.spatialReference)?(0,h.Jd)(e.threshold,t,r.view.spatialReference):Math.max(0,Math.round(e.threshold)).toLocaleString())),Ae({messageKey:s,severity:"warning",params:i})})),Fe=e.hooks.useEventCallback((()=>{null!=ce.current&&("undefined"!=typeof window&&window.clearTimeout(ce.current),ce.current=null)}));e.hooks.useUpdateEffect((()=>{_e||Ce(void 0)}),[_e]);const Ue=e.hooks.useEventCallback((e=>{if(!(null==e?void 0:e.view))return;const t=e.view,r=null==t?void 0:t.popup;if(r){h.Fv.acquire(le.current,r,t);try{"function"==typeof t.closePopup&&t.closePopup()}catch(e){(0,h.fA)("Failed to close map popup",e)}}})),Ve=e.hooks.useEventCallback((()=>{h.Fv.release(le.current)})),We=e.hooks.useEventCallback((()=>{var t,r;const n=null===(t=J.current)||void 0===t?void 0:t.autoCloseOtherWidgets;if(void 0===n||n)try{const t="function"==typeof e.getAppStore?(0,e.getAppStore)():null,n=null===(r=null==t?void 0:t.getState)||void 0===r?void 0:r.call(t),o=null==n?void 0:n.widgetsRuntimeInfo,i=(0,h.UE)(o,b);if(i.length){const t=i.filter((e=>{const t=null==o?void 0:o[e];return Boolean(null==t?void 0:t.isClassLoaded)}));t.length&&g(e.appActions.closeWidgets(t))}}catch(e){(0,h.fA)("closeOtherWidgets error",e)}})),Be=(0,d.rG)(g,b),qe=(0,h.bQ)(),Ge=e.hooks.useEventCallback((e=>{fe.clearError("export"),fe.clearError("import"),fe.setViewMode(e)})),$e=(null==y?void 0:y.drawingColor)||f.Ve,ze={outlineWidth:null==y?void 0:y.drawingOutlineWidth,fillOpacity:null==y?void 0:y.drawingFillOpacity},Qe=e.React.useRef((0,h.gV)((0,h.Xk)($e),ze)),He=`${$e}-${null==y?void 0:y.drawingOutlineWidth}-${null==y?void 0:y.drawingFillOpacity}`,Ke=e.hooks.usePrevious(He);e.hooks.useUpdateEffect((()=>{He!==Ke&&(Qe.current=(0,h.gV)((0,h.Xk)($e),ze))}),[He,Ke,$e,ze]);const Xe=e.hooks.useEventCallback((()=>{var e;if(null===(e=ne.current)||void 0===e?void 0:e.dispose)try{ne.current.dispose()}catch(e){(0,h.fA)("Failed to dispose FME client",e)}ne.current=null,oe.current=null})),Ye=e.hooks.useEventCallback((()=>{var e,t,r,n,o,i,s;const a=J.current;if(!a)throw new Error("FME client configuration unavailable");const l=[null!==(t=null!==(e=a.fmeServerUrl)&&void 0!==e?e:a.fme_server_url)&&void 0!==t?t:"",null!==(o=null!==(n=null!==(r=a.fmeServerToken)&&void 0!==r?r:a.fme_server_token)&&void 0!==n?n:a.fmw_server_token)&&void 0!==o?o:"",null!==(i=a.repository)&&void 0!==i?i:"",null!==(s=a.requestTimeout)&&void 0!==s?s:""].map((e=>(null!=e?e:0===e)?String(e):"")).join("|");if(ne.current&&oe.current===l||(Xe(),ne.current=(0,pt.ER)(a),oe.current=l),!ne.current)throw new Error("Failed to initialize FME client");return ne.current}));e.hooks.useUpdateEffect((()=>{y||Xe()}),[y]),e.hooks.useUpdateEffect((()=>{(null==y?void 0:y.fmeServerUrl)&&(null==y?void 0:y.fmeServerToken)||Fe()}),[null==y?void 0:y.fmeServerUrl,null==y?void 0:y.fmeServerToken,null==y?void 0:y.repository,Fe]),e.hooks.useUnmount((()=>{qe.cancel(),jt.cancel(),Xe(),Ve(),Fe(),(0,h.Wz)(se.current),se.current=null}));const Je=e.hooks.useEventCallback((()=>{const e=ee.current;fe.resetState(),je(!1),fe.clearWorkspaceState(),e&&fe.setDrawingTool(e)})),tt=e.hooks.useEventCallback((()=>{fe.resetToDrawing(),je(!1),be({isActive:!1,clickCount:0})})),[rt,nt]=e.React.useState(0),ot=e.hooks.useEventCallback((()=>{nt((e=>e+1))})),it=e.hooks.useEventCallback(((t,r)=>{var n;if((0,h.bN)(t))return null;const o=(0,et.id)(null===(n=J.current)||void 0===n?void 0:n.supportEmail),i=(0,h.Ok)(t,X,o),s=i.message,a=(0,h.GC)(t,{onRetry:null!=r?r:()=>{fe.clearError("general");const e=((null==t?void 0:t.code)||"").toUpperCase();if("GEOMETRY_INVALID"===e||"INVALID_GEOMETRY"===e||"AREA_TOO_LARGE"===e){re(!0),fe.setViewMode(f.nE.DRAWING);try{!bt&&st&&ct&&Gt(ct)}catch(e){}}},onReload:(0,h.xs)()?()=>{var e;try{null===(e=globalThis.location)||void 0===e||e.reload()}catch(e){}}:void 0},X),l=(0,h.Nn)(i.hint),u=l?i.code?Te(o,X,Q,l):l:void 0;return(0,e.jsx)(we,{state:(0,f.Qg)(s,{code:i.code,actions:a,detail:u})})})),{modules:st,loading:at,errorKey:lt}=(0,d.Gb)(rt),ut=(0,d.Vp)(),{jimuMapView:ct,setJimuMapView:dt,sketchViewModel:bt,setSketchViewModel:Et,graphicsLayer:wt,setGraphicsLayer:Ot,setCleanupHandles:St,teardownDrawingResources:Rt,cleanupResources:Tt}=ut,kt=(0,d.bn)(g,t.id);e.hooks.useUpdateEffect((()=>{kt("modules",Boolean(at))}),[at,kt]),e.hooks.useUpdateEffect((()=>{lt&&Be(lt,f.By.MODULE,"MAP_MODULES_LOAD_FAILED")}),[lt,Be]),e.hooks.useUpdateEffect((()=>{!at&&st&&"MAP_MODULES_LOAD_FAILED"===(null==F?void 0:F.code)&&de.current.clearError("general")}),[at,st,null==F?void 0:F.code]),e.hooks.useUpdateEffect((()=>{if(w!==f.nE.WORKSPACE_SELECTION)if(w!==f.nE.EXPORT_FORM)if(w!==f.nE.ORDER_RESULT)ye("");else{const e=(null==C?void 0:C.success)?"msgOrderSuccess":"msgOrderFail";ye(X(e))}else ye(X("msgFormReady"));else ye(X("msgWorkspacesReady"))}),[w,null==C?void 0:C.success,X]);const At=e.hooks.useEventCallback((()=>{if(!S||!(null==st?void 0:st.Polygon))return null;const e=st.Polygon;try{if("function"==typeof(null==e?void 0:e.fromJSON))return e.fromJSON(S)}catch(e){return null}return null}));e.hooks.useUpdateEffect((()=>{if(w!==f.nE.EXPORT_FORM||!J.current)return void Pe();let e=null;(0,h.Mm)({data:{}},J.current,{workspaceItem:A,areaWarning:Se,drawnArea:R,onModeOverride:t=>{e=t}}),e?De(e,st,ct):Pe()}),[w,A,Se,R,st,ct,null==y?void 0:y.syncMode,null==y?void 0:y.largeArea,Pe,De]);const It=e.hooks.useWidgetActived(b),Ct=e.hooks.useEventCallback((e=>{re(!1),(null==e?void 0:e.clearLocalGeometry)&&be({clickCount:0}),bt&&(0,d.uB)(bt),be({isActive:!1})})),_t=e.hooks.useEventCallback(((e,t)=>{Ct(t),fe.setViewMode(e)})),Mt=e.hooks.useEventCallback((e=>{Ce(e)})),Lt=e.hooks.useEventCallback((()=>{Ce(void 0),fe.clearError("general"),fe.completeStartup();const e=Z.current,t=null==e,r=e===f.nE.STARTUP_VALIDATION||e===f.nE.INITIAL;(t||r)&&Ge(f.nE.DRAWING)})),xt=e.hooks.useEventCallback((e=>{Ce(void 0),fe.setError("general",e)})),Nt=e.hooks.useEventCallback(((e,t)=>({message:X(e||"errorStartupFailed"),type:f.By.CONFIG,code:t,severity:f.MU.ERROR,recoverable:!0,timestampMs:Date.now(),userFriendlyMessage:(null==y?void 0:y.supportEmail)?String(y.supportEmail):"",suggestion:X("btnRetryValidation"),kind:"serializable"}))),jt=(0,h.bQ)(),Pt=e.hooks.useEventCallback((()=>yt(this,void 0,void 0,(function*(){const e=jt.abortAndCreate();fe.clearError("general");try{yield(0,Ze.MB)({config:y,useMapWidgetIds:v?[...v]:[],translate:X,signal:e.signal,onProgress:Mt}),Lt()}catch(e){if((0,h.zf)(e))return;let t=null;try{e instanceof Error&&e.message&&(t=JSON.parse(e.message))}catch(e){}const r=t||e,n=(null==t?void 0:t.message)||(0,ht.fV)(r,(0,et.Ko)(r)),o="object"==typeof r&&null!==r&&"code"in r?String(r.code):"STARTUP_VALIDATION_FAILED";xt(Nt(n,o))}finally{jt.finalize(e)}})))),Dt=e.hooks.useEventCallback((()=>{ot(),Pt()}));e.hooks.useEffectOnce((()=>(Pt(),()=>{jt.cancel()}))),e.hooks.useUpdateEffect((()=>{var e;(0,gt.z9)(null!==(e=null==y?void 0:y.enableLogging)&&void 0!==e&&e)}),[null==y?void 0:y.enableLogging]);const Ft=e.hooks.useEventCallback(((e=!1)=>{qe.cancel(),jt.cancel(),Ce(void 0),re(!1),e?Tt():Rt(),be({isActive:!1,clickCount:0}),Je()}));e.hooks.useEffectWithPreviousValues((e=>{const t=e[0];if(!t)return;const r=y,n=(null==t?void 0:t.fmeServerUrl)!==(null==r?void 0:r.fmeServerUrl),o=(null==t?void 0:t.fmeServerToken)!==(null==r?void 0:r.fmeServerToken),i=(null==t?void 0:t.repository)!==(null==r?void 0:r.repository);try{if(n||o||i){Ft(!1);const e=window.setTimeout((()=>{Pt()}),50);return()=>{window.clearTimeout(e)}}}catch(e){}}),[y]),e.hooks.useUpdateEffect((()=>{try{const e=Array.isArray(v)&&v.length>0;Ft(!e)}catch(e){}Pt()}),[v]);const Ut=e.hooks.useEventCallback((()=>{(0,d.yN)(wt)})),Vt=e.hooks.useEventCallback((e=>yt(this,void 0,void 0,(function*(){var t,r;if(!(null===(t=e.graphic)||void 0===t?void 0:t.geometry))return;if(ie.current)return;const n=se.current;(0,h.Wz)(n);const o=new AbortController;se.current=o,ie.current=!0;try{Ct(),je(!1),kt("geometryValidation",!0);const t=yield(0,Ze.G1)({geometry:e.graphic.geometry,modules:st,graphicsLayer:wt,config:y,signal:o.signal});if(o.signal.aborted)return void kt("geometryValidation",!1);if(!t.success){try{null==wt||wt.remove(e.graphic)}catch(e){}return void(o.signal.aborted||(kt("geometryValidation",!1),Rt(),fe.setGeometry(null,0),je(!1),_t(f.nE.INITIAL,{clearLocalGeometry:!0}),t.error&&("ZERO_AREA"===t.error.code?Be(X("errGeomInvalid"),f.By.VALIDATION,"ZERO_AREA"):t.error.message?Be(t.error.message,f.By.VALIDATION,t.error.code):fe.setError("general",t.error))))}if(je(t.shouldWarn||!1),e.graphic&&t.geometry){e.graphic.geometry=t.geometry;const n=null===(r=Qe.current)||void 0===r?void 0:r.HIGHLIGHT_SYMBOL;n&&(e.graphic.symbol=n)}t.geometry&&void 0!==t.area&&(fe.completeDrawing(t.geometry,t.area,f.nE.WORKSPACE_SELECTION),kt("geometryValidation",!1))}catch(e){o.signal.aborted||(je(!1),kt("geometryValidation",!1),Be(X("errDrawComplete"),f.By.VALIDATION,"DRAWING_COMPLETE_ERROR"))}finally{se.current===o&&(se.current=null),ie.current=!1}})))),Wt=e.hooks.useEventCallback((t=>{try{const r={jobId:t.jobId||t.code||"unknown",workspace:I||"unknown",status:t.success?"completed":"failed",downloadUrl:t.downloadUrl||"",message:t.message||"",timestamp:(new Date).toISOString(),serviceMode:t.serviceMode||"unknown"},n=new e.DataRecordSetChangeMessage(b,[r],[]);e.MessageManager.getInstance().publishMessage(n)}catch(e){}})),Bt=e.hooks.useEventCallback((t=>{Qt!==e.WidgetState.Closed&&(fe.setOrderResult(t),Ge(f.nE.ORDER_RESULT),Wt(t))})),qt=e.hooks.useEventCallback((t=>yt(this,void 0,void 0,(function*(){if(M||!x)return;const r=(0,mt.M4)(R,null==y?void 0:y.maxArea);if(!r.ok&&r.message)return ve("idle"),void Be(r.message,f.By.VALIDATION,r.code);e.ReactDOM.unstable_batchedUpdates((()=>{fe.setLoadingFlag("submission",!0),ve("preparing"),Pe()}));try{const e=Ye(),r=(null==t?void 0:t.data)||{};(0,h.Mm)({data:r},J.current,{workspaceItem:A,areaWarning:Se,drawnArea:R,onModeOverride:De});const n=yield(0,Ze.JV)({formData:t,config:J.current,geometryJson:S,geometry:At()||void 0,modules:st,workspaceParameters:k,workspaceItem:A,selectedWorkspace:I,areaWarning:Se,drawnArea:R,fmeClient:e,submissionAbort:qe,widgetId:b,translate:X,makeCancelable:Y,onStatusChange:Ee,getActiveGeometry:At});if(!n.success&&n.error){const e=n.error;if(e&&"object"==typeof e&&"kind"in e)return ve("idle"),void fe.setError("general",e)}if(n.result&&(Bt(n.result),n.result.success&&I))try{s.q.invalidateQueries({queryKey:["fme","workspace-item",I]})}catch(e){}}catch(e){(0,h.zf)(e)||Be(X("errJobSubmit"),f.By.MODULE,"SUBMISSION_UNEXPECTED_ERROR")}finally{ve("idle"),fe.setLoadingFlag("submission",!1)}})))),Gt=e.hooks.useEventCallback((e=>{var t;if(dt(e),st)try{Ue(e);const r=(0,Ze.fW)(e,st,Ot);try{r.title=X("lblDrawLayer")}catch(e){}const{sketchViewModel:n,cleanup:o}=(0,Ze.CY)({jmv:e,modules:st,layer:r,onDrawComplete:Vt,dispatch:g,widgetId:b,symbols:null===(t=Qe.current)||void 0===t?void 0:t.DRAWING_SYMBOLS,onDrawingSessionChange:be,onSketchToolStart:Oe});St(o),Et(n)}catch(e){Be(X("errMapInit"),f.By.MODULE,"MAP_INIT_ERROR")}}));e.hooks.useUpdateEffect((()=>{st&&ct&&!bt&&Gt(ct)}),[st,ct,bt,Gt]),e.hooks.useUpdateEffect((()=>{var e,t;if(!te||!bt)return;re(!1);const r=(null!=O?O:f.hL.POLYGON)===f.hL.RECTANGLE?"rectangle":"polygon";try{const n=null===(t=(e=bt).create)||void 0===t?void 0:t.call(e,r);n&&"function"==typeof n.catch&&n.catch((e=>{(0,h.fA)("Sketch create promise error",e)}))}catch(e){(0,h.fA)("Sketch auto-start error",e)}}),[te,bt,O]),e.hooks.useUpdateEffect((()=>{var e,t,r;const n=null===(e=Qe.current)||void 0===e?void 0:e.DRAWING_SYMBOLS;if(n){if(bt)try{bt.polygonSymbol=n.polygon,bt.polylineSymbol=n.polyline,bt.pointSymbol=n.point;const e=bt.viewModel,o=e=>{e&&"object"==typeof e&&(e.symbol=n.polygon)};o(null==e?void 0:e.graphic),o(null==e?void 0:e.previewGraphic);const i=null==e?void 0:e.sketchGraphicsLayer;null===(r=null===(t=null==i?void 0:i.graphics)||void 0===t?void 0:t.forEach)||void 0===r||r.call(t,(e=>{var t;"polygon"===(null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.type)&&(e.symbol=n.polygon)}))}catch(e){}if(wt)try{wt.graphics.forEach((e=>{var t;"polygon"===(null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.type)&&(e.symbol=n.polygon)}))}catch(e){}}}),[bt,wt,null==y?void 0:y.drawingColor,null==y?void 0:y.drawingOutlineWidth,null==y?void 0:y.drawingFillOpacity]),e.hooks.useUpdateEffect((()=>{!It&&bt&&(0,d.uB)(bt)}),[It,bt]),e.hooks.useUpdateEffect((()=>{const e=ct;return()=>{e&&Tt()}}),[ct,Tt]),e.hooks.useEffectOnce((()=>()=>{qe.cancel(),jt.cancel(),Xe(),Tt(),fe.removeWidgetState()}));const $t=e.hooks.useEventCallback(((e,t,r)=>0===r?X("hintClickMap"):e===f.hL.RECTANGLE?X("hintDrawRect"):e===f.hL.POLYGON?X(r<3?"hintDrawContinue":"hintDrawComplete"):X("hintSelectMode"))),zt=e.hooks.useEventCallback((t=>{if(!bt)return;e.ReactDOM.unstable_batchedUpdates((()=>{be({isActive:!0,clickCount:0}),fe.setDrawingTool(t),fe.setViewMode(f.nE.DRAWING),je(!1)})),Ut();try{const e=bt;Boolean("active"===(null==e?void 0:e.state)||(null==e?void 0:e._creating))&&(0,d.uB)(bt)}catch(e){(0,d.uB)(bt)}const r=t===f.hL.RECTANGLE?"rectangle":"polygon";if(null==bt?void 0:bt.create)try{const e=bt.create(r);e&&"function"==typeof e.catch&&e.catch((e=>{(0,h.fA)("Sketch create promise error",e)}))}catch(e){(0,h.fA)("Sketch create error",e)}})),Qt=e.ReactRedux.useSelector((e=>{var t,r;return null===(r=null===(t=e.widgetsRuntimeInfo)||void 0===t?void 0:t[b])||void 0===r?void 0:r.state})),Ht=e.hooks.usePrevious(Qt),Kt=e.hooks.usePrevious(W),Xt=w===f.nE.DRAWING&&0===pe.clickCount&&!pe.isActive&&!ie.current&&bt&&!M&&!U;e.hooks.useUpdateEffect((()=>{Xt&&Qt!==e.WidgetState.Closed&&zt(O)}),[w,pe.clickCount,pe.isActive,O,bt,M,zt,Qt,U]);const Yt=e.hooks.useEventCallback((()=>{qe.cancel(),ve("idle"),Ut(),je(!1),be({isActive:!1,clickCount:0}),bt&&(0,d.uB)(bt),tt(),We(),ct&&Ue(ct)}));e.hooks.useUpdateEffect((()=>{Qt===e.WidgetState.Closed&&Ht!==e.WidgetState.Closed&&Yt()}),[Qt,Ht,Yt]),e.hooks.useUpdateEffect((()=>{const t=Qt===e.WidgetState.Opened||Qt===e.WidgetState.Active,r=Ht===e.WidgetState.Closed||Ht===e.WidgetState.Hidden||void 0===Ht;if(t&&r){We(),ct&&Ue(ct);const e=Z.current;e!==f.nE.ORDER_RESULT&&e!==f.nE.EXPORT_FORM&&e!==f.nE.WORKSPACE_SELECTION||tt(),Pt()}}),[Qt,Ht,ct,We,Ue,tt]),e.hooks.useUpdateEffect((()=>{U&&Rt()}),[U,Rt]),e.hooks.useUpdateEffect((()=>{if(!Boolean(S))return void(Se&&je(!1));const e=(0,mt.nW)(R,{maxArea:null==y?void 0:y.maxArea,largeArea:null==y?void 0:y.largeArea}).shouldWarn;e!==Se&&je(e)}),[S,R,Se,null==y?void 0:y.largeArea,null==y?void 0:y.maxArea,je]),e.hooks.useUpdateEffect((()=>{W!==Kt&&Se&&je(!1)}),[W,Kt,Se,je]),e.hooks.useUpdateEffect((()=>{Qt!==e.WidgetState.Closed&&Qt!==e.WidgetState.Hidden||Ve()}),[Qt,Ve]),e.hooks.useUpdateEffect((()=>{ct||Ve()}),[ct,Ve]);const Jt=e.hooks.useEventCallback(((e,t,r)=>{de.current.applyWorkspaceData({workspaceName:e,parameters:t,item:r}),Ge(f.nE.EXPORT_FORM)})),Zt=e.hooks.useEventCallback((()=>{Ge(f.nE.INITIAL)})),er=e.hooks.useEventCallback((()=>{var e;const t=null!==(e=Z.current)&&void 0!==e?e:w,r=f.lh[t]||f.nE.INITIAL;Ge(j&&j!==t?j:r)}));if(!b||"string"!=typeof b||!b.trim())return(0,e.jsx)("div",{css:Q.parent},(0,e.jsx)(we,{state:(0,f.Qg)(X("errorWidgetIdMissing"),{code:"WIDGET_ID_MISSING"})}));if(at)return(0,e.jsx)("div",{css:Q.parent},(0,e.jsx)(we,{state:{kind:"loading",message:X("statusPreparingMapTools")}}));if(!st)return(0,e.jsx)("div",{css:Q.parent},it({message:"errorMapInit",type:f.By.MODULE,code:"MAP_MODULES_LOAD_FAILED",severity:f.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now()},Dt));if(Le)return(0,e.jsx)("div",{css:Q.parent},it(Le,Pt));if(!_e&&U&&F)return(0,e.jsx)("div",{css:Q.parent},it(F));const tr=(pe.isActive||R>0)&&!M&&!at,rr=Boolean(v&&1===v.length);let nr=y;if(y){const e=Object.assign({},y);delete e.fme_server_token,delete e.fmw_server_token,nr=Object.assign(Object.assign({},e),{fmeServerToken:y.fmeServerToken})}return(0,e.jsx)("div",{css:Q.parent},rr&&(0,e.jsx)(i.JimuMapViewComponent,{useMapWidgetId:v[0],onActiveViewChange:Gt}),(0,e.jsx)("div",{"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",left:"-10000px",width:"1px",height:"1px",overflow:"hidden"}},ge),(0,e.jsx)(ft,{widgetId:b,config:nr,geometryJson:S,workspaceItems:T,state:w,error:V,instructionText:$t(O,pe.isActive,pe.clickCount),loadingState:Object.assign(Object.assign({},_),{modules:at,submission:M}),isPrefetchingWorkspaces:q,workspacePrefetchProgress:z,workspacePrefetchStatus:$,modules:st,canStartDrawing:!!bt,submissionPhase:me,modeNotice:ke,jimuMapView:null!==(u=null==ct?void 0:ct.view)&&void 0!==u?u:null,onFormBack:()=>Ge(f.nE.WORKSPACE_SELECTION),onFormSubmit:qt,orderResult:C,onReuseGeography:()=>Ge(f.nE.WORKSPACE_SELECTION),onBack:er,drawnArea:R,areaWarning:Se,formatArea:e=>{var t;return(0,h.Jd)(e,st,null===(t=null==ct?void 0:ct.view)||void 0===t?void 0:t.spatialReference)},drawingMode:O,onDrawingModeChange:e=>{de.current.setDrawingTool(e),bt&&((0,d.uB)(bt),be({isActive:!1,clickCount:0}))},isDrawing:pe.isActive,clickCount:pe.clickCount,isCompleting:ie.current,isValidatingGeometry:L,showHeaderActions:w!==f.nE.STARTUP_VALIDATION&&tr,onReset:Yt,canReset:!0,onWorkspaceSelected:Jt,onWorkspaceBack:Zt,selectedWorkspace:I,workspaceParameters:k,workspaceItem:A,isStartupValidating:xe,startupValidationStep:Ne,startupValidationError:Me,onRetryValidation:Pt}))}function Et(t){const r=()=>{var e;return null!==(e=t.id)&&void 0!==e?e:t.widgetId};return e.hooks.useEffectOnce((()=>{(0,Ze.Ou)({widgetId:r(),config:t.config})})),e.hooks.useUpdateEffect((()=>{(0,Ze.c2)({widgetId:r(),config:t.config})}),[t.id,t.config]),(0,e.jsx)(n.Ht,{client:s.q},(0,e.jsx)(bt,Object.assign({},t)),(0,e.jsx)(o,{initialIsOpen:!1}))}function wt(e){u.p=e}Reflect.set(Et,"mapExtraStateProps",((e,t)=>{const r=e["fme-state"],n=(null==t?void 0:t.id)||(null==t?void 0:t.widgetId);return{state:(null==r?void 0:r.byId)&&n&&r.byId[n]||vt.initialFmeState}}))})(),c})())}}}));