System.register(["jimu-core","jimu-theme","jimu-arcgis"],(function(e,t){var r={},n={},o={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(o,"__esModule",{value:!0}),{setters:[function(e){r.React=e.React,r.SessionManager=e.SessionManager,r.WidgetState=e.WidgetState,r.css=e.css,r.hooks=e.hooks},function(e){Object.keys(e).forEach((function(t){n[t]=e[t]}))},function(e){Object.keys(e).forEach((function(t){o[t]=e[t]}))}],execute:function(){e((()=>{var e={930:(e,t,r)=>{"use strict";r.d(t,{$j:()=>S,Fh:()=>R,Mb:()=>h,XV:()=>v,_:()=>m,c$:()=>y,dB:()=>O,gg:()=>f,hS:()=>_,hs:()=>p,m4:()=>b,qC:()=>g,qm:()=>T,xs:()=>u,yC:()=>A,zf:()=>d});var n=r(9244),o=r(3250),i=r(2238),s=r(6920),a=r(4986),l=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const u=()=>{if("undefined"==typeof navigator)return!1;try{const e=null===globalThis||void 0===globalThis?void 0:globalThis.navigator;return Boolean(e&&!1===e.onLine)}catch(e){return!1}},c=/\baborted?\b/i,d=e=>{var t;if(!e)return!1;if("object"==typeof e&&null!==e){const r=e,n=(0,a.N7)(null!==(t=r.name)&&void 0!==t?t:r.code);if("AbortError"===n||"ABORT_ERR"===n||"ERR_ABORTED"===n)return!0;if(!n||"Error"===n){const e=(0,a.N7)(r.message);return c.test(e)||e.includes("signal is aborted")}return!1}return"string"==typeof e&&c.test(e)},f=e=>e?e.length<=4?"*".repeat(e.length):e.length<=8?`${e.slice(0,2)}${"*".repeat(e.length-4)}${e.slice(-2)}`:`${e.slice(0,4)}${"*".repeat(Math.max(4,e.length-8))}${e.slice(-4)}`:"",p=e=>{const t=(0,a.Nn)(e);if(!t)return"token:none";let r=0;for(let e=0;e<t.length;e+=1)r=31*r+t.charCodeAt(e)>>>0;return`token:${r.toString(36)}`},h=(e,t,r,n)=>{const s=(0,a.Nn)(e),l=(0,a.Nn)(t);if(!s||!l)return null;const u=Object.assign({fmeServerUrl:s,fmeServerToken:l,repository:(0,a.Nn)(r)||o.nu},Number.isFinite(n)?{requestTimeout:n}:{});try{return(0,i.ER)(u)}catch(e){return null}},m=e=>{var t;if(!e)return null;const r=null!==(t=Reflect.get(e,"config"))&&void 0!==t?t:null;if(!r)return null;const n=(0,a.Nn)(r.serverUrl);if(!n)return null;return{serverUrl:n,repository:(0,a.Nn)(r.repository)||o.nu,tokenHash:p("string"==typeof r.token?r.token:void 0)}},y=(e,...t)=>E(e,t),E=(e,t)=>{const r=e.replace(/\/(?:fmeserver|fmerest)$/i,"").replace(/\/$/,""),n=t.filter((e=>"string"==typeof e&&e.length>0)).map((e=>e.split("/").filter((e=>Boolean(e)&&"."!==e&&".."!==e)).map((e=>encodeURIComponent(e))).join("/"))).join("/");return n?`${r}/${n}`:r},v=(e={},t=[],r=!1)=>{const n=new URLSearchParams;if("object"!=typeof e||null===e)return n;const o=new Set(t);for(const[t,r]of Object.entries(e)){if(null==r||o.has(t))continue;const e=(0,s.wc)(r);if(null==e)continue;if((0,a.E$)(e)){n.append(t,(0,s.SB)(e));continue}const i=(0,a.P6)(e);i?n.append(t,i):n.append(t,(0,a.N7)(e))}if(r){const t=t=>{const r=n.get(t);if(null!==r)return r;const o=null==e?void 0:e[t];return"string"==typeof o?o:""},r="xml"===t("opt_responseformat").trim().toLowerCase()?"xml":"json";n.set("opt_responseformat",r);const o="false"===t("opt_showresult").trim().toLowerCase()?"false":"true";n.set("opt_showresult",o);const i="sync"===t("opt_servicemode").trim().toLowerCase()?"sync":"async";n.set("opt_servicemode",i)}return n},g=(e,t,r,n)=>{},O=e=>{const t=e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return new RegExp(`^https?://${t}`,"i")},b=(e,t)=>{var r;return null!==(r=null==e?void 0:e.some((e=>{if(!e||!e._fmeInterceptor)return!1;const r=e.urls;if(r instanceof RegExp)return r.source===t.source&&r.flags===t.flags;const n="string"==typeof r?r:String(r||"");return t.test(n)})))&&void 0!==r&&r};function T(e,t,r){const n=`${e}::${t||""}::${r||""}`;let o=5381;for(let e=0;e<n.length;e++)o=(o<<5)+o^n.charCodeAt(e);return Math.abs(o>>>0).toString(36)}const R=e=>(null!=e?e:"").toLowerCase().includes("application/json"),A=e=>{const t=(0,a.P6)(e);if(!t)return null;try{return new URL(t)}catch(e){return null}},S=e=>{const t=A(e);return t&&t.hostname||null},_=e=>l(void 0,void 0,void 0,(function*(){const t=yield n.SessionManager.getInstance().getUserInfo(),r=((null==t?void 0:t.email)||(null==e?void 0:e.defaultRequesterEmail)||"").trim().toLowerCase();if(!o.Xw.test(r)){const e=new Error("MISSING_REQUESTER_EMAIL");throw e.name="MISSING_REQUESTER_EMAIL",e}return r}))},1138:(e,t,r)=>{"use strict";r.r(t),r.d(t,{buildValidationErrors:()=>h,createConfigError:()=>S,createError:()=>b,createErrorActions:()=>p,createGeometryError:()=>_,createModuleError:()=>I,createNetworkError:()=>R,createValidationError:()=>A,formatErrorPresentation:()=>w,getErrorIconSrc:()=>u,logIfNotAbort:()=>d,mapErrorFromGeometry:()=>O,mapErrorFromNetwork:()=>v,mapErrorFromValidation:()=>g,safeAbort:()=>c,shouldSuppressError:()=>f});var n=r(3250),o=r(3890),i=r(1181);const s="error",a=Object.freeze({GEOMETRY_SERIALIZATION_FAILED:"polygon",MAP_MODULES_LOAD_FAILED:"map",FORM_INVALID:"warning"}),l=Object.freeze([{token:"GEOMETRY",icon:"polygon"},{token:"AREA",icon:"polygon"},{token:"MAP",icon:"map"},{token:"MODULE",icon:"map"},{token:"FORM",icon:"warning"},{token:"TOKEN",icon:"person-lock"},{token:"AUTH",icon:"person-lock"},{token:"REPOSITORY",icon:"folder"},{token:"REPO",icon:"folder"},{token:"DATA",icon:"data"},{token:"NETWORK",icon:"shared-no"},{token:"OFFLINE",icon:"shared-no"},{token:"CONNECTION",icon:"shared-no"},{token:"REQUEST",icon:"shared-no"},{token:"SERVER",icon:"feature-service"},{token:"GATEWAY",icon:"feature-service"},{token:"URL",icon:"link-tilted"},{token:"TIMEOUT",icon:"time"},{token:"CONFIG",icon:"setting"},{token:"EMAIL",icon:"email"}]),u=e=>{if("string"!=typeof e)return s;const t=e.trim();if(!t)return s;const r=t.replace(/([a-z0-9])([A-Z])/g,"$1_$2").toUpperCase();const n=a[r];if(n)return n;const o=r.split(/[^A-Z0-9]+/).filter(Boolean),i=new Set(o);for(const{token:e,icon:t}of l)if(i.has(e)||r.includes(e))return t;return s},c=e=>{if(e)try{e.abort()}catch(e){0}},d=(e,t)=>{},f=e=>{if(!e)return!0;const t=e.code||"",r=e.message||"";return"CANCELLED"===t||"ABORT"===t||/cancel/i.test(r)},p=(e,t,r)=>{const n=[];return t.onRetry&&n.push({label:r("actionRetry"),onClick:t.onRetry}),t.onReload&&n.push({label:r("actionReload"),onClick:t.onReload}),n},h=e=>{const t={};for(const{field:r,validator:n}of e){const e=n();if(!e.ok){const n=e.key||e.reason;n&&(t[r]=n)}}return{ok:0===Object.keys(t).length,errors:t}},m={codeToKey:n.jF,statusToKey:n.KG,messagePatterns:n.a9},y=e=>{if("number"==typeof e)return m.statusToKey[e]?m.statusToKey[e]:void 0},E=(e,t,r="network")=>{const n=((e,t)=>{const r=null!=t?t:(0,o.Ko)(e);let n,i;return e&&"object"==typeof e&&(n=e.code,i=null==e?void 0:e.message),{status:r,code:"string"==typeof n?n:void 0,message:"string"==typeof i?i:void 0,isRequestFailed:"REQUEST_FAILED"===n}})(e,t);if("network"===r&&n.isRequestFailed)return y(n.status);if(n.code&&m.codeToKey[n.code])return m.codeToKey[n.code];if("geometry"!==r){const e=y(n.status);if(e)return e}if(n.message){const e=(e=>{const t=e.toLowerCase();for(const{pattern:e,key:r}of m.messagePatterns)if(e.test(t))return r})(n.message);if(e)return e}return"geometry"===r?"geometrySerializationFailedCode":void 0},v=(e,t)=>E(e,t,"network"),g=e=>E(e,void 0,"validation"),O=e=>{var t;return null!==(t=E(e,void 0,"geometry"))&&void 0!==t?t:"geometrySerializationFailedCode"},b=(e,t={})=>{var r,o,i,s,a,l;const u=Date.now();return{message:e,type:null!==(r=t.type)&&void 0!==r?r:n.By.NETWORK,code:null!==(o=t.code)&&void 0!==o?o:"UNKNOWN",severity:null!==(i=t.severity)&&void 0!==i?i:n.MU.ERROR,recoverable:null===(s=t.recoverable)||void 0===s||s,timestamp:new Date,timestampMs:u,userFriendlyMessage:null!==(a=t.userFriendlyMessage)&&void 0!==a?a:"",suggestion:null!==(l=t.suggestion)&&void 0!==l?l:"",retry:t.retry,kind:"runtime"}},T=(e,t,r={})=>{var o,i,s,a,l,u;const c=Date.now(),d=null!==(o=r.code)&&void 0!==o?o:`${e.toUpperCase()}_ERROR`,f=null!==(i=r.scope)&&void 0!==i?i:"general",p=null!==(s=r.recoverable)&&void 0!==s?s:e!==n.By.MODULE;return{message:t,type:e,code:d,severity:null!==(a=r.severity)&&void 0!==a?a:n.MU.ERROR,recoverable:p,timestampMs:c,userFriendlyMessage:null!==(l=r.userFriendlyMessage)&&void 0!==l?l:"",suggestion:null!==(u=r.suggestion)&&void 0!==u?u:"",details:r.details,kind:"serializable",errorId:`${f}_${d}`}},R=(e,t={})=>T(n.By.NETWORK,e,t),A=(e,t={})=>T(n.By.VALIDATION,e,t),S=(e,t={})=>T(n.By.CONFIG,e,t),_=(e,t={})=>T(n.By.GEOMETRY,e,t),I=(e,t={})=>T(n.By.MODULE,e,t),w=(e,t,r)=>{const n=e.code.toUpperCase(),o="GEOMETRY_INVALID"===n||"INVALID_GEOMETRY"===n,s="AREA_TOO_LARGE"===n,a="CONFIG_INCOMPLETE"===n,l=o||s||a,u=(0,i.I0)(e.message,t)||e.message,c=e.userFriendlyMessage||void 0;let d;return d=o?t("hintGeometryInvalid"):s?t("hintAreaTooLarge"):a?t("hintSetupWidget"):(0,i.Ej)(t,r,c),{message:u,code:l?void 0:e.code,hint:d}}},1181:(e,t,r)=>{"use strict";r.d(t,{$e:()=>K,$j:()=>a,BU:()=>D,Ej:()=>f,FK:()=>V,HK:()=>k,I0:()=>u,JR:()=>A,Jd:()=>re,LH:()=>oe,MA:()=>T,OD:()=>C,Ox:()=>y,PE:()=>ne,RM:()=>g,SP:()=>S,WZ:()=>N,Wx:()=>L,Xk:()=>$,Xp:()=>c,Z_:()=>v,ag:()=>Y,dC:()=>R,hk:()=>P,kz:()=>ie,q2:()=>d,rI:()=>U,tj:()=>b,wl:()=>O,xi:()=>l});var n=r(9244),o=r(3250),i=r(4986),s=r(3890);const a=e=>{if(!(0,i.Bf)(e)||e<0)return null;const t=["B","KiB","MiB","GiB","TiB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n+=1;return`${n>0&&r<10?r.toFixed(1):Math.round(r).toString()} ${t[n]}`},l=(e,t)=>Number.isFinite(e)?"number"==typeof t&&t>=0?e.toFixed(t):e.toString():"";function u(e,t){return e?t(e):""}const c=(e,t)=>{if(t)return e(t)},d=e=>{const t=(0,i.Nn)(e);if(!t||!(0,s.B9)(t))return t||"";const r=t.indexOf("@");if(r<=1)return`**${t.slice(r)}`;const n=t.slice(0,r),o=t.slice(r);return`${n.slice(0,2)}****${o}`},f=(e,t,r)=>{const n=(0,i.Nn)(t);if(!n)return(0,i.Nn)(r)||"";return e("contactSupportEmail").replace(o.BY,n)},p=Object.freeze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),h=/&(?:amp|lt|gt|quot|#39);/g,m=(e,t)=>{if(e.length>6)return"";if(!/^[0-9a-f]+$/i.test(e))return"";const r=Number.parseInt(e,t);if(!Number.isFinite(r)||r<0||r>1114111)return"";try{return String.fromCodePoint(r)}catch(e){return""}},y=e=>{if(!e)return"";const t=(e=>{var t;try{if("undefined"!=typeof DOMParser&&"function"==typeof DOMParser){const r=(new DOMParser).parseFromString(e,"text/html");return(null===(t=null==r?void 0:r.body)||void 0===t?void 0:t.textContent)||""}const r=document.createElement("div");return r.textContent=e,r.textContent||""}catch(e){}return null})(e);if(null!==t)return t.replace(/\s+/g," ").trim();const r=e.replace(/<\s*(script|style)[^>]*>[\s\S]*?<\s*\/\s*\1\s*>/gi,"").replace(/<[^>]*>/g,"");return r.replace(/&#(\d+);/g,((e,t)=>m(t,10))).replace(/&#x([\da-f]+);/gi,((e,t)=>m(t,16))).replace(h,(e=>p[e]||e)).replace(/\s+/g," ").trim()},E=/^(?:error|fel|warning|varning|info)\s*[:\-\u2013\u2014]?\s*/i,v=e=>{const t=(0,i.Nn)(e);if(!t)return"";return t.replace(E,"").trim()||t},g=e=>e?(0,n.css)(e):void 0,O=e=>String(e).padStart(2,"0"),b=/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/,T=/^([0-9]{2}):([0-9]{2})(?::([0-9]{2}))?$/,R=e=>{if(!e)return null;const t=e.trim();if(!t)return null;const r=t.includes("T")?t:`${t}T00:00:00`,[n="",o=""]=r.split("T"),i=b.exec(n),s=T.exec(o);if(!i||!s)return null;const a=Number(i[1]),l=Number(i[2]),u=Number(i[3]),c=Number(s[1]),d=Number(s[2]),f=s[3]?Number(s[3]):0;if(!(Number.isFinite(a)&&Number.isFinite(l)&&Number.isFinite(u)&&Number.isFinite(c)&&Number.isFinite(d)&&Number.isFinite(f)))return null;if(l<1||l>12)return null;if(u<1||u>31)return null;if(c<0||c>23)return null;if(d<0||d>59)return null;if(f<0||f>59)return null;const p=new Date(a,l-1,u,c,d,f,0);return p.getFullYear()!==a||p.getMonth()!==l-1||p.getDate()!==u||p.getHours()!==c||p.getMinutes()!==d||p.getSeconds()!==f||Number.isNaN(p.getTime())?null:p},A=(e,t="iso")=>{if(!e)return"";const r=e.getTime();if(Number.isNaN(r))return"";const n=e.getFullYear(),o=O(e.getMonth()+1),i=O(e.getDate()),s=O(e.getHours()),a=O(e.getMinutes()),l=O(e.getSeconds());return"fme"===t?`${n}-${o}-${i} ${s}:${a}:${l}`:`${n}-${o}-${i}T${s}:${a}:${l}`},S=(e,t,r=0,n=[])=>{var o;if(!e)return n;for(const i of e)i&&null!=i.value&&(n.push({option:i,depth:r}),t&&(null===(o=i.children)||void 0===o?void 0:o.length)&&S(i.children,t,r+1,n));return n},_=/(Z|[+-]\d{2}(?::?\d{2})?)$/i,I=/\.(\d{1,9})$/,w=e=>{if(!e)return{base:"",fraction:"",offset:""};let t=e,r="";const n=_.exec(t);(null==n?void 0:n[1])&&(r=n[1],t=t.slice(0,-r.length));let o="";const i=I.exec(t);return(null==i?void 0:i[0])&&(o=i[0],t=t.slice(0,-o.length)),{base:t,fraction:o,offset:r}},N=e=>{const t=(e||"").trim();return w(t)},M=e=>{if(!e)return null;const t=Number(e);return Number.isFinite(t)&&t>=0&&t<=99?O(t):null},L=e=>{const t=(e||"").replace(/\D/g,"");if(8!==t.length)return"";const r=t.slice(0,4),n=t.slice(4,6),o=t.slice(6,8),i=Number(r),s=Number(n),a=Number(o);return i<1e3||i>9999||s<1||s>12||a<1||a>31?"":`${r}-${n}-${o}`},C=e=>e?e.replace(/-/g,""):"",P=e=>{const{base:t}=N(e),r=t.replace(/\D/g,"");if(r.length<12)return"";const n=r.slice(0,4),o=r.slice(4,6),i=r.slice(6,8),s=r.slice(8,10),a=r.slice(10,12),l=r.length>=14?r.slice(12,14):"";return`${n}-${o}-${i}T${s}:${a}${l?`:${l}`:""}`},k=(e,t)=>{if(!e)return"";const r=e.trim(),[n,o]=r.split("T");if(!n||!o)return console.log("inputToFmeDateTime: Invalid ISO format",e),"";const[i,s,a]=n.split("-"),{base:l,fraction:u,offset:c}=w(o),[d,f,p]=l.split(":");if(!i||4!==i.length||!/^\d{4}$/.test(i))return console.log("inputToFmeDateTime: Invalid year",i),"";const h=M(s),m=M(a),y=M(d),E=M(f);if(!(h&&m&&y&&E))return console.log("inputToFmeDateTime: Invalid date/time components",{m:s,d:a,hh:d,mi:f}),"";const v=p?M(p):"00";if(null===v)return console.log("inputToFmeDateTime: Invalid seconds",p),"";const g=`${i}${h}${m}${y}${E}${v}`,O=t?N(t):null;return`${g}${u||(null==O?void 0:O.fraction)||""}${c||(null==O?void 0:O.offset)||""}`},D=e=>{const{base:t}=N(e),r=t.replace(/\D/g,"");return 4===r.length?`${r.slice(0,2)}:${r.slice(2,4)}`:r.length>=6?`${r.slice(0,2)}:${r.slice(2,4)}:${r.slice(4,6)}`:""},U=(e,t)=>{if(!e)return"";const{base:r,fraction:n,offset:o}=w(e),i=r.split(":").map((e=>e||"")),s=i[0]||"",a=i[1]||"",l=i[2]||"",u=Number(s),c=Number(a);if(!Number.isFinite(u)||!Number.isFinite(c))return"";const d=Number(l),f=Number.isFinite(d)?O(d):"00",p=`${O(u)}${O(c)}${f}`,h=t?N(t):null;return`${p}${n||(null==h?void 0:h.fraction)||""}${o||(null==h?void 0:h.offset)||""}`},F=(e,t,r)=>Number.isFinite(e)?Math.max(t,Math.min(r,e)):t,j=e=>F(e,0,1),W=e=>F(e,0,255),G=e=>Math.round(W(e)).toString(16).padStart(2,"0"),x=e=>Number(j(e).toFixed(6)).toString(),q=e=>x(e/255),B=(e,t,r)=>`#${G(e)}${G(t)}${G(r)}`,$=e=>{const t=/^#?([0-9a-f]{6})$/i.exec(e||""),r=t?parseInt(t[1],16):parseInt(o.Ve.slice(1),16);return[r>>16&255,r>>8&255,255&r]},K=(e,t)=>{const r=(e||"").split(",").map((e=>e.trim())).filter(Boolean).map(Number);if(!r.length)return null;if("cmyk"===(null==t?void 0:t.space)||!(null==t?void 0:t.space)&&!(null==t?void 0:t.alpha)&&4===r.length){if(r.length<4||!r.slice(0,4).every(Number.isFinite))return null;const[e,t,n,o]=r,i=((e,t,r,n)=>{const o=j(e),i=j(t),s=j(r),a=j(n);return{r:W(255*(1-o)*(1-a)),g:W(255*(1-i)*(1-a)),b:W(255*(1-s)*(1-a))}})(e,t,n,o);return B(i.r,i.g,i.b)}if(r.length<3||!r.slice(0,3).every(Number.isFinite))return null;const[n,o,i]=r,s=W(Math.round(255*j(n))),a=W(Math.round(255*j(o))),l=W(Math.round(255*j(i)));return B(s,a,l)},V=(e,t)=>{const r=/^#?([0-9a-f]{6})$/i.exec(e||"");if(!r)return null;const n=parseInt(r[1],16),o=n>>16&255,i=n>>8&255,s=255&n;if("cmyk"===(null==t?void 0:t.space)){const{c:e,m:t,y:r,k:n}=((e,t,r)=>{const n=j(e/255),o=j(t/255),i=j(r/255),s=1-Math.max(n,o,i);if(s>=.999999)return{c:0,m:0,y:0,k:1};const a=1-s;return{c:j((1-n-s)/a),m:j((1-o-s)/a),y:j((1-i-s)/a),k:j(s)}})(o,i,s);return[e,t,r,n].map(x).join(",")}return[o,i,s].map(q).join(",")},z=1e6,Q=2,H=27878400,J=[{factor:.3048,label:"ft\xb2",keywords:["foot","feet"],largeUnit:{threshold:H,factor:H,label:"mi\xb2"}},{factor:.3048006096,label:"ft\xb2",keywords:[]},{factor:1609.344,label:"mi\xb2",keywords:["mile"]},{factor:1e3,label:"km\xb2",keywords:["kilometer"]},{factor:.9144,label:"yd\xb2",keywords:["yard"]},{factor:.0254,label:"in\xb2",keywords:["inch"]},{factor:.01,label:"cm\xb2",keywords:["centimeter"]},{factor:.001,label:"mm\xb2",keywords:["millimeter"]},{factor:1852,label:"nm\xb2",keywords:["nautical"]},{factor:1,label:"m\xb2",keywords:["meter"]}],Z=(e,t=!1)=>t?2:e>=100?0:e>=10?1:2,Y=({currentAreaText:e,thresholdAreaText:t,translate:r})=>{const n=(0,i.Nn)(e);if(!n)return null;const o=(0,i.Nn)(t);return o?r("largeAreaWarningWithThreshold",{current:n,threshold:o}):r("largeAreaWarning",{current:n})},X=e=>e>=z?{value:e/z,label:"km\xb2",decimals:Q}:e>=1?{value:Math.round(e),label:"m\xb2",decimals:0}:{value:Number(e.toFixed(2)),label:"m\xb2",decimals:2},ee=(e,t)=>{var r;return null!==(r=J.find((r=>((e,t)=>{if(!(0,i.Bf)(e))return!1;const r=Math.max(1e-9,1e-6*Math.abs(t));return Math.abs(e-t)<=r})(e,r.factor)||((e,t)=>t.some((t=>e.includes(t))))(t,r.keywords))))&&void 0!==r?r:null},te=(e,t)=>{if(!t)return X(e);const r=t.metersPerUnit;if(!(0,i.Bf)(r))return X(e);const n="string"==typeof t.unit?t.unit.toLowerCase():"",o=ee(r,n);return o?((e,t,r)=>{const n=e/(t*t);if(r.largeUnit&&n>=r.largeUnit.threshold)return{value:n/r.largeUnit.factor,label:r.largeUnit.label,decimals:2};const o=Z(n,r.label.includes("km\xb2")||r.label.includes("mi\xb2"));return{value:n,label:r.label,decimals:o}})(e,r,o):((e,t,r)=>{const n=e/(t*t),o=Z(n),i="string"==typeof r?(e=>{if(!e)return"units\xb2";const t=e.replace(/^esri/i,"").trim();if(!t)return"units\xb2";const r=t.toLowerCase();switch(r){case"meters":return"m\xb2";case"feet":case"internationalfeet":case"ussfeet":return"ft\xb2";case"kilometers":return"km\xb2";case"miles":return"mi\xb2";case"yards":return"yd\xb2";case"inches":return"in\xb2";case"centimeters":return"cm\xb2";case"millimeters":return"mm\xb2";case"nauticalmiles":return"nm\xb2";default:return`${r}\xb2`}})(r):"units\xb2";return{value:n,label:i,decimals:o}})(e,r,t.unit)};function re(e,t,r){const n=Number.isFinite(e)&&e>0?e:0,o=te(n,r);if(!o.value||o.value<=0)return`0 ${o.label}`;return`${((e,r)=>{const n=null==t?void 0:t.intl;if(n&&"function"==typeof n.formatNumber){const t=n.formatNumber(e,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:r});return"number"==typeof t?t.toString():t}return e.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:r})})(o.value,o.decimals)} ${o.label}`}const ne=e=>{if(!e)return"Unknown error";if("string"==typeof e)return e;if("number"==typeof e)return e.toString();if(e instanceof Error)return e.message||"Error object";if("object"==typeof e&&null!==e){const t=e;for(const e of["message","error","details","description"]){const r=t[e];if((0,i.YH)(r))return r.trim()}}return"Unknown error occurred"},oe=(e,t="error")=>e?`${e}-${t}`:void 0,ie=(e,t,r,n,o)=>{if(r)return r;const s=(0,i.P6)(e);if(s)return s;if(!t)return;return(0,i.P6)(n)||o}},1618:(e,t,r)=>{"use strict";r.r(t),r.d(t,{attachAoi:()=>I,calcArea:()=>K,checkLargeArea:()=>Y,checkMaxArea:()=>Z,collectGeometryParamNames:()=>_,coordinatesEqual:()=>l,evaluateArea:()=>J,isGeographicSpatialRef:()=>A,isPolygonGeometry:()=>m,isWebMercatorSr:()=>T,isWgs84Sr:()=>R,makeGeoJson:()=>N,normalizeRing:()=>c,polygonJsonToGeoJson:()=>y,polygonJsonToWkt:()=>O,readWkids:()=>b,removeAoiErrorMarker:()=>w,resetGeometryCachesForTest:()=>X,toWgs84PolygonJson:()=>S,validatePolygon:()=>Q});var n=r(3250),o=r(4986),i=r(9063),s=r(1138),a=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const l=(e,t)=>{if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=Math.min(e.length,t.length,2);for(let n=0;n<r;n++){const r=e[n],o=t[n];if("number"!=typeof r||"number"!=typeof o)return!1;if(!Number.isFinite(r)||!Number.isFinite(o))return!1;if(Math.abs(r-o)>1e-9)return!1}return!0},u=e=>{if(!Array.isArray(e)||e.length<2)return null;const[t,r,n,o]=e.map((e=>"string"==typeof e?Number(e):e));if(!Number.isFinite(t)||!Number.isFinite(r))return null;const i=[t,r];return Number.isFinite(n)&&i.push(n),Number.isFinite(o)&&i.push(o),i},c=e=>{if(!Array.isArray(e))return[];const t=[];for(const r of e){const e=u(r);e&&t.push(e)}if(t.length<3)return[];const r=t[0],n=t[t.length-1];return l(r,n)||t.push([...r]),t},d=e=>"number"==typeof e&&Number.isFinite(e),f=e=>Array.isArray(e)&&e.length>=2&&e.length<=4&&e.every(d),p=e=>"object"==typeof e&&null!==e,h=e=>{if(!Array.isArray(e)||e.length<4)return!1;if(!e.every(f))return!1;const t=e[0],r=e[e.length-1];return l(t,r)},m=e=>{if(!p(e))return!1;const t="geometry"in e?e.geometry:e;if(!p(t))return!1;const r="rings"in t?t.rings:void 0;return Array.isArray(r)&&r.length>0&&r.every(h)},y=e=>{if(!e)return null;try{const t=(e=>{var t;if(!e||"object"!=typeof e)return[];if(Array.isArray(e.rings))return e.rings;if(Array.isArray(null===(t=e.geometry)||void 0===t?void 0:t.rings))return e.geometry.rings;if("function"==typeof e.toJSON)try{const t=e.toJSON();if(t&&Array.isArray(t.rings))return t.rings}catch(e){console.log("Polygon toJSON serialization failed (fallback to direct access)",e)}return[]})(e);if(!t.length)return console.log("polygonJsonToGeoJson: No rings found in polygon",e),null;const r=t.map(c).filter((e=>e.length>=4));return r.length?{type:"Polygon",coordinates:r}:(console.log("polygonJsonToGeoJson: No valid rings after normalization",e),null)}catch(t){return e&&("object"!=typeof e||e.rings||e.geometry)?(console.log("polygonJsonToGeoJson: Unexpected serialization exception",t,e),null):(console.log("polygonJsonToGeoJson: Empty/invalid input",e),null)}},E=e=>{if(!Number.isFinite(e))return"0";const t=e.toString();return(/[eE]/.test(t)?e.toFixed(12):t).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")||"0"},v=e=>{if(!Array.isArray(e)||e.length<2)return null;const t=[];for(const r of e){const e="number"==typeof r?r:Number(r);if(!Number.isFinite(e))return null;t.push(E(e))}return t.length>=2?t.join(" "):null},g=e=>{if(!Array.isArray(e))return[];const t=[];for(const r of e){const e=v(r);e&&t.push(e)}return t},O=e=>{const t=y(e);if(!t)return"POLYGON EMPTY";const r=Array.isArray(null==t?void 0:t.coordinates)?t.coordinates:[];if(!r.length)return"POLYGON EMPTY";const n=r.map(g).filter((e=>e.length>=4)).map((e=>`(${e.join(", ")})`)).filter((e=>"()"!==e&&"( )"!==e));return n.length?`POLYGON(${n.join(", ")})`:"POLYGON EMPTY"},b=e=>{if("object"!=typeof e||null===e)return{};const t=e;return{wkid:"number"==typeof t.wkid?t.wkid:void 0,latestWkid:"number"==typeof t.latestWkid?t.latestWkid:void 0}},T=e=>{const t=e;if(null==t?void 0:t.isWebMercator)return!0;const{wkid:r,latestWkid:n}=b(e);return 3857===r||3857===n},R=e=>{const t=e;if((null==t?void 0:t.isGeographic)||(null==t?void 0:t.isWGS84))return!0;const{wkid:r,latestWkid:n}=b(e);return 4326===r||4326===n},A=e=>{var t;try{if(R(e.spatialReference)||T(e.spatialReference))return!0;const r=null===(t=e.toJSON)||void 0===t?void 0:t.call(e);if(r&&"object"==typeof r){const e=r.spatialReference;return R(e)||T(e)}}catch(e){}return!1},S=(e,t)=>{if(!(null==t?void 0:t.Polygon))return e;try{const r=t.Polygon.fromJSON(e);if(!r)return console.log("toWgs84PolygonJson: Failed to create Polygon from JSON"),e;const n=r.spatialReference;if(R(n))return r.toJSON();const o=((e,t)=>{const{projection:r,SpatialReference:n}=t;if(!(null==r?void 0:r.project)||!n)return null;const o=n,i=o.WGS84||("function"==typeof o?new o({wkid:4326}):{wkid:4326}),s=r.project(e,i);return Array.isArray(s)?s[0]||null:s||null})(r,t);if(null==o?void 0:o.toJSON){const e=o.toJSON(),t=null==e?void 0:e.spatialReference;if(R(t))return(null==t?void 0:t.wkid)||(e.spatialReference={wkid:4326}),e;console.log("toWgs84PolygonJson: Projection did not produce WGS84 geometry")}const{webMercatorUtils:i}=t;if(null==i?void 0:i.webMercatorToGeographic){const e=i.webMercatorToGeographic(r);if(null==e?void 0:e.toJSON)return e.toJSON()}return console.log("toWgs84PolygonJson: Returning original polygon (projection failed)"),r.toJSON()}catch(t){return console.log("toWgs84PolygonJson: Error during projection",t),e}},_=e=>{if(!(null==e?void 0:e.length))return[];const t=new Set,r=[];for(const i of e){if(!i||i.type!==n.QL.GEOMETRY)continue;const e=(0,o.Nn)(i.name);e&&!t.has(e)&&(t.add(e),r.push(e))}return r},I=(e,t,r,i,s,a)=>{const l=(0,o.E)(null==s?void 0:s.aoiParamName,"AreaOfInterest"),u=((e,t)=>{if(m(e))return"geometry"in e?e.geometry:e;const r=null==t?void 0:t.toJSON();return m(r)?r:null})(t,r);if(!u)return e;const c=(e=>{try{return JSON.stringify(e)}catch(e){return null}})(u);if(!c)return Object.assign(Object.assign({},e),{__aoi_error__:{message:"GEOMETRY_SERIALIZATION_FAILED",type:n.By.GEOMETRY,code:"GEOMETRY_SERIALIZATION_FAILED",severity:n.MU.ERROR,recoverable:!0,timestamp:new Date,timestampMs:Date.now()}});const d=Object.assign(Object.assign({},e),{[l]:c});if(null==a?void 0:a.length){const e=new Set;for(const t of a){if("string"!=typeof t)continue;const r=(0,o.E)(t,"");r&&r!==l&&e.add(r)}for(const t of e)d[t]=c}return d},w=e=>{void 0!==e.__aoi_error__&&delete e.__aoi_error__},N=e=>{if(!e)return{type:"Polygon",coordinates:[]};try{const t="function"==typeof(null==e?void 0:e.toJSON)?e.toJSON():{rings:null==e?void 0:e.rings},r=y(t);if(r)return r}catch(e){}const t=(Array.isArray(null==e?void 0:e.rings)?e.rings:[]).map((e=>c(e))).filter((e=>e.length>=4));return t.length?{type:"Polygon",coordinates:t}:{type:"Polygon",coordinates:[]}},M=e=>"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then,L=e=>"object"==typeof e&&null!==e&&"polygon"===e.type;let C,P,k,D;const U=e=>{var t;return null!==(t=e.default)&&void 0!==t?t:e},F=(e,t,r)=>a(void 0,void 0,void 0,(function*(){if(!e)return 0;const n=e.geodesicArea;if(r&&"function"==typeof n)try{const e=yield n(t,"square-meters");if(Number.isFinite(e)&&e>0)return e}catch(e){console.log("geodesicArea calculation failed, trying planar fallback",e)}const o=e.planarArea;if("function"==typeof o)try{const e=yield o(t,"square-meters");if(Number.isFinite(e)&&e>0)return e}catch(e){console.log("planarArea calculation failed",e)}return 0})),j=e=>a(void 0,void 0,void 0,(function*(){var t,r,n,o,s,l,u,c,d,f;try{const p=null===(t=null==e?void 0:e.esriConfig)||void 0===t?void 0:t.geometryServiceUrl;if("string"==typeof p&&p)return p;const h=yield(e=>a(void 0,void 0,void 0,(function*(){if(null==e?void 0:e.esriConfig)return e.esriConfig;if(void 0!==D)return D;try{const[e]=yield(0,i.loadArcgisModules)(["esri/config"]);D=U(e)}catch(e){D=null}return D})))(e);if(!h)return null;const m=h.geometryServiceUrl;if("string"==typeof m&&m)return m;const y=null===(r=h.request)||void 0===r?void 0:r.geometryServiceUrl;if("string"==typeof y&&y)return y;const E=(null===(s=null===(o=null===(n=h.portalSelf)||void 0===n?void 0:n.helperServices)||void 0===o?void 0:o.geometry)||void 0===s?void 0:s.url)||(null===(c=null===(u=null===(l=h.portalInfo)||void 0===l?void 0:l.helperServices)||void 0===u?void 0:u.geometry)||void 0===c?void 0:c.url)||(null===(f=null===(d=h.helperServices)||void 0===d?void 0:d.geometry)||void 0===f?void 0:f.url);if("string"==typeof E&&E)return E}catch(e){}return null})),W=e=>a(void 0,void 0,void 0,(function*(){if(!e)return null;try{const t=M(e)?yield e:e;if(L(t))return t}catch(e){console.log("Polygon promise resolution failed",e)}return null})),G=(e,t,r,n)=>a(void 0,void 0,void 0,(function*(){const o=null==e?void 0:e[t];if("function"!=typeof o)return null;try{const e=o(r,...n);return yield W(e)}catch(e){return null}})),x=(e,t)=>a(void 0,void 0,void 0,(function*(){const r=null==e?void 0:e.spatialReference;if(!(R(r)||T(r)))return e;const n=yield(e=>a(void 0,void 0,void 0,(function*(){var t;if(null===(t=null==e?void 0:e.normalizeUtils)||void 0===t?void 0:t.normalizeCentralMeridian)return e.normalizeUtils;if(void 0!==C)return C;try{const[e]=yield(0,i.loadArcgisModules)(["esri/geometry/support/normalizeUtils"]);C=U(e)}catch(e){C=null}return C})))(t);if(!(null==n?void 0:n.normalizeCentralMeridian))return e;try{const t=yield n.normalizeCentralMeridian([e]),r=Array.isArray(t)?t[0]:null;if(L(r))return r}catch(e){}return e})),q=(e,t)=>a(void 0,void 0,void 0,(function*(){let r=e;return r=yield x(r,t),r=yield((e,t)=>a(void 0,void 0,void 0,(function*(){var r,o;const i=null==e?void 0:e.spatialReference,s=R(i)||T(i),a=R(i);let l=e;if(s){const e=[n.In,"meters"],o=null!==(r=yield G(null==t?void 0:t.geometryEngineAsync,"geodesicDensify",l,e))&&void 0!==r?r:yield G(null==t?void 0:t.geometryEngine,"geodesicDensify",l,e);o&&(l=o)}const u=[a?Math.max(n.In*n.qc,n.wF):n.In],c=null!==(o=yield G(null==t?void 0:t.geometryEngineAsync,"densify",l,u))&&void 0!==o?o:yield G(null==t?void 0:t.geometryEngine,"densify",l,u);return c&&(l=c),l})))(r,t),r})),B=(e,t)=>a(void 0,void 0,void 0,(function*(){var r;const n=yield j(t);if(!n)return 0;const{geometryService:o,AreasAndLengthsParameters:s}=yield a(void 0,void 0,void 0,(function*(){if(void 0!==P&&void 0!==k)return{geometryService:P,AreasAndLengthsParameters:k};try{const[e,t]=yield(0,i.loadArcgisModules)(["esri/rest/geometryService","esri/rest/support/AreasAndLengthsParameters"]),r=U(e),n=U(t);if(!r||!n)return console.log("Geometry service modules returned null after unwrap"),P=null,k=null,{geometryService:null,AreasAndLengthsParameters:null};P=r,k=n}catch(e){console.log("Failed to load geometry service modules",e),P=null,k=null}return{geometryService:P,AreasAndLengthsParameters:k}}));if(!(null==o?void 0:o.areasAndLengths)||"function"!=typeof o.areasAndLengths||!s)return 0;try{const t=new s({polygons:[e],areaUnit:"square-meters",lengthUnit:"meters",calculationType:"geodesic",geodesic:!0}),i=yield o.areasAndLengths(n,t),a=null===(r=null==i?void 0:i.areas)||void 0===r?void 0:r[0];if(Number.isFinite(a)&&Math.abs(a)>0)return Math.abs(a)}catch(e){console.log("Geometry service area calculation failed, using fallback",e)}return 0})),$=(e,t)=>{if(!e)return null;if("function"==typeof e)return e;if("object"!=typeof e)return null;const r=e,n=t?["geodesicArea","geodesic","planarArea","planar"]:["planarArea","planar","geodesicArea","geodesic"];for(const e of n){const t="function"==typeof(o=r[e])?o:null;if(t)return t}var o;return r.area?$(r.area,t):null},K=(e,t)=>a(void 0,void 0,void 0,(function*(){if(!e||"polygon"!==e.type)return 0;const r=e;let n=r;try{n=yield q(r,t)}catch(e){n=r}const o=A(n),i=((e,t,r)=>{const n=[],o=$(null==t?void 0:t.geometryOperators,r);return o&&n.push((()=>a(void 0,void 0,void 0,(function*(){try{const t=o.length>=2?[e,"square-meters"]:[e],r=o(...t),n=M(r)?yield r:r;if("number"==typeof n&&Math.abs(n)>0)return Math.abs(n)}catch(e){}return 0})))),(null==t?void 0:t.geometryEngineAsync)&&n.push((()=>F(t.geometryEngineAsync,e,r))),(null==t?void 0:t.geometryEngine)&&n.push((()=>F(t.geometryEngine,e,r))),n})(n,t,o);for(const e of i)try{const t=yield e();if(t>0)return t}catch(e){}const s=yield B(n,t);return s>0?s:0})),V=e=>{if(!Array.isArray(e)||0===e.length)return!1;const t=e[0],r=e[e.length-1];return Boolean(t&&r&&Array.isArray(t)&&Array.isArray(r)&&t[0]===r[0]&&t[1]===r[1])},z=(e,t)=>({valid:!1,error:(0,s.createGeometryError)(e,{code:t,scope:"general"})}),Q=(e,t)=>a(void 0,void 0,void 0,(function*(){if(!e)return z("geometryMissingMessage","NO_GEOMETRY");if("polygon"!==e.type)return z("geometryPolygonRequired","INVALID_GEOMETRY_TYPE");if(!(null==t?void 0:t.geometryEngine)&&!(null==t?void 0:t.geometryEngineAsync))return{valid:!0};try{const r=t.geometryEngine,n=t.geometryEngineAsync;let o=e;const i=yield((e,t,r)=>a(void 0,void 0,void 0,(function*(){var n;const o=null==r?void 0:r.simplify;if("function"==typeof o){const i=yield o(e),s=yield W(i);if(!s)return null;const a=null!==(n=null==r?void 0:r.isSimple)&&void 0!==n?n:null==t?void 0:t.isSimple;if("function"==typeof a){const e=a(s);if(!(M(e)?yield e:e))return null}return s}const i=null==t?void 0:t.simplify;if("function"==typeof i){const r=yield W(i(e));if(!r)return null;const n=null==t?void 0:t.isSimple;if("function"==typeof n){const e=n(r);if(!(M(e)?yield e:e))return null}return r}const s=null==t?void 0:t.isSimple;if("function"==typeof s){const t=s(e);if(!(M(t)?yield t:t))return null}return e})))(o,r,n);if(!i)return z("geometryNotSimple","INVALID_GEOMETRY");o=i;const s=o.rings,l=Array.isArray(s)?s:[];if(!(e=>{if(!Array.isArray(e)||0===e.length)return!1;for(const t of e){if(!Array.isArray(t)||t.length<4)return!1;if(!V(t))return!1}return!0})(l))return z("geometryInvalidCode","GEOMETRY_INVALID");const u=yield K(o,t);return!u||u<=0?z("geometryInvalidCode","GEOMETRY_INVALID"):((e,t,r,n)=>{if(e.length<=1)return!0;const o=null==r?void 0:r.contains;if("function"!=typeof o)return!0;try{const r=null==n?void 0:n.Polygon;if(!r)return!0;const i=r.fromJSON({rings:[e[0]],spatialReference:t.spatialReference});for(let n=1;n<e.length;n++)if(!o(i,r.fromJSON({rings:[e[n]],spatialReference:t.spatialReference})))return!1}catch(e){return!0}return!0})(l,o,r,t)?{valid:!0,simplified:o}:z("geometryInvalidCode","GEOMETRY_INVALID")}catch(e){return z("geometryValidationFailedMessage","GEOMETRY_VALIDATION_ERROR")}})),H=e=>{if("number"==typeof e&&Number.isFinite(e)&&!(e<=0))return e},J=(e,t)=>{const r=Math.abs(e)||0,n=H(null==t?void 0:t.maxArea),o=H(null==t?void 0:t.largeArea),i="number"==typeof n&&r>n;return{area:r,maxThreshold:n,warningThreshold:o,exceedsMaximum:i,shouldWarn:!i&&"number"==typeof o&&r>o}},Z=(e,t)=>{const r=H(t);return!r||e<=r?{ok:!0}:{ok:!1,message:"geometryAreaTooLargeCode",code:"AREA_TOO_LARGE"}},Y=(e,t)=>J(e,{largeArea:t}).shouldWarn,X=()=>{C=void 0,P=void 0,k=void 0,D=void 0}},1658:(e,t,r)=>{"use strict";var n=r(4880),o=r(9757),i=r(6261),s=r(6500),a=class extends s.Q{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const i=t.queryKey,s=t.queryHash??(0,n.F$)(i,t);let a=this.get(s);return a||(a=new o.X({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){i.jG.batch((()=>{this.getAll().forEach((e=>{this.remove(e)}))}))}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,n.MK)(t,e)))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter((t=>(0,n.MK)(e,t))):t}notify(e){i.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}onFocus(){i.jG.batch((()=>{this.getAll().forEach((e=>{e.onFocus()}))}))}onOnline(){i.jG.batch((()=>{this.getAll().forEach((e=>{e.onOnline()}))}))}},l=r(6158),u=class extends s.Q{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#r=new Map,this.#n=0}#t;#r;#n;build(e,t,r){const n=new l.s({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#t.add(e);const t=c(e);if("string"==typeof t){const r=this.#r.get(t);r?r.push(e):this.#r.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const t=c(e);if("string"==typeof t){const r=this.#r.get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#r.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=c(e);if("string"==typeof t){const r=this.#r.get(t),n=r?.find((e=>"pending"===e.state.status));return!n||n===e}return!0}runNext(e){const t=c(e);if("string"==typeof t){const r=this.#r.get(t)?.find((t=>t!==e&&t.state.isPaused));return r?.continue()??Promise.resolve()}return Promise.resolve()}clear(){i.jG.batch((()=>{this.#t.forEach((e=>{this.notify({type:"removed",mutation:e})})),this.#t.clear(),this.#r.clear()}))}getAll(){return Array.from(this.#t)}find(e){const t={exact:!0,...e};return this.getAll().find((e=>(0,n.nJ)(t,e)))}findAll(e={}){return this.getAll().filter((t=>(0,n.nJ)(e,t)))}notify(e){i.jG.batch((()=>{this.listeners.forEach((t=>{t(e)}))}))}resumePausedMutations(){const e=this.getAll().filter((e=>e.state.isPaused));return i.jG.batch((()=>Promise.all(e.map((e=>e.continue().catch(n.lQ))))))}};function c(e){return e.options.scope?.id}var d=r(9658),f=r(6035);function p(e){return{onFetch:(t,r)=>{const o=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,s=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const c=async()=>{let r=!1;const c=(0,n.ZM)(t.options,t.fetchOptions),d=async(e,o,i)=>{if(r)return Promise.reject();if(null==o&&e.pages.length)return Promise.resolve(e);const s=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:o,direction:i?"backward":"forward",meta:t.options.meta};var n;return n=e,Object.defineProperty(n,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",(()=>{r=!0})),t.signal)}),e})(),a=await c(s),{maxPages:l}=t.options,u=i?n.ZZ:n.y9;return{pages:u(e.pages,a,l),pageParams:u(e.pageParams,o,l)}};if(i&&s.length){const e="backward"===i,t={pages:s,pageParams:a},r=(e?m:h)(o,t);l=await d(t,r,e)}else{const t=e??s.length;do{const e=0===u?a[0]??o.initialPageParam:h(o,l);if(u>0&&null==e)break;l=await d(l,e),u++}while(u<t)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function h(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function m(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var y=r(3096);new class{#o;#i;#s;#a;#l;#u;#c;#d;constructor(e={}){this.#o=e.queryCache||new a,this.#i=e.mutationCache||new u,this.#s=e.defaultOptions||{},this.#a=new Map,this.#l=new Map,this.#u=0}mount(){this.#u++,1===this.#u&&(this.#c=d.m.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#o.onFocus())})),this.#d=f.t.subscribe((async e=>{e&&(await this.resumePausedMutations(),this.#o.onOnline())})))}unmount(){this.#u--,0===this.#u&&(this.#c?.(),this.#c=void 0,this.#d?.(),this.#d=void 0)}isFetching(e){return this.#o.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#i.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#o.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#o.build(this,t),o=r.state.data;return void 0===o?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime((0,n.d2)(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(o))}getQueriesData(e){return this.#o.findAll(e).map((({queryKey:e,state:t})=>[e,t.data]))}setQueryData(e,t,r){const o=this.defaultQueryOptions({queryKey:e}),i=this.#o.get(o.queryHash),s=i?.state.data,a=(0,n.Zw)(t,s);if(void 0!==a)return this.#o.build(this,o).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return i.jG.batch((()=>this.#o.findAll(e).map((({queryKey:e})=>[e,this.setQueryData(e,t,r)]))))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#o.get(t.queryHash)?.state}removeQueries(e){const t=this.#o;i.jG.batch((()=>{t.findAll(e).forEach((e=>{t.remove(e)}))}))}resetQueries(e,t){const r=this.#o;return i.jG.batch((()=>(r.findAll(e).forEach((e=>{e.reset()})),this.refetchQueries({type:"active",...e},t))))}cancelQueries(e,t={}){const r={revert:!0,...t},o=i.jG.batch((()=>this.#o.findAll(e).map((e=>e.cancel(r)))));return Promise.all(o).then(n.lQ).catch(n.lQ)}invalidateQueries(e,t={}){return i.jG.batch((()=>(this.#o.findAll(e).forEach((e=>{e.invalidate()})),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t))))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},o=i.jG.batch((()=>this.#o.findAll(e).filter((e=>!e.isDisabled()&&!e.isStatic())).map((e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(n.lQ)),"paused"===e.state.fetchStatus?Promise.resolve():t}))));return Promise.all(o).then(n.lQ)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=this.#o.build(this,t);return r.isStaleByTime((0,n.d2)(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.lQ).catch(n.lQ)}fetchInfiniteQuery(e){return e.behavior=p(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.lQ).catch(n.lQ)}ensureInfiniteQueryData(e){return e.behavior=p(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return f.t.isOnline()?this.#i.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#o}getMutationCache(){return this.#i}getDefaultOptions(){return this.#s}setDefaultOptions(e){this.#s=e}setQueryDefaults(e,t){this.#a.set((0,n.EN)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach((t=>{(0,n.Cp)(e,t.queryKey)&&Object.assign(r,t.defaultOptions)})),r}setMutationDefaults(e,t){this.#l.set((0,n.EN)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#l.values()],r={};return t.forEach((t=>{(0,n.Cp)(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)})),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#s.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.F$)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===n.hT&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#s.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#o.clear(),this.#i.clear()}}({defaultOptions:{queries:{staleTime:y.ST.FIVE_MINUTES,gcTime:y.ST.TEN_MINUTES,retry:(e,t)=>{var r;const n=(null==t?void 0:t.status)||(null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.status);return n!==y.jL.UNAUTHORIZED&&n!==y.jL.FORBIDDEN&&(!(n&&n>=y.H4.CLIENT_ERROR_MIN&&n<y.H4.SERVER_ERROR_MIN)&&e<3)},refetchOnWindowFocus:!1,refetchOnReconnect:!1}}})},1692:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var n=r(2775),o=r(4880),i=class{#f;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,o.gn)(this.gcTime)&&(this.#f=n.zs.setTimeout((()=>{this.optionalRemove()}),this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(o.S$?1/0:3e5))}clearGcTimeout(){this.#f&&(n.zs.clearTimeout(this.#f),this.#f=void 0)}}},1888:e=>{"use strict";e.exports=n},2238:(e,t,r)=>{"use strict";r.d(t,{ER:()=>X});var n=r(3250),o=r(3890),i=r(3096),s=r(1138),a=r(9063),l=r(3040),u=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const c=Object.assign({},{enabled:!0,logLevel:"debug",bodyPreviewLimit:1024,warnSlowMs:1e3}),d=[];function f(e){d.push(e),d.length>50&&d.shift()}function p(e){return u(this,void 0,void 0,(function*(){var t,r,n,s,l,u,d;if(!c.enabled)return e.execute();const p=e.method.toUpperCase(),y=e.correlationId||h(),v=Date.now();try{const o=yield e.execute(),a=Date.now()-v,c=Number.isFinite(a)&&a>=0?a:0,h=null===(r=null===(t=e.responseInterpreter)||void 0===t?void 0:t.status)||void 0===r?void 0:r.call(t,o),g=null!==(l=null===(s=null===(n=e.responseInterpreter)||void 0===n?void 0:n.ok)||void 0===s?void 0:s.call(n,o))&&void 0!==l?l:function(e){return"number"!=typeof e?void 0:(0,i.ar)(e)}(h),O=null===(d=null===(u=e.responseInterpreter)||void 0===u?void 0:u.size)||void 0===d?void 0:d.call(u,o),T={timestamp:v,method:p,url:m(e.url,e.query),path:E(e.url),status:h,ok:g,durationMs:c,correlationId:y,caller:e.caller,transport:e.transport,retryAttempt:e.retryAttempt,responseSize:O,isAbort:!1};return b("success",T,e.body),f(T),o}catch(t){const r=Date.now()-v,n=Number.isFinite(r)&&r>=0?r:0,i=(0,o.Ko)(t),s=(0,a.isAbortError)(t),l={timestamp:v,method:p,url:m(e.url,e.query),path:E(e.url),status:i,ok:!1,durationMs:n,correlationId:y,caller:e.caller,transport:e.transport,retryAttempt:e.retryAttempt,isAbort:s};throw b("error",l,e.body,t),f(l),t instanceof Error?t:new Error((0,a.extractErrorMessage)(t))}}))}function h(e="net"){const t=Date.now().toString(36);let r=Math.random().toString(36).slice(2,10);for(;r.length<8;)r+=Math.random().toString(36).slice(2);return`${e}_${t}_${r.slice(0,8)}`}function m(e,t){const r=y(e),n=function(e,t){const r=new URLSearchParams((null==e?void 0:e.search)||"");if(!t)return r;if("string"==typeof t){return new URLSearchParams(t).forEach(((e,t)=>{r.set(t,e)})),r}if(t instanceof URLSearchParams)return t.forEach(((e,t)=>{r.set(t,e)})),r;return Object.entries(t).forEach((([e,t])=>{if(null!=t)if(Array.isArray(t))r.delete(e),t.forEach((t=>{r.append(e,String(t))}));else{const n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?String(t):JSON.stringify(t);r.set(e,n)}})),r}(r,t),o=function(e){const t=new URLSearchParams;for(const[r,n]of e.entries())v(r.toLowerCase())?t.set(r,"[TOKEN]"):t.set(r,g(n));return t}(n),i=function(e){const t=[];for(const[r,n]of e.entries())t.push([r,n]);return t.sort((([e],[t])=>e>t?1:e<t?-1:0)),t.map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&")}(o);if(!r){const t=g(e.split("?")[0]||"");return i?`${t}?${i}`:t}const s=`${r.origin}${r.pathname}`;return i?`${s}?${i}`:s}function y(e){if(!e)return null;try{const t=(0,a.safeParseUrl)(e);return t||new URL(e,"http://localhost")}catch(e){return null}}function E(e){const t=y(e);return(null==t?void 0:t.pathname)||e.split("?")[0]||e}function v(e){return e.includes("token")||e.includes("auth")||e.includes("secret")||e.includes("key")||e.includes("password")}function g(e){let t=e;return t=t.replace(/authorization="?[^"]+"?/gi,'authorization="[TOKEN]"'),t=t.replace(/(token|fmetoken)=([^&\s]+)/gi,"$1=[TOKEN]"),t}function O(e,t){return e.length<=t?e:`${e.slice(0,t-1)}\u2026`}function b(e,t,r,n){if("silent"===c.logLevel)return;const o=r?function(e){var t;if(null==e)return"";if("string"==typeof e)return O(g(e),c.bodyPreviewLimit);if("object"==typeof e){if("undefined"!=typeof FormData&&e instanceof FormData)return"[FormData]";if("undefined"!=typeof Blob&&e instanceof Blob)return`[Blob:${e.size}]`;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return`[Binary:${e instanceof ArrayBuffer?e.byteLength:(null===(t=e.buffer)||void 0===t?void 0:t.byteLength)||0}]`}try{return O(g(JSON.stringify(e)),c.bodyPreviewLimit)}catch(e){return"[Object]"}}(r):void 0,i=n?(0,a.extractErrorMessage)(n):void 0;try{if("debug"===c.logLevel){const r="success"===e?"\u2713":"\u2717",n={phase:e,method:t.method,url:t.url,status:t.status,durationMs:t.durationMs,correlationId:t.correlationId,caller:t.caller,transport:t.transport};void 0!==t.responseSize&&(n.responseSize=t.responseSize),void 0!==t.retryAttempt&&(n.retry=t.retryAttempt),t.isAbort&&(n.aborted=!0),o&&(n.body=o),i&&(n.error=i),console.log(`[FME][net] ${r}`,n)}else if("warn"===c.logLevel){const r=`[FME][net] ${e} ${t.method} ${t.path} ${t.status||"?"} ${t.durationMs}ms`;console.log(r,Object.assign({correlationId:t.correlationId},t.caller&&{caller:t.caller}))}t.durationMs>=c.warnSlowMs&&console.log("[FME][net] slow",{method:t.method,path:t.path,durationMs:t.durationMs,correlationId:t.correlationId})}catch(e){}}const T=e=>{if(void 0!==e)return e;if("function"==typeof DOMException)return new DOMException("Aborted","AbortError");const t=new Error("Aborted");return t.name="AbortError",t},R=()=>{};new class{constructor(){this.controllers=new Map,this.listeners=new Map,this.pendingReasons=new Map}register(e,t){if(!e)return;this.controllers.set(e,t);const r=this.pendingReasons.get(e);if(void 0!==r)try{t.signal.aborted||t.abort(r)}catch(e){try{t.abort()}catch(e){}}finally{this.pendingReasons.delete(e)}}release(e,t){if(!e)return;const r=this.controllers.get(e);if(t&&r&&r!==t)return;this.controllers.delete(e),this.pendingReasons.delete(e);const n=this.listeners.get(e);(null==n?void 0:n.size)&&(n.forEach((e=>{try{e.signal.removeEventListener("abort",e.handler)}catch(e){}})),this.listeners.delete(e))}abort(e,t){if(!e)return;const r=this.controllers.get(e);if(!r)return void this.pendingReasons.set(e,null!=t?t:T());const n=null!=t?t:T();try{r.signal.aborted||r.abort(n)}catch(e){try{r.abort()}catch(e){}}finally{this.release(e,r)}}linkExternal(e,t){if(!e||!t)return R;if(t.aborted)return this.abort(e,t.reason),R;const r={signal:t,handler:()=>{const r=t.reason;this.abort(e,r)}};t.addEventListener("abort",r.handler);let n=this.listeners.get(e);return n||(n=new Set,this.listeners.set(e,n)),n.add(r),()=>{try{t.removeEventListener("abort",r.handler)}catch(e){}const n=this.listeners.get(e);n&&(n.delete(r),0===n.size&&this.listeners.delete(e))}}abortAll(e){const t=Array.from(this.controllers.entries());for(const[r,n]of t)this.abort(r,e),this.release(r,n)}};const A=(e,t)=>new n.VQ(e,e,t,(e=>(0,i.PS)(e))(t)),S=e=>{const t=null==e?void 0:e.httpStatus,r=null==e?void 0:e.status;return"number"==typeof t?t:"number"==typeof r?r:void 0},_=e=>{const t=S(e);if("number"==typeof t)return(0,i.ar)(t)},I=e=>{try{const t=null==e?void 0:e.data;if(!t)return;if("string"==typeof t)return t.length;return JSON.stringify(t).length}catch(e){return}},w=e=>{var t;return null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e};let N,M,L,C,P,k=null;const D=Object.create(null),U={esriRequest:()=>Promise.resolve({data:null}),esriConfig:{request:{maxUrlLength:4e3,interceptors:[]}},projection:{},webMercatorUtils:{},SpatialReference:function(){return{}}},F=e=>U[e];function j(){return u(this,void 0,void 0,(function*(){if(Boolean(N&&M&&L&&C&&P))return;if(k)return k;const e=(()=>u(this,void 0,void 0,(function*(){if((()=>{const e=globalThis;return Boolean(e&&n._$.some((t=>Boolean(null==e?void 0:e[t]))))})()){(e=>{var t;const r={esriRequest:e=>N=e,esriConfig:e=>M=e,projection:e=>L=e,webMercatorUtils:e=>C=e,SpatialReference:e=>P=e};for(const o of n._$){const n=null!==(t=null==e?void 0:e[o])&&void 0!==t?t:F(o);r[o](n)}})(globalThis)}else try{yield u(void 0,void 0,void 0,(function*(){const[e,t,r,n,o]=yield(0,a.loadArcgisModules)(["esri/request","esri/config","esri/geometry/projection","esri/geometry/support/webMercatorUtils","esri/geometry/SpatialReference"]);N=w(e),M=w(t),L=w(r),C=w(n),P=w(o);const i=B(L);(null==i?void 0:i.load)&&(yield i.load())}))}catch(e){throw new Error("ARCGIS_MODULE_ERROR")}})))();k=e;try{yield e}catch(e){throw N=void 0,M=void 0,L=void 0,C=void 0,P=void 0,k=null,H=null,e instanceof Error?e:new Error(String(e))}}))}function W(){return u(this,void 0,void 0,(function*(){return yield j(),q(M)}))}const G=e=>Boolean(e&&"object"==typeof e),x=e=>"function"==typeof e?e:null,q=e=>G(e)&&e.request?e:null,B=e=>G(e)?e:null,$=(e,t,r)=>{const n=new Error(e);return n.code=e,null!=t&&(n.status=t),void 0!==r&&(n.cause=r),n},K=e=>u(void 0,void 0,void 0,(function*(){var t;let r;try{r=yield W()}catch(e){return}!function(e,t){if(null==e?void 0:e.length)for(let r=e.length-1;r>=0;r--){const n=e[r];if(!(null==n?void 0:n._fmeInterceptor))continue;const o=n.urls;(o instanceof RegExp?o.source===t.source&&o.flags===t.flags:t.test("string"==typeof o?o:String(null!=o?o:"")))&&e.splice(r,1)}}(null===(t=null==r?void 0:r.request)||void 0===t?void 0:t.interceptors,e)})),V=/\/(?:fmerest|fmedatadownload|fmedataupload|fmejobsubmitter)\b/i,z=(e,t)=>({urls:t,before(t){if(!(e=>{if("string"==typeof e)return V.test(e);if(e instanceof URL)return V.test(e.pathname);if(e&&"object"==typeof e){const t="string"==typeof e.href?e.href:"string"==typeof e.url?e.url:null;return!!t&&V.test(t)}return!1})(null==t?void 0:t.url))return;(null==t?void 0:t.requestOptions)||(t.requestOptions={});const r=t.requestOptions;r.headers=r.headers||{},r.query=r.query||{};const n=(e=>D[e])(e);n&&(r.query.fmetoken||(r.query.fmetoken=n),r.headers.Authorization=`fmetoken token=${n}`)},_fmeInterceptor:!0});function Q(e,t){return u(this,void 0,void 0,(function*(){var r;if(!e)return;const n=(0,a.extractHostFromUrl)(e);if(!n)return;const o=n.toLowerCase(),i=(0,a.createHostPattern)(n);if(!t){const e=(e=>Object.prototype.hasOwnProperty.call(D,e))(o);return(e=>{delete D[e]})(o),void(e&&(yield K(i)))}let s;((e,t)=>{D[e]=t})(o,t);try{s=yield W()}catch(e){throw e instanceof Error?e:new Error(String(e))}(null===(r=null==s?void 0:s.request)||void 0===r?void 0:r.interceptors)&&((0,a.interceptorExists)(s.request.interceptors,i)||s.request.interceptors.push(z(o,i)))}))}let H=null;const J=(e,t)=>{const r=(e=>{const t=(0,a.parseNonNegativeInt)(null==e?void 0:e.tm_ttc),r=(0,a.parseNonNegativeInt)(null==e?void 0:e.tm_ttl),n=(0,a.toTrimmedString)(null==e?void 0:e.tm_tag),o={};return void 0!==t&&(o.ttc=t),void 0!==r&&(o.ttl=r),n&&(o.tag=n),o})(t),n={publishedParameters:e};return Object.keys(r).length>0&&(n.TMDirectives=r),n};class Z{constructor(e){this.basePath=n.vA.BASE_PATH,this.disposed=!1,this.config=e,this.setupPromise=Promise.resolve(),this.queueSetup(e)}queueSetup(e){this.setupPromise=(this.setupPromise||Promise.resolve()).catch((()=>{})).then((()=>u(this,void 0,void 0,(function*(){yield function(){return u(this,void 0,void 0,(function*(){const e=yield W();e&&(e.request.maxUrlLength=Math.max(Number(e.request.maxUrlLength)||0,n.vA.MAX_URL_LENGTH))}))}(),yield Q(e.serverUrl,e.token)})))).catch((e=>{throw e instanceof Error?e:new Error(String(e))}))}queueTeardown(e){this.setupPromise=(this.setupPromise||Promise.resolve()).catch((()=>{})).then((()=>Q(e,""))).catch((()=>{}))}dispose(){this.disposed||(this.disposed=!0,this.queueTeardown(this.config.serverUrl))}uploadToTemp(e,t){return u(this,void 0,void 0,(function*(){var r,o,i;if(null===(r=null==t?void 0:t.signal)||void 0===r?void 0:r.aborted)throw new DOMException("Aborted","AbortError");const s=this.resolveRepository(null==t?void 0:t.repository),l=(0,a.toNonEmptyTrimmedString)(null==t?void 0:t.workspace);if(!l)throw A("DATA_UPLOAD_ERROR");const u=((0,a.toNonEmptyTrimmedString)(null==e?void 0:e.name)||`upload_${Date.now()}`).replace(/[^A-Za-z0-9._-]/g,"_").slice(0,128)||`upload_${Date.now()}`,c=(0,a.toNonEmptyTrimmedString)(null==t?void 0:t.subfolder).replace(/[^A-Za-z0-9_-]/g,"-").slice(0,64)||h("upload"),d=(0,a.buildUrl)(this.config.serverUrl,"fmedataupload",s,l,u),f={opt_fullpath:"true",opt_responseformat:"json",opt_namespace:c},p={Accept:"application/json","Content-Type":e instanceof File&&e.type?e.type:"application/octet-stream"},m=yield this.request(d,{method:n.ym.PUT,headers:p,body:e,query:f,signal:null==t?void 0:t.signal,cacheHint:!1,repositoryContext:s}),y=null===(o=m.data)||void 0===o?void 0:o.file,E=null!==(i=(0,a.toTrimmedString)(null==y?void 0:y.path))&&void 0!==i?i:null;if(!E)throw A("DATA_UPLOAD_ERROR",m.status);return{data:{path:E},status:m.status,statusText:m.statusText}}))}resolveRepository(e){return e||this.config.repository}buildServiceUrl(e,t,r){return(0,a.buildUrl)(this.config.serverUrl,e,t,r)}formatJobParams(e={}){if(e.publishedParameters)return e;const t=Object.entries(e).filter((([e])=>!n.d.has(e))).map((([e,t])=>({name:e,value:t})));return J(t,e)}repoEndpoint(e,...t){return(0,a.buildUrl)(this.config.serverUrl,this.basePath.slice(1),"repositories",e,...t)}transformEndpoint(e,t,r){return(0,a.buildUrl)(this.config.serverUrl,this.basePath.slice(1),"transformations",e,t,r)}withApiError(e,t,r){return u(this,void 0,void 0,(function*(){try{return yield e()}catch(e){const i=(0,o.Ko)(e),s=(0,o.$d)(e);throw new n.VQ(t,r,i||0,s)}}))}testConnection(e){return u(this,void 0,void 0,(function*(){return this.request("/info",{signal:e})}))}validateRepository(e,t){return u(this,void 0,void 0,(function*(){const r=this.resolveRepository(e),n=this.repoEndpoint(r);return this.request(n,{signal:t})}))}getRepositories(e){return u(this,void 0,void 0,(function*(){return this.withApiError((()=>u(this,void 0,void 0,(function*(){const t=(0,a.buildUrl)(this.config.serverUrl,this.basePath.slice(1),"repositories"),r=yield this.request(t,{signal:e,cacheHint:!1,query:{limit:-1,offset:-1}}),n=null==r?void 0:r.data;return{data:(0,a.extractRepositoryNames)(n).map((e=>({name:e}))),status:r.status,statusText:r.statusText}}))),"REPOSITORIES_ERROR","REPOSITORIES_ERROR")}))}getWorkspaceParameter(e,t,r,n){return u(this,void 0,void 0,(function*(){const o=this.resolveRepository(r),i=this.repoEndpoint(o,"items",e,"parameters",t);return this.request(i,{signal:n,cacheHint:!1,repositoryContext:o})}))}getWorkspaceParameters(e,t,r){return u(this,void 0,void 0,(function*(){const n=this.resolveRepository(t),o=this.repoEndpoint(n,"items",e,"parameters");return this.withApiError((()=>this.request(o,{signal:r,cacheHint:!1,repositoryContext:n})),"WORKSPACE_PARAMETERS_ERROR","WORKSPACE_PARAMETERS_ERROR")}))}getRepositoryItems(e,t,r,n,o){return u(this,void 0,void 0,(function*(){const i=this.resolveRepository(e),s=this.repoEndpoint(i,"items"),a={};return t&&(a.type=t),"number"==typeof r&&(a.limit=r),"number"==typeof n&&(a.offset=n),this.withApiError((()=>this.request(s,{signal:o,cacheHint:!1,repositoryContext:i,query:a})),"REPOSITORY_ITEMS_ERROR","REPOSITORY_ITEMS_ERROR")}))}getWorkspaceItem(e,t,r){return u(this,void 0,void 0,(function*(){const n=this.resolveRepository(t),o=this.repoEndpoint(n,"items",e);return this.withApiError((()=>this.request(o,{signal:r,cacheHint:!1,repositoryContext:n})),"WORKSPACE_ITEM_ERROR","WORKSPACE_ITEM_ERROR")}))}submitJob(e){return u(this,arguments,void 0,(function*(e,t={},r,o){const i=this.resolveRepository(r),s=this.transformEndpoint("submit",i,e),a=this.formatJobParams(t);return this.withApiError((()=>this.request(s,{method:n.ym.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify(a),signal:o,cacheHint:!1})),"JOB_SUBMISSION_ERROR","JOB_SUBMISSION_ERROR")}))}runDataDownload(e){return u(this,arguments,void 0,(function*(e,t={},r,n){const o=this.resolveRepository(r);return yield this.runDownloadWebhook(e,t,o,n)}))}runWorkspace(e){return u(this,arguments,void 0,(function*(e,t={},r,n){return yield this.runDataDownload(e,t,r,n)}))}runDownloadWebhook(e){return u(this,arguments,void 0,(function*(e,t={},r,i){try{const{baseUrl:o,params:s,fullUrl:u}=(0,l.vl)(this.config.serverUrl,r,e,t,this.config.token),c=(()=>{var e;const t=(()=>{var e,t;if("undefined"==typeof window)return;const r=null===(t=null===(e=null===window||void 0===window?void 0:window.esriConfig)||void 0===e?void 0:e.request)||void 0===t?void 0:t.maxUrlLength,n="number"==typeof r?r:Number(r);return Number.isFinite(n)&&n>0?n:void 0})();if(void 0!==t)return t;if(null!==H)return H;const r=q(M),n=null===(e=null==r?void 0:r.request)||void 0===e?void 0:e.maxUrlLength,o="number"==typeof n?n:Number(n);return H=Number.isFinite(o)&&o>0?o:1900,H})();if(Number.isFinite(c)&&c>0&&u.length>c)throw $("URL_TOO_LONG",0);(0,a.safeLogParams)("WEBHOOK_CALL",o,s,n.vA.WEBHOOK_LOG_WHITELIST),yield j();const d=x(N);if(!d)throw A("ARCGIS_MODULE_ERROR");const f={Accept:"application/json","Cache-Control":"no-cache"},m=new AbortController;let y=null,E=!1;const v=()=>{m.abort()};try{i&&(i.aborted?m.abort():i.addEventListener("abort",v));const e="number"==typeof this.config.timeout&&this.config.timeout>0?this.config.timeout:0;e>0&&(y=setTimeout((()=>{E=!0;try{m.abort()}catch(e){}}),e));const t=yield p({method:"GET",url:u,transport:"fme-webhook",query:s,correlationId:h("webhook"),responseInterpreter:{status:S,ok:_,size:I},execute:()=>d(u,{method:"get",responseType:"json",headers:f,signal:m.signal,timeout:e})});return this.parseWebhookResponse(t)}catch(e){if((0,a.isAbortError)(e)&&E)throw $("WEBHOOK_TIMEOUT",408,e);throw e instanceof Error?e:new Error(String(e))}finally{y&&clearTimeout(y);try{i&&i.removeEventListener("abort",v)}catch(e){}}}catch(e){if(e instanceof n.VQ)throw e;if(null==e?void 0:e.code)throw e instanceof Error?e:new Error(String(e));const t=(0,o.Ko)(e);throw A("DATA_DOWNLOAD_ERROR",t||0)}}))}parseWebhookResponse(e){return u(this,void 0,void 0,(function*(){var t;const r="number"==typeof(null==e?void 0:e.status)?e.status:"number"==typeof(null==e?void 0:e.httpStatus)?e.httpStatus:void 0,n="number"==typeof r?r:0;if(401===n||403===n)throw $("WEBHOOK_AUTH_ERROR",n);const o="function"==typeof(null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t.get)?e.headers:void 0,i=(null==o?void 0:o.get("content-type"))||void 0;let s;if("function"==typeof(null==e?void 0:e.json))try{s=yield e.json()}catch(e){throw $("WEBHOOK_NON_JSON",n,e)}else if(void 0!==(null==e?void 0:e.data))s=e.data;else if(void 0!==(null==e?void 0:e.json))s=e.json;else if("string"==typeof(null==e?void 0:e.text))try{s=JSON.parse(e.text)}catch(e){throw $("WEBHOOK_NON_JSON",n,e)}if(!s||"object"!=typeof s)throw $("WEBHOOK_NON_JSON",n,e);if(i&&!(0,a.isJson)(i))throw $("WEBHOOK_NON_JSON",n,{contentType:i});return{data:s,status:n,statusText:null==e?void 0:e.statusText}}))}request(e){return u(this,arguments,void 0,(function*(e,t={}){var r,i,l;if(this.disposed)throw A("CLIENT_DISPOSED");try{yield this.setupPromise}catch(e){this.queueSetup(this.config);try{yield this.setupPromise}catch(e){throw A("ARCGIS_MODULE_ERROR")}}yield j();const u=e=>e.startsWith("/")?e.slice(1):e,c=u(this.basePath||""),d=c?[c]:[],f=u(e),m=e.startsWith("http")?e:e.startsWith("/fme")?(0,a.buildUrl)(this.config.serverUrl,f):f?(0,a.buildUrl)(this.config.serverUrl,...d,f):(0,a.buildUrl)(this.config.serverUrl,...d),y=Object.assign({},t.headers||{}),E=Object.assign({},t.query||{});if(!t.method||t.method===n.ym.GET){const e=(0,a.makeScopeId)(this.config.serverUrl,this.config.token,t.repositoryContext);void 0===E.__scope&&(E.__scope=e)}const v={method:(null===(r=t.method)||void 0===r?void 0:r.toLowerCase())||"get",query:E,responseType:"json",headers:y,signal:t.signal};try{const e=null===(i=(0,a.extractHostFromUrl)(this.config.serverUrl))||void 0===i?void 0:i.toLowerCase(),r=new URL(m,(null===(l=globalThis.location)||void 0===l?void 0:l.origin)||"http://d").host.toLowerCase();e&&r===e&&this.config.token&&(E.fmetoken||(E.fmetoken=this.config.token),v.headers=v.headers||{},v.headers.Authorization=`fmetoken token=${this.config.token}`);const n="number"==typeof t.timeout?t.timeout:"number"==typeof this.config.timeout?this.config.timeout:void 0;"number"==typeof n&&n>0&&(v.timeout=n),void 0!==t.cacheHint&&(v.cacheHint=t.cacheHint),void 0!==t.body&&(v.body=t.body);const o=x(N);if(!o)throw A("ARCGIS_MODULE_ERROR");const s=h("fme"),u=yield p({method:"string"==typeof v.method?v.method.toUpperCase():"GET",url:m,transport:"fme-flow-api",body:v.body,query:E,correlationId:s,responseInterpreter:{status:S,ok:_,size:I},execute:()=>o(m,v)});return{data:u.data,status:u.httpStatus||u.status||200,statusText:u.statusText}}catch(e){if("AbortError"===(null==e?void 0:e.name))return{data:void 0,status:0,statusText:"requestAborted"};if(e instanceof n.VQ)throw e;const t=(0,o.Ko)(e)||0,r=(0,o.$d)(e);let i="REQUEST_FAILED";(0,a.extractErrorMessage)(e).includes("Unexpected token")&&(i="INVALID_RESPONSE_FORMAT");const l=(0,s.mapErrorFromNetwork)(e,t);throw new n.VQ(l,i,t,r)}}))}}const Y=e=>({serverUrl:e.fmeServerUrl||e.fme_server_url||"",token:e.fmeServerToken||e.fme_server_token||e.fmw_server_token||"",repository:e.repository||"",timeout:e.requestTimeout});function X(e){const t=Y(e);try{(0,o.e6)(t)}catch(e){throw A("INVALID_CONFIG")}return new Z(Object.assign(Object.assign({},t),{serverUrl:t.serverUrl.replace(/\/$/,"")}))}},2242:(e,t,r)=>{"use strict";r.d(t,{bQ:()=>o});var n=r(9244);r(3250),r(5880),r(9063),r(7744);const o=()=>{const e=n.React.useRef(null),t=n.hooks.useEventCallback((()=>{const t=e.current;if(t)try{t.abort()}catch(e){}e.current=null})),r=n.hooks.useEventCallback((()=>{t();const r=new AbortController;return e.current=r,r})),o=n.hooks.useEventCallback((t=>{t&&e.current===t&&(e.current=null)}));return{controllerRef:e,abortAndCreate:r,cancel:t,finalize:o}}},2686:e=>{"use strict";e.exports=o},2775:(e,t,r)=>{"use strict";r.d(t,{Zq:()=>i,zs:()=>o});var n={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},o=new class{#p=n;#h=!1;setTimeoutProvider(e){this.#p=e}setTimeout(e,t){return this.#p.setTimeout(e,t)}clearTimeout(e){this.#p.clearTimeout(e)}setInterval(e,t){return this.#p.setInterval(e,t)}clearInterval(e){this.#p.clearInterval(e)}};function i(e){setTimeout(e,0)}},3040:(e,t,r)=>{"use strict";r.d(t,{$M:()=>R,Eo:()=>d,Hz:()=>T,Lz:()=>m,Mm:()=>f,_R:()=>h,cL:()=>E,hk:()=>I,o4:()=>v,v0:()=>p,vl:()=>_,yO:()=>y});var n=r(3250),o=r(1618),i=r(6920),s=r(4986),a=r(3890),l=r(930),u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const c=["sync","async"],d=e=>{if(!e)return null!=e?e:void 0;const t=e.syncMode;let r="boolean"==typeof t?t:(0,s.Dr)(t);if(void 0===r&&(r=Boolean(t)),"boolean"==typeof t&&t===r)return e;const n=Object.assign(Object.assign({},e),{syncMode:r});return"function"==typeof e.set&&Object.defineProperty(n,"set",{value:e.set,writable:!0,configurable:!0}),n},f=(e,t,r)=>{var n;const o=(null==e?void 0:e.data)||{},i=(0,s.P6)(o._serviceMode).toLowerCase();let a;a="sync"===i||"async"===i?i:(null==t?void 0:t.syncMode)?"sync":"async";const l=((e,t)=>t?t.areaWarning?{reason:"area",value:t.drawnArea,threshold:null==e?void 0:e.largeArea}:"number"==typeof(null==e?void 0:e.largeArea)&&null!=t.drawnArea&&t.drawnArea>e.largeArea?{reason:"area",value:t.drawnArea,threshold:e.largeArea}:null:null)(t,{workspaceItem:null==r?void 0:r.workspaceItem,areaWarning:null==r?void 0:r.areaWarning,drawnArea:null==r?void 0:r.drawnArea});return l&&"sync"===a?(null===(n=null==r?void 0:r.onModeOverride)||void 0===n||n.call(r,{forcedMode:"async",previousMode:"sync",reason:l.reason,value:l.value,threshold:l.threshold}),"async"):a},p=(e,t,r="async",n)=>{var o;const i=(null==e?void 0:e.data)||{},a=c.includes(r)?r:"async",l=null===(o=null==n?void 0:n.showResult)||void 0===o||o,u=Object.assign(Object.assign({},i),{opt_servicemode:a,opt_responseformat:"json",opt_showresult:l?"true":"false"}),d=(0,s.P6)(t);return"async"===a&&d&&(u.opt_requesteremail=d),u},h=(e,t)=>{if(!t)return e;const r=Object.assign({},e),n=e=>{const t=m(e);if(!(void 0===t||t<=0))return t},o=(()=>{const t=e.opt_servicemode;if("string"==typeof t)return t;const n=r.opt_servicemode;return"string"==typeof n?n:""})(),i=(0,s.P6)(o).toLowerCase(),a="sync"===i||!i&&Boolean(null==t?void 0:t.syncMode);if(a||void 0===r.tm_ttc){if(a&&!("tm_ttc"in r)){const e=n(null==t?void 0:t.tm_ttc);void 0!==e&&(r.tm_ttc=e)}}else delete r.tm_ttc;if(!("tm_ttl"in r)){const e=n(null==t?void 0:t.tm_ttl);void 0!==e&&(r.tm_ttl=e)}return r},m=e=>{if("number"==typeof e&&Number.isFinite(e)){if(e<0)return;return Math.floor(e)}const t=(0,s.Nn)(e);if(!t||!/^\d+$/.test(t))return;const r=Number(t);return!Number.isFinite(r)||r<0?void 0:Math.floor(r)},y=(e,t=10)=>{if("number"==typeof e&&Number.isFinite(e)){const t=Math.trunc(e);return Number.isFinite(t)?t:void 0}const r=(0,s.Bv)(e);if(!r||!/^[+-]?\d+$/.test(r))return;const n=parseInt(r,t);return Number.isFinite(n)?n:void 0},E=(e,t,r,n,s,a)=>{const{config:l,workspaceParameters:c,workspaceItem:m,areaWarning:y,drawnArea:E}=a||{},v=d(l),g=(null==e?void 0:e.data)||{},O=f({data:g},v,{workspaceItem:m,areaWarning:y,drawnArea:E}),{_serviceMode:b,__upload_file__:T,__remote_dataset_url__:R}=g,A=u(g,["_serviceMode","__upload_file__","__remote_dataset_url__"]),S=p({data:A},t,O,v),_=(0,o.collectGeometryParamNames)(c),I=(0,o.attachAoi)(S,r,n,s,v,_),w=h(I,v);return(0,i.dd)(w,v),w},v=e=>{if(Array.isArray(e))return(0,i.is)((0,i.YD)(e,"name"));const t="object"==typeof e&&null!==e?e:null,r=null==t?void 0:t.items;return Array.isArray(r)?(0,i.is)((0,i.YD)(r,"name")):[]},g=(e,t,r)=>({success:!0,blob:e,email:r,workspaceName:t,downloadFilename:`${t}_export.zip`,blobMetadata:{type:(0,s.Nn)(e.type),size:"number"==typeof e.size&&Number.isFinite(e.size)?e.size:void 0}}),O=(e,t,r)=>({success:!0,jobId:"number"==typeof e.jobId?e.jobId:void 0,email:r,workspaceName:t,downloadUrl:e.url,downloadFilename:e.url?`${t}_export.zip`:void 0,status:e.status,statusMessage:e.message}),b=(e,t,r="FME_JOB_FAILURE")=>Object.assign(Object.assign(Object.assign({success:!1,message:e,code:r},"number"==typeof(null==t?void 0:t.jobId)&&{jobId:t.jobId}),(null==t?void 0:t.status)&&{status:t.status}),(null==t?void 0:t.message)&&{statusMessage:t.message}),T=(e,t,r,n)=>{const o=e,i=null==o?void 0:o.data;if(!i)return{success:!1,message:n("noDataInResponse"),code:"NO_DATA"};if(i.blob instanceof Blob)return g(i.blob,t,r);const a=R(o),l=(a.status||"").toString().trim().toUpperCase();if("CANCELLED"===l||"CANCELED"===l){const e=a.message||"",t=e.toLowerCase(),r=["timeout","time limit","time-limit","max execution","maximum execution","max runtime","maximum runtime","max run time"].some((e=>t.includes(e)));return{success:!1,cancelled:!0,message:n(r?"jobCancelledTimeout":"jobCancelled"),code:r?"FME_JOB_CANCELLED_TIMEOUT":"FME_JOB_CANCELLED",status:a.status,statusMessage:e,jobId:"number"==typeof a.jobId?a.jobId:void 0}}if(new Set(["FAILURE","FAILED","JOB_FAILURE","FME_FAILURE"]).has(l)){const e=(0,s.Nn)(a.message)||n("jobFailed");return b(e,a,"FME_JOB_FAILURE")}var u;return"SUCCESS"===l||"string"==typeof(u=a.url)&&/^https?:\/\//.test(u)||"number"==typeof a.jobId&&a.jobId>0?O(a,t,r):b(a.message||n("errorJobSubmission"),a)},R=e=>{var t,r,n;const o=e||{},i=(null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.serviceResponse)||(null==o?void 0:o.data)||o;return{status:(null===(r=null==i?void 0:i.statusInfo)||void 0===r?void 0:r.status)||(null==i?void 0:i.status),message:(null===(n=null==i?void 0:i.statusInfo)||void 0===n?void 0:n.message)||(null==i?void 0:i.message),jobId:"number"==typeof(null==i?void 0:i.jobID)?i.jobID:null==i?void 0:i.id,url:null==i?void 0:i.url}},A=e=>Array.from(e.entries()).map((([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),S=(e,t={})=>{for(const r of n.T5){const n=m(t[r]);void 0!==n&&e.set(r,String(n))}const r=((e,t)=>{const r=(0,s.Nn)(e);return r?r.slice(0,t):void 0})(t.tm_tag,128);r&&e.set("tm_tag",r)},_=(e,t,r,o={},i)=>{const s=(0,l.c$)(e,"fmedatadownload",t,r),u=(0,a.dC)(s,{strict:!0,requireHttps:!0,disallowRestForWebhook:!0});if(!u.ok){throw((e,t,r)=>{const n=new Error(e);return n.code=e,null!=t&&(n.status=t),void 0!==r&&(n.cause=r),n})("WEBHOOK_AUTH_ERROR",0,(0,a.$N)("reason"in u?u.reason:void 0))}const c=(0,l.XV)(o,[...n.GR],!0);return i&&c.set("token",i),S(c,o),{baseUrl:s,params:c,fullUrl:`${s}?${A(c)}`}},I=(e,t,r,o={},i=n.vA.MAX_URL_LENGTH,s)=>{const{fullUrl:a}=_(e,t,r,o,s);return"number"==typeof i&&i>0&&a.length>i}},3096:(e,t,r)=>{"use strict";r.d(t,{BY:()=>u,Bd:()=>I,EV:()=>o,FS:()=>d,GR:()=>E,Gm:()=>O,H4:()=>S,In:()=>b,KF:()=>c,KG:()=>L,PS:()=>w,ST:()=>N,T5:()=>m,Ve:()=>i,Xw:()=>l,_$:()=>U,_A:()=>s,a9:()=>C,ar:()=>_,bD:()=>k,d:()=>v,jF:()=>M,jL:()=>A,m2:()=>p,nu:()=>D,qc:()=>R,vA:()=>a,vH:()=>f,wF:()=>T,zo:()=>P});var n=r(6055);const o=Object.freeze([n.ZW.SET_VIEW_MODE,n.ZW.RESET_STATE,n.ZW.SET_GEOMETRY,n.ZW.SET_DRAWING_TOOL,n.ZW.COMPLETE_DRAWING,n.ZW.SET_ORDER_RESULT,n.ZW.SET_WORKSPACE_ITEMS,n.ZW.SET_WORKSPACE_PARAMETERS,n.ZW.SET_SELECTED_WORKSPACE,n.ZW.SET_WORKSPACE_ITEM,n.ZW.SET_ERROR,n.ZW.SET_ERRORS,n.ZW.CLEAR_WORKSPACE_STATE,n.ZW.CLEAR_ERROR,n.ZW.RESET_TO_DRAWING,n.ZW.COMPLETE_STARTUP,n.ZW.REMOVE_WIDGET_STATE,n.ZW.SET_LOADING_FLAG,n.ZW.APPLY_WORKSPACE_DATA]),i=(Object.freeze({title:"",listMode:"hide",elevationInfo:{mode:"on-the-ground"}}),"#0079C1"),s=Object.freeze(["FILENAME","FILENAME_MUSTEXIST","DIRNAME","DIRNAME_MUSTEXIST","DIRNAME_SRC","LOOKUP_FILE","REPROJECTION_FILE"]),a=Object.freeze({BASE_PATH:"/fmerest/v3",MAX_URL_LENGTH:4e3,WEBHOOK_EXCLUDE_KEYS:[],WEBHOOK_LOG_WHITELIST:Object.freeze(["opt_responseformat","opt_showresult","opt_servicemode"])}),l=(Object.freeze({VALIDATION:{DEFAULT_TTL_VALUE:"",DEFAULT_TTC_VALUE:""},LIMITS:{MAX_M2_CAP:1e10,MAX_REQUEST_TIMEOUT_MS:6e5},DIRECTIVES:{DESCRIPTION_MAX:512,TAG_MAX:128},COLORS:{BACKGROUND_DARK:"#181818"},TEXT:{LARGE_AREA_MESSAGE_MAX:160}}),n.nE.STARTUP_VALIDATION,n.nE.STARTUP_VALIDATION,n.nE.EXPORT_FORM,n.nE.WORKSPACE_SELECTION,n.nE.WORKSPACE_SELECTION,n.nE.INITIAL,n.nE.EXPORT_OPTIONS,n.nE.INITIAL,n.nE.ORDER_RESULT,n.nE.INITIAL,n.nE.DRAWING,n.nE.INITIAL,n.nE.INITIAL,n.nE.INITIAL,Object.freeze(["esri/widgets/Sketch/SketchViewModel","esri/layers/GraphicsLayer","esri/geometry/geometryEngine","esri/geometry/geometryEngineAsync","esri/geometry/support/webMercatorUtils","esri/geometry/projection","esri/geometry/SpatialReference","esri/geometry/support/normalizeUtils","esri/geometry/Polyline","esri/geometry/Polygon","esri/Graphic"]),Object.freeze({DEFAULT_CHUNK_SIZE:10,MIN_CHUNK_SIZE:1,MAX_CHUNK_SIZE:25}),Object.freeze({CANCELLED_PROMISE:"CancelledPromiseError",ABORT:"AbortError"}),/^[^\s@]{1,64}@[^\s@]{1,253}\.[^\s@]{2,63}$/),u=/\{\s*email\s*\}/i,c=Object.freeze(["localhost",".localhost",".local",".internal",".intranet",".home",".lan",".localdomain"]),d=Object.freeze([{start:[10,0,0,0],end:[10,255,255,255]},{start:[100,64,0,0],end:[100,127,255,255]},{start:[127,0,0,0],end:[127,255,255,255]},{start:[169,254,0,0],end:[169,254,255,255]},{start:[172,16,0,0],end:[172,31,255,255]},{start:[192,168,0,0],end:[192,168,255,255]},{start:[0,0,0,0],end:[0,255,255,255]}]),f=/\.(zip|kmz|json|geojson|gml)(\?.*)?$/i,p=4e3,h=Object.freeze(["tm_ttc","tm_ttl","tm_tag"]),m=Object.freeze(["tm_ttc","tm_ttl"]),y=Object.freeze(["opt_servicemode","opt_responseformat","opt_showresult","opt_requesteremail"]),E=Object.freeze([...a.WEBHOOK_EXCLUDE_KEYS,...h]),v=new Set([...h,...y]),g=(Object.freeze(["sync","async"]),Object.freeze({M2_PER_KM2:1e6,AREA_DECIMALS:2,METERS_PER_KILOMETER:1e3,SQUARE_FEET_PER_SQUARE_MILE:27878400})),O=(Object.freeze([{factor:.3048,label:"ft\xb2",keywords:["foot","feet"],largeUnit:{threshold:g.SQUARE_FEET_PER_SQUARE_MILE,factor:g.SQUARE_FEET_PER_SQUARE_MILE,label:"mi\xb2"}},{factor:.3048006096,label:"ft\xb2",keywords:[]},{factor:1609.344,label:"mi\xb2",keywords:["mile"]},{factor:g.METERS_PER_KILOMETER,label:"km\xb2",keywords:["kilometer"]},{factor:.9144,label:"yd\xb2",keywords:["yard"]},{factor:.0254,label:"in\xb2",keywords:["inch"]},{factor:.01,label:"cm\xb2",keywords:["centimeter"]},{factor:.001,label:"mm\xb2",keywords:["millimeter"]},{factor:1852,label:"nm\xb2",keywords:["nautical"]},{factor:1,label:"m\xb2",keywords:["meter"]}]),Object.freeze({GEOMETRY_SERIALIZATION_FAILED:"polygon",MAP_MODULES_LOAD_FAILED:"map",FORM_INVALID:"warning"}),Object.freeze([{token:"GEOMETRY",icon:"polygon"},{token:"AREA",icon:"polygon"},{token:"MAP",icon:"map"},{token:"MODULE",icon:"map"},{token:"FORM",icon:"warning"},{token:"TOKEN",icon:"person-lock"},{token:"AUTH",icon:"person-lock"},{token:"REPOSITORY",icon:"folder"},{token:"REPO",icon:"folder"},{token:"DATA",icon:"data"},{token:"NETWORK",icon:"shared-no"},{token:"OFFLINE",icon:"shared-no"},{token:"CONNECTION",icon:"shared-no"},{token:"REQUEST",icon:"shared-no"},{token:"SERVER",icon:"feature-service"},{token:"GATEWAY",icon:"feature-service"},{token:"URL",icon:"link-tilted"},{token:"TIMEOUT",icon:"time"},{token:"CONFIG",icon:"setting"},{token:"EMAIL",icon:"email"}]),"/fmerest"),b=(Object.freeze({WGS84:4326,WEB_MERCATOR:3857}),50),T=1e-6,R=1/111319.49079327358,A=Object.freeze({UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,BAD_REQUEST:400,TIMEOUT:408,GATEWAY_TIMEOUT:504,TOO_MANY_REQUESTS:429,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,NETWORK_ERROR:0,SERVER_ERROR_MIN:500,SERVER_ERROR_MAX:599}),S=Object.freeze({SUCCESS_MIN:200,SUCCESS_MAX:399,CLIENT_ERROR_MIN:400,CLIENT_ERROR_MAX:499,SERVER_ERROR_MIN:500,SERVER_ERROR_MAX:599,MIN_VALID:100,MAX_VALID:599}),_=e=>"number"==typeof e&&e>=S.SUCCESS_MIN&&e<=S.SUCCESS_MAX,I=e=>"number"==typeof e&&e>=S.MIN_VALID&&e<=S.MAX_VALID,w=e=>!e||e<S.MIN_VALID||(!!(e=>"number"==typeof e&&e>=S.SERVER_ERROR_MIN)(e)||(e===A.TIMEOUT||e===A.TOO_MANY_REQUESTS)),N=Object.freeze({SECOND:1e3,MINUTE:6e4,FIVE_MINUTES:3e5,TEN_MINUTES:6e5,MAX_RESPONSE_TIME:3e5,SLOW_REQUEST_THRESHOLD:1e3}),M={INVALID_RESPONSE_FORMAT:"errorTokenIssue",WEBHOOK_AUTH_ERROR:"errorTokenIssue",WEBHOOK_TIMEOUT:"requestTimedOut",REPOSITORIES_ERROR:"errorRepositoryAccess",REPOSITORY_ITEMS_ERROR:"errorRepositoryAccess",JOB_SUBMISSION_ERROR:"errorJobSubmission",INVALID_CONFIG:"errorSetupRequired",CONFIG_INCOMPLETE:"errorSetupRequired",configMissing:"errorSetupRequired",GEOMETRY_MISSING:"geometryMissingCode",GEOMETRY_TYPE_INVALID:"geometryTypeInvalidCode",GEOMETRY_SERIALIZATION_FAILED:"geometrySerializationFailedCode",URL_TOO_LONG:"urlTooLongMessage"},L={401:"errorTokenIssue",408:"requestTimedOut",429:"rateLimitExceeded",431:"headersTooLargeMessage"},C=Object.freeze([{pattern:/timeout/i,key:"requestTimedOut"},{pattern:/cors/i,key:"corsBlocked"},{pattern:/url.*too/i,key:"urlTooLongMessage"},{pattern:/remote_dataset_workspace_required/i,key:"REMOTE_DATASET_WORKSPACE_REQUIRED"}]),P={require_https:"require_https",no_query_or_hash:"invalid_url",disallow_fmerest_for_webhook:"disallow_fmerest_for_webhook",invalid_url:"invalid_url"},k=(Object.freeze(["fmeServerUrl","fmeServerToken","repository"]),Object.freeze(["status","statusCode","httpStatus"])),D="_",U=(Object.freeze(new Set(["MAXX","MINX","MAXY","MINY","AreaOfInterest","AREA","ExtentGeoJson","tm_ttc","tm_ttl","tm_tag"])),Object.freeze(new Set([n.QL.NOVALUE])),Object.freeze(new Set([n.QL.DB_CONNECTION,n.QL.WEB_CONNECTION,n.QL.ATTRIBUTE_NAME,n.QL.ATTRIBUTE_LIST,n.QL.COORDSYS,n.QL.REPROJECTION_FILE])),Object.freeze(new Set([n.QL.LISTBOX,n.QL.LOOKUP_LISTBOX,n.QL.ATTRIBUTE_LIST])),Object.freeze({[n.QL.FLOAT]:n.Vw.NUMERIC_INPUT,[n.QL.INTEGER]:n.Vw.NUMBER,[n.QL.TEXT_EDIT]:n.Vw.TEXTAREA,[n.QL.PASSWORD]:n.Vw.PASSWORD,[n.QL.BOOLEAN]:n.Vw.SWITCH,[n.QL.CHECKBOX]:n.Vw.SWITCH,[n.QL.CHOICE]:n.Vw.RADIO,[n.QL.FILENAME]:n.Vw.FILE,[n.QL.FILENAME_MUSTEXIST]:n.Vw.FILE,[n.QL.DIRNAME]:n.Vw.FILE,[n.QL.DIRNAME_MUSTEXIST]:n.Vw.FILE,[n.QL.DIRNAME_SRC]:n.Vw.FILE,[n.QL.DATE_TIME]:n.Vw.DATE_TIME,[n.QL.DATETIME]:n.Vw.DATE_TIME,[n.QL.URL]:n.Vw.URL,[n.QL.LOOKUP_URL]:n.Vw.URL,[n.QL.LOOKUP_FILE]:n.Vw.FILE,[n.QL.DATE]:n.Vw.DATE,[n.QL.TIME]:n.Vw.TIME,[n.QL.MONTH]:n.Vw.MONTH,[n.QL.WEEK]:n.Vw.WEEK,[n.QL.COLOR]:n.Vw.COLOR,[n.QL.COLOR_PICK]:n.Vw.COLOR,[n.QL.RANGE_SLIDER]:n.Vw.SLIDER,[n.QL.MESSAGE]:n.Vw.MESSAGE,[n.QL.TEXT_OR_FILE]:n.Vw.TEXT_OR_FILE,[n.QL.REPROJECTION_FILE]:n.Vw.REPROJECTION_FILE,[n.QL.COORDSYS]:n.Vw.COORDSYS,[n.QL.ATTRIBUTE_NAME]:n.Vw.ATTRIBUTE_NAME,[n.QL.ATTRIBUTE_LIST]:n.Vw.ATTRIBUTE_LIST,[n.QL.DB_CONNECTION]:n.Vw.DB_CONNECTION,[n.QL.WEB_CONNECTION]:n.Vw.WEB_CONNECTION,[n.QL.SCRIPTED]:n.Vw.SCRIPTED}),Object.freeze(["esriRequest","esriConfig","projection","webMercatorUtils","SpatialReference"]));Object.freeze({DEFAULT_MAX_SIZE_MB:150,ONE_MB_IN_BYTES:1048576,GEOMETRY_PREVIEW_MAX_LENGTH:1500,DEFAULT_ALLOWED_EXTENSIONS:Object.freeze([".zip",".kmz",".json",".geojson",".gml"]),DEFAULT_ALLOWED_MIME_TYPES:Object.freeze(new Set(["application/zip","application/x-zip-compressed","application/vnd.google-earth.kmz","application/json","application/geo+json","application/gml+xml","text/plain",""].map((e=>e.toLowerCase())))),FILE_DISPLAY_KEYS:Object.freeze(["text","path","location","value","dataset","defaultValue","fileName","filename","file_path","file","uri","url","name"])}),Object.freeze(["failed to fetch","networkerror","net::","dns","enotfound","econnrefused","timeout","name or service not known","err_name_not_resolved","unable to load","/sharing/proxy","proxy"]),Object.freeze(["unable to load","/sharing/proxy","proxy"])},3128:(e,t,r)=>{"use strict";r(9244),r(1888)},3250:(e,t,r)=>{"use strict";r.d(t,{vH:()=>o.vH,Ve:()=>o.Ve,nu:()=>o.nu,qc:()=>o.qc,hL:()=>n.hL,BY:()=>o.BY,Xw:()=>o.Xw,jF:()=>o.jF,_$:()=>o._$,MU:()=>n.MU,By:()=>n.By,EV:()=>o.EV,vA:()=>o.vA,Gm:()=>o.Gm,KF:()=>o.KF,ZW:()=>n.ZW,VQ:()=>i,In:()=>o.In,ym:()=>n.ym,m2:()=>o.m2,a9:()=>o.a9,wF:()=>o.wF,FS:()=>o.FS,d:()=>o.d,QL:()=>n.QL,zo:()=>o.zo,bD:()=>o.bD,KG:()=>o.KG,T5:()=>o.T5,_A:()=>o._A,nE:()=>n.nE,GR:()=>o.GR,Bd:()=>o.Bd,PS:()=>o.PS});var n=r(6055),o=r(3096);class i extends Error{constructor(e,t,r,o,i=n.MU.ERROR){super(e),this.name="FmeFlowApiError",this.code=t,this.httpStatus=r,this.status=r,this.retryable=Boolean(o),this.isRetryable=this.retryable,this.severity=i}}r(3128)},3740:(e,t,r)=>{r.p=window.jimuConfig.baseUrl},3890:(e,t,r)=>{"use strict";r.d(t,{$N:()=>p,$d:()=>g,B9:()=>m,CL:()=>i,H9:()=>a,Ko:()=>v,ZF:()=>s,dC:()=>f,e6:()=>O,hd:()=>y,id:()=>E,pZ:()=>c,rB:()=>u});var n=r(3250),o=r(9063);const i=e=>{const t=(0,o.toTrimmedStringOrEmpty)(e);if(!t||t.length>n.m2)return!1;let r;try{r=new URL(t)}catch(e){return!1}if(r.username||r.password||"https:"!==r.protocol)return!1;const i=r.hostname.toLowerCase();if(!i||(e=>{const t=e.toLowerCase();return n.KF.some((e=>t===e||t.endsWith(e)))})(i))return!1;const s=(e=>{const t=e.split(".");if(4!==t.length)return null;const r=t.map((e=>{if(!/^\d+$/.test(e))return NaN;const t=Number(e);return t>=0&&t<=255?t:NaN}));return r.every(Number.isInteger)?r:null})(i);if(s&&(a=s,n.FS.some((({start:e,end:t})=>{for(let r=0;r<4;r++)if(a[r]<e[r]||a[r]>t[r])return!1;return!0}))))return!1;var a;if(i.includes(":")&&(e=>{const t=e.toLowerCase();return"::1"===t||t.startsWith("::1:")||"0:0:0:0:0:0:0:1"===t||t.startsWith("fc")||t.startsWith("fd")||/^fe[89ab][0-9a-f]/i.test(t)})(i))return!1;if(/\.[^/]+$/.test(r.pathname)){const e=`${r.pathname}${r.search}`;if(!n.vH.test(e))return!1}return!0},s=(e,t)=>{if(!e||!(null==t?void 0:t.length))return;return t.every((e=>(e=>{if((0,o.isFiniteNumber)(e))return!0;if("string"!=typeof e)return!1;const t=e.trim();if(!t)return!1;const r=Number(t);return Number.isFinite(r)&&String(r)===t})(e.value)))?"number":void 0},a=e=>{if(Array.isArray(e))return e.map((e=>"string"==typeof e?e:String(e)));if("string"==typeof e)try{const t=JSON.parse(e);return Array.isArray(t)?t.map(String):e?[e]:[]}catch(t){return e?[e]:[]}return[]},l=e=>Boolean(null==e?void 0:e.allowRemoteDataset),u=(e,t)=>{if(!l(t))return!1;if(!(null==t?void 0:t.allowRemoteUrlDataset))return!1;const r=(0,o.toTrimmedString)(e);return!!r&&i(r)},c=(e,t)=>!!l(e)&&(!!t&&("undefined"!=typeof Blob&&t instanceof Blob||(0,o.isFileObject)(t))),d=e=>e.toLowerCase().includes(n.Gm);function f(e,t){const r=(0,o.toTrimmedStringOrEmpty)(e);if(!r)return{ok:!1,reason:"invalid_url"};try{const e=new URL(r),n=e.protocol.toLowerCase();if("http:"!==n&&"https:"!==n)return{ok:!1,reason:"invalid_url"};if((null==t?void 0:t.requireHttps)&&"https:"!==n)return{ok:!1,reason:"require_https"};if(e.username||e.password)return{ok:!1,reason:"invalid_url"};if(e.search||e.hash)return{ok:!1,reason:"no_query_or_hash"};if((null==t?void 0:t.disallowRestForWebhook)&&/\/fmerest(?:\/|$)/i.test(e.pathname))return{ok:!1,reason:"disallow_fmerest_for_webhook"};if(d(e.pathname))return{ok:!1,reason:"invalid_url"};if(e.hostname.endsWith("."))return{ok:!1,reason:"invalid_url"};if(null==t?void 0:t.strict){const t=e.hostname||"";if(!t.includes(".")||t.length<4)return{ok:!1,reason:"invalid_url"}}return{ok:!0}}catch(e){return{ok:!1,reason:"invalid_url"}}}const p=e=>e&&n.zo[e]||"invalid_url",h=/^no[-_]?reply@/i,m=e=>!("string"!=typeof e||!e)&&(!h.test(e)&&n.Xw.test(e)),y=(e,t={})=>{const r=(0,o.toTrimmedStringOrEmpty)(e);return r?m(r)?{ok:!0}:{ok:!1,errorKey:"invalidEmail"}:t.required?{ok:!1,errorKey:"emailRequired"}:{ok:!0}},E=e=>{const t=(0,o.toTrimmedString)(e);return t&&m(t)?t:void 0},v=e=>{if(!e||"object"!=typeof e)return;const t=e;for(const e of n.bD){const r=t[e];if((0,n.Bd)(r))return r}const r=t.details;if(r&&"object"==typeof r){const e=r.httpStatus||r.status;if((0,n.Bd)(e))return e}const i=(0,o.extractErrorMessage)(e);if("string"==typeof i){const e=/status:\s*(\d{3})/i.exec(i);if(e){const t=parseInt(e[1],10);if((0,n.Bd)(t))return t}}},g=e=>{if(e&&"object"==typeof e){const t=e;if("boolean"==typeof t.isRetryable)return t.isRetryable}const t=v(e);return(0,n.PS)(t)},O=e=>{if(!e.serverUrl||!e.token||!e.repository)throw new Error("Missing required configuration")}},4658:(e,t,r)=>{"use strict";function n(){let e,t;const r=new Promise(((r,n)=>{e=r,t=n}));function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch((()=>{})),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}r.d(t,{T:()=>n})},4880:(e,t,r)=>{"use strict";r.d(t,{Cp:()=>m,EN:()=>h,Eh:()=>c,F$:()=>p,MK:()=>d,S$:()=>o,ZM:()=>_,ZZ:()=>A,Zw:()=>s,d2:()=>u,gn:()=>a,hT:()=>S,j3:()=>l,lQ:()=>i,nJ:()=>f,pl:()=>T,y9:()=>R,yy:()=>b});var n=r(2775),o="undefined"==typeof window||"Deno"in globalThis;function i(){}function s(e,t){return"function"==typeof e?e(t):e}function a(e){return"number"==typeof e&&e>=0&&e!==1/0}function l(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t){return"function"==typeof e?e(t):e}function c(e,t){return"function"==typeof e?e(t):e}function d(e,t){const{type:r="all",exact:n,fetchStatus:o,predicate:i,queryKey:s,stale:a}=e;if(s)if(n){if(t.queryHash!==p(s,t.options))return!1}else if(!m(t.queryKey,s))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof a||t.isStale()===a)&&((!o||o===t.state.fetchStatus)&&!(i&&!i(t)))}function f(e,t){const{exact:r,status:n,predicate:o,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(h(t.options.mutationKey)!==h(i))return!1}else if(!m(t.options.mutationKey,i))return!1}return(!n||t.state.status===n)&&!(o&&!o(t))}function p(e,t){return(t?.queryKeyHashFn||h)(e)}function h(e){return JSON.stringify(e,((e,t)=>g(t)?Object.keys(t).sort().reduce(((e,r)=>(e[r]=t[r],e)),{}):t))}function m(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every((r=>m(e[r],t[r]))))}var y=Object.prototype.hasOwnProperty;function E(e,t){if(e===t)return e;const r=v(e)&&v(t);if(!(r||g(e)&&g(t)))return t;const n=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),i=o.length,s=r?new Array(i):{};let a=0;for(let l=0;l<i;l++){const i=r?l:o[l],u=e[i],c=t[i];if(u===c){s[i]=u,(r?l<n:y.call(e,i))&&a++;continue}if(null===u||null===c||"object"!=typeof u||"object"!=typeof c){s[i]=c;continue}const d=E(u,c);s[i]=d,d===u&&a++}return n===i&&a===n?e:s}function v(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function g(e){if(!O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!O(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e){return new Promise((t=>{n.zs.setTimeout(t,e)}))}function T(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?E(e,t):t}function R(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function A(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var S=Symbol();function _(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==S?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}},4986:(e,t,r)=>{"use strict";r.d(t,{$r:()=>g,Bf:()=>f,Bv:()=>a,Cq:()=>T,Dr:()=>m,E:()=>N,E$:()=>h,Gt:()=>C,He:()=>M,IT:()=>_,Im:()=>i,Me:()=>y,N:()=>v,N7:()=>w,NZ:()=>E,Nn:()=>u,P6:()=>l,Qd:()=>d,W1:()=>A,Xl:()=>b,YH:()=>s,fe:()=>O,gf:()=>p,hU:()=>R,lx:()=>L,sL:()=>I,vq:()=>S,wK:()=>c});var n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const o=(e,t)=>{if("string"==typeof e){const r=e.trim();return r||(null==t?void 0:t.allowEmpty)?r:(null==t?void 0:t.nullable)?null:void 0}return(null==t?void 0:t.allowNumeric)&&"number"==typeof e&&Number.isFinite(e)?String(e):(null==t?void 0:t.nullable)?null:void 0},i=e=>null==e||""===e||(Array.isArray(e)?0===e.length:"string"==typeof e&&!s(e)),s=e=>"string"==typeof e&&e.trim().length>0,a=e=>{const t=u(e);return null!=t?t:""},l=(e,t="")=>{const r=u(e);return r&&r.length>0?r:t},u=e=>o(e,{allowNumeric:!1}),c=e=>o(e,{allowNumeric:!0}),d=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),f=e=>"number"==typeof e&&Number.isFinite(e),p=(e,t)=>{if(!f(e))return!1;const{min:r,max:n,allowZero:o=!0,allowNegative:i=!0}=null!=t?t:{};return!(!o&&0===e)&&(!(!i&&e<0)&&(!(void 0!==r&&e<r)&&!(void 0!==n&&e>n)))},h=e=>e instanceof File,m=e=>{if("boolean"==typeof e)return e;if("number"==typeof e){if(!Number.isFinite(e))return;return 0!==e}const t=o(e,{allowNumeric:!1});if(!t)return;const r=t.toLowerCase();return!!["true","1","yes","y","on"].includes(r)||!["false","0","no","n","off"].includes(r)&&void 0},y=e=>{if(f(e))return e;const t=o(e,{allowNumeric:!1});if(!t)return;const r=Number(t);return Number.isFinite(r)?r:void 0},E=(e,t,r)=>p(e,r)?e:t,v=(e,t,r)=>Number.isFinite(e)?e<t?t:e>r?r:e:t,g=e=>Array.isArray(e)?e:null==e?[]:[e],O=(e,t,r,n)=>{if(!e)return n;for(const n of t){const t=r(e[n]);if(void 0!==t)return t}return n},b=(e,t)=>O(e,t,c),T=(e,t,r=!1)=>{var n;return null!==(n=O(e,t,m,r))&&void 0!==n?n:r},R=(e,t)=>O(e,t,y),A=e=>{const t={};for(const r of e)if(d(r))for(const[e,n]of Object.entries(r))null==n||e in t||(t[e]=n);return t},S=e=>{if(Array.isArray(e))return e;if(d(e))for(const t of["data","items","options"]){const r=e[t];if(Array.isArray(r))return r}},_=e=>{if(!d(e))return;const t=Object.entries(e).filter((([,e])=>void 0!==e));return t.length?Object.fromEntries(t):void 0},I=e=>f(e)||"string"==typeof e?e:"boolean"==typeof e?e?"true":"false":JSON.stringify(null!=e?e:null),w=e=>{if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return String(e);if(void 0===e)return"undefined";if(null===e)return"null";if("object"==typeof e)try{return JSON.stringify(e)}catch(t){return Object.prototype.toString.call(e)}return Object.prototype.toString.call(e)},N=(e,t)=>{var r;return(null!==(r=u(e))&&void 0!==r?r:"").replace(/[^A-Za-z0-9_\-]/g,"").trim()||t},M=(e,t)=>null==e?t?[]:"":t?Array.isArray(e)?e:[e]:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:"",L=e=>{if(!e)return null;const t="number"==typeof e.timestampMs?e.timestampMs:e.timestamp instanceof Date?e.timestamp.getTime():0,{retry:r,timestamp:o}=e,i=n(e,["retry","timestamp"]);return Object.assign(Object.assign({},i),{timestampMs:t,kind:"serializable"})},C=(e,t)=>{if(!e||("string"==typeof(r=e)||"function"!=typeof(null==r?void 0:r[Symbol.iterator])))return[];var r;const n=[];let o=0;for(const r of e){const e=t(r,o++);null!=e&&n.push(e)}return n}},5880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{createFmeSelectors:()=>I,default:()=>M,fmeActions:()=>y,initialFmeState:()=>E,selectFmeSlice:()=>_});var n=r(7390),o=r.n(n);function i(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}var s=e=>Array.isArray(e)?e:[e];function a(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const r=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var l="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function u(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let o,i=0;function s(){let t=r;const{length:s}=arguments;for(let e=0,r=s;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t={s:0,v:void 0,o:null,p:null},e.set(r,t)):t=n}}const a=t;let u;if(1===t.s)u=t.v;else if(u=e.apply(null,arguments),i++,n){const e=o?.deref?.()??o;null!=e&&n(e,u)&&(u=e,0!==i&&i--);o="object"==typeof u&&null!==u||"function"==typeof u?new l(u):u}return a.s=1,a.v=u,u}return s.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},s.resetResultsCount()},s.resultsCount=()=>i,s.resetResultsCount=()=>{i=0},s}function c(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,o=0,l={},c=e.pop();"object"==typeof c&&(l=c,c=e.pop()),i(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const d={...r,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:h=u,argsMemoizeOptions:m=[],devModeChecks:y={}}=d,E=s(p),v=s(m),g=a(e),O=f((function(){return n++,c.apply(null,arguments)}),...E);const b=h((function(){o++;const e=function(e,t){const r=[],{length:n}=e;for(let o=0;o<n;o++)r.push(e[o].apply(null,t));return r}(g,arguments);return t=O.apply(null,e),t}),...v);return Object.assign(b,{resultFunc:c,memoizedResultFunc:O,dependencies:g,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:f,argsMemoize:h})};return Object.assign(n,{withTypes:()=>n}),n}var d,f=c(u),p=Object.assign(((e,t=f)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e);return t(r.map((t=>e[t])),((...e)=>e.reduce(((e,t,n)=>(e[r[n]]=t,e)),{})))}),{withTypes:()=>p}),h=r(3250),m=r(9063);const y={setViewMode:(e,t)=>({type:h.ZW.SET_VIEW_MODE,viewMode:e,widgetId:t}),resetState:e=>({type:h.ZW.RESET_STATE,widgetId:e}),setGeometry:(e,t,r)=>({type:h.ZW.SET_GEOMETRY,geometryJson:b(e),drawnArea:t,widgetId:r}),setDrawingTool:(e,t)=>({type:h.ZW.SET_DRAWING_TOOL,drawingTool:e,widgetId:t}),completeDrawing:(e,t,r,n)=>({type:h.ZW.COMPLETE_DRAWING,geometryJson:b(e),drawnArea:t,nextViewMode:r,widgetId:n}),setOrderResult:(e,t)=>({type:h.ZW.SET_ORDER_RESULT,orderResult:e,widgetId:t}),setWorkspaceItems:(e,t)=>({type:h.ZW.SET_WORKSPACE_ITEMS,workspaceItems:e,widgetId:t}),setWorkspaceParameters:(e,t,r)=>({type:h.ZW.SET_WORKSPACE_PARAMETERS,workspaceParameters:e,workspaceName:t,widgetId:r}),setSelectedWorkspace:(e,t)=>({type:h.ZW.SET_SELECTED_WORKSPACE,workspaceName:e,widgetId:t}),setWorkspaceItem:(e,t)=>({type:h.ZW.SET_WORKSPACE_ITEM,workspaceItem:e,widgetId:t}),setError:(e,t,r)=>({type:h.ZW.SET_ERROR,scope:e,error:t,widgetId:r}),setErrors:(e,t)=>{const r={};for(const[t,n]of Object.entries(e))void 0!==n&&(r[t]=n);return{type:h.ZW.SET_ERRORS,errors:r,widgetId:t}},clearError:(e,t)=>({type:h.ZW.CLEAR_ERROR,scope:e,widgetId:t}),clearWorkspaceState:e=>({type:h.ZW.CLEAR_WORKSPACE_STATE,widgetId:e}),resetToDrawing:e=>({type:h.ZW.RESET_TO_DRAWING,widgetId:e}),completeStartup:e=>({type:h.ZW.COMPLETE_STARTUP,widgetId:e}),setLoadingFlag:(e,t,r)=>({type:h.ZW.SET_LOADING_FLAG,flag:e,value:t,widgetId:r}),applyWorkspaceData:(e,t)=>({type:h.ZW.APPLY_WORKSPACE_DATA,workspaceName:e.workspaceName,workspaceParameters:e.parameters,workspaceItem:e.item,widgetId:t}),removeWidgetState:e=>({type:h.ZW.REMOVE_WIDGET_STATE,widgetId:e})},E={viewMode:h.nE.STARTUP_VALIDATION,drawingTool:h.hL.POLYGON,geometryJson:null,drawnArea:0,orderResult:null,workspaceItems:[],selectedWorkspace:null,workspaceParameters:[],workspaceItem:null,loading:{workspaces:!1,parameters:!1,modules:!1,submission:!1},errors:{}},v=null!==(d=o().default)&&void 0!==d?d:o(),g=()=>v(E),O=e=>{var t;return null!==(t=(0,m.toTrimmedString)(e))&&void 0!==t?t:null},b=e=>{if(!e)return null;const t=null==e?void 0:e.toJSON;if("function"!=typeof t)return null;try{return t.call(e)}catch(e){return null}};function T(e,t){return e.workspaces===t.workspaces&&e.parameters===t.parameters&&e.modules===t.modules&&e.submission===t.submission}const R={[h.MU.ERROR]:3,[h.MU.WARNING]:2,[h.MU.INFO]:1},A={general:0,export:1,import:2};function S(e,t){var r;if(!t||0===Object.keys(t).length)return e;const n=null!==(r=e.errors)&&void 0!==r?r:{},o={};for(const[e,r]of Object.entries(t)){if(!(e in A))continue;n[e]!==r&&(o[e]=r)}if(0===Object.keys(o).length)return e;const i=Object.entries(Object.assign(Object.assign({},n),o)).reduce(((e,[t,r])=>(null!==r&&(e[t]=r),e)),{});return e.set("errors",i)}const _=(e,t)=>{var r,n;const o=null===(n=null===(r=null==e?void 0:e["fme-state"])||void 0===r?void 0:r.byId)||void 0===n?void 0:n[t];return null!=o?o:null},I=e=>{const t=t=>_(t,e),r=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.geometryJson)&&void 0!==n?n:null},n=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.drawnArea)&&void 0!==n?n:E.drawnArea},o=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.selectedWorkspace)&&void 0!==n?n:E.selectedWorkspace},i=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceParameters)&&void 0!==n?n:E.workspaceParameters},s=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceItem)&&void 0!==n?n:E.workspaceItem},a=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.errors)&&void 0!==n?n:E.errors},l=e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.loading)&&void 0!==n?n:E.loading},u=f([r,n],((e,t)=>Boolean(e)&&t>0)),c=f([a],(e=>(e=>{let t=null,r=-1,n=Number.POSITIVE_INFINITY;for(const[o,i]of Object.entries(e)){if(!i)continue;if(!(i.severity in R))continue;if(!(o in A))continue;const e=R[i.severity],s=A[o];(e>r||e===r&&s<n)&&(t={scope:o,details:i},r=e,n=s)}return t})(e))),d=f([r,n,o,i,s,a],((e,t,r,n,o,i)=>{var s;const a=Boolean(e)&&Number.isFinite(t)&&t>0,l=Boolean(O(r)),u=n.length>0||null!==o,c=null==i?void 0:i.general,d=!!c&&(null!==(s=R[c.severity])&&void 0!==s?s:0)>=R[h.MU.ERROR];return a&&l&&u&&!d})),p=f([l],(e=>e.workspaces||e.parameters||e.modules||e.submission));return{selectSlice:t,selectViewMode:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.viewMode)&&void 0!==n?n:E.viewMode},selectDrawingTool:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.drawingTool)&&void 0!==n?n:E.drawingTool},selectGeometryJson:r,selectDrawnArea:n,selectWorkspaceItems:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.workspaceItems)&&void 0!==n?n:E.workspaceItems},selectWorkspaceParameters:i,selectWorkspaceItem:s,selectSelectedWorkspace:o,selectOrderResult:e=>{var r,n;return null!==(n=null===(r=t(e))||void 0===r?void 0:r.orderResult)&&void 0!==n?n:E.orderResult},selectErrors:a,selectErrorByScope:e=>r=>{var n,o,i;return null!==(i=null===(o=null===(n=t(r))||void 0===n?void 0:n.errors)||void 0===o?void 0:o[e])&&void 0!==i?i:null},selectLoading:l,selectLoadingFlag:e=>r=>{var n,o,i;return null!==(i=null===(o=null===(n=t(r))||void 0===n?void 0:n.loading)||void 0===o?void 0:o[e])&&void 0!==i?i:E.loading[e]},selectHasValidAoi:u,selectPrimaryError:c,selectCanExport:d,selectIsBusy:p}},w=v({byId:{}}),N=(e=w,t)=>{if(!(e=>{if(!e||"object"!=typeof e)return!1;const t=e;return"string"==typeof t.type&&!!h.EV.includes(t.type)&&"string"==typeof t.widgetId})(t))return e;if((null==t?void 0:t.type)===h.ZW.REMOVE_WIDGET_STATE&&(null==t?void 0:t.widgetId)){const r=Object.assign({},(null==e?void 0:e.byId)||{});return t.widgetId in r?(delete r[t.widgetId],v({byId:r})):e}const r=null==t?void 0:t.widgetId;if(!r)return e;const n=((e,t)=>{var r;const n=null===(r=e.byId)||void 0===r?void 0:r[t];let o=null!=n?n:g();return o.loading||(o=o.set("loading",{workspaces:!1,parameters:!1,modules:!1,submission:!1})),o.errors||(o=o.set("errors",{})),o})(e,r),o=((e,t)=>{var r,n,o,i;let s=e;switch(t.type){case h.ZW.SET_VIEW_MODE:{const r=t;if(e.viewMode===r.viewMode)return e;s=e.set("viewMode",r.viewMode);break}case h.ZW.RESET_STATE:s=g();break;case h.ZW.SET_GEOMETRY:{const n=t,o=null!==(r=n.drawnArea)&&void 0!==r?r:0;if(e.geometryJson===n.geometryJson&&e.drawnArea===o)return e;s=e.set("geometryJson",n.geometryJson).set("drawnArea",o);break}case h.ZW.COMPLETE_DRAWING:{const r=t,i=null!==(n=r.drawnArea)&&void 0!==n?n:0,a=null!==(o=r.nextViewMode)&&void 0!==o?o:e.viewMode;s=e,(e.geometryJson!==r.geometryJson||e.drawnArea!==i)&&(s=s.set("geometryJson",r.geometryJson).set("drawnArea",i)),a!==e.viewMode&&(s=s.set("viewMode",a));break}case h.ZW.SET_DRAWING_TOOL:{const r=t;if(e.drawingTool===r.drawingTool)return e;s=e.set("drawingTool",r.drawingTool);break}case h.ZW.SET_ORDER_RESULT:{const r=t;return e.orderResult===r.orderResult?e:e.set("orderResult",r.orderResult)}case h.ZW.SET_WORKSPACE_ITEMS:{const r=t;return e.workspaceItems===r.workspaceItems?e:e.set("workspaceItems",r.workspaceItems)}case h.ZW.SET_WORKSPACE_PARAMETERS:{const r=t,n=O(r.workspaceName),o=O(e.selectedWorkspace);if(!n)return e.workspaceParameters===r.workspaceParameters?e:e.set("workspaceParameters",r.workspaceParameters);if(!o)return e.set("selectedWorkspace",n).set("workspaceParameters",r.workspaceParameters).set("orderResult",null);if(n!==o)return e;if(e.workspaceParameters===r.workspaceParameters)return e;let i=e.set("workspaceParameters",r.workspaceParameters);return null!==e.orderResult&&(i=i.set("orderResult",null)),i}case h.ZW.SET_SELECTED_WORKSPACE:{const r=O(t.workspaceName);if(O(e.selectedWorkspace)===r)return e;let n=e.set("selectedWorkspace",r);return e.workspaceParameters.length&&(n=n.set("workspaceParameters",[])),null!==e.workspaceItem&&(n=n.set("workspaceItem",null)),null!==e.orderResult&&(n=n.set("orderResult",null)),n=S(n,{import:null,export:null}),n}case h.ZW.SET_WORKSPACE_ITEM:{const r=t,n=O(e.selectedWorkspace),o=O(null===(i=r.workspaceItem)||void 0===i?void 0:i.name);return r.workspaceItem&&n&&o&&o!==n||e.workspaceItem===r.workspaceItem?e:e.set("workspaceItem",r.workspaceItem)}case h.ZW.CLEAR_WORKSPACE_STATE:{const t={workspaces:!1,parameters:!1,modules:!1,submission:!1};let r=e;return e.workspaceItems.length&&(r=r.set("workspaceItems",[])),null!==e.selectedWorkspace&&(r=r.set("selectedWorkspace",null)),e.workspaceParameters.length&&(r=r.set("workspaceParameters",[])),null!==e.workspaceItem&&(r=r.set("workspaceItem",null)),null!==e.orderResult&&(r=r.set("orderResult",null)),T(e.loading,t)||(r=r.set("loading",t)),r=S(r,{general:null,import:null,export:null}),r}case h.ZW.SET_ERROR:{const r=t;return S(e,{[r.scope]:r.error})}case h.ZW.SET_ERRORS:return S(e,t.errors);case h.ZW.CLEAR_ERROR:{const r=t;return"all"===r.scope?S(e,{general:null,import:null,export:null}):S(e,{[r.scope]:null})}case h.ZW.RESET_TO_DRAWING:{const t={workspaces:!1,parameters:!1,modules:!1,submission:!1};let r=e;return null===e.geometryJson&&0===e.drawnArea||(r=r.set("geometryJson",null).set("drawnArea",0)),null!==e.selectedWorkspace&&(r=r.set("selectedWorkspace",null)),e.workspaceParameters.length&&(r=r.set("workspaceParameters",[])),null!==e.workspaceItem&&(r=r.set("workspaceItem",null)),null!==e.orderResult&&(r=r.set("orderResult",null)),T(e.loading,t)||(r=r.set("loading",t)),r=S(r,{general:null,import:null,export:null}),r.viewMode!==h.nE.DRAWING&&(r=r.set("viewMode",h.nE.DRAWING)),r}case h.ZW.SET_LOADING_FLAG:{const r=t,n=e.loading[r.flag],o=Boolean(r.value);return n===o?e:e.set("loading",Object.assign(Object.assign({},e.loading),{[r.flag]:o}))}case h.ZW.APPLY_WORKSPACE_DATA:{const r=t,n=O(r.workspaceName);if(!n)return e;let o=e;return e.selectedWorkspace!==n&&(o=o.set("selectedWorkspace",n)),e.workspaceParameters!==r.workspaceParameters&&(o=o.set("workspaceParameters",r.workspaceParameters)),e.workspaceItem!==r.workspaceItem&&(o=o.set("workspaceItem",r.workspaceItem)),null!==e.orderResult&&(o=o.set("orderResult",null)),o=S(o,{import:null,export:null}),o}case h.ZW.COMPLETE_STARTUP:s=e.set("viewMode",h.nE.INITIAL);break;case h.ZW.REMOVE_WIDGET_STATE:return e}return s})(n,t);return o===n?e:((e,t,r)=>{const n=Object.assign({},e.byId||{});return n[t]=r,v({byId:n})})(e,r,o)};class M{constructor(){this.id="fme-export_store"}getActions(){return[...h.EV]}getInitLocalState(){return{byId:{}}}getReducer(){return N}getStoreKey(){return"fme-state"}}},6035:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(6500),o=r(4880),i=new class extends n.Q{#m=!0;#y;#E;constructor(){super(),this.#E=e=>{if(!o.S$&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#y||this.setEventListener(this.#E)}onUnsubscribe(){this.hasListeners()||(this.#y?.(),this.#y=void 0)}setEventListener(e){this.#E=e,this.#y?.(),this.#y=e(this.setOnline.bind(this))}setOnline(e){this.#m!==e&&(this.#m=e,this.listeners.forEach((t=>{t(e)})))}isOnline(){return this.#m}}},6055:(e,t,r)=>{"use strict";var n,o,i,s,a,l,u,c,d;r.d(t,{By:()=>a,MU:()=>s,QL:()=>u,Vw:()=>i,ZW:()=>d,hL:()=>o,nE:()=>n,ym:()=>l}),function(e){e.STARTUP_VALIDATION="startup-validation",e.INITIAL="initial",e.DRAWING="drawing",e.WORKSPACE_SELECTION="workspace-selection",e.EXPORT_FORM="export-form",e.EXPORT_OPTIONS="export-options",e.ORDER_RESULT="order-result"}(n||(n={})),function(e){e.POLYGON="polygon",e.RECTANGLE="rectangle"}(o||(o={})),function(e){e.TEXT="text",e.NUMBER="number",e.TEXTAREA="textarea",e.SELECT="select",e.MULTI_SELECT="multi-select",e.CHECKBOX="checkbox",e.PASSWORD="password",e.FILE="file",e.DATE_TIME="date-time",e.URL="url",e.SWITCH="switch",e.RADIO="radio",e.SLIDER="slider",e.NUMERIC_INPUT="numeric-input",e.TAG_INPUT="tag-input",e.COLOR="color",e.DATE="date",e.TIME="time",e.EMAIL="email",e.PHONE="phone",e.SEARCH="search",e.MESSAGE="message",e.TABLE="table",e.MONTH="month",e.WEEK="week",e.COORDSYS="coord-sys",e.ATTRIBUTE_NAME="attribute-name",e.ATTRIBUTE_LIST="attribute-list",e.DB_CONNECTION="db-connection",e.WEB_CONNECTION="web-connection",e.TEXT_OR_FILE="text-or-file",e.REPROJECTION_FILE="reprojection-file",e.SCRIPTED="scripted",e.GEOMETRY="geometry",e.HIDDEN="hidden"}(i||(i={})),function(e){e.INFO="info",e.WARNING="warning",e.ERROR="error"}(s||(s={})),function(e){e.VALIDATION="validation",e.CONFIG="config",e.NETWORK="network",e.MODULE="module",e.GEOMETRY="geometry"}(a||(a={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(l||(l={})),function(e){e.TEXT="TEXT",e.INTEGER="INTEGER",e.FLOAT="FLOAT",e.BOOLEAN="BOOLEAN",e.CHECKBOX="CHECKBOX",e.CHOICE="CHOICE",e.LISTBOX="LISTBOX",e.LOOKUP_LISTBOX="LOOKUP_LISTBOX",e.LOOKUP_CHOICE="LOOKUP_CHOICE",e.TEXT_OR_FILE="TEXT_OR_FILE",e.TEXT_EDIT="TEXT_EDIT",e.PASSWORD="PASSWORD",e.FILENAME="FILENAME",e.FILENAME_MUSTEXIST="FILENAME_MUSTEXIST",e.DIRNAME="DIRNAME",e.DIRNAME_MUSTEXIST="DIRNAME_MUSTEXIST",e.DIRNAME_SRC="DIRNAME_SRC",e.COORDSYS="COORDSYS",e.STRING="STRING",e.URL="URL",e.LOOKUP_URL="LOOKUP_URL",e.LOOKUP_FILE="LOOKUP_FILE",e.DATE_TIME="DATE_TIME",e.DATETIME="DATETIME",e.DATE="DATE",e.TIME="TIME",e.MONTH="MONTH",e.WEEK="WEEK",e.COLOR="COLOR",e.COLOR_PICK="COLOR_PICK",e.RANGE_SLIDER="RANGE_SLIDER",e.GEOMETRY="GEOMETRY",e.MESSAGE="MESSAGE",e.ATTRIBUTE_NAME="ATTRIBUTE_NAME",e.ATTRIBUTE_LIST="ATTRIBUTE_LIST",e.DB_CONNECTION="DB_CONNECTION",e.WEB_CONNECTION="WEB_CONNECTION",e.REPROJECTION_FILE="REPROJECTION_FILE",e.SCRIPTED="SCRIPTED",e.NOVALUE="NOVALUE"}(u||(u={})),function(e){e.QUEUED="QUEUED",e.PULLED="PULLED",e.RUNNING="RUNNING",e.SUCCESS="SUCCESS",e.FME_FAILURE="FME_FAILURE",e.JOB_FAILURE="JOB_FAILURE",e.ABORTED="ABORTED"}(c||(c={})),function(e){e.SET_VIEW_MODE="fme/SET_VIEW_MODE",e.RESET_STATE="fme/RESET_STATE",e.SET_GEOMETRY="fme/SET_GEOMETRY",e.SET_DRAWING_TOOL="fme/SET_DRAWING_TOOL",e.COMPLETE_DRAWING="fme/COMPLETE_DRAWING",e.SET_ORDER_RESULT="fme/SET_ORDER_RESULT",e.SET_WORKSPACE_ITEMS="fme/SET_WORKSPACE_ITEMS",e.SET_WORKSPACE_PARAMETERS="fme/SET_WORKSPACE_PARAMETERS",e.SET_SELECTED_WORKSPACE="fme/SET_SELECTED_WORKSPACE",e.SET_WORKSPACE_ITEM="fme/SET_WORKSPACE_ITEM",e.SET_ERROR="fme/SET_ERROR",e.SET_ERRORS="fme/SET_ERRORS",e.CLEAR_WORKSPACE_STATE="fme/CLEAR_WORKSPACE_STATE",e.CLEAR_ERROR="fme/CLEAR_ERROR",e.RESET_TO_DRAWING="fme/RESET_TO_DRAWING",e.COMPLETE_STARTUP="fme/COMPLETE_STARTUP",e.REMOVE_WIDGET_STATE="fme/REMOVE_WIDGET_STATE",e.SET_LOADING_FLAG="fme/SET_LOADING_FLAG",e.APPLY_WORKSPACE_DATA="fme/APPLY_WORKSPACE_DATA"}(d||(d={}))},6158:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});var n=r(6261),o=r(1692),i=r(8904),s=class extends o.k{#v;#g;#i;#O;constructor(e){super(),this.#v=e.client,this.mutationId=e.mutationId,this.#i=e.mutationCache,this.#g=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#g.includes(e)||(this.#g.push(e),this.clearGcTimeout(),this.#i.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#g=this.#g.filter((t=>t!==e)),this.scheduleGc(),this.#i.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#g.length||("pending"===this.state.status?this.scheduleGc():this.#i.remove(this))}continue(){return this.#O?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#b({type:"continue"})},r={client:this.#v,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#O=(0,i.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#b({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#b({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#i.canRun(this)});const n="pending"===this.state.status,o=!this.#O.canStart();try{if(n)t();else{this.#b({type:"pending",variables:e,isPaused:o}),await(this.#i.config.onMutate?.(e,this,r));const t=await(this.options.onMutate?.(e,r));t!==this.state.context&&this.#b({type:"pending",context:t,variables:e,isPaused:o})}const i=await this.#O.start();return await(this.#i.config.onSuccess?.(i,e,this.state.context,this,r)),await(this.options.onSuccess?.(i,e,this.state.context,r)),await(this.#i.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(i,null,e,this.state.context,r)),this.#b({type:"success",data:i}),i}catch(t){try{throw await(this.#i.config.onError?.(t,e,this.state.context,this,r)),await(this.options.onError?.(t,e,this.state.context,r)),await(this.#i.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(void 0,t,e,this.state.context,r)),t}finally{this.#b({type:"error",error:t})}}finally{this.#i.runNext(this)}}#b(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),n.jG.batch((()=>{this.#g.forEach((t=>{t.onMutationUpdate(e)})),this.#i.notify({mutation:this,type:"updated",action:e})}))}}},6261:(e,t,r)=>{"use strict";r.d(t,{jG:()=>o});var n=r(2775).Zq;var o=function(){let e=[],t=0,r=e=>{e()},o=e=>{e()},i=n;const s=n=>{t?e.push(n):i((()=>{r(n)}))};return{batch:n=>{let s;t++;try{s=n()}finally{t--,t||(()=>{const t=e;e=[],t.length&&i((()=>{o((()=>{t.forEach((e=>{r(e)}))}))}))})()}return s},batchCalls:e=>(...t)=>{s((()=>{e(...t)}))},schedule:s,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{o=e},setScheduler:e=>{i=e}}}()},6500:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});var n=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}},6920:(e,t,r)=>{"use strict";r.d(t,{AR:()=>v,B_:()=>l,Nh:()=>O,SB:()=>m,Td:()=>c,YD:()=>A,Yn:()=>g,Zs:()=>T,bE:()=>E,dd:()=>p,is:()=>R,sI:()=>f,sq:()=>d,uA:()=>a,wc:()=>y,x8:()=>b,yo:()=>h});var n=r(3250),o=r(4986),i=r(3890),s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const a=e=>(null==e?void 0:e.length)?new Set(e.map((e=>(0,o.sL)(e.value)))):null,l=(e,t)=>({enter:e("phEnter",{field:t}),select:e("phSelect",{field:t})}),u=Object.freeze({email:"phEmail",phone:"phPhone",search:"phSearch"}),c=(e,t,r,n)=>(null==e?void 0:e.placeholder)?e.placeholder:n?r(u[n]):t.enter,d=e=>{var t;const{__upload_file__:r,__remote_dataset_url__:n,opt_geturl:i}=e,a=s(e,["__upload_file__","__remote_dataset_url__","opt_geturl"]),l=(0,o.Nn)(i),u=Object.assign({},a);l&&(u.opt_geturl=l);return{sanitizedFormData:(e=>{const t={};for(const[r,n]of e)t[r]=y(n);return t})(Object.entries(u)),uploadFile:r instanceof File?r:null,remoteUrl:null!==(t=(0,o.Nn)(n))&&void 0!==t?t:""}},f=({finalParams:e,uploadedPath:t,parameters:r,explicitTarget:o})=>{if(!t)return;if(o)return void(e[o]=t);const i=(e=>{if(e)for(const t of e){if(!t)continue;const e=String(t.type);if(n._A.includes(e)&&t.name)return t.name}})(r);i?e[i]=t:void 0===e.SourceDataset&&(e.SourceDataset=t)},p=(e,t)=>{if(!e)return;if(!Boolean((null==t?void 0:t.allowRemoteDataset)&&(null==t?void 0:t.allowRemoteUrlDataset)))return void(void 0!==e.opt_geturl&&delete e.opt_geturl);const r=(0,o.Nn)(e.opt_geturl);r&&(0,i.CL)(r)?e.opt_geturl=r:void 0!==e.opt_geturl&&delete e.opt_geturl},h=e=>{if(!(null==e?void 0:e.uploadTargetParamName))return null;return(0,o.E)(e.uploadTargetParamName,"")||null},m=(e,t)=>{const r=(0,o.Nn)(null==e?void 0:e.name);return r||(t?t("lblUnnamedFile"):"unnamed-file")},y=e=>{var t;if(!e||"object"!=typeof e||Array.isArray(e))return e;if(!(e=>"object"==typeof e&&null!==e&&!Array.isArray(e)&&"mode"in e)(e))return e;const r=e;if("file"===r.mode)return(e=>{var t,r,n;return(0,o.E$)(e.file)?e.file:null!==(n=null!==(t=(0,o.Nn)(e.fileName))&&void 0!==t?t:(0,o.wK)(null!==(r=e.fileName)&&void 0!==r?r:e.file))&&void 0!==n?n:""})(r);if("text"===r.mode){return null!==(t=(0,o.wK)(r.text))&&void 0!==t?t:""}return e},E=e=>{var t;const r={};for(const n of e)(null==n?void 0:n.name)&&(r[n.name]=null!==(t=n.defaultValue)&&void 0!==t?t:"");return r},v=(e,t,r,n,o,i)=>!(!e||!t||"order-result"===r)&&("drawing"===r?Boolean(i&&i>0)||Boolean(o):n>0&&"initial"!==r),g=(e,t,r,n)=>{if(n)return!1;return("workspace-selection"===r||"export-options"===r)&&e},O=(e,t,r)=>{e((e=>Object.assign(Object.assign({},e),{[t]:r})))},b=(e,t)=>{e((e=>{const r=Object.assign({},e);for(const e of t)r[e]=void 0;return r}))},T=e=>(0,o.Gt)(e,(e=>(0,o.Nn)(e))),R=e=>{const t=new Set,r=[];for(const n of e)t.has(n)||(t.add(n),r.push(n));return r},A=(e,t)=>(0,o.Gt)(e,(e=>{if("object"!=typeof e||null===e)return;const r=e;return(0,o.Nn)(r[t])}))},7390:(e,t,r)=>{var n;!function(){"use strict";var o=function e(t){var r,n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),o={use_static:!1};function i(e){var t=Object.getPrototypeOf(e);return t?Object.create(t):{}}function s(e,t,r){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!1,value:r})}"object"!=typeof(r=t)||Array.isArray(r)||null===r||void 0!==t.use_static&&(o.use_static=Boolean(t.use_static));var a="__immutable_invariants_hold";function l(e){return"object"!=typeof e||(null===e||Boolean(Object.getOwnPropertyDescriptor(e,a)))}function u(e,t){return e===t||e!=e&&t!=t}function c(e){return!(null===e||"object"!=typeof e||Array.isArray(e)||e instanceof Date)}var d=["setPrototypeOf"],f=(d.concat(["push","pop","sort","splice","shift","unshift","reverse"]),["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]));function p(e){this.name="MyError",this.message=e,this.stack=(new Error).stack}function h(e,t){return s(e,a,!0),e}function m(e,t){var r=e[t];s(e,t,(function(){return q(r.apply(e,arguments))}))}function y(e,t,r){var n=r&&r.deep;if(e in this&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=q.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=R.call(this);return o[e]=q(t),g(o)}d.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]),p.prototype=new Error,p.prototype.constructor=Error;var E=q([]);function v(e,t,r){var n=e[0];if(1===e.length)return y.call(this,n,t,r);var o,i=e.slice(1),s=this[n];if("object"==typeof s&&null!==s)o=q.setIn(s,i,t);else{var a=i[0];o=""!==a&&isFinite(a)?v.call(E,i,t):P.call(C,i,t)}if(n in this&&s===o)return this;var l=R.call(this);return l[n]=o,g(l)}function g(e){for(var t in f){if(f.hasOwnProperty(t))m(e,f[t])}o.use_static||(s(e,"flatMap",b),s(e,"asObject",A),s(e,"asMutable",R),s(e,"set",y),s(e,"setIn",v),s(e,"update",D),s(e,"updateIn",F),s(e,"getIn",j));for(var r=0,n=e.length;r<n;r++)e[r]=q(e[r]);return h(e)}function O(){return new Date(this.getTime())}function b(e){if(0===arguments.length)return this;var t,r=[],n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this);Array.isArray(o)?r.push.apply(r,o):r.push(o)}return g(r)}function T(e){if(void 0===e&&0===arguments.length)return this;if("function"!=typeof e){var t=Array.isArray(e)?e.slice():Array.prototype.slice.call(arguments);t.forEach((function(e,t,r){"number"==typeof e&&(r[t]=e.toString())})),e=function(e,r){return-1!==t.indexOf(r)}}var r=i(this);for(var n in this)this.hasOwnProperty(n)&&!1===e(this[n],n)&&(r[n]=this[n]);return x(r)}function R(e){var t,r,n=[];if(e&&e.deep)for(t=0,r=this.length;t<r;t++)n.push(S(this[t]));else for(t=0,r=this.length;t<r;t++)n.push(this[t]);return n}function A(e){"function"!=typeof e&&(e=function(e){return e});var t,r={},n=this.length;for(t=0;t<n;t++){var o=e(this[t],t,this),i=o[0],s=o[1];r[i]=s}return x(r)}function S(e){return!e||"object"!=typeof e||!Object.getOwnPropertyDescriptor(e,a)||e instanceof Date?e:q.asMutable(e,{deep:!0})}function _(e,t){for(var r in e)Object.getOwnPropertyDescriptor(e,r)&&(t[r]=e[r]);return t}function I(e,t){if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(e));var r,n,o=Array.isArray(e),s=t&&t.deep,a=t&&t.mode||"merge",l=t&&t.merger;function d(e,n,o){var a,d=q(n[o]),f=l&&l(e[o],d,t),p=e[o];void 0===r&&void 0===f&&e.hasOwnProperty(o)&&u(d,p)||(u(p,a=void 0!==f?f:s&&c(p)&&c(d)?q.merge(p,d,t):d)&&e.hasOwnProperty(o)||(void 0===r&&(r=_(e,i(e))),r[o]=a))}if(o)for(var f=0,p=e.length;f<p;f++){var h=e[f];for(n in h)h.hasOwnProperty(n)&&d(void 0!==r?r:this,h,n)}else{for(n in e)Object.getOwnPropertyDescriptor(e,n)&&d(this,e,n);"replace"===a&&function(e,t){for(var n in e)t.hasOwnProperty(n)||(void 0===r&&(r=_(e,i(e))),delete r[n])}(this,e)}return void 0===r?this:x(r)}function w(e,t){var r=t&&t.deep;if(0===arguments.length)return this;if(null===e||"object"!=typeof e)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(e));return q.merge(this,e,{deep:r,mode:"replace"})}var N,M,L,C=q({});function P(e,t,r){if(!Array.isArray(e)||0===e.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var n=e[0];if(1===e.length)return k.call(this,n,t,r);var o,s=e.slice(1),a=this[n];if(o=this.hasOwnProperty(n)&&"object"==typeof a&&null!==a?q.setIn(a,s,t):P.call(C,s,t),this.hasOwnProperty(n)&&a===o)return this;var l=_(this,i(this));return l[n]=o,x(l)}function k(e,t,r){var n=r&&r.deep;if(this.hasOwnProperty(e)&&(n&&this[e]!==t&&c(t)&&c(this[e])&&(t=q.merge(this[e],t,{deep:!0,mode:"replace"})),u(this[e],t)))return this;var o=_(this,i(this));return o[e]=q(t),x(o)}function D(e,t){var r=Array.prototype.slice.call(arguments,2),n=this[e];return q.set(this,e,t.apply(n,[n].concat(r)))}function U(e,t){for(var r=0,n=t.length;null!=e&&r<n;r++)e=e[t[r]];return r&&r==n?e:void 0}function F(e,t){var r=Array.prototype.slice.call(arguments,2),n=U(this,e);return q.setIn(this,e,t.apply(n,[n].concat(r)))}function j(e,t){var r=U(this,e);return void 0===r?t:r}function W(e){var t,r=i(this);if(e&&e.deep)for(t in this)this.hasOwnProperty(t)&&(r[t]=S(this[t]));else for(t in this)this.hasOwnProperty(t)&&(r[t]=this[t]);return r}function G(){return{}}function x(e){return o.use_static||(s(e,"merge",I),s(e,"replace",w),s(e,"without",T),s(e,"asMutable",W),s(e,"set",k),s(e,"setIn",P),s(e,"update",D),s(e,"updateIn",F),s(e,"getIn",j)),h(e)}function q(e,t,r){if(l(e)||function(e){return"object"==typeof e&&null!==e&&(60103===e.$$typeof||e.$$typeof===n)}(e)||function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)||function(e){return e instanceof Error}(e))return e;if(function(e){return"object"==typeof e&&"function"==typeof e.then}(e))return e.then(q);if(Array.isArray(e))return g(e.slice());if(e instanceof Date)return i=new Date(e.getTime()),o.use_static||s(i,"asMutable",O),h(i);var i,a=t&&t.prototype,u=(a&&a!==Object.prototype?function(){return Object.create(a)}:G)();for(var c in e)Object.getOwnPropertyDescriptor(e,c)&&(u[c]=q(e[c],void 0,r));return x(u)}function B(e){return function(){var t=[].slice.call(arguments),r=t.shift();return e.apply(r,t)}}function $(e,t){return function(){var r=[].slice.call(arguments),n=r.shift();return Array.isArray(n)?t.apply(n,r):e.apply(n,r)}}return q.from=q,q.isImmutable=l,q.ImmutableError=p,q.merge=B(I),q.replace=B(w),q.without=B(T),q.asMutable=(N=W,M=R,L=O,function(){var e=[].slice.call(arguments),t=e.shift();return Array.isArray(t)?M.apply(t,e):t instanceof Date?L.apply(t,e):N.apply(t,e)}),q.set=$(k,y),q.setIn=$(P,v),q.update=B(D),q.updateIn=B(F),q.getIn=B(j),q.flatMap=B(b),q.asObject=B(A),o.use_static||(q.static=e({use_static:!0})),Object.freeze(q),q}();void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},7744:(e,t,r)=>{"use strict";var n=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class o{constructor(){this.cache=new Map}execute(e,t){return n(this,void 0,void 0,(function*(){const r=this.cache.get(e);if(r)return r;const n=t();return this.cache.set(e,n),n.finally((()=>{this.cache.delete(e)}))}))}}new o,new o;r(9063),r(3890),r(3096);r(3250);r(1138);r(3040);r(2242),r(5880);r(9244),r(1658),r(2238),r(930),r(1181)},8904:(e,t,r)=>{"use strict";r.d(t,{II:()=>c,cc:()=>u,v_:()=>l});var n=r(9658),o=r(6035),i=r(4658),s=r(4880);function a(e){return Math.min(1e3*2**e,3e4)}function l(e){return"online"!==(e??"online")||o.t.isOnline()}var u=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function c(e){let t,r=!1,c=0;const d=(0,i.T)(),f=()=>"pending"!==d.status,p=()=>n.m.isFocused()&&("always"===e.networkMode||o.t.isOnline())&&e.canRun(),h=()=>l(e.networkMode)&&e.canRun(),m=e=>{f()||(t?.(),d.resolve(e))},y=e=>{f()||(t?.(),d.reject(e))},E=()=>new Promise((r=>{t=e=>{(f()||p())&&r(e)},e.onPause?.()})).then((()=>{t=void 0,f()||e.onContinue?.()})),v=()=>{if(f())return;let t;const n=0===c?e.initialPromise:void 0;try{t=n??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(m).catch((t=>{if(f())return;const n=e.retry??(s.S$?0:3),o=e.retryDelay??a,i="function"==typeof o?o(c,t):o,l=!0===n||"number"==typeof n&&c<n||"function"==typeof n&&n(c,t);!r&&l?(c++,e.onFail?.(c,t),(0,s.yy)(i).then((()=>p()?void 0:E())).then((()=>{r?y(t):v()}))):y(t)}))};return{promise:d,status:()=>d.status,cancel:t=>{if(!f()){const r=new u(t);y(r),e.onCancel?.(r)}},continue:()=>(t?.(),d),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:h,start:()=>(h()?v():E().then(v),d)}}},9063:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ISO_LOCAL_DATE:()=>i.tj,ISO_LOCAL_TIME:()=>i.MA,applyDirectiveDefaults:()=>u._R,applyPopupSuppression:()=>O,applyUploadedDatasetParam:()=>a.sI,ariaDesc:()=>i.LH,attachAoi:()=>s.attachAoi,buildChoiceSet:()=>a.uA,buildFmeParams:()=>u.v0,buildLargeAreaWarningMessage:()=>i.ag,buildParams:()=>R.XV,buildSupportHintText:()=>i.Ej,buildSymbols:()=>f,buildTokenCacheKey:()=>R.hs,buildUrl:()=>R.c$,buildValidationErrors:()=>l.buildValidationErrors,calcArea:()=>s.calcArea,canResetButton:()=>a.AR,checkLargeArea:()=>s.checkLargeArea,checkMaxArea:()=>s.checkMaxArea,clampNumber:()=>o.N,clearErrors:()=>a.x8,clearPopupSuppression:()=>g,coerceFormValueForSubmission:()=>a.wc,collectGeometryParamNames:()=>s.collectGeometryParamNames,collectStringsFromProp:()=>a.YD,collectTrimmedStrings:()=>a.Zs,computeSelectCoerce:()=>A.ZF,computeWidgetsToClose:()=>T,coordinatesEqual:()=>s.coordinatesEqual,createConfigError:()=>l.createConfigError,createError:()=>l.createError,createErrorActions:()=>l.createErrorActions,createFmeClient:()=>R.Mb,createFmeDispatcher:()=>_,createGeometryError:()=>l.createGeometryError,createHostPattern:()=>R.dB,createModuleError:()=>l.createModuleError,createNetworkError:()=>l.createNetworkError,createPopupSuppressionRecord:()=>E,createValidationError:()=>l.createValidationError,createWebhookArtifacts:()=>u.vl,determineServiceMode:()=>u.Mm,evaluateArea:()=>s.evaluateArea,extractErrorMessage:()=>i.PE,extractHostFromUrl:()=>R.$j,extractRepositoryNames:()=>u.o4,extractTemporalParts:()=>i.WZ,flattenHierarchicalOptions:()=>i.SP,fmeDateTimeToInput:()=>i.hk,fmeDateToInput:()=>i.Wx,fmeTimeToInput:()=>i.BU,formatArea:()=>i.Jd,formatByteSize:()=>i.$j,formatErrorPresentation:()=>l.formatErrorPresentation,formatIsoLocalDateTime:()=>i.JR,formatNumericDisplay:()=>i.xi,getBtnAria:()=>i.kz,getClientConnectionInfo:()=>R._,getEmail:()=>R.hS,getErrorIconSrc:()=>l.getErrorIconSrc,getFileDisplayName:()=>a.SB,getSupportEmail:()=>A.id,getTextPlaceholder:()=>a.Td,hexToNormalizedRgb:()=>i.FK,hexToRgbArray:()=>i.Xk,initFormValues:()=>a.bE,inputToFmeDate:()=>i.OD,inputToFmeDateTime:()=>i.HK,inputToFmeTime:()=>i.rI,interceptorExists:()=>R.m4,isAbortError:()=>R.zf,isEmpty:()=>o.Im,isFileObject:()=>o.E$,isFiniteNumber:()=>o.Bf,isGeographicSpatialRef:()=>s.isGeographicSpatialRef,isJson:()=>R.Fh,isNavigatorOffline:()=>R.xs,isNonEmptyTrimmedString:()=>o.YH,isPlainObject:()=>o.Qd,isPolygonGeometry:()=>s.isPolygonGeometry,isValidEmail:()=>A.B9,isValidExternalUrlForOptGetUrl:()=>A.CL,isValidNumber:()=>o.gf,isWebMercatorSr:()=>s.isWebMercatorSr,isWebhookUrlTooLong:()=>u.hk,isWgs84Sr:()=>s.isWgs84Sr,loadArcgisModules:()=>m,logIfNotAbort:()=>l.logIfNotAbort,makeGeoJson:()=>s.makeGeoJson,makePlaceholders:()=>a.B_,makeScopeId:()=>R.qm,mapDefined:()=>o.Gt,mapErrorFromGeometry:()=>l.mapErrorFromGeometry,mapErrorFromNetwork:()=>l.mapErrorFromNetwork,mapErrorFromValidation:()=>l.mapErrorFromValidation,maskEmailForDisplay:()=>i.q2,maskToken:()=>R.gg,mergeMetadata:()=>o.W1,normalizeFmeServiceInfo:()=>u.$M,normalizeFormValue:()=>o.He,normalizeParameterValue:()=>o.sL,normalizeRing:()=>s.normalizeRing,normalizeServiceModeConfig:()=>u.Eo,normalizeSketchCreateTool:()=>p,normalizedRgbToHex:()=>i.$e,pad2:()=>i.wl,parseIntSafe:()=>u.yO,parseIsoLocalDateTime:()=>i.dC,parseNonNegativeInt:()=>u.Lz,parseSubmissionFormData:()=>a.sq,parseTableRows:()=>A.H9,pickBoolean:()=>o.Cq,pickFromObject:()=>o.fe,pickNumber:()=>o.hU,pickString:()=>o.Xl,polygonJsonToGeoJson:()=>s.polygonJsonToGeoJson,polygonJsonToWkt:()=>s.polygonJsonToWkt,popupSuppressionManager:()=>b,prepFmeParams:()=>u.cL,processFmeResponse:()=>u.Hz,readWkids:()=>s.readWkids,releasePopupSuppressionRecord:()=>v,removeAoiErrorMarker:()=>s.removeAoiErrorMarker,resetGeometryCachesForTest:()=>s.resetGeometryCachesForTest,resolveMessageOrKey:()=>i.I0,resolveUploadTargetParam:()=>a.yo,safeAbort:()=>l.safeAbort,safeLogParams:()=>R.qC,safeParseUrl:()=>R.yC,sanitizeOptGetUrlParam:()=>a.dd,sanitizeParamKey:()=>o.E,setError:()=>a.Nh,shouldApplyRemoteDatasetUrl:()=>A.rB,shouldShowWorkspaceLoading:()=>a.Yn,shouldSuppressError:()=>l.shouldSuppressError,shouldUploadRemoteDataset:()=>A.pZ,stripErrorLabel:()=>i.Z_,stripHtmlToText:()=>i.Ox,styleCss:()=>i.RM,toArray:()=>o.$r,toBooleanValue:()=>o.Dr,toMetadataRecord:()=>o.IT,toNonEmptyTrimmedString:()=>o.P6,toNumberValue:()=>o.Me,toSerializable:()=>o.lx,toStr:()=>o.N7,toStringValue:()=>o.wK,toTrimmedString:()=>o.Nn,toTrimmedStringOrEmpty:()=>o.Bv,toValidNumber:()=>o.NZ,toWgs84PolygonJson:()=>s.toWgs84PolygonJson,translateOptional:()=>i.Xp,uniqueStrings:()=>a.is,unwrapArray:()=>o.vq,useLatestAbortController:()=>S.bQ,validateEmailField:()=>A.hd,validatePolygon:()=>s.validatePolygon});var n=r(5880),o=r(4986),i=r(1181),s=r(1618),a=r(6920),l=r(1138),u=r(3040),c=r(9244),d=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{l(n.next(e))}catch(e){i(e)}}function a(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};const f=(e,t)=>{const r=[e[0],e[1],e[2]],n="number"==typeof(null==t?void 0:t.outlineWidth)?t.outlineWidth:2,o=Math.min(5,Math.max(.1,n)),i="number"==typeof(null==t?void 0:t.fillOpacity)?t.fillOpacity:.2,s=Math.min(1,Math.max(0,i)),a={type:"simple-fill",color:[...r,s],outline:{color:r,width:o}};return{HIGHLIGHT_SYMBOL:a,DRAWING_SYMBOLS:{polygon:a,polyline:{type:"simple-line",color:r,width:o},point:{type:"simple-marker",style:"circle",size:8,color:r,outline:{color:[255,255,255],width:1}}}}},p=e=>{if(!e)return null;const t=e.toLowerCase();return"extent"===t||"rectangle"===t?"rectangle":"polygon"===t?"polygon":null},h=e=>{var t;return null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e};function m(e){return d(this,void 0,void 0,(function*(){if(!Array.isArray(e)||!e.length)return[];const t=null===globalThis||void 0===globalThis?void 0:globalThis.__ESRI_TEST_STUB__;if("function"==typeof t)return t(e);try{const t=yield Promise.resolve().then(r.bind(r,2686)),n=null==t?void 0:t.loadArcGISJSAPIModules;if("function"!=typeof n)throw new Error("ARCGIS_MODULE_ERROR");return((yield n(e))||[]).map(h)}catch(e){throw console.log("Critical: Failed to load jimu-arcgis module",e),new Error("ARCGIS_MODULE_ERROR")}}))}const y=(e,t)=>{try{e&&"function"==typeof e.closePopup&&e.closePopup()}catch(e){}},E=(e,t)=>{if(!e)return null;const r=e,n="boolean"==typeof r.autoOpenEnabled?r.autoOpenEnabled:void 0;y(t);try{r.autoOpenEnabled=!1}catch(e){}let o=null;if("function"==typeof e.watch)try{o=e.watch("visible",(e=>{e&&y(t)}))}catch(e){}return{popup:e,view:t||null,handle:o,prevAutoOpen:n}},v=e=>{var t,r;if(e){try{null===(r=null===(t=e.handle)||void 0===t?void 0:t.remove)||void 0===r||r.call(t)}catch(e){}(e=>{const t=e.popup;try{const r="boolean"!=typeof e.prevAutoOpen||e.prevAutoOpen;t.autoOpenEnabled=r}catch(e){}})(e)}},g=e=>{const t=null==e?void 0:e.current;t&&(v(t),e.current=null)},O=(e,t,r)=>{var n;if(!e)return;if(!t)return void g(e);if((null===(n=e.current)||void 0===n?void 0:n.popup)===t){try{r&&"function"==typeof r.closePopup&&r.closePopup()}catch(e){}return}g(e);const o=E(t,r);e.current=o};const b=new class{constructor(){this.record=null,this.owners=new Set}acquire(e,t,r){var n;if(!t)return void this.release(e);const o=null===(n=this.record)||void 0===n?void 0:n.popup;if(!o||o!==t){this.teardown(),this.owners.clear();const e=E(t,r);if(!e)return;this.record=e}this.owners.add(e)}release(e){this.owners.delete(e)&&0===this.owners.size&&this.teardown()}releaseAll(){(0!==this.owners.size||this.record)&&(this.owners.clear(),this.teardown())}teardown(){this.record&&(v(this.record),this.record=null)}},T=(e,t)=>{if(!e)return[];const r=[];for(const[n,o]of Object.entries(e)){if(n===t||!o)continue;const e=o.state;if(!e)continue;const i=String(e).toUpperCase();i!==c.WidgetState.Closed&&i!==c.WidgetState.Hidden&&r.push(n)}return r};var R=r(930),A=r(3890),S=r(2242);const _=(e,t)=>({setDrawingTool:r=>{e(n.fmeActions.setDrawingTool(r,t))},setViewMode:r=>{e(n.fmeActions.setViewMode(r,t))},setError:(r,o)=>{e(n.fmeActions.setError(r,o,t))},clearError:r=>{e(n.fmeActions.clearError(r,t))},setGeometry:(r,o)=>{e(n.fmeActions.setGeometry(r,o,t))},setWorkspaceItems:r=>{e(n.fmeActions.setWorkspaceItems(r,t))},applyWorkspaceData:r=>{e(n.fmeActions.applyWorkspaceData(r,t))},completeDrawing:(r,o,i)=>{e(n.fmeActions.completeDrawing(r,o,i,t))},clearWorkspaceState:()=>{e(n.fmeActions.clearWorkspaceState(t))},resetState:()=>{e(n.fmeActions.resetState(t))},resetToDrawing:()=>{e(n.fmeActions.resetToDrawing(t))},setLoadingFlag:(r,o)=>{e(n.fmeActions.setLoadingFlag(r,o,t))},setOrderResult:r=>{e(n.fmeActions.setOrderResult(r,t))},completeStartup:()=>{e(n.fmeActions.completeStartup(t))},removeWidgetState:()=>{e(n.fmeActions.removeWidgetState(t))}})},9244:e=>{"use strict";e.exports=r},9658:(e,t,r)=>{"use strict";r.d(t,{m:()=>i});var n=r(6500),o=r(4880),i=new class extends n.Q{#T;#y;#E;constructor(){super(),this.#E=e=>{if(!o.S$&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#y||this.setEventListener(this.#E)}onUnsubscribe(){this.hasListeners()||(this.#y?.(),this.#y=void 0)}setEventListener(e){this.#E=e,this.#y?.(),this.#y=e((e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){this.#T!==e&&(this.#T=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach((t=>{t(e)}))}isFocused(){return"boolean"==typeof this.#T?this.#T:"hidden"!==globalThis.document?.visibilityState}}},9757:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var n=r(4880),o=r(6261),i=r(8904),s=r(1692),a=class extends s.k{#R;#A;#S;#v;#O;#s;#_;constructor(e){super(),this.#_=!1,this.#s=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#v=e.client,this.#S=this.#v.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#R=l(this.options),this.state=e.state??this.#R,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#O?.promise}setOptions(e){if(this.options={...this.#s,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=l(this.options);void 0!==e.data&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#R=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#S.remove(this)}setData(e,t){const r=(0,n.pl)(this.state.data,e,this.options);return this.#b({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#b({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#O?.promise;return this.#O?.cancel(e),t?t.then(n.lQ).catch(n.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#R)}isActive(){return this.observers.some((e=>!1!==(0,n.Eh)(e.options.enabled,this)))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===n.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some((e=>"static"===(0,n.d2)(e.options.staleTime,this)))}isStale(){return this.getObserversCount()>0?this.observers.some((e=>e.getCurrentResult().isStale)):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,n.j3)(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find((e=>e.shouldFetchOnWindowFocus()));e?.refetch({cancelRefetch:!1}),this.#O?.continue()}onOnline(){const e=this.observers.find((e=>e.shouldFetchOnReconnect()));e?.refetch({cancelRefetch:!1}),this.#O?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#S.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter((t=>t!==e)),this.observers.length||(this.#O&&(this.#_?this.#O.cancel({revert:!0}):this.#O.cancelRetry()),this.scheduleGc()),this.#S.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#b({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#O?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#O)return this.#O.continueRetry(),this.#O.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find((e=>e.options.queryFn));e&&this.setOptions(e.options)}const r=new AbortController,o=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#_=!0,r.signal)})},s=()=>{const e=(0,n.ZM)(this.options,t),r=(()=>{const e={client:this.#v,queryKey:this.queryKey,meta:this.meta};return o(e),e})();return this.#_=!1,this.options.persister?this.options.persister(e,r,this):e(r)},a=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#v,state:this.state,fetchFn:s};return o(e),e})();this.options.behavior?.onFetch(a,this),this.#A=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===a.fetchOptions?.meta||this.#b({type:"fetch",meta:a.fetchOptions?.meta}),this.#O=(0,i.II)({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:e=>{e instanceof i.cc&&e.revert&&this.setState({...this.#A,fetchStatus:"idle"}),r.abort()},onFail:(e,t)=>{this.#b({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#b({type:"pause"})},onContinue:()=>{this.#b({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const e=await this.#O.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#S.config.onSuccess?.(e,this),this.#S.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof i.cc){if(e.silent)return this.#O.promise;if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#b({type:"error",error:e}),this.#S.config.onError?.(e,this),this.#S.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#b(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...(r=t.data,n=this.options,{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,i.v_)(n.networkMode)?"fetching":"paused",...void 0===r&&{error:null,status:"pending"}}),fetchMeta:e.meta??null};case"success":const o={...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#A=e.manual?o:void 0,o;case"error":const s=e.error;return{...t,error:s,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}var r,n})(this.state),o.jG.batch((()=>{this.observers.forEach((e=>{e.onQueryUpdate()})),this.#S.notify({query:this,type:"updated",action:e})}))}};function l(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}return i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="",i(3740),i(5880)})())}}}));